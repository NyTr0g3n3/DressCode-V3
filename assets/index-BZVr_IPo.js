(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function y1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dv={exports:{}},Vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function HV(){if(jw)return Vc;jw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Vc.Fragment=e,Vc.jsx=n,Vc.jsxs=n,Vc}var $w;function jV(){return $w||($w=1,dv.exports=HV()),dv.exports}var S=jV(),hv={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function $V(){if(Kw)return ze;Kw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function O(j,Z,pe){this.props=j,this.context=Z,this.refs=D,this.updater=pe||x}O.prototype.isReactComponent={},O.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},O.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function k(){}k.prototype=O.prototype;function F(j,Z,pe){this.props=j,this.context=Z,this.refs=D,this.updater=pe||x}var $=F.prototype=new k;$.constructor=F,N($,O.prototype),$.isPureReactComponent=!0;var K=Array.isArray;function G(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function P(j,Z,pe){var ne=pe.ref;return{$$typeof:t,type:j,key:Z,ref:ne!==void 0?ne:null,props:pe}}function V(j,Z){return P(j.type,Z,j.props)}function U(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function q(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(pe){return Z[pe]})}var z=/\/+/g;function xe(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?q(""+j.key):Z.toString(36)}function ke(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(G,G):(j.status="pending",j.then(function(Z){j.status==="pending"&&(j.status="fulfilled",j.value=Z)},function(Z){j.status==="pending"&&(j.status="rejected",j.reason=Z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ee(j,Z,pe,ne,he){var Ee=typeof j;(Ee==="undefined"||Ee==="boolean")&&(j=null);var Ve=!1;if(j===null)Ve=!0;else switch(Ee){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(j.$$typeof){case t:case e:Ve=!0;break;case p:return Ve=j._init,ee(Ve(j._payload),Z,pe,ne,he)}}if(Ve)return he=he(j),Ve=ne===""?"."+xe(j,0):ne,K(he)?(pe="",Ve!=null&&(pe=Ve.replace(z,"$&/")+"/"),ee(he,Z,pe,"",function(Nn){return Nn})):he!=null&&(U(he)&&(he=V(he,pe+(he.key==null||j&&j.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+Ve)),Z.push(he)),1;Ve=0;var Be=ne===""?".":ne+":";if(K(j))for(var Tt=0;Tt<j.length;Tt++)ne=j[Tt],Ee=Be+xe(ne,Tt),Ve+=ee(ne,Z,pe,Ee,he);else if(Tt=b(j),typeof Tt=="function")for(j=Tt.call(j),Tt=0;!(ne=j.next()).done;)ne=ne.value,Ee=Be+xe(ne,Tt++),Ve+=ee(ne,Z,pe,Ee,he);else if(Ee==="object"){if(typeof j.then=="function")return ee(ke(j),Z,pe,ne,he);throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function ae(j,Z,pe){if(j==null)return j;var ne=[],he=0;return ee(j,ne,"","",function(Ee){return Z.call(pe,Ee,he++)}),ne}function me(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(pe){(j._status===0||j._status===-1)&&(j._status=1,j._result=pe)},function(pe){(j._status===0||j._status===-1)&&(j._status=2,j._result=pe)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var Ce=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ie={map:ae,forEach:function(j,Z,pe){ae(j,function(){Z.apply(this,arguments)},pe)},count:function(j){var Z=0;return ae(j,function(){Z++}),Z},toArray:function(j){return ae(j,function(Z){return Z})||[]},only:function(j){if(!U(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ze.Activity=v,ze.Children=Ie,ze.Component=O,ze.Fragment=n,ze.Profiler=r,ze.PureComponent=F,ze.StrictMode=i,ze.Suspense=f,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ze.__COMPILER_RUNTIME={__proto__:null,c:function(j){return I.H.useMemoCache(j)}},ze.cache=function(j){return function(){return j.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(j,Z,pe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ne=N({},j.props),he=j.key;if(Z!=null)for(Ee in Z.key!==void 0&&(he=""+Z.key),Z)!R.call(Z,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Z.ref===void 0||(ne[Ee]=Z[Ee]);var Ee=arguments.length-2;if(Ee===1)ne.children=pe;else if(1<Ee){for(var Ve=Array(Ee),Be=0;Be<Ee;Be++)Ve[Be]=arguments[Be+2];ne.children=Ve}return P(j.type,he,ne)},ze.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},ze.createElement=function(j,Z,pe){var ne,he={},Ee=null;if(Z!=null)for(ne in Z.key!==void 0&&(Ee=""+Z.key),Z)R.call(Z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=Z[ne]);var Ve=arguments.length-2;if(Ve===1)he.children=pe;else if(1<Ve){for(var Be=Array(Ve),Tt=0;Tt<Ve;Tt++)Be[Tt]=arguments[Tt+2];he.children=Be}if(j&&j.defaultProps)for(ne in Ve=j.defaultProps,Ve)he[ne]===void 0&&(he[ne]=Ve[ne]);return P(j,Ee,he)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(j){return{$$typeof:c,render:j}},ze.isValidElement=U,ze.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:me}},ze.memo=function(j,Z){return{$$typeof:d,type:j,compare:Z===void 0?null:Z}},ze.startTransition=function(j){var Z=I.T,pe={};I.T=pe;try{var ne=j(),he=I.S;he!==null&&he(pe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(G,Ce)}catch(Ee){Ce(Ee)}finally{Z!==null&&pe.types!==null&&(Z.types=pe.types),I.T=Z}},ze.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ze.use=function(j){return I.H.use(j)},ze.useActionState=function(j,Z,pe){return I.H.useActionState(j,Z,pe)},ze.useCallback=function(j,Z){return I.H.useCallback(j,Z)},ze.useContext=function(j){return I.H.useContext(j)},ze.useDebugValue=function(){},ze.useDeferredValue=function(j,Z){return I.H.useDeferredValue(j,Z)},ze.useEffect=function(j,Z){return I.H.useEffect(j,Z)},ze.useEffectEvent=function(j){return I.H.useEffectEvent(j)},ze.useId=function(){return I.H.useId()},ze.useImperativeHandle=function(j,Z,pe){return I.H.useImperativeHandle(j,Z,pe)},ze.useInsertionEffect=function(j,Z){return I.H.useInsertionEffect(j,Z)},ze.useLayoutEffect=function(j,Z){return I.H.useLayoutEffect(j,Z)},ze.useMemo=function(j,Z){return I.H.useMemo(j,Z)},ze.useOptimistic=function(j,Z){return I.H.useOptimistic(j,Z)},ze.useReducer=function(j,Z,pe){return I.H.useReducer(j,Z,pe)},ze.useRef=function(j){return I.H.useRef(j)},ze.useState=function(j){return I.H.useState(j)},ze.useSyncExternalStore=function(j,Z,pe){return I.H.useSyncExternalStore(j,Z,pe)},ze.useTransition=function(){return I.H.useTransition()},ze.version="19.2.0",ze}var Yw;function __(){return Yw||(Yw=1,hv.exports=$V()),hv.exports}var B=__();const In=y1(B);var pv={exports:{}},Lc={},mv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function KV(){return Jw||(Jw=1,(function(t){function e(ee,ae){var me=ee.length;ee.push(ae);e:for(;0<me;){var Ce=me-1>>>1,Ie=ee[Ce];if(0<r(Ie,ae))ee[Ce]=ae,ee[me]=Ie,me=Ce;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ae=ee[0],me=ee.pop();if(me!==ae){ee[0]=me;e:for(var Ce=0,Ie=ee.length,j=Ie>>>1;Ce<j;){var Z=2*(Ce+1)-1,pe=ee[Z],ne=Z+1,he=ee[ne];if(0>r(pe,me))ne<Ie&&0>r(he,pe)?(ee[Ce]=he,ee[ne]=me,Ce=ne):(ee[Ce]=pe,ee[Z]=me,Ce=Z);else if(ne<Ie&&0>r(he,me))ee[Ce]=he,ee[ne]=me,Ce=ne;else break e}}return ae}function r(ee,ae){var me=ee.sortIndex-ae.sortIndex;return me!==0?me:ee.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],p=1,v=null,T=3,b=!1,x=!1,N=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function $(ee){for(var ae=n(d);ae!==null;){if(ae.callback===null)i(d);else if(ae.startTime<=ee)i(d),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=n(d)}}function K(ee){if(N=!1,$(ee),!x)if(n(f)!==null)x=!0,G||(G=!0,q());else{var ae=n(d);ae!==null&&ke(K,ae.startTime-ee)}}var G=!1,I=-1,R=5,P=-1;function V(){return D?!0:!(t.unstable_now()-P<R)}function U(){if(D=!1,G){var ee=t.unstable_now();P=ee;var ae=!0;try{e:{x=!1,N&&(N=!1,k(I),I=-1),b=!0;var me=T;try{t:{for($(ee),v=n(f);v!==null&&!(v.expirationTime>ee&&V());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,T=v.priorityLevel;var Ie=Ce(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof Ie=="function"){v.callback=Ie,$(ee),ae=!0;break t}v===n(f)&&i(f),$(ee)}else i(f);v=n(f)}if(v!==null)ae=!0;else{var j=n(d);j!==null&&ke(K,j.startTime-ee),ae=!1}}break e}finally{v=null,T=me,b=!1}ae=void 0}}finally{ae?q():G=!1}}}var q;if(typeof F=="function")q=function(){F(U)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,xe=z.port2;z.port1.onmessage=U,q=function(){xe.postMessage(null)}}else q=function(){O(U,0)};function ke(ee,ae){I=O(function(){ee(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var me=T;T=ae;try{return ee()}finally{T=me}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(ee,ae){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=T;T=ee;try{return ae()}finally{T=me}},t.unstable_scheduleCallback=function(ee,ae,me){var Ce=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ce+me:Ce):me=Ce,ee){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=me+Ie,ee={id:p++,callback:ae,priorityLevel:ee,startTime:me,expirationTime:Ie,sortIndex:-1},me>Ce?(ee.sortIndex=me,e(d,ee),n(f)===null&&ee===n(d)&&(N?(k(I),I=-1):N=!0,ke(K,me-Ce))):(ee.sortIndex=Ie,e(f,ee),x||b||(x=!0,G||(G=!0,q()))),ee},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ee){var ae=T;return function(){var me=T;T=ae;try{return ee.apply(this,arguments)}finally{T=me}}}})(gv)),gv}var Ww;function YV(){return Ww||(Ww=1,mv.exports=KV()),mv.exports}var yv={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xw;function JV(){if(Xw)return ti;Xw=1;var t=__();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:f,containerInfo:d,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ti.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},ti.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},ti.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},ti.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ti.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin),T=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:b}):p==="script"&&i.d.X(f,{crossOrigin:v,integrity:T,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ti.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},ti.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,v=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ti.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},ti.requestFormReset=function(f){i.d.r(f)},ti.unstable_batchedUpdates=function(f,d){return f(d)},ti.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},ti.useFormStatus=function(){return l.H.useHostTransitionStatus()},ti.version="19.2.0",ti}var Qw;function v1(){if(Qw)return yv.exports;Qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yv.exports=JV(),yv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function WV(){if(Zw)return Lc;Zw=1;var t=YV(),e=__(),n=v1();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var _=u.return;if(_===null)break;var E=_.alternate;if(E===null){if(h=_.return,h!==null){u=h;continue}break}if(_.child===E.child){for(E=_.child;E;){if(E===u)return f(_),s;if(E===h)return f(_),a;E=E.sibling}throw Error(i(188))}if(u.return!==h.return)u=_,h=E;else{for(var A=!1,M=_.child;M;){if(M===u){A=!0,u=_,h=E;break}if(M===h){A=!0,h=_,u=E;break}M=M.sibling}if(!A){for(M=E.child;M;){if(M===u){A=!0,u=E,h=_;break}if(M===h){A=!0,h=E,u=_;break}M=M.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),F=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var z=Symbol.for("react.client.reference");function xe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case G:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case F:return s.displayName||"Context";case k:return(s._context.displayName||"Context")+".Consumer";case $:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:xe(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return xe(s(a))}catch{}}return null}var ke=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ce=[],Ie=-1;function j(s){return{current:s}}function Z(s){0>Ie||(s.current=Ce[Ie],Ce[Ie]=null,Ie--)}function pe(s,a){Ie++,Ce[Ie]=s.current,s.current=a}var ne=j(null),he=j(null),Ee=j(null),Ve=j(null);function Be(s,a){switch(pe(Ee,a),pe(he,s),pe(ne,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?pw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=pw(a),s=mw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Z(ne),pe(ne,s)}function Tt(){Z(ne),Z(he),Z(Ee)}function Nn(s){s.memoizedState!==null&&pe(Ve,s);var a=ne.current,u=mw(a,s.type);a!==u&&(pe(he,s),pe(ne,u))}function fi(s){he.current===s&&(Z(ne),Z(he)),Ve.current===s&&(Z(Ve),Pc._currentValue=me)}var Zt,Jn;function Un(s){if(Zt===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Zt=a&&a[1]||"",Jn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zt+s+Jn}var An=!1;function di(s,a){if(!s||An)return"";An=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ie){var te=ie}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(ie){te=ie}s.call(ue.prototype)}}else{try{throw Error()}catch(ie){te=ie}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),A=E[0],M=E[1];if(A&&M){var H=A.split(`
`),Q=M.split(`
`);for(_=h=0;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;for(;_<Q.length&&!Q[_].includes("DetermineComponentFrameRoot");)_++;if(h===H.length||_===Q.length)for(h=H.length-1,_=Q.length-1;1<=h&&0<=_&&H[h]!==Q[_];)_--;for(;1<=h&&0<=_;h--,_--)if(H[h]!==Q[_]){if(h!==1||_!==1)do if(h--,_--,0>_||H[h]!==Q[_]){var oe=`
`+H[h].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=h&&0<=_);break}}}finally{An=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Un(u):""}function Oi(s,a){switch(s.tag){case 26:case 27:case 5:return Un(s.type);case 16:return Un("Lazy");case 13:return s.child!==a&&a!==null?Un("Suspense Fallback"):Un("Suspense");case 19:return Un("SuspenseList");case 0:case 15:return di(s.type,!1);case 11:return di(s.type.render,!1);case 1:return di(s.type,!0);case 31:return Un("Activity");default:return""}}function en(s){try{var a="",u=null;do a+=Oi(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var wi=Object.prototype.hasOwnProperty,Wn=t.unstable_scheduleCallback,Ai=t.unstable_cancelCallback,Xn=t.unstable_shouldYield,Qn=t.unstable_requestPaint,Re=t.unstable_now,tn=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,Ot=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Jt=t.unstable_LowPriority,Sr=t.unstable_IdlePriority,zr=t.log,Pn=t.unstable_setDisableYieldValue,hi=null,cn=null;function fe(s){if(typeof zr=="function"&&Pn(s),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(hi,s)}catch{}}var be=Math.clz32?Math.clz32:ct,we=Math.log,je=Math.LN2;function ct(s){return s>>>=0,s===0?32:31-(we(s)/je|0)|0}var Je=256,We=262144,Xe=4194304;function Qe(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function se(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var _=0,E=s.suspendedLanes,A=s.pingedLanes;s=s.warmLanes;var M=h&134217727;return M!==0?(h=M&~E,h!==0?_=Qe(h):(A&=M,A!==0?_=Qe(A):u||(u=M&~s,u!==0&&(_=Qe(u))))):(M=h&~E,M!==0?_=Qe(M):A!==0?_=Qe(A):u||(u=h&~s,u!==0&&(_=Qe(u)))),_===0?0:a!==0&&a!==_&&(a&E)===0&&(E=_&-_,u=a&-a,E>=u||E===32&&(u&4194048)!==0)?a:_}function ve(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Ke(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var s=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),s}function Mt(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function xt(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function dt(s,a,u,h,_,E){var A=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,H=s.expirationTimes,Q=s.hiddenUpdates;for(u=A&~u;0<u;){var oe=31-be(u),ue=1<<oe;M[oe]=0,H[oe]=-1;var te=Q[oe];if(te!==null)for(Q[oe]=null,oe=0;oe<te.length;oe++){var ie=te[oe];ie!==null&&(ie.lane&=-536870913)}u&=~ue}h!==0&&Cn(s,h,0),E!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=E&~(A&~a))}function Cn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-be(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function kt(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-be(u),_=1<<h;_&a|s[h]&a&&(s[h]|=a),u&=~_}}function Zn(s,a){var u=a&-a;return u=(u&42)!==0?1:er(u),(u&(s.suspendedLanes|a))!==0?0:u}function er(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Fn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function pi(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:Uw(s.type))}function us(s,a){var u=ae.p;try{return ae.p=s,a()}finally{ae.p=u}}var Ui=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ui,fn="__reactProps$"+Ui,Fi="__reactContainer$"+Ui,tr="__reactEvents$"+Ui,Bi="__reactListeners$"+Ui,oa="__reactHandles$"+Ui,br="__reactResources$"+Ui,nr="__reactMarker$"+Ui;function ir(s){delete s[Ut],delete s[fn],delete s[tr],delete s[Bi],delete s[oa]}function Ci(s){var a=s[Ut];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Fi]||u[Ut]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Sw(s);s!==null;){if(u=s[Ut])return u;s=Sw(s)}return a}s=u,u=s.parentNode}return null}function rr(s){if(s=s[Ut]||s[Fi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Gr(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function mi(s){var a=s[br];return a||(a=s[br]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(s){s[nr]=!0}var wr=new Set,Ar={};function gi(s,a){Hr(s,a),Hr(s+"Capture",a)}function Hr(s,a){for(Ar[s]=a,s=0;s<a.length;s++)wr.add(a[s])}var hg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zu={},Gu={};function dd(s){return wi.call(Gu,s)?!0:wi.call(zu,s)?!1:hg.test(s)?Gu[s]=!0:(zu[s]=!0,!1)}function $s(s,a,u){if(dd(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Ks(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function sr(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function yi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function hd(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function pg(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,E=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return _.call(this)},set:function(A){u=""+A,E.call(this,A)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function sl(s){if(!s._valueTracker){var a=hd(s)?"checked":"value";s._valueTracker=pg(s,a,""+s[a])}}function Hu(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=hd(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ol(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cs=/[\n"\\]/g;function nn(s){return s.replace(cs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ys(s,a,u,h,_,E,A,M){s.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.type=A:s.removeAttribute("type"),a!=null?A==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yi(a)):s.value!==""+yi(a)&&(s.value=""+yi(a)):A!=="submit"&&A!=="reset"||s.removeAttribute("value"),a!=null?al(s,A,yi(a)):u!=null?al(s,A,yi(u)):h!=null&&s.removeAttribute("value"),_==null&&E!=null&&(s.defaultChecked=!!E),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+yi(M):s.removeAttribute("name")}function aa(s,a,u,h,_,E,A,M){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),a!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||a!=null)){sl(s);return}u=u!=null?""+yi(u):"",a=a!=null?""+yi(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}h=h??_,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=M?s.checked:!!h,s.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.name=A),sl(s)}function al(s,a,u){a==="number"&&ol(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ht(s,a,u,h){if(s=s.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=a.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&h&&(s[u].defaultSelected=!0)}else{for(u=""+yi(u),a=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,h&&(s[_].defaultSelected=!0);return}a!==null||s[_].disabled||(a=s[_])}a!==null&&(a.selected=!0)}}function la(s,a,u){if(a!=null&&(a=""+yi(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+yi(u):""}function Js(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(ke(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=yi(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),sl(s)}function or(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var mg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ju(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||mg.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function pd(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var _ in a)h=a[_],a.hasOwnProperty(_)&&u[_]!==h&&ju(s,_,h)}else for(var E in a)a.hasOwnProperty(E)&&ju(s,E,a[E])}function $u(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(s){return yg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Dn(){}var ll=null;function ul(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fs=null,qi=null;function md(s){var a=rr(s);if(a&&(s=a.stateNode)){var u=s[fn]||null;e:switch(s=a.stateNode,a.type){case"input":if(Ys(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+nn(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var _=h[fn]||null;if(!_)throw Error(i(90));Ys(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Hu(h)}break e;case"textarea":la(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ht(s,!!u.multiple,a,!1)}}}var Ku=!1;function gd(s,a,u){if(Ku)return s(a,u);Ku=!0;try{var h=s(a);return h}finally{if(Ku=!1,(fs!==null||qi!==null)&&(dh(),fs&&(a=fs,s=qi,qi=fs=null,md(a),s)))for(a=0;a<s.length;a++)md(s[a])}}function xi(s,a){var u=s.stateNode;if(u===null)return null;var h=u[fn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=!1;if(Cr)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Yu=!1}var zi=null,cl=null,Kr=null;function Ws(){if(Kr)return Kr;var s,a=cl,u=a.length,h,_="value"in zi?zi.value:zi.textContent,E=_.length;for(s=0;s<u&&a[s]===_[s];s++);var A=u-s;for(h=1;h<=A&&a[u-h]===_[E-h];h++);return Kr=_.slice(s,1<h?1-h:void 0)}function ua(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Xs(){return!0}function Ft(){return!1}function ei(s){function a(u,h,_,E,A){this._reactName=u,this._targetInst=_,this.type=h,this.nativeEvent=E,this.target=A,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(E):E[M]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Xs:Ft,this.isPropagationStopped=Ft,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),a}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=ei(ds),Qs=v({},ds,{view:0,detail:0}),yd=ei(Qs),Zs,fl,vi,fa=v({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:to,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vi&&(vi&&s.type==="mousemove"?(Zs=s.screenX-vi.screenX,fl=s.screenY-vi.screenY):fl=Zs=0,vi=s),Zs)},movementY:function(s){return"movementY"in s?s.movementY:fl}}),vd=ei(fa),da=v({},fa,{dataTransfer:0}),_d=ei(da),Ju=v({},Qs,{relatedTarget:0}),eo=ei(Ju),Td=v({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),dl=ei(Td),vg=v({},ds,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ed=ei(vg),ha=v({},ds,{data:0}),Wu=ei(ha),Sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bd(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Qu[s])?!!a[s]:!1}function to(){return bd}var wd=v({},Qs,{key:function(s){if(s.key){var a=Sd[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Xu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:to,charCode:function(s){return s.type==="keypress"?ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ad=ei(wd),hs=v({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zu=ei(hs),Cd=v({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:to}),xd=ei(Cd),Id=v({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),hl=ei(Id),_i=v({},fa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Rd=ei(_i),Nd=v({},ds,{newState:0,oldState:0}),no=ei(Nd),g=[9,13,27,32],w=Cr&&"CompositionEvent"in window,C=null;Cr&&"documentMode"in document&&(C=document.documentMode);var L=Cr&&"TextEvent"in window&&!C,W=Cr&&(!w||C&&8<C&&11>=C),re=" ",ge=!1;function Et(s,a){switch(s){case"keyup":return g.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ze=!1;function Mn(s,a){switch(s){case"compositionend":return yn(a);case"keypress":return a.which!==32?null:(ge=!0,re);case"textInput":return s=a.data,s===re&&ge?null:s;default:return null}}function kn(s,a){if(Ze)return s==="compositionend"||!w&&Et(s,a)?(s=Ws(),Kr=cl=zi=null,Ze=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return W&&a.locale!=="ko"?null:a.data;default:return null}}var io={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ii(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!io[s.type]:a==="textarea"}function pa(s,a,u,h){fs?qi?qi.push(h):qi=[h]:fs=h,a=_h(a,"onChange"),0<a.length&&(u=new ca("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var ps=null,ec=null;function y2(s){lw(s,0)}function Pd(s){var a=Gr(s);if(Hu(a))return s}function xE(s,a){if(s==="change")return a}var IE=!1;if(Cr){var _g;if(Cr){var Tg="oninput"in document;if(!Tg){var RE=document.createElement("div");RE.setAttribute("oninput","return;"),Tg=typeof RE.oninput=="function"}_g=Tg}else _g=!1;IE=_g&&(!document.documentMode||9<document.documentMode)}function NE(){ps&&(ps.detachEvent("onpropertychange",PE),ec=ps=null)}function PE(s){if(s.propertyName==="value"&&Pd(ec)){var a=[];pa(a,ec,s,ul(s)),gd(y2,a)}}function v2(s,a,u){s==="focusin"?(NE(),ps=a,ec=u,ps.attachEvent("onpropertychange",PE)):s==="focusout"&&NE()}function _2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Pd(ec)}function T2(s,a){if(s==="click")return Pd(a)}function E2(s,a){if(s==="input"||s==="change")return Pd(a)}function S2(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Gi=typeof Object.is=="function"?Object.is:S2;function tc(s,a){if(Gi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var _=u[h];if(!wi.call(a,_)||!Gi(s[_],a[_]))return!1}return!0}function DE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ME(s,a){var u=DE(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=DE(u)}}function kE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?kE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function VE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ol(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ol(s.document)}return a}function Eg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var b2=Cr&&"documentMode"in document&&11>=document.documentMode,pl=null,Sg=null,nc=null,bg=!1;function LE(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bg||pl==null||pl!==ol(h)||(h=pl,"selectionStart"in h&&Eg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),nc&&tc(nc,h)||(nc=h,h=_h(Sg,"onSelect"),0<h.length&&(a=new ca("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=pl)))}function ma(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var ml={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},wg={},OE={};Cr&&(OE=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function ga(s){if(wg[s])return wg[s];if(!ml[s])return s;var a=ml[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in OE)return wg[s]=a[u];return s}var UE=ga("animationend"),FE=ga("animationiteration"),BE=ga("animationstart"),w2=ga("transitionrun"),A2=ga("transitionstart"),C2=ga("transitioncancel"),qE=ga("transitionend"),zE=new Map,Ag="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ag.push("scrollEnd");function xr(s,a){zE.set(s,a),gi(a,[s])}var Dd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ar=[],gl=0,Cg=0;function Md(){for(var s=gl,a=Cg=gl=0;a<s;){var u=ar[a];ar[a++]=null;var h=ar[a];ar[a++]=null;var _=ar[a];ar[a++]=null;var E=ar[a];if(ar[a++]=null,h!==null&&_!==null){var A=h.pending;A===null?_.next=_:(_.next=A.next,A.next=_),h.pending=_}E!==0&&GE(u,_,E)}}function kd(s,a,u,h){ar[gl++]=s,ar[gl++]=a,ar[gl++]=u,ar[gl++]=h,Cg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function xg(s,a,u,h){return kd(s,a,u,h),Vd(s)}function ya(s,a){return kd(s,null,null,a),Vd(s)}function GE(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var _=!1,E=s.return;E!==null;)E.childLanes|=u,h=E.alternate,h!==null&&(h.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(_=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,_&&a!==null&&(_=31-be(u),s=E.hiddenUpdates,h=s[_],h===null?s[_]=[a]:h.push(a),a.lane=u|536870912),E):null}function Vd(s){if(50<wc)throw wc=0,Ly=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var yl={};function x2(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(s,a,u,h){return new x2(s,a,u,h)}function Ig(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,a){var u=s.alternate;return u===null?(u=Hi(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function HE(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function Ld(s,a,u,h,_,E){var A=0;if(h=s,typeof s=="function")Ig(s)&&(A=1);else if(typeof s=="string")A=DV(s,u,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Hi(31,u,a,_),s.elementType=P,s.lanes=E,s;case N:return va(u.children,_,E,a);case D:A=8,_|=24;break;case O:return s=Hi(12,u,a,_|2),s.elementType=O,s.lanes=E,s;case K:return s=Hi(13,u,a,_),s.elementType=K,s.lanes=E,s;case G:return s=Hi(19,u,a,_),s.elementType=G,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:A=10;break e;case k:A=9;break e;case $:A=11;break e;case I:A=14;break e;case R:A=16,h=null;break e}A=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Hi(A,u,a,_),a.elementType=s,a.type=h,a.lanes=E,a}function va(s,a,u,h){return s=Hi(7,s,h,a),s.lanes=u,s}function Rg(s,a,u){return s=Hi(6,s,null,a),s.lanes=u,s}function jE(s){var a=Hi(18,null,null,0);return a.stateNode=s,a}function Ng(s,a,u){return a=Hi(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var $E=new WeakMap;function lr(s,a){if(typeof s=="object"&&s!==null){var u=$E.get(s);return u!==void 0?u:(a={value:s,source:a,stack:en(a)},$E.set(s,a),a)}return{value:s,source:a,stack:en(a)}}var vl=[],_l=0,Od=null,ic=0,ur=[],cr=0,ro=null,Yr=1,Jr="";function gs(s,a){vl[_l++]=ic,vl[_l++]=Od,Od=s,ic=a}function KE(s,a,u){ur[cr++]=Yr,ur[cr++]=Jr,ur[cr++]=ro,ro=s;var h=Yr;s=Jr;var _=32-be(h)-1;h&=~(1<<_),u+=1;var E=32-be(a)+_;if(30<E){var A=_-_%5;E=(h&(1<<A)-1).toString(32),h>>=A,_-=A,Yr=1<<32-be(a)+_|u<<_|h,Jr=E+s}else Yr=1<<E|u<<_|h,Jr=s}function Pg(s){s.return!==null&&(gs(s,1),KE(s,1,0))}function Dg(s){for(;s===Od;)Od=vl[--_l],vl[_l]=null,ic=vl[--_l],vl[_l]=null;for(;s===ro;)ro=ur[--cr],ur[cr]=null,Jr=ur[--cr],ur[cr]=null,Yr=ur[--cr],ur[cr]=null}function YE(s,a){ur[cr++]=Yr,ur[cr++]=Jr,ur[cr++]=ro,Yr=a.id,Jr=a.overflow,ro=s}var Bn=null,Bt=null,lt=!1,so=null,fr=!1,Mg=Error(i(519));function oo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rc(lr(a,s)),Mg}function JE(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[Ut]=s,a[fn]=h,u){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(u=0;u<Cc.length;u++)nt(Cc[u],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),aa(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Js(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||dw(a.textContent,u)?(h.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),h.onScroll!=null&&nt("scroll",a),h.onScrollEnd!=null&&nt("scrollend",a),h.onClick!=null&&(a.onclick=Dn),a=!0):a=!1,a||oo(s,!0)}function WE(s){for(Bn=s.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:Bn=Bn.return}}function Tl(s){if(s!==Bn)return!1;if(!lt)return WE(s),lt=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Xy(s.type,s.memoizedProps)),u=!u),u&&Bt&&oo(s),WE(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Bt=Ew(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Bt=Ew(s)}else a===27?(a=Bt,Eo(s.type)?(s=nv,nv=null,Bt=s):Bt=a):Bt=Bn?hr(s.stateNode.nextSibling):null;return!0}function _a(){Bt=Bn=null,lt=!1}function kg(){var s=so;return s!==null&&(Di===null?Di=s:Di.push.apply(Di,s),so=null),s}function rc(s){so===null?so=[s]:so.push(s)}var Vg=j(null),Ta=null,ys=null;function ao(s,a,u){pe(Vg,a._currentValue),a._currentValue=u}function vs(s){s._currentValue=Vg.current,Z(Vg)}function Lg(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Og(s,a,u,h){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var E=_.dependencies;if(E!==null){var A=_.child;E=E.firstContext;e:for(;E!==null;){var M=E;E=_;for(var H=0;H<a.length;H++)if(M.context===a[H]){E.lanes|=u,M=E.alternate,M!==null&&(M.lanes|=u),Lg(E.return,u,s),h||(A=null);break e}E=M.next}}else if(_.tag===18){if(A=_.return,A===null)throw Error(i(341));A.lanes|=u,E=A.alternate,E!==null&&(E.lanes|=u),Lg(A,u,s),A=null}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===s){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}}function El(s,a,u,h){s=null;for(var _=a,E=!1;_!==null;){if(!E){if((_.flags&524288)!==0)E=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var A=_.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var M=_.type;Gi(_.pendingProps.value,A.value)||(s!==null?s.push(M):s=[M])}}else if(_===Ve.current){if(A=_.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Pc):s=[Pc])}_=_.return}s!==null&&Og(a,s,u,h),a.flags|=262144}function Ud(s){for(s=s.firstContext;s!==null;){if(!Gi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ea(s){Ta=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qn(s){return XE(Ta,s)}function Fd(s,a){return Ta===null&&Ea(s),XE(s,a)}function XE(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},ys===null){if(s===null)throw Error(i(308));ys=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ys=ys.next=a;return u}var I2=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},R2=t.unstable_scheduleCallback,N2=t.unstable_NormalPriority,vn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ug(){return{controller:new I2,data:new Map,refCount:0}}function sc(s){s.refCount--,s.refCount===0&&R2(N2,function(){s.controller.abort()})}var oc=null,Fg=0,Sl=0,bl=null;function P2(s,a){if(oc===null){var u=oc=[];Fg=0,Sl=zy(),bl={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Fg++,a.then(QE,QE),a}function QE(){if(--Fg===0&&oc!==null){bl!==null&&(bl.status="fulfilled");var s=oc;oc=null,Sl=0,bl=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function D2(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(h.status="rejected",h.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),h}var ZE=ee.S;ee.S=function(s,a){Lb=Re(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&P2(s,a),ZE!==null&&ZE(s,a)};var Sa=j(null);function Bg(){var s=Sa.current;return s!==null?s:Dt.pooledCache}function Bd(s,a){a===null?pe(Sa,Sa.current):pe(Sa,a.pool)}function eS(){var s=Bg();return s===null?null:{parent:vn._currentValue,pool:s}}var wl=Error(i(460)),qg=Error(i(474)),qd=Error(i(542)),zd={then:function(){}};function tS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function nS(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Dn,Dn),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,rS(s),s;default:if(typeof a.status=="string")a.then(Dn,Dn);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=h}},function(h){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,rS(s),s}throw wa=a,wl}}function ba(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(wa=u,wl):u}}var wa=null;function iS(){if(wa===null)throw Error(i(459));var s=wa;return wa=null,s}function rS(s){if(s===wl||s===qd)throw Error(i(483))}var Al=null,ac=0;function Gd(s){var a=ac;return ac+=1,Al===null&&(Al=[]),nS(Al,s,a)}function lc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Hd(s,a){throw a.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function sS(s){function a(J,Y){if(s){var X=J.deletions;X===null?(J.deletions=[Y],J.flags|=16):X.push(Y)}}function u(J,Y){if(!s)return null;for(;Y!==null;)a(J,Y),Y=Y.sibling;return null}function h(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function _(J,Y){return J=ms(J,Y),J.index=0,J.sibling=null,J}function E(J,Y,X){return J.index=X,s?(X=J.alternate,X!==null?(X=X.index,X<Y?(J.flags|=67108866,Y):X):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function A(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function M(J,Y,X,le){return Y===null||Y.tag!==6?(Y=Rg(X,J.mode,le),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function H(J,Y,X,le){var De=X.type;return De===N?oe(J,Y,X.props.children,le,X.key):Y!==null&&(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&ba(De)===Y.type)?(Y=_(Y,X.props),lc(Y,X),Y.return=J,Y):(Y=Ld(X.type,X.key,X.props,null,J.mode,le),lc(Y,X),Y.return=J,Y)}function Q(J,Y,X,le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==X.containerInfo||Y.stateNode.implementation!==X.implementation?(Y=Ng(X,J.mode,le),Y.return=J,Y):(Y=_(Y,X.children||[]),Y.return=J,Y)}function oe(J,Y,X,le,De){return Y===null||Y.tag!==7?(Y=va(X,J.mode,le,De),Y.return=J,Y):(Y=_(Y,X),Y.return=J,Y)}function ue(J,Y,X){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Rg(""+Y,J.mode,X),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return X=Ld(Y.type,Y.key,Y.props,null,J.mode,X),lc(X,Y),X.return=J,X;case x:return Y=Ng(Y,J.mode,X),Y.return=J,Y;case R:return Y=ba(Y),ue(J,Y,X)}if(ke(Y)||q(Y))return Y=va(Y,J.mode,X,null),Y.return=J,Y;if(typeof Y.then=="function")return ue(J,Gd(Y),X);if(Y.$$typeof===F)return ue(J,Fd(J,Y),X);Hd(J,Y)}return null}function te(J,Y,X,le){var De=Y!==null?Y.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return De!==null?null:M(J,Y,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return X.key===De?H(J,Y,X,le):null;case x:return X.key===De?Q(J,Y,X,le):null;case R:return X=ba(X),te(J,Y,X,le)}if(ke(X)||q(X))return De!==null?null:oe(J,Y,X,le,null);if(typeof X.then=="function")return te(J,Y,Gd(X),le);if(X.$$typeof===F)return te(J,Y,Fd(J,X),le);Hd(J,X)}return null}function ie(J,Y,X,le,De){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return J=J.get(X)||null,M(Y,J,""+le,De);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return J=J.get(le.key===null?X:le.key)||null,H(Y,J,le,De);case x:return J=J.get(le.key===null?X:le.key)||null,Q(Y,J,le,De);case R:return le=ba(le),ie(J,Y,X,le,De)}if(ke(le)||q(le))return J=J.get(X)||null,oe(Y,J,le,De,null);if(typeof le.then=="function")return ie(J,Y,X,Gd(le),De);if(le.$$typeof===F)return ie(J,Y,X,Fd(Y,le),De);Hd(Y,le)}return null}function Ae(J,Y,X,le){for(var De=null,pt=null,Ne=Y,Ye=Y=0,st=null;Ne!==null&&Ye<X.length;Ye++){Ne.index>Ye?(st=Ne,Ne=null):st=Ne.sibling;var mt=te(J,Ne,X[Ye],le);if(mt===null){Ne===null&&(Ne=st);break}s&&Ne&&mt.alternate===null&&a(J,Ne),Y=E(mt,Y,Ye),pt===null?De=mt:pt.sibling=mt,pt=mt,Ne=st}if(Ye===X.length)return u(J,Ne),lt&&gs(J,Ye),De;if(Ne===null){for(;Ye<X.length;Ye++)Ne=ue(J,X[Ye],le),Ne!==null&&(Y=E(Ne,Y,Ye),pt===null?De=Ne:pt.sibling=Ne,pt=Ne);return lt&&gs(J,Ye),De}for(Ne=h(Ne);Ye<X.length;Ye++)st=ie(Ne,J,Ye,X[Ye],le),st!==null&&(s&&st.alternate!==null&&Ne.delete(st.key===null?Ye:st.key),Y=E(st,Y,Ye),pt===null?De=st:pt.sibling=st,pt=st);return s&&Ne.forEach(function(Co){return a(J,Co)}),lt&&gs(J,Ye),De}function Le(J,Y,X,le){if(X==null)throw Error(i(151));for(var De=null,pt=null,Ne=Y,Ye=Y=0,st=null,mt=X.next();Ne!==null&&!mt.done;Ye++,mt=X.next()){Ne.index>Ye?(st=Ne,Ne=null):st=Ne.sibling;var Co=te(J,Ne,mt.value,le);if(Co===null){Ne===null&&(Ne=st);break}s&&Ne&&Co.alternate===null&&a(J,Ne),Y=E(Co,Y,Ye),pt===null?De=Co:pt.sibling=Co,pt=Co,Ne=st}if(mt.done)return u(J,Ne),lt&&gs(J,Ye),De;if(Ne===null){for(;!mt.done;Ye++,mt=X.next())mt=ue(J,mt.value,le),mt!==null&&(Y=E(mt,Y,Ye),pt===null?De=mt:pt.sibling=mt,pt=mt);return lt&&gs(J,Ye),De}for(Ne=h(Ne);!mt.done;Ye++,mt=X.next())mt=ie(Ne,J,Ye,mt.value,le),mt!==null&&(s&&mt.alternate!==null&&Ne.delete(mt.key===null?Ye:mt.key),Y=E(mt,Y,Ye),pt===null?De=mt:pt.sibling=mt,pt=mt);return s&&Ne.forEach(function(GV){return a(J,GV)}),lt&&gs(J,Ye),De}function Nt(J,Y,X,le){if(typeof X=="object"&&X!==null&&X.type===N&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case b:e:{for(var De=X.key;Y!==null;){if(Y.key===De){if(De=X.type,De===N){if(Y.tag===7){u(J,Y.sibling),le=_(Y,X.props.children),le.return=J,J=le;break e}}else if(Y.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&ba(De)===Y.type){u(J,Y.sibling),le=_(Y,X.props),lc(le,X),le.return=J,J=le;break e}u(J,Y);break}else a(J,Y);Y=Y.sibling}X.type===N?(le=va(X.props.children,J.mode,le,X.key),le.return=J,J=le):(le=Ld(X.type,X.key,X.props,null,J.mode,le),lc(le,X),le.return=J,J=le)}return A(J);case x:e:{for(De=X.key;Y!==null;){if(Y.key===De)if(Y.tag===4&&Y.stateNode.containerInfo===X.containerInfo&&Y.stateNode.implementation===X.implementation){u(J,Y.sibling),le=_(Y,X.children||[]),le.return=J,J=le;break e}else{u(J,Y);break}else a(J,Y);Y=Y.sibling}le=Ng(X,J.mode,le),le.return=J,J=le}return A(J);case R:return X=ba(X),Nt(J,Y,X,le)}if(ke(X))return Ae(J,Y,X,le);if(q(X)){if(De=q(X),typeof De!="function")throw Error(i(150));return X=De.call(X),Le(J,Y,X,le)}if(typeof X.then=="function")return Nt(J,Y,Gd(X),le);if(X.$$typeof===F)return Nt(J,Y,Fd(J,X),le);Hd(J,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,Y!==null&&Y.tag===6?(u(J,Y.sibling),le=_(Y,X),le.return=J,J=le):(u(J,Y),le=Rg(X,J.mode,le),le.return=J,J=le),A(J)):u(J,Y)}return function(J,Y,X,le){try{ac=0;var De=Nt(J,Y,X,le);return Al=null,De}catch(Ne){if(Ne===wl||Ne===qd)throw Ne;var pt=Hi(29,Ne,null,J.mode);return pt.lanes=le,pt.return=J,pt}finally{}}}var Aa=sS(!0),oS=sS(!1),lo=!1;function zg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function uo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function co(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var _=h.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),h.pending=a,a=Vd(s),GE(s,null,u),a}return kd(s,h,a,u),Vd(s)}function uc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,kt(s,u)}}function Hg(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var _=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?_=E=A:E=E.next=A,u=u.next}while(u!==null);E===null?_=E=a:E=E.next=a}else _=E=a;u={baseState:h.baseState,firstBaseUpdate:_,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var jg=!1;function cc(){if(jg){var s=bl;if(s!==null)throw s}}function fc(s,a,u,h){jg=!1;var _=s.updateQueue;lo=!1;var E=_.firstBaseUpdate,A=_.lastBaseUpdate,M=_.shared.pending;if(M!==null){_.shared.pending=null;var H=M,Q=H.next;H.next=null,A===null?E=Q:A.next=Q,A=H;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==A&&(M===null?oe.firstBaseUpdate=Q:M.next=Q,oe.lastBaseUpdate=H))}if(E!==null){var ue=_.baseState;A=0,oe=Q=H=null,M=E;do{var te=M.lane&-536870913,ie=te!==M.lane;if(ie?(rt&te)===te:(h&te)===te){te!==0&&te===Sl&&(jg=!0),oe!==null&&(oe=oe.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var Ae=s,Le=M;te=a;var Nt=u;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){ue=Ae.call(Nt,ue,te);break e}ue=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,te=typeof Ae=="function"?Ae.call(Nt,ue,te):Ae,te==null)break e;ue=v({},ue,te);break e;case 2:lo=!0}}te=M.callback,te!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=_.callbacks,ie===null?_.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(Q=oe=ie,H=ue):oe=oe.next=ie,A|=te;if(M=M.next,M===null){if(M=_.shared.pending,M===null)break;ie=M,M=ie.next,ie.next=null,_.lastBaseUpdate=ie,_.shared.pending=null}}while(!0);oe===null&&(H=ue),_.baseState=H,_.firstBaseUpdate=Q,_.lastBaseUpdate=oe,E===null&&(_.shared.lanes=0),go|=A,s.lanes=A,s.memoizedState=ue}}function aS(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function lS(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)aS(u[s],a)}var Cl=j(null),jd=j(0);function uS(s,a){s=xs,pe(jd,s),pe(Cl,a),xs=s|a.baseLanes}function $g(){pe(jd,xs),pe(Cl,Cl.current)}function Kg(){xs=jd.current,Z(Cl),Z(jd)}var ji=j(null),dr=null;function fo(s){var a=s.alternate;pe(dn,dn.current&1),pe(ji,s),dr===null&&(a===null||Cl.current!==null||a.memoizedState!==null)&&(dr=s)}function Yg(s){pe(dn,dn.current),pe(ji,s),dr===null&&(dr=s)}function cS(s){s.tag===22?(pe(dn,dn.current),pe(ji,s),dr===null&&(dr=s)):ho()}function ho(){pe(dn,dn.current),pe(ji,ji.current)}function $i(s){Z(ji),dr===s&&(dr=null),Z(dn)}var dn=j(0);function $d(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||ev(u)||tv(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var _s=0,$e=null,It=null,_n=null,Kd=!1,xl=!1,Ca=!1,Yd=0,dc=0,Il=null,M2=0;function rn(){throw Error(i(321))}function Jg(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Gi(s[u],a[u]))return!1;return!0}function Wg(s,a,u,h,_,E){return _s=E,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?KS:fy,Ca=!1,E=u(h,_),Ca=!1,xl&&(E=dS(a,u,h,_)),fS(s),E}function fS(s){ee.H=mc;var a=It!==null&&It.next!==null;if(_s=0,_n=It=$e=null,Kd=!1,dc=0,Il=null,a)throw Error(i(300));s===null||Tn||(s=s.dependencies,s!==null&&Ud(s)&&(Tn=!0))}function dS(s,a,u,h){$e=s;var _=0;do{if(xl&&(Il=null),dc=0,xl=!1,25<=_)throw Error(i(301));if(_+=1,_n=It=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}ee.H=YS,E=a(u,h)}while(xl);return E}function k2(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?hc(a):a,s=s.useState()[0],(It!==null?It.memoizedState:null)!==s&&($e.flags|=1024),a}function Xg(){var s=Yd!==0;return Yd=0,s}function Qg(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Zg(s){if(Kd){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Kd=!1}_s=0,_n=It=$e=null,xl=!1,dc=Yd=0,Il=null}function Ti(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?$e.memoizedState=_n=s:_n=_n.next=s,_n}function hn(){if(It===null){var s=$e.alternate;s=s!==null?s.memoizedState:null}else s=It.next;var a=_n===null?$e.memoizedState:_n.next;if(a!==null)_n=a,It=s;else{if(s===null)throw $e.alternate===null?Error(i(467)):Error(i(310));It=s,s={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},_n===null?$e.memoizedState=_n=s:_n=_n.next=s}return _n}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(s){var a=dc;return dc+=1,Il===null&&(Il=[]),s=nS(Il,s,a),a=$e,(_n===null?a.memoizedState:_n.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?KS:fy),s}function Wd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return hc(s);if(s.$$typeof===F)return qn(s)}throw Error(i(438,String(s)))}function ey(s){var a=null,u=$e.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=$e.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Jd(),$e.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=V;return a.index++,u}function Ts(s,a){return typeof a=="function"?a(s):a}function Xd(s){var a=hn();return ty(a,It,s)}function ty(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var _=s.baseQueue,E=h.pending;if(E!==null){if(_!==null){var A=_.next;_.next=E.next,E.next=A}a.baseQueue=_=E,h.pending=null}if(E=s.baseState,_===null)s.memoizedState=E;else{a=_.next;var M=A=null,H=null,Q=a,oe=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(rt&ue)===ue:(_s&ue)===ue){var te=Q.revertLane;if(te===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===Sl&&(oe=!0);else if((_s&te)===te){Q=Q.next,te===Sl&&(oe=!0);continue}else ue={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},H===null?(M=H=ue,A=E):H=H.next=ue,$e.lanes|=te,go|=te;ue=Q.action,Ca&&u(E,ue),E=Q.hasEagerState?Q.eagerState:u(E,ue)}else te={lane:ue,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},H===null?(M=H=te,A=E):H=H.next=te,$e.lanes|=ue,go|=ue;Q=Q.next}while(Q!==null&&Q!==a);if(H===null?A=E:H.next=M,!Gi(E,s.memoizedState)&&(Tn=!0,oe&&(u=bl,u!==null)))throw u;s.memoizedState=E,s.baseState=A,s.baseQueue=H,h.lastRenderedState=E}return _===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function ny(s){var a=hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,_=u.pending,E=a.memoizedState;if(_!==null){u.pending=null;var A=_=_.next;do E=s(E,A.action),A=A.next;while(A!==_);Gi(E,a.memoizedState)||(Tn=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),u.lastRenderedState=E}return[E,h]}function hS(s,a,u){var h=$e,_=hn(),E=lt;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=a();var A=!Gi((It||_).memoizedState,u);if(A&&(_.memoizedState=u,Tn=!0),_=_.queue,sy(gS.bind(null,h,_,s),[s]),_.getSnapshot!==a||A||_n!==null&&_n.memoizedState.tag&1){if(h.flags|=2048,Rl(9,{destroy:void 0},mS.bind(null,h,_,u,a),null),Dt===null)throw Error(i(349));E||(_s&127)!==0||pS(h,a,u)}return u}function pS(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=$e.updateQueue,a===null?(a=Jd(),$e.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function mS(s,a,u,h){a.value=u,a.getSnapshot=h,yS(a)&&vS(s)}function gS(s,a,u){return u(function(){yS(a)&&vS(s)})}function yS(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Gi(s,u)}catch{return!0}}function vS(s){var a=ya(s,2);a!==null&&Mi(a,s,2)}function iy(s){var a=Ti();if(typeof s=="function"){var u=s;if(s=u(),Ca){fe(!0);try{u()}finally{fe(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:s},a}function _S(s,a,u,h){return s.baseState=u,ty(s,It,typeof h=="function"?h:Ts)}function V2(s,a,u,h,_){if(eh(s))throw Error(i(485));if(s=a.action,s!==null){var E={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){E.listeners.push(A)}};ee.T!==null?u(!0):E.isTransition=!1,h(E),u=a.pending,u===null?(E.next=a.pending=E,TS(a,E)):(E.next=u.next,a.pending=u.next=E)}}function TS(s,a){var u=a.action,h=a.payload,_=s.state;if(a.isTransition){var E=ee.T,A={};ee.T=A;try{var M=u(_,h),H=ee.S;H!==null&&H(A,M),ES(s,a,M)}catch(Q){ry(s,a,Q)}finally{E!==null&&A.types!==null&&(E.types=A.types),ee.T=E}}else try{E=u(_,h),ES(s,a,E)}catch(Q){ry(s,a,Q)}}function ES(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){SS(s,a,h)},function(h){return ry(s,a,h)}):SS(s,a,u)}function SS(s,a,u){a.status="fulfilled",a.value=u,bS(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,TS(s,u)))}function ry(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,bS(a),a=a.next;while(a!==h)}s.action=null}function bS(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function wS(s,a){return a}function AS(s,a){if(lt){var u=Dt.formState;if(u!==null){e:{var h=$e;if(lt){if(Bt){t:{for(var _=Bt,E=fr;_.nodeType!==8;){if(!E){_=null;break t}if(_=hr(_.nextSibling),_===null){_=null;break t}}E=_.data,_=E==="F!"||E==="F"?_:null}if(_){Bt=hr(_.nextSibling),h=_.data==="F!";break e}}oo(h)}h=!1}h&&(a=u[0])}}return u=Ti(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wS,lastRenderedState:a},u.queue=h,u=HS.bind(null,$e,h),h.dispatch=u,h=iy(!1),E=cy.bind(null,$e,!1,h.queue),h=Ti(),_={state:a,dispatch:null,action:s,pending:null},h.queue=_,u=V2.bind(null,$e,_,E,u),_.dispatch=u,h.memoizedState=s,[a,u,!1]}function CS(s){var a=hn();return xS(a,It,s)}function xS(s,a,u){if(a=ty(s,a,wS)[0],s=Xd(Ts)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=hc(a)}catch(A){throw A===wl?qd:A}else h=a;a=hn();var _=a.queue,E=_.dispatch;return u!==a.memoizedState&&($e.flags|=2048,Rl(9,{destroy:void 0},L2.bind(null,_,u),null)),[h,E,s]}function L2(s,a){s.action=a}function IS(s){var a=hn(),u=It;if(u!==null)return xS(a,u,s);hn(),a=a.memoizedState,u=hn();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Rl(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=$e.updateQueue,a===null&&(a=Jd(),$e.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function RS(){return hn().memoizedState}function Qd(s,a,u,h){var _=Ti();$e.flags|=s,_.memoizedState=Rl(1|a,{destroy:void 0},u,h===void 0?null:h)}function Zd(s,a,u,h){var _=hn();h=h===void 0?null:h;var E=_.memoizedState.inst;It!==null&&h!==null&&Jg(h,It.memoizedState.deps)?_.memoizedState=Rl(a,E,u,h):($e.flags|=s,_.memoizedState=Rl(1|a,E,u,h))}function NS(s,a){Qd(8390656,8,s,a)}function sy(s,a){Zd(2048,8,s,a)}function O2(s){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=Jd(),$e.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function PS(s){var a=hn().memoizedState;return O2({ref:a,nextImpl:s}),function(){if((vt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function DS(s,a){return Zd(4,2,s,a)}function MS(s,a){return Zd(4,4,s,a)}function kS(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function VS(s,a,u){u=u!=null?u.concat([s]):null,Zd(4,4,kS.bind(null,a,s),u)}function oy(){}function LS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Jg(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function OS(s,a){var u=hn();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Jg(a,h[1]))return h[0];if(h=s(),Ca){fe(!0);try{s()}finally{fe(!1)}}return u.memoizedState=[h,a],h}function ay(s,a,u){return u===void 0||(_s&1073741824)!==0&&(rt&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=Ub(),$e.lanes|=s,go|=s,u)}function US(s,a,u,h){return Gi(u,a)?u:Cl.current!==null?(s=ay(s,u,h),Gi(s,a)||(Tn=!0),s):(_s&42)===0||(_s&1073741824)!==0&&(rt&261930)===0?(Tn=!0,s.memoizedState=u):(s=Ub(),$e.lanes|=s,go|=s,a)}function FS(s,a,u,h,_){var E=ae.p;ae.p=E!==0&&8>E?E:8;var A=ee.T,M={};ee.T=M,cy(s,!1,a,u);try{var H=_(),Q=ee.S;if(Q!==null&&Q(M,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var oe=D2(H,h);pc(s,a,oe,Ji(s))}else pc(s,a,h,Ji(s))}catch(ue){pc(s,a,{then:function(){},status:"rejected",reason:ue},Ji())}finally{ae.p=E,A!==null&&M.types!==null&&(A.types=M.types),ee.T=A}}function U2(){}function ly(s,a,u,h){if(s.tag!==5)throw Error(i(476));var _=BS(s).queue;FS(s,_,a,me,u===null?U2:function(){return qS(s),u(h)})}function BS(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:me},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function qS(s){var a=BS(s);a.next===null&&(a=s.alternate.memoizedState),pc(s,a.next.queue,{},Ji())}function uy(){return qn(Pc)}function zS(){return hn().memoizedState}function GS(){return hn().memoizedState}function F2(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ji();s=uo(u);var h=co(a,s,u);h!==null&&(Mi(h,a,u),uc(h,a,u)),a={cache:Ug()},s.payload=a;return}a=a.return}}function B2(s,a,u){var h=Ji();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},eh(s)?jS(a,u):(u=xg(s,a,u,h),u!==null&&(Mi(u,s,h),$S(u,a,h)))}function HS(s,a,u){var h=Ji();pc(s,a,u,h)}function pc(s,a,u,h){var _={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(eh(s))jS(a,_);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var A=a.lastRenderedState,M=E(A,u);if(_.hasEagerState=!0,_.eagerState=M,Gi(M,A))return kd(s,a,_,0),Dt===null&&Md(),!1}catch{}finally{}if(u=xg(s,a,_,h),u!==null)return Mi(u,s,h),$S(u,a,h),!0}return!1}function cy(s,a,u,h){if(h={lane:2,revertLane:zy(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},eh(s)){if(a)throw Error(i(479))}else a=xg(s,u,h,2),a!==null&&Mi(a,s,2)}function eh(s){var a=s.alternate;return s===$e||a!==null&&a===$e}function jS(s,a){xl=Kd=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function $S(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,kt(s,u)}}var mc={readContext:qn,use:Wd,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};mc.useEffectEvent=rn;var KS={readContext:qn,use:Wd,useCallback:function(s,a){return Ti().memoizedState=[s,a===void 0?null:a],s},useContext:qn,useEffect:NS,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Qd(4194308,4,kS.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Qd(4194308,4,s,a)},useInsertionEffect:function(s,a){Qd(4,2,s,a)},useMemo:function(s,a){var u=Ti();a=a===void 0?null:a;var h=s();if(Ca){fe(!0);try{s()}finally{fe(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=Ti();if(u!==void 0){var _=u(a);if(Ca){fe(!0);try{u(a)}finally{fe(!1)}}}else _=a;return h.memoizedState=h.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},h.queue=s,s=s.dispatch=B2.bind(null,$e,s),[h.memoizedState,s]},useRef:function(s){var a=Ti();return s={current:s},a.memoizedState=s},useState:function(s){s=iy(s);var a=s.queue,u=HS.bind(null,$e,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:oy,useDeferredValue:function(s,a){var u=Ti();return ay(u,s,a)},useTransition:function(){var s=iy(!1);return s=FS.bind(null,$e,s.queue,!0,!1),Ti().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=$e,_=Ti();if(lt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Dt===null)throw Error(i(349));(rt&127)!==0||pS(h,a,u)}_.memoizedState=u;var E={value:u,getSnapshot:a};return _.queue=E,NS(gS.bind(null,h,E,s),[s]),h.flags|=2048,Rl(9,{destroy:void 0},mS.bind(null,h,E,u,a),null),u},useId:function(){var s=Ti(),a=Dt.identifierPrefix;if(lt){var u=Jr,h=Yr;u=(h&~(1<<32-be(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Yd++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=M2++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:uy,useFormState:AS,useActionState:AS,useOptimistic:function(s){var a=Ti();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=cy.bind(null,$e,!0,u),u.dispatch=a,[s,a]},useMemoCache:ey,useCacheRefresh:function(){return Ti().memoizedState=F2.bind(null,$e)},useEffectEvent:function(s){var a=Ti(),u={impl:s};return a.memoizedState=u,function(){if((vt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},fy={readContext:qn,use:Wd,useCallback:LS,useContext:qn,useEffect:sy,useImperativeHandle:VS,useInsertionEffect:DS,useLayoutEffect:MS,useMemo:OS,useReducer:Xd,useRef:RS,useState:function(){return Xd(Ts)},useDebugValue:oy,useDeferredValue:function(s,a){var u=hn();return US(u,It.memoizedState,s,a)},useTransition:function(){var s=Xd(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:hc(s),a]},useSyncExternalStore:hS,useId:zS,useHostTransitionStatus:uy,useFormState:CS,useActionState:CS,useOptimistic:function(s,a){var u=hn();return _S(u,It,s,a)},useMemoCache:ey,useCacheRefresh:GS};fy.useEffectEvent=PS;var YS={readContext:qn,use:Wd,useCallback:LS,useContext:qn,useEffect:sy,useImperativeHandle:VS,useInsertionEffect:DS,useLayoutEffect:MS,useMemo:OS,useReducer:ny,useRef:RS,useState:function(){return ny(Ts)},useDebugValue:oy,useDeferredValue:function(s,a){var u=hn();return It===null?ay(u,s,a):US(u,It.memoizedState,s,a)},useTransition:function(){var s=ny(Ts)[0],a=hn().memoizedState;return[typeof s=="boolean"?s:hc(s),a]},useSyncExternalStore:hS,useId:zS,useHostTransitionStatus:uy,useFormState:IS,useActionState:IS,useOptimistic:function(s,a){var u=hn();return It!==null?_S(u,It,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:ey,useCacheRefresh:GS};YS.useEffectEvent=PS;function dy(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:v({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var hy={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Ji(),_=uo(h);_.payload=a,u!=null&&(_.callback=u),a=co(s,_,h),a!==null&&(Mi(a,s,h),uc(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Ji(),_=uo(h);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=co(s,_,h),a!==null&&(Mi(a,s,h),uc(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Ji(),h=uo(u);h.tag=2,a!=null&&(h.callback=a),a=co(s,h,u),a!==null&&(Mi(a,s,u),uc(a,s,u))}};function JS(s,a,u,h,_,E,A){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,E,A):a.prototype&&a.prototype.isPureReactComponent?!tc(u,h)||!tc(_,E):!0}function WS(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&hy.enqueueReplaceState(a,a.state,null)}function xa(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=v({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function XS(s){Dd(s)}function QS(s){console.error(s)}function ZS(s){Dd(s)}function th(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function eb(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function py(s,a,u){return u=uo(u),u.tag=3,u.payload={element:null},u.callback=function(){th(s,a)},u}function tb(s){return s=uo(s),s.tag=3,s}function nb(s,a,u,h){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var E=h.value;s.payload=function(){return _(E)},s.callback=function(){eb(a,u,h)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(s.callback=function(){eb(a,u,h),typeof _!="function"&&(yo===null?yo=new Set([this]):yo.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function q2(s,a,u,h,_){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&El(a,u,_,!0),u=ji.current,u!==null){switch(u.tag){case 31:case 13:return dr===null?hh():u.alternate===null&&sn===0&&(sn=3),u.flags&=-257,u.flags|=65536,u.lanes=_,h===zd?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),Fy(s,h,_)),!1;case 22:return u.flags|=65536,h===zd?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),Fy(s,h,_)),!1}throw Error(i(435,u.tag))}return Fy(s,h,_),hh(),!1}if(lt)return a=ji.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,h!==Mg&&(s=Error(i(422),{cause:h}),rc(lr(s,u)))):(h!==Mg&&(a=Error(i(423),{cause:h}),rc(lr(a,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,h=lr(h,u),_=py(s.stateNode,h,_),Hg(s,_),sn!==4&&(sn=2)),!1;var E=Error(i(520),{cause:h});if(E=lr(E,u),bc===null?bc=[E]:bc.push(E),sn!==4&&(sn=2),a===null)return!0;h=lr(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=py(u.stateNode,h,s),Hg(u,s),!1;case 1:if(a=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(yo===null||!yo.has(E))))return u.flags|=65536,_&=-_,u.lanes|=_,_=tb(_),nb(_,s,u,h),Hg(u,_),!1}u=u.return}while(u!==null);return!1}var my=Error(i(461)),Tn=!1;function zn(s,a,u,h){a.child=s===null?oS(a,null,u,h):Aa(a,s.child,u,h)}function ib(s,a,u,h,_){u=u.render;var E=a.ref;if("ref"in h){var A={};for(var M in h)M!=="ref"&&(A[M]=h[M])}else A=h;return Ea(a),h=Wg(s,a,u,A,E,_),M=Xg(),s!==null&&!Tn?(Qg(s,a,_),Es(s,a,_)):(lt&&M&&Pg(a),a.flags|=1,zn(s,a,h,_),a.child)}function rb(s,a,u,h,_){if(s===null){var E=u.type;return typeof E=="function"&&!Ig(E)&&E.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=E,sb(s,a,E,h,_)):(s=Ld(u.type,null,h,a,a.mode,_),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,!by(s,_)){var A=E.memoizedProps;if(u=u.compare,u=u!==null?u:tc,u(A,h)&&s.ref===a.ref)return Es(s,a,_)}return a.flags|=1,s=ms(E,h),s.ref=a.ref,s.return=a,a.child=s}function sb(s,a,u,h,_){if(s!==null){var E=s.memoizedProps;if(tc(E,h)&&s.ref===a.ref)if(Tn=!1,a.pendingProps=h=E,by(s,_))(s.flags&131072)!==0&&(Tn=!0);else return a.lanes=s.lanes,Es(s,a,_)}return gy(s,a,u,h,_)}function ob(s,a,u,h){var _=h.children,E=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(h=a.child=s.child,_=0;h!==null;)_=_|h.lanes|h.childLanes,h=h.sibling;h=_&~E}else h=0,a.child=null;return ab(s,a,E,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Bd(a,E!==null?E.cachePool:null),E!==null?uS(a,E):$g(),cS(a);else return h=a.lanes=536870912,ab(s,a,E!==null?E.baseLanes|u:u,u,h)}else E!==null?(Bd(a,E.cachePool),uS(a,E),ho(),a.memoizedState=null):(s!==null&&Bd(a,null),$g(),ho());return zn(s,a,_,u),a.child}function gc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ab(s,a,u,h,_){var E=Bg();return E=E===null?null:{parent:vn._currentValue,pool:E},a.memoizedState={baseLanes:u,cachePool:E},s!==null&&Bd(a,null),$g(),cS(a),s!==null&&El(s,a,h,!0),a.childLanes=_,null}function nh(s,a){return a=rh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function lb(s,a,u){return Aa(a,s.child,null,u),s=nh(a,a.pendingProps),s.flags|=2,$i(a),a.memoizedState=null,s}function z2(s,a,u){var h=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(lt){if(h.mode==="hidden")return s=nh(a,h),a.lanes=536870912,gc(null,s);if(Yg(a),(s=Bt)?(s=Tw(s,fr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:ro!==null?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},u=jE(s),u.return=a,a.child=u,Bn=a,Bt=null)):s=null,s===null)throw oo(a);return a.lanes=536870912,null}return nh(a,h)}var E=s.memoizedState;if(E!==null){var A=E.dehydrated;if(Yg(a),_)if(a.flags&256)a.flags&=-257,a=lb(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Tn||El(s,a,u,!1),_=(u&s.childLanes)!==0,Tn||_){if(h=Dt,h!==null&&(A=Zn(h,u),A!==0&&A!==E.retryLane))throw E.retryLane=A,ya(s,A),Mi(h,s,A),my;hh(),a=lb(s,a,u)}else s=E.treeContext,Bt=hr(A.nextSibling),Bn=a,lt=!0,so=null,fr=!1,s!==null&&YE(a,s),a=nh(a,h),a.flags|=4096;return a}return s=ms(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function ih(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function gy(s,a,u,h,_){return Ea(a),u=Wg(s,a,u,h,void 0,_),h=Xg(),s!==null&&!Tn?(Qg(s,a,_),Es(s,a,_)):(lt&&h&&Pg(a),a.flags|=1,zn(s,a,u,_),a.child)}function ub(s,a,u,h,_,E){return Ea(a),a.updateQueue=null,u=dS(a,h,u,_),fS(s),h=Xg(),s!==null&&!Tn?(Qg(s,a,E),Es(s,a,E)):(lt&&h&&Pg(a),a.flags|=1,zn(s,a,u,E),a.child)}function cb(s,a,u,h,_){if(Ea(a),a.stateNode===null){var E=yl,A=u.contextType;typeof A=="object"&&A!==null&&(E=qn(A)),E=new u(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=hy,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},zg(a),A=u.contextType,E.context=typeof A=="object"&&A!==null?qn(A):yl,E.state=a.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(dy(a,u,A,h),E.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(A=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),A!==E.state&&hy.enqueueReplaceState(E,E.state,null),fc(a,h,E,_),cc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){E=a.stateNode;var M=a.memoizedProps,H=xa(u,M);E.props=H;var Q=E.context,oe=u.contextType;A=yl,typeof oe=="object"&&oe!==null&&(A=qn(oe));var ue=u.getDerivedStateFromProps;oe=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M||Q!==A)&&WS(a,E,h,A),lo=!1;var te=a.memoizedState;E.state=te,fc(a,h,E,_),cc(),Q=a.memoizedState,M||te!==Q||lo?(typeof ue=="function"&&(dy(a,u,ue,h),Q=a.memoizedState),(H=lo||JS(a,u,H,h,te,Q,A))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=Q),E.props=h,E.state=Q,E.context=A,h=H):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,Gg(s,a),A=a.memoizedProps,oe=xa(u,A),E.props=oe,ue=a.pendingProps,te=E.context,Q=u.contextType,H=yl,typeof Q=="object"&&Q!==null&&(H=qn(Q)),M=u.getDerivedStateFromProps,(Q=typeof M=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(A!==ue||te!==H)&&WS(a,E,h,H),lo=!1,te=a.memoizedState,E.state=te,fc(a,h,E,_),cc();var ie=a.memoizedState;A!==ue||te!==ie||lo||s!==null&&s.dependencies!==null&&Ud(s.dependencies)?(typeof M=="function"&&(dy(a,u,M,h),ie=a.memoizedState),(oe=lo||JS(a,u,oe,h,te,ie,H)||s!==null&&s.dependencies!==null&&Ud(s.dependencies))?(Q||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ie,H),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ie,H)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ie),E.props=h,E.state=ie,E.context=H,h=oe):(typeof E.componentDidUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&te===s.memoizedState||(a.flags|=1024),h=!1)}return E=h,ih(s,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,s!==null&&h?(a.child=Aa(a,s.child,null,_),a.child=Aa(a,null,u,_)):zn(s,a,u,_),a.memoizedState=E.state,s=a.child):s=Es(s,a,_),s}function fb(s,a,u,h){return _a(),a.flags|=256,zn(s,a,u,h),a.child}var yy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vy(s){return{baseLanes:s,cachePool:eS()}}function _y(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Yi),s}function db(s,a,u){var h=a.pendingProps,_=!1,E=(a.flags&128)!==0,A;if((A=E)||(A=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),A&&(_=!0,a.flags&=-129),A=(a.flags&32)!==0,a.flags&=-33,s===null){if(lt){if(_?fo(a):ho(),(s=Bt)?(s=Tw(s,fr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:ro!==null?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},u=jE(s),u.return=a,a.child=u,Bn=a,Bt=null)):s=null,s===null)throw oo(a);return tv(s)?a.lanes=32:a.lanes=536870912,null}var M=h.children;return h=h.fallback,_?(ho(),_=a.mode,M=rh({mode:"hidden",children:M},_),h=va(h,_,u,null),M.return=a,h.return=a,M.sibling=h,a.child=M,h=a.child,h.memoizedState=vy(u),h.childLanes=_y(s,A,u),a.memoizedState=yy,gc(null,h)):(fo(a),Ty(a,M))}var H=s.memoizedState;if(H!==null&&(M=H.dehydrated,M!==null)){if(E)a.flags&256?(fo(a),a.flags&=-257,a=Ey(s,a,u)):a.memoizedState!==null?(ho(),a.child=s.child,a.flags|=128,a=null):(ho(),M=h.fallback,_=a.mode,h=rh({mode:"visible",children:h.children},_),M=va(M,_,u,null),M.flags|=2,h.return=a,M.return=a,h.sibling=M,a.child=h,Aa(a,s.child,null,u),h=a.child,h.memoizedState=vy(u),h.childLanes=_y(s,A,u),a.memoizedState=yy,a=gc(null,h));else if(fo(a),tv(M)){if(A=M.nextSibling&&M.nextSibling.dataset,A)var Q=A.dgst;A=Q,h=Error(i(419)),h.stack="",h.digest=A,rc({value:h,source:null,stack:null}),a=Ey(s,a,u)}else if(Tn||El(s,a,u,!1),A=(u&s.childLanes)!==0,Tn||A){if(A=Dt,A!==null&&(h=Zn(A,u),h!==0&&h!==H.retryLane))throw H.retryLane=h,ya(s,h),Mi(A,s,h),my;ev(M)||hh(),a=Ey(s,a,u)}else ev(M)?(a.flags|=192,a.child=s.child,a=null):(s=H.treeContext,Bt=hr(M.nextSibling),Bn=a,lt=!0,so=null,fr=!1,s!==null&&YE(a,s),a=Ty(a,h.children),a.flags|=4096);return a}return _?(ho(),M=h.fallback,_=a.mode,H=s.child,Q=H.sibling,h=ms(H,{mode:"hidden",children:h.children}),h.subtreeFlags=H.subtreeFlags&65011712,Q!==null?M=ms(Q,M):(M=va(M,_,u,null),M.flags|=2),M.return=a,h.return=a,h.sibling=M,a.child=h,gc(null,h),h=a.child,M=s.child.memoizedState,M===null?M=vy(u):(_=M.cachePool,_!==null?(H=vn._currentValue,_=_.parent!==H?{parent:H,pool:H}:_):_=eS(),M={baseLanes:M.baseLanes|u,cachePool:_}),h.memoizedState=M,h.childLanes=_y(s,A,u),a.memoizedState=yy,gc(s.child,h)):(fo(a),u=s.child,s=u.sibling,u=ms(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(A=a.deletions,A===null?(a.deletions=[s],a.flags|=16):A.push(s)),a.child=u,a.memoizedState=null,u)}function Ty(s,a){return a=rh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function rh(s,a){return s=Hi(22,s,null,a),s.lanes=0,s}function Ey(s,a,u){return Aa(a,s.child,null,u),s=Ty(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function hb(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Lg(s.return,a,u)}function Sy(s,a,u,h,_,E){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:_,treeForkCount:E}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=h,A.tail=u,A.tailMode=_,A.treeForkCount=E)}function pb(s,a,u){var h=a.pendingProps,_=h.revealOrder,E=h.tail;h=h.children;var A=dn.current,M=(A&2)!==0;if(M?(A=A&1|2,a.flags|=128):A&=1,pe(dn,A),zn(s,a,h,u),h=lt?ic:0,!M&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hb(s,u,a);else if(s.tag===19)hb(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)s=u.alternate,s!==null&&$d(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),Sy(a,!1,_,u,E,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(s=_.alternate,s!==null&&$d(s)===null){a.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Sy(a,!0,u,null,E,h);break;case"together":Sy(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Es(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),go|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(El(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function by(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Ud(s)))}function G2(s,a,u){switch(a.tag){case 3:Be(a,a.stateNode.containerInfo),ao(a,vn,s.memoizedState.cache),_a();break;case 27:case 5:Nn(a);break;case 4:Be(a,a.stateNode.containerInfo);break;case 10:ao(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Yg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(fo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?db(s,a,u):(fo(a),s=Es(s,a,u),s!==null?s.sibling:null);fo(a);break;case 19:var _=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(El(s,a,u,!1),h=(u&a.childLanes)!==0),_){if(h)return pb(s,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),pe(dn,dn.current),h)break;return null;case 22:return a.lanes=0,ob(s,a,u,a.pendingProps);case 24:ao(a,vn,s.memoizedState.cache)}return Es(s,a,u)}function mb(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)Tn=!0;else{if(!by(s,u)&&(a.flags&128)===0)return Tn=!1,G2(s,a,u);Tn=(s.flags&131072)!==0}else Tn=!1,lt&&(a.flags&1048576)!==0&&KE(a,ic,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=ba(a.elementType),a.type=s,typeof s=="function")Ig(s)?(h=xa(s,h),a.tag=1,a=cb(null,a,s,h,u)):(a.tag=0,a=gy(null,a,s,h,u));else{if(s!=null){var _=s.$$typeof;if(_===$){a.tag=11,a=ib(null,a,s,h,u);break e}else if(_===I){a.tag=14,a=rb(null,a,s,h,u);break e}}throw a=xe(s)||s,Error(i(306,a,""))}}return a;case 0:return gy(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,_=xa(h,a.pendingProps),cb(s,a,h,_,u);case 3:e:{if(Be(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var E=a.memoizedState;_=E.element,Gg(s,a),fc(a,h,null,u);var A=a.memoizedState;if(h=A.cache,ao(a,vn,h),h!==E.cache&&Og(a,[vn],u,!0),cc(),h=A.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:A.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=fb(s,a,h,u);break e}else if(h!==_){_=lr(Error(i(424)),a),rc(_),a=fb(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bt=hr(s.firstChild),Bn=a,lt=!0,so=null,fr=!0,u=oS(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(_a(),h===_){a=Es(s,a,u);break e}zn(s,a,h,u)}a=a.child}return a;case 26:return ih(s,a),s===null?(u=Cw(a.type,null,a.pendingProps,null))?a.memoizedState=u:lt||(u=a.type,s=a.pendingProps,h=Th(Ee.current).createElement(u),h[Ut]=a,h[fn]=s,Gn(h,u,s),Kt(h),a.stateNode=h):a.memoizedState=Cw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Nn(a),s===null&&lt&&(h=a.stateNode=bw(a.type,a.pendingProps,Ee.current),Bn=a,fr=!0,_=Bt,Eo(a.type)?(nv=_,Bt=hr(h.firstChild)):Bt=_),zn(s,a,a.pendingProps.children,u),ih(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&lt&&((_=h=Bt)&&(h=_V(h,a.type,a.pendingProps,fr),h!==null?(a.stateNode=h,Bn=a,Bt=hr(h.firstChild),fr=!1,_=!0):_=!1),_||oo(a)),Nn(a),_=a.type,E=a.pendingProps,A=s!==null?s.memoizedProps:null,h=E.children,Xy(_,E)?h=null:A!==null&&Xy(_,A)&&(a.flags|=32),a.memoizedState!==null&&(_=Wg(s,a,k2,null,null,u),Pc._currentValue=_),ih(s,a),zn(s,a,h,u),a.child;case 6:return s===null&&lt&&((s=u=Bt)&&(u=TV(u,a.pendingProps,fr),u!==null?(a.stateNode=u,Bn=a,Bt=null,s=!0):s=!1),s||oo(a)),null;case 13:return db(s,a,u);case 4:return Be(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Aa(a,null,h,u):zn(s,a,h,u),a.child;case 11:return ib(s,a,a.type,a.pendingProps,u);case 7:return zn(s,a,a.pendingProps,u),a.child;case 8:return zn(s,a,a.pendingProps.children,u),a.child;case 12:return zn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,ao(a,a.type,h.value),zn(s,a,h.children,u),a.child;case 9:return _=a.type._context,h=a.pendingProps.children,Ea(a),_=qn(_),h=h(_),a.flags|=1,zn(s,a,h,u),a.child;case 14:return rb(s,a,a.type,a.pendingProps,u);case 15:return sb(s,a,a.type,a.pendingProps,u);case 19:return pb(s,a,u);case 31:return z2(s,a,u);case 22:return ob(s,a,u,a.pendingProps);case 24:return Ea(a),h=qn(vn),s===null?(_=Bg(),_===null&&(_=Dt,E=Ug(),_.pooledCache=E,E.refCount++,E!==null&&(_.pooledCacheLanes|=u),_=E),a.memoizedState={parent:h,cache:_},zg(a),ao(a,vn,_)):((s.lanes&u)!==0&&(Gg(s,a),fc(a,null,null,u),cc()),_=s.memoizedState,E=a.memoizedState,_.parent!==h?(_={parent:h,cache:h},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),ao(a,vn,h)):(h=E.cache,ao(a,vn,h),h!==_.cache&&Og(a,[vn],u,!0))),zn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ss(s){s.flags|=4}function wy(s,a,u,h,_){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(zb())s.flags|=8192;else throw wa=zd,qg}else s.flags&=-16777217}function gb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Pw(a))if(zb())s.flags|=8192;else throw wa=zd,qg}function sh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?wt():536870912,s.lanes|=a,Ml|=a)}function yc(s,a){if(!lt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function qt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags&65011712,h|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,h|=_.subtreeFlags,h|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function H2(s,a,u){var h=a.pendingProps;switch(Dg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(a),null;case 1:return qt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),vs(vn),Tt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Tl(a)?Ss(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,kg())),qt(a),null;case 26:var _=a.type,E=a.memoizedState;return s===null?(Ss(a),E!==null?(qt(a),gb(a,E)):(qt(a),wy(a,_,null,h,u))):E?E!==s.memoizedState?(Ss(a),qt(a),gb(a,E)):(qt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ss(a),qt(a),wy(a,_,s,h,u)),null;case 27:if(fi(a),u=Ee.current,_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return qt(a),null}s=ne.current,Tl(a)?JE(a):(s=bw(_,h,u),a.stateNode=s,Ss(a))}return qt(a),null;case 5:if(fi(a),_=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return qt(a),null}if(E=ne.current,Tl(a))JE(a);else{var A=Th(Ee.current);switch(E){case 1:E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":E=A.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":E=A.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":E=A.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof h.is=="string"?A.createElement("select",{is:h.is}):A.createElement("select"),h.multiple?E.multiple=!0:h.size&&(E.size=h.size);break;default:E=typeof h.is=="string"?A.createElement(_,{is:h.is}):A.createElement(_)}}E[Ut]=a,E[fn]=h;e:for(A=a.child;A!==null;){if(A.tag===5||A.tag===6)E.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===a)break e;for(;A.sibling===null;){if(A.return===null||A.return===a)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a.stateNode=E;e:switch(Gn(E,_,h),_){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ss(a)}}return qt(a),wy(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ss(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Ee.current,Tl(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,_=Bn,_!==null)switch(_.tag){case 27:case 5:h=_.memoizedProps}s[Ut]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||dw(s.nodeValue,u)),s||oo(a,!0)}else s=Th(s).createTextNode(h),s[Ut]=a,a.stateNode=s}return qt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Tl(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ut]=a}else _a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),s=!1}else u=kg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?($i(a),a):($i(a),null);if((a.flags&128)!==0)throw Error(i(558))}return qt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Tl(a),h!==null&&h.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Ut]=a}else _a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),_=!1}else _=kg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?($i(a),a):($i(a),null)}return $i(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,_=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(_=h.alternate.memoizedState.cachePool.pool),E=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==_&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),sh(a,a.updateQueue),qt(a),null);case 4:return Tt(),s===null&&$y(a.stateNode.containerInfo),qt(a),null;case 10:return vs(a.type),qt(a),null;case 19:if(Z(dn),h=a.memoizedState,h===null)return qt(a),null;if(_=(a.flags&128)!==0,E=h.rendering,E===null)if(_)yc(h,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(E=$d(s),E!==null){for(a.flags|=128,yc(h,!1),s=E.updateQueue,a.updateQueue=s,sh(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)HE(u,s),u=u.sibling;return pe(dn,dn.current&1|2),lt&&gs(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&Re()>ch&&(a.flags|=128,_=!0,yc(h,!1),a.lanes=4194304)}else{if(!_)if(s=$d(E),s!==null){if(a.flags|=128,_=!0,s=s.updateQueue,a.updateQueue=s,sh(a,s),yc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!E.alternate&&!lt)return qt(a),null}else 2*Re()-h.renderingStartTime>ch&&u!==536870912&&(a.flags|=128,_=!0,yc(h,!1),a.lanes=4194304);h.isBackwards?(E.sibling=a.child,a.child=E):(s=h.last,s!==null?s.sibling=E:a.child=E,h.last=E)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Re(),s.sibling=null,u=dn.current,pe(dn,_?u&1|2:u&1),lt&&gs(a,h.treeForkCount),s):(qt(a),null);case 22:case 23:return $i(a),Kg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(qt(a),a.subtreeFlags&6&&(a.flags|=8192)):qt(a),u=a.updateQueue,u!==null&&sh(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&Z(Sa),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),vs(vn),qt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function j2(s,a){switch(Dg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return vs(vn),Tt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return fi(a),null;case 31:if(a.memoizedState!==null){if($i(a),a.alternate===null)throw Error(i(340));_a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if($i(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));_a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Z(dn),null;case 4:return Tt(),null;case 10:return vs(a.type),null;case 22:case 23:return $i(a),Kg(),s!==null&&Z(Sa),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return vs(vn),null;case 25:return null;default:return null}}function yb(s,a){switch(Dg(a),a.tag){case 3:vs(vn),Tt();break;case 26:case 27:case 5:fi(a);break;case 4:Tt();break;case 31:a.memoizedState!==null&&$i(a);break;case 13:$i(a);break;case 19:Z(dn);break;case 10:vs(a.type);break;case 22:case 23:$i(a),Kg(),s!==null&&Z(Sa);break;case 24:vs(vn)}}function vc(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var _=h.next;u=_;do{if((u.tag&s)===s){h=void 0;var E=u.create,A=u.inst;h=E(),A.destroy=h}u=u.next}while(u!==_)}}catch(M){Ct(a,a.return,M)}}function po(s,a,u){try{var h=a.updateQueue,_=h!==null?h.lastEffect:null;if(_!==null){var E=_.next;h=E;do{if((h.tag&s)===s){var A=h.inst,M=A.destroy;if(M!==void 0){A.destroy=void 0,_=a;var H=u,Q=M;try{Q()}catch(oe){Ct(_,H,oe)}}}h=h.next}while(h!==E)}}catch(oe){Ct(a,a.return,oe)}}function vb(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{lS(a,u)}catch(h){Ct(s,s.return,h)}}}function _b(s,a,u){u.props=xa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Ct(s,a,h)}}function _c(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(_){Ct(s,a,_)}}function Wr(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(_){Ct(s,a,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){Ct(s,a,_)}else u.current=null}function Tb(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(_){Ct(s,s.return,_)}}function Ay(s,a,u){try{var h=s.stateNode;hV(h,s.type,u,a),h[fn]=a}catch(_){Ct(s,s.return,_)}}function Eb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Eo(s.type)||s.tag===4}function Cy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Eb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Eo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xy(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Dn));else if(h!==4&&(h===27&&Eo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(xy(s,a,u),s=s.sibling;s!==null;)xy(s,a,u),s=s.sibling}function oh(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&Eo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(oh(s,a,u),s=s.sibling;s!==null;)oh(s,a,u),s=s.sibling}function Sb(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Gn(a,h,u),a[Ut]=s,a[fn]=u}catch(E){Ct(s,s.return,E)}}var bs=!1,En=!1,Iy=!1,bb=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function $2(s,a){if(s=s.containerInfo,Jy=xh,s=VE(s),Eg(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var _=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var A=0,M=-1,H=-1,Q=0,oe=0,ue=s,te=null;t:for(;;){for(var ie;ue!==u||_!==0&&ue.nodeType!==3||(M=A+_),ue!==E||h!==0&&ue.nodeType!==3||(H=A+h),ue.nodeType===3&&(A+=ue.nodeValue.length),(ie=ue.firstChild)!==null;)te=ue,ue=ie;for(;;){if(ue===s)break t;if(te===u&&++Q===_&&(M=A),te===E&&++oe===h&&(H=A),(ie=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ie}u=M===-1||H===-1?null:{start:M,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(Wy={focusedElem:s,selectionRange:u},xh=!1,Vn=a;Vn!==null;)if(a=Vn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Vn=s;else for(;Vn!==null;){switch(a=Vn,E=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=a,_=E.memoizedProps,E=E.memoizedState,h=u.stateNode;try{var Ae=xa(u.type,_);s=h.getSnapshotBeforeUpdate(Ae,E),h.__reactInternalSnapshotBeforeUpdate=s}catch(Le){Ct(u,u.return,Le)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)Zy(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zy(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Vn=s;break}Vn=a.return}}function wb(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:As(s,u),h&4&&vc(5,u);break;case 1:if(As(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(A){Ct(u,u.return,A)}else{var _=xa(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(_,a,s.__reactInternalSnapshotBeforeUpdate)}catch(A){Ct(u,u.return,A)}}h&64&&vb(u),h&512&&_c(u,u.return);break;case 3:if(As(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{lS(s,a)}catch(A){Ct(u,u.return,A)}}break;case 27:a===null&&h&4&&Sb(u);case 26:case 5:As(s,u),a===null&&h&4&&Tb(u),h&512&&_c(u,u.return);break;case 12:As(s,u);break;case 31:As(s,u),h&4&&xb(s,u);break;case 13:As(s,u),h&4&&Ib(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=tV.bind(null,u),EV(s,u))));break;case 22:if(h=u.memoizedState!==null||bs,!h){a=a!==null&&a.memoizedState!==null||En,_=bs;var E=En;bs=h,(En=a)&&!E?Cs(s,u,(u.subtreeFlags&8772)!==0):As(s,u),bs=_,En=E}break;case 30:break;default:As(s,u)}}function Ab(s){var a=s.alternate;a!==null&&(s.alternate=null,Ab(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ir(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Yt=null,Ri=!1;function ws(s,a,u){for(u=u.child;u!==null;)Cb(s,a,u),u=u.sibling}function Cb(s,a,u){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(hi,u)}catch{}switch(u.tag){case 26:En||Wr(u,a),ws(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:En||Wr(u,a);var h=Yt,_=Ri;Eo(u.type)&&(Yt=u.stateNode,Ri=!1),ws(s,a,u),Ic(u.stateNode),Yt=h,Ri=_;break;case 5:En||Wr(u,a);case 6:if(h=Yt,_=Ri,Yt=null,ws(s,a,u),Yt=h,Ri=_,Yt!==null)if(Ri)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(u.stateNode)}catch(E){Ct(u,a,E)}else try{Yt.removeChild(u.stateNode)}catch(E){Ct(u,a,E)}break;case 18:Yt!==null&&(Ri?(s=Yt,vw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ql(s)):vw(Yt,u.stateNode));break;case 4:h=Yt,_=Ri,Yt=u.stateNode.containerInfo,Ri=!0,ws(s,a,u),Yt=h,Ri=_;break;case 0:case 11:case 14:case 15:po(2,u,a),En||po(4,u,a),ws(s,a,u);break;case 1:En||(Wr(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&_b(u,a,h)),ws(s,a,u);break;case 21:ws(s,a,u);break;case 22:En=(h=En)||u.memoizedState!==null,ws(s,a,u),En=h;break;default:ws(s,a,u)}}function xb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ql(s)}catch(u){Ct(a,a.return,u)}}}function Ib(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ql(s)}catch(u){Ct(a,a.return,u)}}function K2(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new bb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new bb),a;default:throw Error(i(435,s.tag))}}function ah(s,a){var u=K2(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var _=nV.bind(null,s,h);h.then(_,_)}})}function Ni(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var _=u[h],E=s,A=a,M=A;e:for(;M!==null;){switch(M.tag){case 27:if(Eo(M.type)){Yt=M.stateNode,Ri=!1;break e}break;case 5:Yt=M.stateNode,Ri=!1;break e;case 3:case 4:Yt=M.stateNode.containerInfo,Ri=!0;break e}M=M.return}if(Yt===null)throw Error(i(160));Cb(E,A,_),Yt=null,Ri=!1,E=_.alternate,E!==null&&(E.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Rb(a,s),a=a.sibling}var Ir=null;function Rb(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ni(a,s),Pi(s),h&4&&(po(3,s,s.return),vc(3,s),po(5,s,s.return));break;case 1:Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),h&64&&bs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var _=Ir;if(Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),h&4){var E=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(h){case"title":E=_.getElementsByTagName("title")[0],(!E||E[nr]||E[Ut]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=_.createElement(h),_.head.insertBefore(E,_.querySelector("head > title"))),Gn(E,h,u),E[Ut]=s,Kt(E),h=E;break e;case"link":var A=Rw("link","href",_).get(h+(u.href||""));if(A){for(var M=0;M<A.length;M++)if(E=A[M],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(M,1);break t}}E=_.createElement(h),Gn(E,h,u),_.head.appendChild(E);break;case"meta":if(A=Rw("meta","content",_).get(h+(u.content||""))){for(M=0;M<A.length;M++)if(E=A[M],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(M,1);break t}}E=_.createElement(h),Gn(E,h,u),_.head.appendChild(E);break;default:throw Error(i(468,h))}E[Ut]=s,Kt(E),h=E}s.stateNode=h}else Nw(_,s.type,s.stateNode);else s.stateNode=Iw(_,h,s.memoizedProps);else E!==h?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,h===null?Nw(_,s.type,s.stateNode):Iw(_,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Ay(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),u!==null&&h&4&&Ay(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ni(a,s),Pi(s),h&512&&(En||u===null||Wr(u,u.return)),s.flags&32){_=s.stateNode;try{or(_,"")}catch(Ae){Ct(s,s.return,Ae)}}h&4&&s.stateNode!=null&&(_=s.memoizedProps,Ay(s,_,u!==null?u.memoizedProps:_)),h&1024&&(Iy=!0);break;case 6:if(Ni(a,s),Pi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Ae){Ct(s,s.return,Ae)}}break;case 3:if(bh=null,_=Ir,Ir=Eh(a.containerInfo),Ni(a,s),Ir=_,Pi(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{ql(a.containerInfo)}catch(Ae){Ct(s,s.return,Ae)}Iy&&(Iy=!1,Nb(s));break;case 4:h=Ir,Ir=Eh(s.stateNode.containerInfo),Ni(a,s),Pi(s),Ir=h;break;case 12:Ni(a,s),Pi(s);break;case 31:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ah(s,h)));break;case 13:Ni(a,s),Pi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(uh=Re()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ah(s,h)));break;case 22:_=s.memoizedState!==null;var H=u!==null&&u.memoizedState!==null,Q=bs,oe=En;if(bs=Q||_,En=oe||H,Ni(a,s),En=oe,bs=Q,Pi(s),h&8192)e:for(a=s.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||H||bs||En||Ia(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){H=u=a;try{if(E=H.stateNode,_)A=E.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{M=H.stateNode;var ue=H.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;M.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ae){Ct(H,H.return,Ae)}}}else if(a.tag===6){if(u===null){H=a;try{H.stateNode.nodeValue=_?"":H.memoizedProps}catch(Ae){Ct(H,H.return,Ae)}}}else if(a.tag===18){if(u===null){H=a;try{var ie=H.stateNode;_?_w(ie,!0):_w(H.stateNode,!1)}catch(Ae){Ct(H,H.return,Ae)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,ah(s,u))));break;case 19:Ni(a,s),Pi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ah(s,h)));break;case 30:break;case 21:break;default:Ni(a,s),Pi(s)}}function Pi(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(Eb(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,E=Cy(s);oh(s,E,_);break;case 5:var A=u.stateNode;u.flags&32&&(or(A,""),u.flags&=-33);var M=Cy(s);oh(s,M,A);break;case 3:case 4:var H=u.stateNode.containerInfo,Q=Cy(s);xy(s,Q,H);break;default:throw Error(i(161))}}catch(oe){Ct(s,s.return,oe)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Nb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Nb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function As(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)wb(s,a.alternate,a),a=a.sibling}function Ia(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:po(4,a,a.return),Ia(a);break;case 1:Wr(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&_b(a,a.return,u),Ia(a);break;case 27:Ic(a.stateNode);case 26:case 5:Wr(a,a.return),Ia(a);break;case 22:a.memoizedState===null&&Ia(a);break;case 30:Ia(a);break;default:Ia(a)}s=s.sibling}}function Cs(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,_=s,E=a,A=E.flags;switch(E.tag){case 0:case 11:case 15:Cs(_,E,u),vc(4,E);break;case 1:if(Cs(_,E,u),h=E,_=h.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Q){Ct(h,h.return,Q)}if(h=E,_=h.updateQueue,_!==null){var M=h.stateNode;try{var H=_.shared.hiddenCallbacks;if(H!==null)for(_.shared.hiddenCallbacks=null,_=0;_<H.length;_++)aS(H[_],M)}catch(Q){Ct(h,h.return,Q)}}u&&A&64&&vb(E),_c(E,E.return);break;case 27:Sb(E);case 26:case 5:Cs(_,E,u),u&&h===null&&A&4&&Tb(E),_c(E,E.return);break;case 12:Cs(_,E,u);break;case 31:Cs(_,E,u),u&&A&4&&xb(_,E);break;case 13:Cs(_,E,u),u&&A&4&&Ib(_,E);break;case 22:E.memoizedState===null&&Cs(_,E,u),_c(E,E.return);break;case 30:break;default:Cs(_,E,u)}a=a.sibling}}function Ry(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&sc(u))}function Ny(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&sc(s))}function Rr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pb(s,a,u,h),a=a.sibling}function Pb(s,a,u,h){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Rr(s,a,u,h),_&2048&&vc(9,a);break;case 1:Rr(s,a,u,h);break;case 3:Rr(s,a,u,h),_&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&sc(s)));break;case 12:if(_&2048){Rr(s,a,u,h),s=a.stateNode;try{var E=a.memoizedProps,A=E.id,M=E.onPostCommit;typeof M=="function"&&M(A,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(H){Ct(a,a.return,H)}}else Rr(s,a,u,h);break;case 31:Rr(s,a,u,h);break;case 13:Rr(s,a,u,h);break;case 23:break;case 22:E=a.stateNode,A=a.alternate,a.memoizedState!==null?E._visibility&2?Rr(s,a,u,h):Tc(s,a):E._visibility&2?Rr(s,a,u,h):(E._visibility|=2,Nl(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),_&2048&&Ry(A,a);break;case 24:Rr(s,a,u,h),_&2048&&Ny(a.alternate,a);break;default:Rr(s,a,u,h)}}function Nl(s,a,u,h,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var E=s,A=a,M=u,H=h,Q=A.flags;switch(A.tag){case 0:case 11:case 15:Nl(E,A,M,H,_),vc(8,A);break;case 23:break;case 22:var oe=A.stateNode;A.memoizedState!==null?oe._visibility&2?Nl(E,A,M,H,_):Tc(E,A):(oe._visibility|=2,Nl(E,A,M,H,_)),_&&Q&2048&&Ry(A.alternate,A);break;case 24:Nl(E,A,M,H,_),_&&Q&2048&&Ny(A.alternate,A);break;default:Nl(E,A,M,H,_)}a=a.sibling}}function Tc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,_=h.flags;switch(h.tag){case 22:Tc(u,h),_&2048&&Ry(h.alternate,h);break;case 24:Tc(u,h),_&2048&&Ny(h.alternate,h);break;default:Tc(u,h)}a=a.sibling}}var Ec=8192;function Pl(s,a,u){if(s.subtreeFlags&Ec)for(s=s.child;s!==null;)Db(s,a,u),s=s.sibling}function Db(s,a,u){switch(s.tag){case 26:Pl(s,a,u),s.flags&Ec&&s.memoizedState!==null&&MV(u,Ir,s.memoizedState,s.memoizedProps);break;case 5:Pl(s,a,u);break;case 3:case 4:var h=Ir;Ir=Eh(s.stateNode.containerInfo),Pl(s,a,u),Ir=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Ec,Ec=16777216,Pl(s,a,u),Ec=h):Pl(s,a,u));break;default:Pl(s,a,u)}}function Mb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Sc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Vb(h,s)}Mb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kb(s),s=s.sibling}function kb(s){switch(s.tag){case 0:case 11:case 15:Sc(s),s.flags&2048&&po(9,s,s.return);break;case 3:Sc(s);break;case 12:Sc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,lh(s)):Sc(s);break;default:Sc(s)}}function lh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Vn=h,Vb(h,s)}Mb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:po(8,a,a.return),lh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,lh(a));break;default:lh(a)}s=s.sibling}}function Vb(s,a){for(;Vn!==null;){var u=Vn;switch(u.tag){case 0:case 11:case 15:po(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:sc(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Vn=h;else e:for(u=s;Vn!==null;){h=Vn;var _=h.sibling,E=h.return;if(Ab(h),h===u){Vn=null;break e}if(_!==null){_.return=E,Vn=_;break e}Vn=E}}}var Y2={getCacheForType:function(s){var a=qn(vn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return qn(vn).controller.signal}},J2=typeof WeakMap=="function"?WeakMap:Map,vt=0,Dt=null,tt=null,rt=0,At=0,Ki=null,mo=!1,Dl=!1,Py=!1,xs=0,sn=0,go=0,Ra=0,Dy=0,Yi=0,Ml=0,bc=null,Di=null,My=!1,uh=0,Lb=0,ch=1/0,fh=null,yo=null,xn=0,vo=null,kl=null,Is=0,ky=0,Vy=null,Ob=null,wc=0,Ly=null;function Ji(){return(vt&2)!==0&&rt!==0?rt&-rt:ee.T!==null?zy():pi()}function Ub(){if(Yi===0)if((rt&536870912)===0||lt){var s=We;We<<=1,(We&3932160)===0&&(We=262144),Yi=s}else Yi=536870912;return s=ji.current,s!==null&&(s.flags|=32),Yi}function Mi(s,a,u){(s===Dt&&(At===2||At===9)||s.cancelPendingCommit!==null)&&(Vl(s,0),_o(s,rt,Yi,!1)),xt(s,u),((vt&2)===0||s!==Dt)&&(s===Dt&&((vt&2)===0&&(Ra|=u),sn===4&&_o(s,rt,Yi,!1)),Xr(s))}function Fb(s,a,u){if((vt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||ve(s,a),_=h?Q2(s,a):Uy(s,a,!0),E=h;do{if(_===0){Dl&&!h&&_o(s,a,0,!1);break}else{if(u=s.current.alternate,E&&!W2(u)){_=Uy(s,a,!1),E=!1;continue}if(_===2){if(E=a,s.errorRecoveryDisabledLanes&E)var A=0;else A=s.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){a=A;e:{var M=s;_=bc;var H=M.current.memoizedState.isDehydrated;if(H&&(Vl(M,A).flags|=256),A=Uy(M,A,!1),A!==2){if(Py&&!H){M.errorRecoveryDisabledLanes|=E,Ra|=E,_=4;break e}E=Di,Di=_,E!==null&&(Di===null?Di=E:Di.push.apply(Di,E))}_=A}if(E=!1,_!==2)continue}}if(_===1){Vl(s,0),_o(s,a,0,!0);break}e:{switch(h=s,E=_,E){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:_o(h,a,Yi,!mo);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(_=uh+300-Re(),10<_)){if(_o(h,a,Yi,!mo),se(h,0,!0)!==0)break e;Is=a,h.timeoutHandle=gw(Bb.bind(null,h,u,Di,fh,My,a,Yi,Ra,Ml,mo,E,"Throttled",-0,0),_);break e}Bb(h,u,Di,fh,My,a,Yi,Ra,Ml,mo,E,null,-0,0)}}break}while(!0);Xr(s)}function Bb(s,a,u,h,_,E,A,M,H,Q,oe,ue,te,ie){if(s.timeoutHandle=-1,ue=a.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dn},Db(a,E,ue);var Ae=(E&62914560)===E?uh-Re():(E&4194048)===E?Lb-Re():0;if(Ae=kV(ue,Ae),Ae!==null){Is=E,s.cancelPendingCommit=Ae(Yb.bind(null,s,a,E,u,h,_,A,M,H,oe,ue,null,te,ie)),_o(s,E,A,!Q);return}}Yb(s,a,E,u,h,_,A,M,H)}function W2(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var _=u[h],E=_.getSnapshot;_=_.value;try{if(!Gi(E(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _o(s,a,u,h){a&=~Dy,a&=~Ra,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var _=a;0<_;){var E=31-be(_),A=1<<E;h[E]=-1,_&=~A}u!==0&&Cn(s,u,a)}function dh(){return(vt&6)===0?(Ac(0),!1):!0}function Oy(){if(tt!==null){if(At===0)var s=tt.return;else s=tt,ys=Ta=null,Zg(s),Al=null,ac=0,s=tt;for(;s!==null;)yb(s.alternate,s),s=s.return;tt=null}}function Vl(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,gV(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Is=0,Oy(),Dt=s,tt=u=ms(s.current,null),rt=a,At=0,Ki=null,mo=!1,Dl=ve(s,a),Py=!1,Ml=Yi=Dy=Ra=go=sn=0,Di=bc=null,My=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var _=31-be(h),E=1<<_;a|=s[_],h&=~E}return xs=a,Md(),u}function qb(s,a){$e=null,ee.H=mc,a===wl||a===qd?(a=iS(),At=3):a===qg?(a=iS(),At=4):At=a===my?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ki=a,tt===null&&(sn=1,th(s,lr(a,s.current)))}function zb(){var s=ji.current;return s===null?!0:(rt&4194048)===rt?dr===null:(rt&62914560)===rt||(rt&536870912)!==0?s===dr:!1}function Gb(){var s=ee.H;return ee.H=mc,s===null?mc:s}function Hb(){var s=ee.A;return ee.A=Y2,s}function hh(){sn=4,mo||(rt&4194048)!==rt&&ji.current!==null||(Dl=!0),(go&134217727)===0&&(Ra&134217727)===0||Dt===null||_o(Dt,rt,Yi,!1)}function Uy(s,a,u){var h=vt;vt|=2;var _=Gb(),E=Hb();(Dt!==s||rt!==a)&&(fh=null,Vl(s,a)),a=!1;var A=sn;e:do try{if(At!==0&&tt!==null){var M=tt,H=Ki;switch(At){case 8:Oy(),A=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(a=!0);var Q=At;if(At=0,Ki=null,Ll(s,M,H,Q),u&&Dl){A=0;break e}break;default:Q=At,At=0,Ki=null,Ll(s,M,H,Q)}}X2(),A=sn;break}catch(oe){qb(s,oe)}while(!0);return a&&s.shellSuspendCounter++,ys=Ta=null,vt=h,ee.H=_,ee.A=E,tt===null&&(Dt=null,rt=0,Md()),A}function X2(){for(;tt!==null;)jb(tt)}function Q2(s,a){var u=vt;vt|=2;var h=Gb(),_=Hb();Dt!==s||rt!==a?(fh=null,ch=Re()+500,Vl(s,a)):Dl=ve(s,a);e:do try{if(At!==0&&tt!==null){a=tt;var E=Ki;t:switch(At){case 1:At=0,Ki=null,Ll(s,a,E,1);break;case 2:case 9:if(tS(E)){At=0,Ki=null,$b(a);break}a=function(){At!==2&&At!==9||Dt!==s||(At=7),Xr(s)},E.then(a,a);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:tS(E)?(At=0,Ki=null,$b(a)):(At=0,Ki=null,Ll(s,a,E,7));break;case 5:var A=null;switch(tt.tag){case 26:A=tt.memoizedState;case 5:case 27:var M=tt;if(A?Pw(A):M.stateNode.complete){At=0,Ki=null;var H=M.sibling;if(H!==null)tt=H;else{var Q=M.return;Q!==null?(tt=Q,ph(Q)):tt=null}break t}}At=0,Ki=null,Ll(s,a,E,5);break;case 6:At=0,Ki=null,Ll(s,a,E,6);break;case 8:Oy(),sn=6;break e;default:throw Error(i(462))}}Z2();break}catch(oe){qb(s,oe)}while(!0);return ys=Ta=null,ee.H=h,ee.A=_,vt=u,tt!==null?0:(Dt=null,rt=0,Md(),sn)}function Z2(){for(;tt!==null&&!Xn();)jb(tt)}function jb(s){var a=mb(s.alternate,s,xs);s.memoizedProps=s.pendingProps,a===null?ph(s):tt=a}function $b(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=ub(u,a,a.pendingProps,a.type,void 0,rt);break;case 11:a=ub(u,a,a.pendingProps,a.type.render,a.ref,rt);break;case 5:Zg(a);default:yb(u,a),a=tt=HE(a,xs),a=mb(u,a,xs)}s.memoizedProps=s.pendingProps,a===null?ph(s):tt=a}function Ll(s,a,u,h){ys=Ta=null,Zg(a),Al=null,ac=0;var _=a.return;try{if(q2(s,_,a,u,rt)){sn=1,th(s,lr(u,s.current)),tt=null;return}}catch(E){if(_!==null)throw tt=_,E;sn=1,th(s,lr(u,s.current)),tt=null;return}a.flags&32768?(lt||h===1?s=!0:Dl||(rt&536870912)!==0?s=!1:(mo=s=!0,(h===2||h===9||h===3||h===6)&&(h=ji.current,h!==null&&h.tag===13&&(h.flags|=16384))),Kb(a,s)):ph(a)}function ph(s){var a=s;do{if((a.flags&32768)!==0){Kb(a,mo);return}s=a.return;var u=H2(a.alternate,a,xs);if(u!==null){tt=u;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=s}while(a!==null);sn===0&&(sn=5)}function Kb(s,a){do{var u=j2(s.alternate,s);if(u!==null){u.flags&=32767,tt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){tt=s;return}tt=s=u}while(s!==null);sn=6,tt=null}function Yb(s,a,u,h,_,E,A,M,H){s.cancelPendingCommit=null;do mh();while(xn!==0);if((vt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(E=a.lanes|a.childLanes,E|=Cg,dt(s,u,E,A,M,H),s===Dt&&(tt=Dt=null,rt=0),kl=a,vo=s,Is=u,ky=E,Vy=_,Ob=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,iV($t,function(){return Zb(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,_=ae.p,ae.p=2,A=vt,vt|=4;try{$2(s,a,u)}finally{vt=A,ae.p=_,ee.T=h}}xn=1,Jb(),Wb(),Xb()}}function Jb(){if(xn===1){xn=0;var s=vo,a=kl,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=ae.p;ae.p=2;var _=vt;vt|=4;try{Rb(a,s);var E=Wy,A=VE(s.containerInfo),M=E.focusedElem,H=E.selectionRange;if(A!==M&&M&&M.ownerDocument&&kE(M.ownerDocument.documentElement,M)){if(H!==null&&Eg(M)){var Q=H.start,oe=H.end;if(oe===void 0&&(oe=Q),"selectionStart"in M)M.selectionStart=Q,M.selectionEnd=Math.min(oe,M.value.length);else{var ue=M.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ae=M.textContent.length,Le=Math.min(H.start,Ae),Nt=H.end===void 0?Le:Math.min(H.end,Ae);!ie.extend&&Le>Nt&&(A=Nt,Nt=Le,Le=A);var J=ME(M,Le),Y=ME(M,Nt);if(J&&Y&&(ie.rangeCount!==1||ie.anchorNode!==J.node||ie.anchorOffset!==J.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var X=ue.createRange();X.setStart(J.node,J.offset),ie.removeAllRanges(),Le>Nt?(ie.addRange(X),ie.extend(Y.node,Y.offset)):(X.setEnd(Y.node,Y.offset),ie.addRange(X))}}}}for(ue=[],ie=M;ie=ie.parentNode;)ie.nodeType===1&&ue.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ue.length;M++){var le=ue[M];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}xh=!!Jy,Wy=Jy=null}finally{vt=_,ae.p=h,ee.T=u}}s.current=a,xn=2}}function Wb(){if(xn===2){xn=0;var s=vo,a=kl,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=ae.p;ae.p=2;var _=vt;vt|=4;try{wb(s,a.alternate,a)}finally{vt=_,ae.p=h,ee.T=u}}xn=3}}function Xb(){if(xn===4||xn===3){xn=0,Qn();var s=vo,a=kl,u=Is,h=Ob;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?xn=5:(xn=0,kl=vo=null,Qb(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(yo=null),Fn(u),a=a.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(hi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,_=ae.p,ae.p=2,ee.T=null;try{for(var E=s.onRecoverableError,A=0;A<h.length;A++){var M=h[A];E(M.value,{componentStack:M.stack})}}finally{ee.T=a,ae.p=_}}(Is&3)!==0&&mh(),Xr(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===Ly?wc++:(wc=0,Ly=s):wc=0,Ac(0)}}function Qb(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,sc(a)))}function mh(){return Jb(),Wb(),Xb(),Zb()}function Zb(){if(xn!==5)return!1;var s=vo,a=ky;ky=0;var u=Fn(Is),h=ee.T,_=ae.p;try{ae.p=32>u?32:u,ee.T=null,u=Vy,Vy=null;var E=vo,A=Is;if(xn=0,kl=vo=null,Is=0,(vt&6)!==0)throw Error(i(331));var M=vt;if(vt|=4,kb(E.current),Pb(E,E.current,A,u),vt=M,Ac(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(hi,E)}catch{}return!0}finally{ae.p=_,ee.T=h,Qb(s,a)}}function ew(s,a,u){a=lr(u,a),a=py(s.stateNode,a,2),s=co(s,a,2),s!==null&&(xt(s,2),Xr(s))}function Ct(s,a,u){if(s.tag===3)ew(s,s,u);else for(;a!==null;){if(a.tag===3){ew(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(yo===null||!yo.has(h))){s=lr(u,s),u=tb(2),h=co(a,u,2),h!==null&&(nb(u,h,a,s),xt(h,2),Xr(h));break}}a=a.return}}function Fy(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new J2;var _=new Set;h.set(a,_)}else _=h.get(a),_===void 0&&(_=new Set,h.set(a,_));_.has(u)||(Py=!0,_.add(u),s=eV.bind(null,s,a,u),a.then(s,s))}function eV(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Dt===s&&(rt&u)===u&&(sn===4||sn===3&&(rt&62914560)===rt&&300>Re()-uh?(vt&2)===0&&Vl(s,0):Dy|=u,Ml===rt&&(Ml=0)),Xr(s)}function tw(s,a){a===0&&(a=wt()),s=ya(s,a),s!==null&&(xt(s,a),Xr(s))}function tV(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),tw(s,u)}function nV(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),tw(s,u)}function iV(s,a){return Wn(s,a)}var gh=null,Ol=null,By=!1,yh=!1,qy=!1,To=0;function Xr(s){s!==Ol&&s.next===null&&(Ol===null?gh=Ol=s:Ol=Ol.next=s),yh=!0,By||(By=!0,sV())}function Ac(s,a){if(!qy&&yh){qy=!0;do for(var u=!1,h=gh;h!==null;){if(s!==0){var _=h.pendingLanes;if(_===0)var E=0;else{var A=h.suspendedLanes,M=h.pingedLanes;E=(1<<31-be(42|s)+1)-1,E&=_&~(A&~M),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,sw(h,E))}else E=rt,E=se(h,h===Dt?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||ve(h,E)||(u=!0,sw(h,E));h=h.next}while(u);qy=!1}}function rV(){nw()}function nw(){yh=By=!1;var s=0;To!==0&&mV()&&(s=To);for(var a=Re(),u=null,h=gh;h!==null;){var _=h.next,E=iw(h,a);E===0?(h.next=null,u===null?gh=_:u.next=_,_===null&&(Ol=u)):(u=h,(s!==0||(E&3)!==0)&&(yh=!0)),h=_}xn!==0&&xn!==5||Ac(s),To!==0&&(To=0)}function iw(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,_=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var A=31-be(E),M=1<<A,H=_[A];H===-1?((M&u)===0||(M&h)!==0)&&(_[A]=Ke(M,a)):H<=a&&(s.expiredLanes|=M),E&=~M}if(a=Dt,u=rt,u=se(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(At===2||At===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ai(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ve(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&Ai(h),Fn(u)){case 2:case 8:u=Ot;break;case 32:u=$t;break;case 268435456:u=Sr;break;default:u=$t}return h=rw.bind(null,s),u=Wn(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&Ai(h),s.callbackPriority=2,s.callbackNode=null,2}function rw(s,a){if(xn!==0&&xn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(mh()&&s.callbackNode!==u)return null;var h=rt;return h=se(s,s===Dt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Fb(s,h,a),iw(s,Re()),s.callbackNode!=null&&s.callbackNode===u?rw.bind(null,s):null)}function sw(s,a){if(mh())return null;Fb(s,a,!0)}function sV(){yV(function(){(vt&6)!==0?Wn(Pe,rV):nw()})}function zy(){if(To===0){var s=Sl;s===0&&(s=Je,Je<<=1,(Je&261888)===0&&(Je=256)),To=s}return To}function ow(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:jr(""+s)}function aw(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function oV(s,a,u,h,_){if(a==="submit"&&u&&u.stateNode===_){var E=ow((_[fn]||null).action),A=h.submitter;A&&(a=(a=A[fn]||null)?ow(a.formAction):A.getAttribute("formAction"),a!==null&&(E=a,A=null));var M=new ca("action","action",null,h,_);s.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(To!==0){var H=A?aw(_,A):new FormData(_);ly(u,{pending:!0,data:H,method:_.method,action:E},null,H)}}else typeof E=="function"&&(M.preventDefault(),H=A?aw(_,A):new FormData(_),ly(u,{pending:!0,data:H,method:_.method,action:E},E,H))},currentTarget:_}]})}}for(var Gy=0;Gy<Ag.length;Gy++){var Hy=Ag[Gy],aV=Hy.toLowerCase(),lV=Hy[0].toUpperCase()+Hy.slice(1);xr(aV,"on"+lV)}xr(UE,"onAnimationEnd"),xr(FE,"onAnimationIteration"),xr(BE,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(w2,"onTransitionRun"),xr(A2,"onTransitionStart"),xr(C2,"onTransitionCancel"),xr(qE,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function lw(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],_=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var A=h.length-1;0<=A;A--){var M=h[A],H=M.instance,Q=M.currentTarget;if(M=M.listener,H!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(oe){Dd(oe)}_.currentTarget=null,E=H}else for(A=0;A<h.length;A++){if(M=h[A],H=M.instance,Q=M.currentTarget,M=M.listener,H!==E&&_.isPropagationStopped())break e;E=M,_.currentTarget=Q;try{E(_)}catch(oe){Dd(oe)}_.currentTarget=null,E=H}}}}function nt(s,a){var u=a[tr];u===void 0&&(u=a[tr]=new Set);var h=s+"__bubble";u.has(h)||(uw(a,s,2,!1),u.add(h))}function jy(s,a,u){var h=0;a&&(h|=4),uw(u,s,h,a)}var vh="_reactListening"+Math.random().toString(36).slice(2);function $y(s){if(!s[vh]){s[vh]=!0,wr.forEach(function(u){u!=="selectionchange"&&(uV.has(u)||jy(u,!1,s),jy(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[vh]||(a[vh]=!0,jy("selectionchange",!1,a))}}function uw(s,a,u,h){switch(Uw(a)){case 2:var _=OV;break;case 8:_=UV;break;default:_=av}u=_.bind(null,a,u,s),_=void 0,!Yu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),h?_!==void 0?s.addEventListener(a,u,{capture:!0,passive:_}):s.addEventListener(a,u,!0):_!==void 0?s.addEventListener(a,u,{passive:_}):s.addEventListener(a,u,!1)}function Ky(s,a,u,h,_){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var M=h.stateNode.containerInfo;if(M===_)break;if(A===4)for(A=h.return;A!==null;){var H=A.tag;if((H===3||H===4)&&A.stateNode.containerInfo===_)return;A=A.return}for(;M!==null;){if(A=Ci(M),A===null)return;if(H=A.tag,H===5||H===6||H===26||H===27){h=E=A;continue e}M=M.parentNode}}h=h.return}gd(function(){var Q=E,oe=ul(u),ue=[];e:{var te=zE.get(s);if(te!==void 0){var ie=ca,Ae=s;switch(s){case"keypress":if(ua(u)===0)break e;case"keydown":case"keyup":ie=Ad;break;case"focusin":Ae="focus",ie=eo;break;case"focusout":Ae="blur",ie=eo;break;case"beforeblur":case"afterblur":ie=eo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=xd;break;case UE:case FE:case BE:ie=dl;break;case qE:ie=hl;break;case"scroll":case"scrollend":ie=yd;break;case"wheel":ie=Rd;break;case"copy":case"cut":case"paste":ie=Ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Zu;break;case"toggle":case"beforetoggle":ie=no}var Le=(a&4)!==0,Nt=!Le&&(s==="scroll"||s==="scrollend"),J=Le?te!==null?te+"Capture":null:te;Le=[];for(var Y=Q,X;Y!==null;){var le=Y;if(X=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||X===null||J===null||(le=xi(Y,J),le!=null&&Le.push(xc(Y,le,X))),Nt)break;Y=Y.return}0<Le.length&&(te=new ie(te,Ae,null,u,oe),ue.push({event:te,listeners:Le}))}}if((a&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",te&&u!==ll&&(Ae=u.relatedTarget||u.fromElement)&&(Ci(Ae)||Ae[Fi]))break e;if((ie||te)&&(te=oe.window===oe?oe:(te=oe.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ae=u.relatedTarget||u.toElement,ie=Q,Ae=Ae?Ci(Ae):null,Ae!==null&&(Nt=o(Ae),Le=Ae.tag,Ae!==Nt||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(ie=null,Ae=Q),ie!==Ae)){if(Le=vd,le="onMouseLeave",J="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Le=Zu,le="onPointerLeave",J="onPointerEnter",Y="pointer"),Nt=ie==null?te:Gr(ie),X=Ae==null?te:Gr(Ae),te=new Le(le,Y+"leave",ie,u,oe),te.target=Nt,te.relatedTarget=X,le=null,Ci(oe)===Q&&(Le=new Le(J,Y+"enter",Ae,u,oe),Le.target=X,Le.relatedTarget=Nt,le=Le),Nt=le,ie&&Ae)t:{for(Le=cV,J=ie,Y=Ae,X=0,le=J;le;le=Le(le))X++;le=0;for(var De=Y;De;De=Le(De))le++;for(;0<X-le;)J=Le(J),X--;for(;0<le-X;)Y=Le(Y),le--;for(;X--;){if(J===Y||Y!==null&&J===Y.alternate){Le=J;break t}J=Le(J),Y=Le(Y)}Le=null}else Le=null;ie!==null&&cw(ue,te,ie,Le,!1),Ae!==null&&Nt!==null&&cw(ue,Nt,Ae,Le,!0)}}e:{if(te=Q?Gr(Q):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var pt=xE;else if(Ii(te))if(IE)pt=E2;else{pt=_2;var Ne=v2}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Q&&$u(Q.elementType)&&(pt=xE):pt=T2;if(pt&&(pt=pt(s,Q))){pa(ue,pt,u,oe);break e}Ne&&Ne(s,te,Q),s==="focusout"&&Q&&te.type==="number"&&Q.memoizedProps.value!=null&&al(te,"number",te.value)}switch(Ne=Q?Gr(Q):window,s){case"focusin":(Ii(Ne)||Ne.contentEditable==="true")&&(pl=Ne,Sg=Q,nc=null);break;case"focusout":nc=Sg=pl=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,LE(ue,u,oe);break;case"selectionchange":if(b2)break;case"keydown":case"keyup":LE(ue,u,oe)}var Ye;if(w)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Ze?Et(s,u)&&(st="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(st="onCompositionStart");st&&(W&&u.locale!=="ko"&&(Ze||st!=="onCompositionStart"?st==="onCompositionEnd"&&Ze&&(Ye=Ws()):(zi=oe,cl="value"in zi?zi.value:zi.textContent,Ze=!0)),Ne=_h(Q,st),0<Ne.length&&(st=new Wu(st,s,null,u,oe),ue.push({event:st,listeners:Ne}),Ye?st.data=Ye:(Ye=yn(u),Ye!==null&&(st.data=Ye)))),(Ye=L?Mn(s,u):kn(s,u))&&(st=_h(Q,"onBeforeInput"),0<st.length&&(Ne=new Wu("onBeforeInput","beforeinput",null,u,oe),ue.push({event:Ne,listeners:st}),Ne.data=Ye)),oV(ue,s,Q,u,oe)}lw(ue,a)})}function xc(s,a,u){return{instance:s,listener:a,currentTarget:u}}function _h(s,a){for(var u=a+"Capture",h=[];s!==null;){var _=s,E=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||E===null||(_=xi(s,u),_!=null&&h.unshift(xc(s,_,E)),_=xi(s,a),_!=null&&h.push(xc(s,_,E))),s.tag===3)return h;s=s.return}return[]}function cV(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function cw(s,a,u,h,_){for(var E=a._reactName,A=[];u!==null&&u!==h;){var M=u,H=M.alternate,Q=M.stateNode;if(M=M.tag,H!==null&&H===h)break;M!==5&&M!==26&&M!==27||Q===null||(H=Q,_?(Q=xi(u,E),Q!=null&&A.unshift(xc(u,Q,H))):_||(Q=xi(u,E),Q!=null&&A.push(xc(u,Q,H)))),u=u.return}A.length!==0&&s.push({event:a,listeners:A})}var fV=/\r\n?/g,dV=/\u0000|\uFFFD/g;function fw(s){return(typeof s=="string"?s:""+s).replace(fV,`
`).replace(dV,"")}function dw(s,a){return a=fw(a),fw(s)===a}function Rt(s,a,u,h,_,E){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||or(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&or(s,""+h);break;case"className":Ks(s,"class",h);break;case"tabIndex":Ks(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ks(s,u,h);break;case"style":pd(s,h,E);break;case"data":if(a!=="object"){Ks(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=jr(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(a!=="input"&&Rt(s,a,"name",_.name,_,null),Rt(s,a,"formEncType",_.formEncType,_,null),Rt(s,a,"formMethod",_.formMethod,_,null),Rt(s,a,"formTarget",_.formTarget,_,null)):(Rt(s,a,"encType",_.encType,_,null),Rt(s,a,"method",_.method,_,null),Rt(s,a,"target",_.target,_,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=jr(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=jr(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":nt("beforetoggle",s),nt("toggle",s),$s(s,"popover",h);break;case"xlinkActuate":sr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":sr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":sr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":sr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":sr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":sr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":sr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":sr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":sr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":$s(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=gg.get(u)||u,$s(s,u,h))}}function Yy(s,a,u,h,_,E){switch(u){case"style":pd(s,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?or(s,h):(typeof h=="number"||typeof h=="bigint")&&or(s,""+h);break;case"onScroll":h!=null&&nt("scroll",s);break;case"onScrollEnd":h!=null&&nt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Dn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),E=s[fn]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(a,E,_),typeof h=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,_);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):$s(s,u,h)}}}function Gn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var h=!1,_=!1,E;for(E in u)if(u.hasOwnProperty(E)){var A=u[E];if(A!=null)switch(E){case"src":h=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,E,A,u,null)}}_&&Rt(s,a,"srcSet",u.srcSet,u,null),h&&Rt(s,a,"src",u.src,u,null);return;case"input":nt("invalid",s);var M=E=A=_=null,H=null,Q=null;for(h in u)if(u.hasOwnProperty(h)){var oe=u[h];if(oe!=null)switch(h){case"name":_=oe;break;case"type":A=oe;break;case"checked":H=oe;break;case"defaultChecked":Q=oe;break;case"value":E=oe;break;case"defaultValue":M=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,a));break;default:Rt(s,a,h,oe,u,null)}}aa(s,E,M,H,Q,A,_,!1);return;case"select":nt("invalid",s),h=A=E=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":E=M;break;case"defaultValue":A=M;break;case"multiple":h=M;default:Rt(s,a,_,M,u,null)}a=E,u=A,s.multiple=!!h,a!=null?ht(s,!!h,a,!1):u!=null&&ht(s,!!h,u,!0);return;case"textarea":nt("invalid",s),E=_=h=null;for(A in u)if(u.hasOwnProperty(A)&&(M=u[A],M!=null))switch(A){case"value":h=M;break;case"defaultValue":_=M;break;case"children":E=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:Rt(s,a,A,M,u,null)}Js(s,h,_,E);return;case"option":for(H in u)if(u.hasOwnProperty(H)&&(h=u[H],h!=null))switch(H){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rt(s,a,H,h,u,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(h=0;h<Cc.length;h++)nt(Cc[h],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in u)if(u.hasOwnProperty(Q)&&(h=u[Q],h!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Rt(s,a,Q,h,u,null)}return;default:if($u(a)){for(oe in u)u.hasOwnProperty(oe)&&(h=u[oe],h!==void 0&&Yy(s,a,oe,h,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(h=u[M],h!=null&&Rt(s,a,M,h,u,null))}function hV(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,E=null,A=null,M=null,H=null,Q=null,oe=null;for(ie in u){var ue=u[ie];if(u.hasOwnProperty(ie)&&ue!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=ue;default:h.hasOwnProperty(ie)||Rt(s,a,ie,null,h,ue)}}for(var te in h){var ie=h[te];if(ue=u[te],h.hasOwnProperty(te)&&(ie!=null||ue!=null))switch(te){case"type":E=ie;break;case"name":_=ie;break;case"checked":Q=ie;break;case"defaultChecked":oe=ie;break;case"value":A=ie;break;case"defaultValue":M=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==ue&&Rt(s,a,te,ie,h,ue)}}Ys(s,A,M,H,Q,oe,E,_);return;case"select":ie=A=M=te=null;for(E in u)if(H=u[E],u.hasOwnProperty(E)&&H!=null)switch(E){case"value":break;case"multiple":ie=H;default:h.hasOwnProperty(E)||Rt(s,a,E,null,h,H)}for(_ in h)if(E=h[_],H=u[_],h.hasOwnProperty(_)&&(E!=null||H!=null))switch(_){case"value":te=E;break;case"defaultValue":M=E;break;case"multiple":A=E;default:E!==H&&Rt(s,a,_,E,h,H)}a=M,u=A,h=ie,te!=null?ht(s,!!u,te,!1):!!h!=!!u&&(a!=null?ht(s,!!u,a,!0):ht(s,!!u,u?[]:"",!1));return;case"textarea":ie=te=null;for(M in u)if(_=u[M],u.hasOwnProperty(M)&&_!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Rt(s,a,M,null,h,_)}for(A in h)if(_=h[A],E=u[A],h.hasOwnProperty(A)&&(_!=null||E!=null))switch(A){case"value":te=_;break;case"defaultValue":ie=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==E&&Rt(s,a,A,_,h,E)}la(s,te,ie);return;case"option":for(var Ae in u)if(te=u[Ae],u.hasOwnProperty(Ae)&&te!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":s.selected=!1;break;default:Rt(s,a,Ae,null,h,te)}for(H in h)if(te=h[H],ie=u[H],h.hasOwnProperty(H)&&te!==ie&&(te!=null||ie!=null))switch(H){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Rt(s,a,H,te,h,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in u)te=u[Le],u.hasOwnProperty(Le)&&te!=null&&!h.hasOwnProperty(Le)&&Rt(s,a,Le,null,h,te);for(Q in h)if(te=h[Q],ie=u[Q],h.hasOwnProperty(Q)&&te!==ie&&(te!=null||ie!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Rt(s,a,Q,te,h,ie)}return;default:if($u(a)){for(var Nt in u)te=u[Nt],u.hasOwnProperty(Nt)&&te!==void 0&&!h.hasOwnProperty(Nt)&&Yy(s,a,Nt,void 0,h,te);for(oe in h)te=h[oe],ie=u[oe],!h.hasOwnProperty(oe)||te===ie||te===void 0&&ie===void 0||Yy(s,a,oe,te,h,ie);return}}for(var J in u)te=u[J],u.hasOwnProperty(J)&&te!=null&&!h.hasOwnProperty(J)&&Rt(s,a,J,null,h,te);for(ue in h)te=h[ue],ie=u[ue],!h.hasOwnProperty(ue)||te===ie||te==null&&ie==null||Rt(s,a,ue,te,h,ie)}function hw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pV(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var _=u[h],E=_.transferSize,A=_.initiatorType,M=_.duration;if(E&&M&&hw(A)){for(A=0,M=_.responseEnd,h+=1;h<u.length;h++){var H=u[h],Q=H.startTime;if(Q>M)break;var oe=H.transferSize,ue=H.initiatorType;oe&&hw(ue)&&(H=H.responseEnd,A+=oe*(H<M?1:(M-Q)/(H-Q)))}if(--h,a+=8*(E+A)/(_.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Jy=null,Wy=null;function Th(s){return s.nodeType===9?s:s.ownerDocument}function pw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Xy(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Qy=null;function mV(){var s=window.event;return s&&s.type==="popstate"?s===Qy?!1:(Qy=s,!0):(Qy=null,!1)}var gw=typeof setTimeout=="function"?setTimeout:void 0,gV=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,yV=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(s){return yw.resolve(null).then(s).catch(vV)}:gw;function vV(s){setTimeout(function(){throw s})}function Eo(s){return s==="head"}function vw(s,a){var u=a,h=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(_),ql(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")Ic(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,Ic(u);for(var E=u.firstChild;E;){var A=E.nextSibling,M=E.nodeName;E[nr]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=A}}else u==="body"&&Ic(s.ownerDocument.body);u=_}while(u);ql(a)}function _w(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function Zy(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Zy(u),ir(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function _V(s,a,u,h){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[nr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var E=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=hr(s.nextSibling),s===null)break}return null}function TV(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=hr(s.nextSibling),s===null))return null;return s}function Tw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=hr(s.nextSibling),s===null))return null;return s}function ev(s){return s.data==="$?"||s.data==="$~"}function tv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function EV(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function hr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var nv=null;function Ew(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return hr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function Sw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function bw(s,a,u){switch(a=Th(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Ic(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ir(s)}var pr=new Map,ww=new Set;function Eh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Rs=ae.d;ae.d={f:SV,r:bV,D:wV,C:AV,L:CV,m:xV,X:RV,S:IV,M:NV};function SV(){var s=Rs.f(),a=dh();return s||a}function bV(s){var a=rr(s);a!==null&&a.tag===5&&a.type==="form"?qS(a):Rs.r(s)}var Ul=typeof document>"u"?null:document;function Aw(s,a,u){var h=Ul;if(h&&typeof a=="string"&&a){var _=nn(a);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),ww.has(_)||(ww.add(_),s={rel:s,crossOrigin:u,href:a},h.querySelector(_)===null&&(a=h.createElement("link"),Gn(a,"link",s),Kt(a),h.head.appendChild(a)))}}function wV(s){Rs.D(s),Aw("dns-prefetch",s,null)}function AV(s,a){Rs.C(s,a),Aw("preconnect",s,a)}function CV(s,a,u){Rs.L(s,a,u);var h=Ul;if(h&&s&&a){var _='link[rel="preload"][as="'+nn(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+nn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+nn(u.imageSizes)+'"]')):_+='[href="'+nn(s)+'"]';var E=_;switch(a){case"style":E=Fl(s);break;case"script":E=Bl(s)}pr.has(E)||(s=v({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),pr.set(E,s),h.querySelector(_)!==null||a==="style"&&h.querySelector(Rc(E))||a==="script"&&h.querySelector(Nc(E))||(a=h.createElement("link"),Gn(a,"link",s),Kt(a),h.head.appendChild(a)))}}function xV(s,a){Rs.m(s,a);var u=Ul;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+nn(h)+'"][href="'+nn(s)+'"]',E=_;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Bl(s)}if(!pr.has(E)&&(s=v({rel:"modulepreload",href:s},a),pr.set(E,s),u.querySelector(_)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Nc(E)))return}h=u.createElement("link"),Gn(h,"link",s),Kt(h),u.head.appendChild(h)}}}function IV(s,a,u){Rs.S(s,a,u);var h=Ul;if(h&&s){var _=mi(h).hoistableStyles,E=Fl(s);a=a||"default";var A=_.get(E);if(!A){var M={loading:0,preload:null};if(A=h.querySelector(Rc(E)))M.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":a},u),(u=pr.get(E))&&iv(s,u);var H=A=h.createElement("link");Kt(H),Gn(H,"link",s),H._p=new Promise(function(Q,oe){H.onload=Q,H.onerror=oe}),H.addEventListener("load",function(){M.loading|=1}),H.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Sh(A,a,h)}A={type:"stylesheet",instance:A,count:1,state:M},_.set(E,A)}}}function RV(s,a){Rs.X(s,a);var u=Ul;if(u&&s){var h=mi(u).hoistableScripts,_=Bl(s),E=h.get(_);E||(E=u.querySelector(Nc(_)),E||(s=v({src:s,async:!0},a),(a=pr.get(_))&&rv(s,a),E=u.createElement("script"),Kt(E),Gn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function NV(s,a){Rs.M(s,a);var u=Ul;if(u&&s){var h=mi(u).hoistableScripts,_=Bl(s),E=h.get(_);E||(E=u.querySelector(Nc(_)),E||(s=v({src:s,async:!0,type:"module"},a),(a=pr.get(_))&&rv(s,a),E=u.createElement("script"),Kt(E),Gn(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(_,E))}}function Cw(s,a,u,h){var _=(_=Ee.current)?Eh(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Fl(u.href),u=mi(_).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Fl(u.href);var E=mi(_).hoistableStyles,A=E.get(s);if(A||(_=_.ownerDocument||_,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,A),(E=_.querySelector(Rc(s)))&&!E._p&&(A.instance=E,A.state.loading=5),pr.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},pr.set(s,u),E||PV(_,s,u,A.state))),a&&h===null)throw Error(i(528,""));return A}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Bl(u),u=mi(_).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Fl(s){return'href="'+nn(s)+'"'}function Rc(s){return'link[rel="stylesheet"]['+s+"]"}function xw(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function PV(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Gn(a,"link",u),Kt(a),s.head.appendChild(a))}function Bl(s){return'[src="'+nn(s)+'"]'}function Nc(s){return"script[async]"+s}function Iw(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+nn(u.href)+'"]');if(h)return a.instance=h,Kt(h),h;var _=v({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Kt(h),Gn(h,"style",_),Sh(h,u.precedence,s),a.instance=h;case"stylesheet":_=Fl(u.href);var E=s.querySelector(Rc(_));if(E)return a.state.loading|=4,a.instance=E,Kt(E),E;h=xw(u),(_=pr.get(_))&&iv(h,_),E=(s.ownerDocument||s).createElement("link"),Kt(E);var A=E;return A._p=new Promise(function(M,H){A.onload=M,A.onerror=H}),Gn(E,"link",h),a.state.loading|=4,Sh(E,u.precedence,s),a.instance=E;case"script":return E=Bl(u.src),(_=s.querySelector(Nc(E)))?(a.instance=_,Kt(_),_):(h=u,(_=pr.get(E))&&(h=v({},u),rv(h,_)),s=s.ownerDocument||s,_=s.createElement("script"),Kt(_),Gn(_,"link",h),s.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Sh(h,u.precedence,s));return a.instance}function Sh(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=h.length?h[h.length-1]:null,E=_,A=0;A<h.length;A++){var M=h[A];if(M.dataset.precedence===a)E=M;else if(E!==_)break}E?E.parentNode.insertBefore(s,E.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function iv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function rv(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var bh=null;function Rw(s,a,u){if(bh===null){var h=new Map,_=bh=new Map;_.set(u,h)}else _=bh,h=_.get(u),h||(h=new Map,_.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var E=u[_];if(!(E[nr]||E[Ut]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var A=E.getAttribute(a)||"";A=s+A;var M=h.get(A);M?M.push(E):h.set(A,[E])}}return h}function Nw(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function DV(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Pw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function MV(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=Fl(h.href),E=a.querySelector(Rc(_));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=wh.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=E,Kt(E);return}E=a.ownerDocument||a,h=xw(h),(_=pr.get(_))&&iv(h,_),E=E.createElement("link"),Kt(E);var A=E;A._p=new Promise(function(M,H){A.onload=M,A.onerror=H}),Gn(E,"link",h),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=wh.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var sv=0;function kV(s,a){return s.stylesheets&&s.count===0&&Ch(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Ch(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+a);0<s.imgBytes&&sv===0&&(sv=62500*pV());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ch(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>sv?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(_)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ah=null;function Ch(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ah=new Map,a.forEach(VV,s),Ah=null,wh.call(s))}function VV(s,a){if(!(a.state.loading&4)){var u=Ah.get(s);if(u)var h=u.get(null);else{u=new Map,Ah.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<_.length;E++){var A=_[E];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),h=A)}h&&u.set(null,h)}_=a.instance,A=_.getAttribute("data-precedence"),E=u.get(A)||h,E===h&&u.set(null,_),u.set(A,_),this.count++,h=wh.bind(this),_.addEventListener("load",h),_.addEventListener("error",h),E?E.parentNode.insertBefore(_,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),a.state.loading|=4}}var Pc={$$typeof:F,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function LV(s,a,u,h,_,E,A,M,H){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.hiddenUpdates=Mt(null),this.identifierPrefix=h,this.onUncaughtError=_,this.onCaughtError=E,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Dw(s,a,u,h,_,E,A,M,H,Q,oe,ue){return s=new LV(s,a,u,A,H,Q,oe,ue,M),a=1,E===!0&&(a|=24),E=Hi(3,null,null,a),s.current=E,E.stateNode=s,a=Ug(),a.refCount++,s.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:u,cache:a},zg(E),s}function Mw(s){return s?(s=yl,s):yl}function kw(s,a,u,h,_,E){_=Mw(_),h.context===null?h.context=_:h.pendingContext=_,h=uo(a),h.payload={element:u},E=E===void 0?null:E,E!==null&&(h.callback=E),u=co(s,h,a),u!==null&&(Mi(u,s,a),uc(u,s,a))}function Vw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function ov(s,a){Vw(s,a),(s=s.alternate)&&Vw(s,a)}function Lw(s){if(s.tag===13||s.tag===31){var a=ya(s,67108864);a!==null&&Mi(a,s,67108864),ov(s,67108864)}}function Ow(s){if(s.tag===13||s.tag===31){var a=Ji();a=er(a);var u=ya(s,a);u!==null&&Mi(u,s,a),ov(s,a)}}var xh=!0;function OV(s,a,u,h){var _=ee.T;ee.T=null;var E=ae.p;try{ae.p=2,av(s,a,u,h)}finally{ae.p=E,ee.T=_}}function UV(s,a,u,h){var _=ee.T;ee.T=null;var E=ae.p;try{ae.p=8,av(s,a,u,h)}finally{ae.p=E,ee.T=_}}function av(s,a,u,h){if(xh){var _=lv(h);if(_===null)Ky(s,a,h,Ih,u),Fw(s,h);else if(BV(_,s,a,u,h))h.stopPropagation();else if(Fw(s,h),a&4&&-1<FV.indexOf(s)){for(;_!==null;){var E=rr(_);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var A=Qe(E.pendingLanes);if(A!==0){var M=E;for(M.pendingLanes|=2,M.entangledLanes|=2;A;){var H=1<<31-be(A);M.entanglements[1]|=H,A&=~H}Xr(E),(vt&6)===0&&(ch=Re()+500,Ac(0))}}break;case 31:case 13:M=ya(E,2),M!==null&&Mi(M,E,2),dh(),ov(E,2)}if(E=lv(h),E===null&&Ky(s,a,h,Ih,u),E===_)break;_=E}_!==null&&h.stopPropagation()}else Ky(s,a,h,null,u)}}function lv(s){return s=ul(s),uv(s)}var Ih=null;function uv(s){if(Ih=null,s=Ci(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Ih=s,null}function Uw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case Pe:return 2;case Ot:return 8;case $t:case Jt:return 32;case Sr:return 268435456;default:return 32}default:return 32}}var cv=!1,So=null,bo=null,wo=null,Dc=new Map,Mc=new Map,Ao=[],FV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fw(s,a){switch(s){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":Dc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(a.pointerId)}}function kc(s,a,u,h,_,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:E,targetContainers:[_]},a!==null&&(a=rr(a),a!==null&&Lw(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),s)}function BV(s,a,u,h,_){switch(a){case"focusin":return So=kc(So,s,a,u,h,_),!0;case"dragenter":return bo=kc(bo,s,a,u,h,_),!0;case"mouseover":return wo=kc(wo,s,a,u,h,_),!0;case"pointerover":var E=_.pointerId;return Dc.set(E,kc(Dc.get(E)||null,s,a,u,h,_)),!0;case"gotpointercapture":return E=_.pointerId,Mc.set(E,kc(Mc.get(E)||null,s,a,u,h,_)),!0}return!1}function Bw(s){var a=Ci(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,us(s.priority,function(){Ow(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,us(s.priority,function(){Ow(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Rh(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=lv(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);ll=h,u.target.dispatchEvent(h),ll=null}else return a=rr(u),a!==null&&Lw(a),s.blockedOn=u,!1;a.shift()}return!0}function qw(s,a,u){Rh(s)&&u.delete(a)}function qV(){cv=!1,So!==null&&Rh(So)&&(So=null),bo!==null&&Rh(bo)&&(bo=null),wo!==null&&Rh(wo)&&(wo=null),Dc.forEach(qw),Mc.forEach(qw)}function Nh(s,a){s.blockedOn===a&&(s.blockedOn=null,cv||(cv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qV)))}var Ph=null;function zw(s){Ph!==s&&(Ph=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ph===s&&(Ph=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],_=s[a+2];if(typeof h!="function"){if(uv(h||u)===null)continue;break}var E=rr(u);E!==null&&(s.splice(a,3),a-=3,ly(E,{pending:!0,data:_,method:u.method,action:h},h,_))}}))}function ql(s){function a(H){return Nh(H,s)}So!==null&&Nh(So,s),bo!==null&&Nh(bo,s),wo!==null&&Nh(wo,s),Dc.forEach(a),Mc.forEach(a);for(var u=0;u<Ao.length;u++){var h=Ao[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ao.length&&(u=Ao[0],u.blockedOn===null);)Bw(u),u.blockedOn===null&&Ao.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var _=u[h],E=u[h+1],A=_[fn]||null;if(typeof E=="function")A||zw(u);else if(A){var M=null;if(E&&E.hasAttribute("formAction")){if(_=E,A=E[fn]||null)M=A.formAction;else if(uv(_)!==null)continue}else M=A.action;typeof M=="function"?u[h+1]=M:(u.splice(h,3),h-=3),zw(u)}}}function Gw(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(A){return _=A})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function fv(s){this._internalRoot=s}Dh.prototype.render=fv.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Ji();kw(u,h,s,a,null,null)},Dh.prototype.unmount=fv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;kw(s.current,2,null,s,null,null),dh(),a[Fi]=null}};function Dh(s){this._internalRoot=s}Dh.prototype.unstable_scheduleHydration=function(s){if(s){var a=pi();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Ao.length&&a!==0&&a<Ao[u].priority;u++);Ao.splice(u,0,s),u===0&&Bw(s)}};var Hw=e.version;if(Hw!=="19.2.0")throw Error(i(527,Hw,"19.2.0"));ae.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var zV={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{hi=Mh.inject(zV),cn=Mh}catch{}}return Lc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",_=XS,E=QS,A=ZS;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError)),a=Dw(s,1,!1,null,null,u,h,null,_,E,A,Gw),s[Fi]=a.current,$y(s),new fv(a)},Lc.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,_="",E=XS,A=QS,M=ZS,H=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(H=u.formState)),a=Dw(s,1,!0,a,u??null,h,_,H,E,A,M,Gw),a.context=Mw(null),u=a.current,h=Ji(),h=er(h),_=uo(h),_.callback=null,co(u,_,h),u=h,a.current.lanes=u,xt(a,u),Xr(a),s[Fi]=a.current,$y(s),new Dh(a)},Lc.version="19.2.0",Lc}var eA;function XV(){if(eA)return pv.exports;eA=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pv.exports=WV(),pv.exports}var QV=XV();const ZV=y1(QV),Oc=[{emoji:"",title:"Bienvenue dans Dress Me Up!",description:"Votre assistant mode personnel propuls par l'IA. Dcouvrons ensemble comment a marche."},{emoji:"",title:"Ajoutez vos vtements",description:"Prenez en photo vos vtements. L'IA analysera automatiquement la couleur, la matire et le type."},{emoji:"",title:"Gnrez des tenues",description:"Dcrivez une occasion et l'IA crera des combinaisons parfaites  partir de votre garde-robe."},{emoji:"",title:"Planifiez vos valises",description:"Partez en voyage ? L'IA optimise votre valise selon la dure et la destination."}],eL=({onComplete:t})=>{const[e,n]=B.useState(0),i=()=>{e<Oc.length-1?n(e+1):(localStorage.setItem("dressmup_onboarding_complete","true"),t())},r=()=>{localStorage.setItem("dressmup_onboarding_complete","true"),t()},o=Oc[e];return S.jsx("div",{className:"fixed inset-0 bg-onyx/90 backdrop-blur-md flex items-center justify-center z-[200] p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",children:[S.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-700",children:S.jsx("div",{className:"h-full bg-gold transition-all duration-300",style:{width:`${(e+1)/Oc.length*100}%`}})}),S.jsxs("div",{className:"p-8 text-center",children:[S.jsx("div",{className:"text-6xl mb-6",children:o.emoji}),S.jsx("h2",{className:"text-2xl font-serif font-bold mb-4",children:o.title}),S.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:o.description}),S.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Oc.map((l,c)=>S.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${c===e?"bg-gold w-6":"bg-gray-300 dark:bg-gray-600"}`},c))}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 font-medium transition-colors",children:"Passer"}),S.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gold text-onyx font-bold rounded-xl hover:bg-gold-dark transition-all",children:e<Oc.length-1?"Suivant":"Commencer"})]})]})]})})},tL=()=>{};var tA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},nL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},T1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,f=r+2<t.length,d=f?t[r+2]:0,p=o>>2,v=(o&3)<<4|c>>4;let T=(c&15)<<2|d>>6,b=d&63;f||(b=64,l||(T=64)),i.push(n[p],n[v],n[T],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||d==null||v==null)throw new iL;const T=o<<2|c>>4;if(i.push(T),d!==64){const b=c<<4&240|d>>2;if(i.push(b),v!==64){const x=d<<6&192|v;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rL=function(t){const e=_1(t);return T1.encodeByteArray(e,!0)},Pp=function(t){return rL(t).replace(/\./g,"")},E1=function(t){try{return T1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=()=>sL().__FIREBASE_DEFAULTS__,aL=()=>{if(typeof process>"u"||typeof tA>"u")return;const t=tA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E1(t[1]);return e&&JSON.parse(e)},wm=()=>{try{return tL()||oL()||aL()||lL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S1=t=>{var e,n;return(n=(e=wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},T_=t=>{const e=S1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},b1=()=>{var t;return(t=wm())===null||t===void 0?void 0:t.config},w1=t=>{var e;return(e=wm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Am(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pp(JSON.stringify(n)),Pp(JSON.stringify(l)),""].join(".")}const of={};function cL(){const t={prod:[],emulator:[]};for(const e of Object.keys(of))of[e]?t.emulator.push(e):t.prod.push(e);return t}function fL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nA=!1;function Cm(t,e){if(typeof window>"u"||typeof document>"u"||!Gs(window.location.host)||of[t]===e||of[t]||nA)return;of[t]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",o=cL().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,b){T.setAttribute("width","24"),T.setAttribute("id",b),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{nA=!0,l()},T}function p(T,b){T.setAttribute("id",b),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function v(){const T=fL(i),b=n("text"),x=document.getElementById(b)||document.createElement("span"),N=n("learnmore"),D=document.getElementById(N)||document.createElement("a"),O=n("preprendIcon"),k=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;c(F),p(D,N);const $=d();f(k,O),F.append(k,x,D,$),document.body.appendChild(F)}o?(x.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function hL(){var t;const e=(t=wm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yL(){const t=ci();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vL(){return!hL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _L(){try{return typeof indexedDB=="object"}catch{return!1}}function TL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="FirebaseError";class Fr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=EL,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$f.prototype.create)}}class $f{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?SL(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Fr(r,c,i)}}function SL(t,e){return t.replace(bL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const bL=/\{\$([^}]+)}/g;function wL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $a(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(iA(o)&&iA(l)){if(!$a(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function iA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $c(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Kc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AL(t,e){const n=new CL(t,e);return n.subscribe.bind(n)}class CL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=vv),r.error===void 0&&(r.error=vv),r.complete===void 0&&(r.complete=vv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Ls{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new uL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NL(e))try{this.getOrInitializeService({instanceIdentifier:Da})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Da){return this.instances.has(e)}getOptions(e=Da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:RL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Da){return this.component?this.component.multipleInstances?e:Da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RL(t){return t===Da?void 0:t}function NL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const DL={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},ML=ot.INFO,kL={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},VL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=kL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class E_{constructor(e){this.name=e,this._logLevel=ML,this._logHandler=VL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const LL=(t,e)=>e.some(n=>t instanceof n);let rA,sA;function OL(){return rA||(rA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UL(){return sA||(sA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,e0=new WeakMap,x1=new WeakMap,_v=new WeakMap,S_=new WeakMap;function FL(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Uo(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&C1.set(n,t)}).catch(()=>{}),S_.set(e,t),e}function BL(t){if(e0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});e0.set(t,e)}let t0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return e0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qL(t){t0=t(t0)}function zL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Tv(this),e,...n);return x1.set(i,e.sort?e.sort():[e]),Uo(i)}:UL().includes(t)?function(...e){return t.apply(Tv(this),e),Uo(C1.get(this))}:function(...e){return Uo(t.apply(Tv(this),e))}}function GL(t){return typeof t=="function"?zL(t):(t instanceof IDBTransaction&&BL(t),LL(t,OL())?new Proxy(t,t0):t)}function Uo(t){if(t instanceof IDBRequest)return FL(t);if(_v.has(t))return _v.get(t);const e=GL(t);return e!==t&&(_v.set(t,e),S_.set(e,t)),e}const Tv=t=>S_.get(t);function HL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=Uo(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Uo(l.result),f.oldVersion,f.newVersion,Uo(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const jL=["get","getKey","getAll","getAllKeys","count"],$L=["put","add","delete","clear"],Ev=new Map;function oA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ev.get(e))return Ev.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=$L.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jL.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&f.done]))[0]};return Ev.set(e,o),o}qL(t=>({...t,get:(e,n,i)=>oA(e,n)||t.get(e,n,i),has:(e,n)=>!!oA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function YL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const n0="@firebase/app",aA="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new E_("@firebase/app"),JL="@firebase/app-compat",WL="@firebase/analytics-compat",XL="@firebase/analytics",QL="@firebase/app-check-compat",ZL="@firebase/app-check",eO="@firebase/auth",tO="@firebase/auth-compat",nO="@firebase/database",iO="@firebase/data-connect",rO="@firebase/database-compat",sO="@firebase/functions",oO="@firebase/functions-compat",aO="@firebase/installations",lO="@firebase/installations-compat",uO="@firebase/messaging",cO="@firebase/messaging-compat",fO="@firebase/performance",dO="@firebase/performance-compat",hO="@firebase/remote-config",pO="@firebase/remote-config-compat",mO="@firebase/storage",gO="@firebase/storage-compat",yO="@firebase/firestore",vO="@firebase/ai",_O="@firebase/firestore-compat",TO="firebase",EO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="[DEFAULT]",SO={[n0]:"fire-core",[JL]:"fire-core-compat",[XL]:"fire-analytics",[WL]:"fire-analytics-compat",[ZL]:"fire-app-check",[QL]:"fire-app-check-compat",[eO]:"fire-auth",[tO]:"fire-auth-compat",[nO]:"fire-rtdb",[iO]:"fire-data-connect",[rO]:"fire-rtdb-compat",[sO]:"fire-fn",[oO]:"fire-fn-compat",[aO]:"fire-iid",[lO]:"fire-iid-compat",[uO]:"fire-fcm",[cO]:"fire-fcm-compat",[fO]:"fire-perf",[dO]:"fire-perf-compat",[hO]:"fire-rc",[pO]:"fire-rc-compat",[mO]:"fire-gcs",[gO]:"fire-gcs-compat",[yO]:"fire-fst",[_O]:"fire-fst-compat",[vO]:"fire-vertex","fire-js":"fire-js",[TO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new Map,bO=new Map,r0=new Map;function lA(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(r0.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const n of Dp.values())lA(n,t);for(const n of bO.values())lA(n,t);return!0}function Yf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Si(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fo=new $f("app","Firebase",wO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=EO;function I1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:i0,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Fo.create("bad-app-name",{appName:String(r)});if(n||(n=b1()),!n)throw Fo.create("no-options");const o=Dp.get(r);if(o){if($a(n,o.options)&&$a(i,o.config))return o;throw Fo.create("duplicate-app",{appName:r})}const l=new PL(r);for(const f of r0.values())l.addComponent(f);const c=new AO(n,i,l);return Dp.set(r,c),c}function xm(t=i0){const e=Dp.get(t);if(!e&&t===i0&&b1())return I1();if(!e)throw Fo.create("no-app",{appName:t});return e}function _r(t,e,n){var i;let r=(i=SO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(c.join(" "));return}Go(new Ls(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="firebase-heartbeat-database",xO=1,If="firebase-heartbeat-store";let Sv=null;function R1(){return Sv||(Sv=HL(CO,xO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(If)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fo.create("idb-open",{originalErrorMessage:t.message})})),Sv}async function IO(t){try{const n=(await R1()).transaction(If),i=await n.objectStore(If).get(N1(t));return await n.done,i}catch(e){if(e instanceof Fr)Os.warn(e.message);else{const n=Fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function uA(t,e){try{const i=(await R1()).transaction(If,"readwrite");await i.objectStore(If).put(e,N1(t)),await i.done}catch(n){if(n instanceof Fr)Os.warn(n.message);else{const i=Fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(i.message)}}}function N1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=1024,NO=30;class PO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MO(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=cA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>NO){const l=kO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Os.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cA(),{heartbeatsToSend:i,unsentEntries:r}=DO(this._heartbeatsCache.heartbeats),o=Pp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Os.warn(n),""}}}function cA(){return new Date().toISOString().substring(0,10)}function DO(t,e=RO){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),fA(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),fA(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _L()?TL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return uA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return uA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function fA(t){return Pp(JSON.stringify({version:2,heartbeats:t})).length}function kO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){Go(new Ls("platform-logger",e=>new KL(e),"PRIVATE")),Go(new Ls("heartbeat",e=>new PO(e),"PRIVATE")),_r(n0,aA,t),_r(n0,aA,"esm2017"),_r("fire-js","")}VO("");function b_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LO=P1,D1=new $f("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new E_("@firebase/auth");function OO(t,...e){Mp.logLevel<=ot.WARN&&Mp.warn(`Auth (${el}): ${t}`,...e)}function up(t,...e){Mp.logLevel<=ot.ERROR&&Mp.error(`Auth (${el}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,...e){throw A_(t,...e)}function Lr(t,...e){return A_(t,...e)}function w_(t,e,n){const i=Object.assign(Object.assign({},LO()),{[e]:n});return new $f("auth","Firebase",i).create(e,{appName:t.name})}function Ms(t){return w_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UO(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Er(t,"argument-error"),w_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function A_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return D1.create(t,...e)}function Ue(t,e,...n){if(!t)throw A_(e,...n)}function Ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw up(e),new Error(e)}function Us(t,e){t||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FO(){return dA()==="http:"||dA()==="https:"}function dA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FO()||mL()||"connection"in navigator)?navigator.onLine:!0}function qO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Us(n>e,"Short delay should be less than long delay!"),this.isMobile=dL()||gL()}get(){return BO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){Us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HO=new Jf(3e4,6e4);function Zo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ea(t,e,n,i,r={}){return k1(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Kf(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:f},o);return pL()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(d.credentials="include"),M1.fetch()(await V1(t,t.config.apiHost,n,c),d)})}async function k1(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},zO),e);try{const r=new $O(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw kh(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw kh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw kh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw kh(t,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw w_(t,p,d);Er(t,p)}}catch(r){if(r instanceof Fr)throw r;Er(t,"network-request-failed",{message:String(r)})}}async function Wf(t,e,n,i,r={}){const o=await ea(t,e,n,i,r);return"mfaPendingCredential"in o&&Er(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function V1(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?C_(t.config,r):`${t.config.apiScheme}://${r}`;return GO.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function jO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $O{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Lr(this.auth,"network-request-failed")),HO.get())})}}function kh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Lr(t,e,i);return r.customData._tokenResponse=n,r}function hA(t){return t!==void 0&&t.enterprise!==void 0}class KO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YO(t,e){return ea(t,"GET","/v2/recaptchaConfig",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(t,e){return ea(t,"POST","/v1/accounts:delete",e)}async function kp(t,e){return ea(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WO(t,e=!1){const n=Lt(t),i=await n.getIdToken(e),r=x_(i);Ue(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:af(bv(r.auth_time)),issuedAtTime:af(bv(r.iat)),expirationTime:af(bv(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function bv(t){return Number(t)*1e3}function x_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return up("JWT malformed, contained fewer than 3 sections"),null;try{const r=E1(n);return r?JSON.parse(r):(up("Failed to decode base64 JWT payload"),null)}catch(r){return up("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function pA(t){const e=x_(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fr&&XO(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function XO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=af(this.lastLoginAt),this.creationTime=af(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Rf(t,kp(n,{idToken:i}));Ue(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?L1(o.providerUserInfo):[],c=eU(t.providerData,l),f=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),p=f?d:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new o0(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,v)}async function ZO(t){const e=Lt(t);await Vp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eU(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function L1(t){return t.map(e=>{var{providerId:n}=e,i=b_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(t,e){const n=await k1(t,{},async()=>{const i=Kf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await V1(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return t.emulatorConfig&&Gs(t.emulatorConfig.host)&&(f.credentials="include"),M1.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nU(t,e){return ea(t,"POST","/v2/accounts:revokeToken",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=pA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await tU(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new su;return i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Ue(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new su,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=b_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new o0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Rf(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WO(this,e)}reload(){return ZO(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Vp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Si(this.auth.app))return Promise.reject(Ms(this.auth));const e=await this.getIdToken();return await Rf(this,JO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,f,d,p;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(r=n.email)!==null&&r!==void 0?r:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,x=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,O=(d=n.createdAt)!==null&&d!==void 0?d:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:F,emailVerified:$,isAnonymous:K,providerData:G,stsTokenManager:I}=n;Ue(F&&I,e,"internal-error");const R=su.fromJSON(this.name,I);Ue(typeof F=="string",e,"internal-error"),xo(v,e.name),xo(T,e.name),Ue(typeof $=="boolean",e,"internal-error"),Ue(typeof K=="boolean",e,"internal-error"),xo(b,e.name),xo(x,e.name),xo(N,e.name),xo(D,e.name),xo(O,e.name),xo(k,e.name);const P=new Mr({uid:F,auth:e,email:T,emailVerified:$,displayName:v,isAnonymous:K,photoURL:x,phoneNumber:b,tenantId:N,stsTokenManager:R,createdAt:O,lastLoginAt:k});return G&&Array.isArray(G)&&(P.providerData=G.map(V=>Object.assign({},V))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new su;r.updateFromServerResponse(n);const o=new Mr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Vp(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ue(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?L1(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),c=new su;c.updateFromIdToken(i);const f=new Mr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new o0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new Map;function Ds(t){Us(t instanceof Function,"Expected a class definition");let e=mA.get(t);return e?(Us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O1.type="NONE";const gA=O1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e,n){return`firebase:${t}:${e}:${n}`}class ou{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=cp(this.userKey,r.apiKey,o),this.fullPersistenceKey=cp("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kp(this.auth,{idToken:e}).catch(()=>{});return n?Mr._fromGetAccountInfoResponse(this.auth,n,e):null}return Mr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ou(Ds(gA),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ds(gA);const l=cp(i,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(l);if(p){let v;if(typeof p=="string"){const T=await kp(e,{idToken:p}).catch(()=>{});if(!T)break;v=await Mr._fromGetAccountInfoResponse(e,T,p)}else v=Mr._fromJSON(e,p);d!==o&&(c=v),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new ou(o,e,i):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new ou(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G1(e))return"Blackberry";if(H1(e))return"Webos";if(F1(e))return"Safari";if((e.includes("chrome/")||B1(e))&&!e.includes("edge/"))return"Chrome";if(z1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function U1(t=ci()){return/firefox\//i.test(t)}function F1(t=ci()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B1(t=ci()){return/crios\//i.test(t)}function q1(t=ci()){return/iemobile/i.test(t)}function z1(t=ci()){return/android/i.test(t)}function G1(t=ci()){return/blackberry/i.test(t)}function H1(t=ci()){return/webos/i.test(t)}function I_(t=ci()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iU(t=ci()){var e;return I_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rU(){return yL()&&document.documentMode===10}function j1(t=ci()){return I_(t)||z1(t)||H1(t)||G1(t)||/windows phone/i.test(t)||q1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e=[]){let n;switch(t){case"Browser":n=yA(ci());break;case"Worker":n=`${yA(ci())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${el}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e={}){return ea(t,"GET","/v2/passwordPolicy",Zo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=6;class lU{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:aU,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,c;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(r=f.containsLowercaseLetter)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(c=f.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vA(this),this.idTokenSubscription=new vA(this),this.beforeStateQueue=new sU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await ou.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kp(this,{idToken:e}),i=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Si(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(r=f.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Si(this.app))return Promise.reject(Ms(this));const n=e?Lt(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Si(this.app)?Promise.reject(Ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Si(this.app)?Promise.reject(Ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oU(this),n=new lU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $f("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await nU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await ou.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ta(t){return Lt(t)}class vA{constructor(e){this.auth=e,this.observer=null,this.addObserver=AL(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cU(t){Im=t}function K1(t){return Im.loadJS(t)}function fU(){return Im.recaptchaEnterpriseScript}function dU(){return Im.gapiScript}function hU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pU{constructor(){this.enterprise=new mU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class mU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gU="recaptcha-enterprise",Y1="NO_RECAPTCHA";class yU{constructor(e){this.type=gU,this.auth=ta(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{YO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new KO(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(f=>{c(f)})})}function r(o,l,c){const f=window.grecaptcha;hA(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(Y1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&hA(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=fU();f.length!==0&&(f+=c),K1(f).then(()=>{r(c,o,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function _A(t,e,n,i=!1,r=!1){const o=new yU(t);let l;if(r)l=Y1;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function a0(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await _A(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await _A(t,e,n,n==="getOobCode");return i(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t,e){const n=Yf(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if($a(o,e??{}))return r;Er(r,"already-initialized")}return n.initialize({options:e})}function _U(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function TU(t,e,n){const i=ta(t);Ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=J1(e),{host:l,port:c}=EU(e),f=c===null?"":`:${c}`,d={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ue($a(d,i.config.emulator)&&$a(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Gs(l)?(Am(`${o}//${l}${f}`),Cm("Auth",!0)):SU()}function J1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EU(t){const e=J1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:TA(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:TA(l)}}}function TA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,n){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}async function bU(t,e){return ea(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e){return Wf(t,"POST","/v1/accounts:signInWithPassword",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e){return Wf(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,e))}async function CU(t,e){return Wf(t,"POST","/v1/accounts:signInWithEmailLink",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends R_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Nf(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Nf(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a0(e,n,"signInWithPassword",wU);case"emailLink":return AU(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return a0(e,i,"signUpPassword",bU);case"emailLink":return CU(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t,e){return Wf(t,"POST","/v1/accounts:signInWithIdp",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="http://localhost";class Ka extends R_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=b_(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Ka(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return au(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,au(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,au(e,n)}buildRequest(){const e={requestUri:xU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Kf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RU(t){const e=$c(Kc(t)).link,n=e?$c(Kc(e)).deep_link_id:null,i=$c(Kc(t)).deep_link_id;return(i?$c(Kc(i)).link:null)||i||n||e||t}class N_{constructor(e){var n,i,r,o,l,c;const f=$c(Kc(e)),d=(n=f.apiKey)!==null&&n!==void 0?n:null,p=(i=f.oobCode)!==null&&i!==void 0?i:null,v=IU((r=f.mode)!==null&&r!==void 0?r:null);Ue(d&&p&&v,"argument-error"),this.apiKey=d,this.operation=v,this.code=p,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(c=f.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=RU(e);try{return new N_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.providerId=Iu.PROVIDER_ID}static credential(e,n){return Nf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=N_.parseLink(n);return Ue(i,"argument-error"),Nf._fromEmailAndCode(e,i.code,i.tenantId)}}Iu.PROVIDER_ID="password";Iu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Iu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf extends P_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends Xf{constructor(){super("facebook.com")}static credential(e){return Ka._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ro.credential(e.oauthAccessToken)}catch{return null}}}Ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Xf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ka._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ns.credential(n,i)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Xf{constructor(){super("github.com")}static credential(e){return Ka._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.GITHUB_SIGN_IN_METHOD="github.com";No.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Xf{constructor(){super("twitter.com")}static credential(e,n){return Ka._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Po.credential(n,i)}catch{return null}}}Po.TWITTER_SIGN_IN_METHOD="twitter.com";Po.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e){return Wf(t,"POST","/v1/accounts:signUp",Zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Mr._fromIdTokenResponse(e,i,r),l=EA(i);return new Ya({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=EA(i);return new Ya({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function EA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends Fr{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Lp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Lp(e,n,i,r)}}function W1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Lp._fromErrorAndOperation(t,o,e,i):o})}async function PU(t,e,n=!1){const i=await Rf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ya._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e,n=!1){const{auth:i}=t;if(Si(i.app))return Promise.reject(Ms(i));const r="reauthenticate";try{const o=await Rf(t,W1(i,r,e,t),n);Ue(o.idToken,i,"internal-error");const l=x_(o.idToken);Ue(l,i,"internal-error");const{sub:c}=l;return Ue(t.uid===c,i,"user-mismatch"),Ya._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Er(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e,n=!1){if(Si(t.app))return Promise.reject(Ms(t));const i="signIn",r=await W1(t,i,e),o=await Ya._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function MU(t,e){return X1(ta(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(t){const e=ta(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kU(t,e,n){if(Si(t.app))return Promise.reject(Ms(t));const i=ta(t),l=await a0(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NU).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Q1(t),f}),c=await Ya._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function VU(t,e,n){return Si(t.app)?Promise.reject(Ms(t)):MU(Lt(t),Iu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Q1(t),i})}function LU(t,e,n,i){return Lt(t).onIdTokenChanged(e,n,i)}function OU(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function UU(t,e,n,i){return Lt(t).onAuthStateChanged(e,n,i)}function wv(t){return Lt(t).signOut()}const Op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Op,"1"),this.storage.removeItem(Op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU=1e3,BU=10;class eN extends Z1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);rU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BU):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},FU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eN.type="LOCAL";const qU=eN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends Z1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tN.type="SESSION";const nN=tN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Rm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async d=>d(n.origin,o)),f=await zU(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const d=D_("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const T=v;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(T.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function HU(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function jU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $U(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KU(){return iN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebaseLocalStorageDb",YU=1,Up="firebaseLocalStorage",sN="fbase_key";class Qf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nm(t,e){return t.transaction([Up],e?"readwrite":"readonly").objectStore(Up)}function JU(){const t=indexedDB.deleteDatabase(rN);return new Qf(t).toPromise()}function l0(){const t=indexedDB.open(rN,YU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Up,{keyPath:sN})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Up)?e(i):(i.close(),await JU(),e(await l0()))})})}async function SA(t,e,n){const i=Nm(t,!0).put({[sN]:e,value:n});return new Qf(i).toPromise()}async function WU(t,e){const n=Nm(t,!1).get(e),i=await new Qf(n).toPromise();return i===void 0?null:i.value}function bA(t,e){const n=Nm(t,!0).delete(e);return new Qf(n).toPromise()}const XU=800,QU=3;class oN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>QU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(KU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jU(),!this.activeServiceWorker)return;this.sender=new GU(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$U()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l0();return await SA(e,Op,"1"),await bA(e,Op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>SA(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>WU(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Nm(r,!1).getAll();return new Qf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oN.type="LOCAL";const ZU=oN;new Jf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){return e?Ds(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends R_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return au(e,this._buildIdpRequest())}_linkToIdToken(e,n){return au(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return au(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e4(t){return X1(t.auth,new M_(t),t.bypassAuthState)}function t4(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),DU(n,new M_(t),t.bypassAuthState)}async function n4(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),PU(n,new M_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e4;case"linkViaPopup":case"linkViaRedirect":return n4;case"reauthViaPopup":case"reauthViaRedirect":return t4;default:Er(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=new Jf(2e3,1e4);async function r4(t,e,n){if(Si(t.app))return Promise.reject(Lr(t,"operation-not-supported-in-this-environment"));const i=ta(t);UO(t,e,P_);const r=aN(i,n);return new Oa(i,"signInViaPopup",e,r).executeNotNull()}class Oa extends lN{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Oa.currentPopupAction&&Oa.currentPopupAction.cancel(),Oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=D_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i4.get())};e()}}Oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="pendingRedirect",fp=new Map;class o4 extends lN{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=fp.get(this.auth._key());if(!e){try{const i=await a4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}fp.set(this.auth._key(),e)}return this.bypassAuthState||fp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a4(t,e){const n=c4(e),i=u4(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function l4(t,e){fp.set(t._key(),e)}function u4(t){return Ds(t._redirectPersistence)}function c4(t){return cp(s4,t.config.apiKey,t.name)}async function f4(t,e,n=!1){if(Si(t.app))return Promise.reject(Ms(t));const i=ta(t),r=aN(i,e),l=await new o4(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=600*1e3;class h4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!uN(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Lr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d4&&this.cachedEventUids.clear(),this.cachedEventUids.has(wA(e))}saveEventToCache(e){this.cachedEventUids.add(wA(e)),this.lastProcessedEventTime=Date.now()}}function wA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function p4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(t,e={}){return ea(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y4=/^https?/;async function v4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await m4(t);for(const n of e)try{if(_4(n))return}catch{}Er(t,"unauthorized-domain")}function _4(t){const e=s0(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!y4.test(n))return!1;if(g4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=new Jf(3e4,6e4);function AA(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function E4(t){return new Promise((e,n)=>{var i,r,o;function l(){AA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AA(),n(Lr(t,"network-request-failed"))},timeout:T4.get()})}if(!((r=(i=es().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=es().gapi)===null||o===void 0)&&o.load)l();else{const c=hU("iframefcb");return es()[c]=()=>{gapi.load?l():n(Lr(t,"network-request-failed"))},K1(`${dU()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw dp=null,e})}let dp=null;function S4(t){return dp=dp||E4(t),dp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Jf(5e3,15e3),w4="__/auth/iframe",A4="emulator/auth/iframe",C4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I4(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?C_(e,A4):`https://${t.config.authDomain}/${w4}`,i={apiKey:e.apiKey,appName:t.name,v:el},r=x4.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Kf(i).slice(1)}`}async function R4(t){const e=await S4(t),n=es().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:I4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C4,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Lr(t,"network-request-failed"),c=es().setTimeout(()=>{o(l)},b4.get());function f(){es().clearTimeout(c),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P4=500,D4=600,M4="_blank",k4="http://localhost";class CA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function V4(t,e,n,i=P4,r=D4){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f=Object.assign(Object.assign({},N4),{width:i.toString(),height:r.toString(),top:o,left:l}),d=ci().toLowerCase();n&&(c=B1(d)?M4:n),U1(d)&&(e=e||k4,f.scrollbars="yes");const p=Object.entries(f).reduce((T,[b,x])=>`${T}${b}=${x},`,"");if(iU(d)&&c!=="_self")return L4(e||"",c),new CA(null);const v=window.open(e||"",c,p);Ue(v,t,"popup-blocked");try{v.focus()}catch{}return new CA(v)}function L4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="__/auth/handler",U4="emulator/auth/handler",F4=encodeURIComponent("fac");async function xA(t,e,n,i,r,o){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:el,eventId:r};if(e instanceof P_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",wL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))l[p]=v}if(e instanceof Xf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),d=f?`#${F4}=${encodeURIComponent(f)}`:"";return`${B4(t)}?${Kf(c).slice(1)}${d}`}function B4({config:t}){return t.emulator?C_(t,U4):`https://${t.authDomain}/${O4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="webStorageSupport";class q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nN,this._completeRedirectFn=f4,this._overrideRedirectResult=l4}async _openPopup(e,n,i,r){var o;Us((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await xA(e,n,i,s0(),r);return V4(e,l,D_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await xA(e,n,i,s0(),r);return HU(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Us(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await R4(e),i=new h4(e);return n.register("authEvent",r=>(Ue(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Av,{type:Av},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Av];l!==void 0&&n(!!l),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j1()||F1()||I_()}}const z4=q4;var IA="@firebase/auth",RA="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function j4(t){Go(new Ls("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$1(t)},d=new uU(i,r,o,f);return _U(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Go(new Ls("auth-internal",e=>{const n=ta(e.getProvider("auth").getImmediate());return(i=>new G4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(IA,RA,H4(t)),_r(IA,RA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=300,K4=w1("authIdTokenMaxAge")||$4;let NA=null;const Y4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>K4)return;const r=n==null?void 0:n.token;NA!==r&&(NA=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function J4(t=xm()){const e=Yf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vU(t,{popupRedirectResolver:z4,persistence:[ZU,qU,nN]}),i=w1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Y4(o.toString());OU(n,l,()=>l(n.currentUser)),LU(n,c=>l(c))}}const r=S1("auth");return r&&TU(n,`http://${r}`),n}function W4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cU({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Lr("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",W4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});j4("Browser");var X4="firebase",Q4="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(X4,Q4,"app");var PA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,cN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function P(){}P.prototype=R.prototype,I.D=R.prototype,I.prototype=new P,I.prototype.constructor=I,I.C=function(V,U,q){for(var z=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)z[xe-2]=arguments[xe];return R.prototype[U].apply(V,z)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,R,P){P||(P=0);var V=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)V[U]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(U=0;16>U;++U)V[U]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=I.g[0],P=I.g[1],U=I.g[2];var q=I.g[3],z=R+(q^P&(U^q))+V[0]+3614090360&4294967295;R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[1]+3905402710&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[2]+606105819&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[3]+3250441966&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[4]+4118548399&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[5]+1200080426&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[6]+2821735955&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[7]+4249261313&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[8]+1770035416&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[9]+2336552879&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[10]+4294925233&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[11]+2304563134&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(q^P&(U^q))+V[12]+1804603682&4294967295,R=P+(z<<7&4294967295|z>>>25),z=q+(U^R&(P^U))+V[13]+4254626195&4294967295,q=R+(z<<12&4294967295|z>>>20),z=U+(P^q&(R^P))+V[14]+2792965006&4294967295,U=q+(z<<17&4294967295|z>>>15),z=P+(R^U&(q^R))+V[15]+1236535329&4294967295,P=U+(z<<22&4294967295|z>>>10),z=R+(U^q&(P^U))+V[1]+4129170786&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[6]+3225465664&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[11]+643717713&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[0]+3921069994&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[5]+3593408605&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[10]+38016083&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[15]+3634488961&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[4]+3889429448&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[9]+568446438&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[14]+3275163606&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[3]+4107603335&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[8]+1163531501&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(U^q&(P^U))+V[13]+2850285829&4294967295,R=P+(z<<5&4294967295|z>>>27),z=q+(P^U&(R^P))+V[2]+4243563512&4294967295,q=R+(z<<9&4294967295|z>>>23),z=U+(R^P&(q^R))+V[7]+1735328473&4294967295,U=q+(z<<14&4294967295|z>>>18),z=P+(q^R&(U^q))+V[12]+2368359562&4294967295,P=U+(z<<20&4294967295|z>>>12),z=R+(P^U^q)+V[5]+4294588738&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[8]+2272392833&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[11]+1839030562&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[14]+4259657740&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[1]+2763975236&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[4]+1272893353&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[7]+4139469664&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[10]+3200236656&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[13]+681279174&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[0]+3936430074&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[3]+3572445317&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[6]+76029189&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(P^U^q)+V[9]+3654602809&4294967295,R=P+(z<<4&4294967295|z>>>28),z=q+(R^P^U)+V[12]+3873151461&4294967295,q=R+(z<<11&4294967295|z>>>21),z=U+(q^R^P)+V[15]+530742520&4294967295,U=q+(z<<16&4294967295|z>>>16),z=P+(U^q^R)+V[2]+3299628645&4294967295,P=U+(z<<23&4294967295|z>>>9),z=R+(U^(P|~q))+V[0]+4096336452&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[7]+1126891415&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[14]+2878612391&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[5]+4237533241&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[12]+1700485571&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[3]+2399980690&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[10]+4293915773&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[1]+2240044497&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[8]+1873313359&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[15]+4264355552&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[6]+2734768916&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[13]+1309151649&4294967295,P=U+(z<<21&4294967295|z>>>11),z=R+(U^(P|~q))+V[4]+4149444226&4294967295,R=P+(z<<6&4294967295|z>>>26),z=q+(P^(R|~U))+V[11]+3174756917&4294967295,q=R+(z<<10&4294967295|z>>>22),z=U+(R^(q|~P))+V[2]+718787259&4294967295,U=q+(z<<15&4294967295|z>>>17),z=P+(q^(U|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(U+(z<<21&4294967295|z>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+q&4294967295}i.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var P=R-this.blockSize,V=this.B,U=this.h,q=0;q<R;){if(U==0)for(;q<=P;)r(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<R;)if(V[U++]=I.charCodeAt(q++),U==this.blockSize){r(this,V),U=0;break}}else for(;q<R;)if(V[U++]=I[q++],U==this.blockSize){r(this,V),U=0;break}}this.h=U,this.o+=R},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var P=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=P&255,P/=256;for(this.u(I),I=Array(16),R=P=0;4>R;++R)for(var V=0;32>V;V+=8)I[P++]=this.g[R]>>>V&255;return I};function o(I,R){var P=c;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=R(I)}function l(I,R){this.h=R;for(var P=[],V=!0,U=I.length-1;0<=U;U--){var q=I[U]|0;V&&q==R||(P[U]=q,V=!1)}this.g=P}var c={};function f(I){return-128<=I&&128>I?o(I,function(R){return new l([R|0],0>R?-1:0)}):new l([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return D(d(-I));for(var R=[],P=1,V=0;I>=P;V++)R[V]=I/P|0,P*=4294967296;return new l(R,0)}function p(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return D(p(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=d(Math.pow(R,8)),V=v,U=0;U<I.length;U+=8){var q=Math.min(8,I.length-U),z=parseInt(I.substring(U,U+q),R);8>q?(q=d(Math.pow(R,q)),V=V.j(q).add(d(z))):(V=V.j(P),V=V.add(d(z)))}return V}var v=f(0),T=f(1),b=f(16777216);t=l.prototype,t.m=function(){if(N(this))return-D(this).m();for(var I=0,R=1,P=0;P<this.g.length;P++){var V=this.i(P);I+=(0<=V?V:4294967296+V)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(N(this))return"-"+D(this).toString(I);for(var R=d(Math.pow(I,6)),P=this,V="";;){var U=$(P,R).g;P=O(P,U.j(R));var q=((0<P.g.length?P.g[0]:P.h)>>>0).toString(I);if(P=U,x(P))return q+V;for(;6>q.length;)q="0"+q;V=q+V}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=O(this,I),N(I)?-1:x(I)?0:1};function D(I){for(var R=I.g.length,P=[],V=0;V<R;V++)P[V]=~I.g[V];return new l(P,~I.h).add(T)}t.abs=function(){return N(this)?D(this):this},t.add=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0,U=0;U<=R;U++){var q=V+(this.i(U)&65535)+(I.i(U)&65535),z=(q>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);V=z>>>16,q&=65535,z&=65535,P[U]=z<<16|q}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(I,R){return I.add(D(R))}t.j=function(I){if(x(this)||x(I))return v;if(N(this))return N(I)?D(this).j(D(I)):D(D(this).j(I));if(N(I))return D(this.j(D(I)));if(0>this.l(b)&&0>I.l(b))return d(this.m()*I.m());for(var R=this.g.length+I.g.length,P=[],V=0;V<2*R;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<I.g.length;U++){var q=this.i(V)>>>16,z=this.i(V)&65535,xe=I.i(U)>>>16,ke=I.i(U)&65535;P[2*V+2*U]+=z*ke,k(P,2*V+2*U),P[2*V+2*U+1]+=q*ke,k(P,2*V+2*U+1),P[2*V+2*U+1]+=z*xe,k(P,2*V+2*U+1),P[2*V+2*U+2]+=q*xe,k(P,2*V+2*U+2)}for(V=0;V<R;V++)P[V]=P[2*V+1]<<16|P[2*V];for(V=R;V<2*R;V++)P[V]=0;return new l(P,0)};function k(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function F(I,R){this.g=I,this.h=R}function $(I,R){if(x(R))throw Error("division by zero");if(x(I))return new F(v,v);if(N(I))return R=$(D(I),R),new F(D(R.g),D(R.h));if(N(R))return R=$(I,D(R)),new F(D(R.g),R.h);if(30<I.g.length){if(N(I)||N(R))throw Error("slowDivide_ only works with positive integers.");for(var P=T,V=R;0>=V.l(I);)P=K(P),V=K(V);var U=G(P,1),q=G(V,1);for(V=G(V,2),P=G(P,2);!x(V);){var z=q.add(V);0>=z.l(I)&&(U=U.add(P),q=z),V=G(V,1),P=G(P,1)}return R=O(I,U.j(R)),new F(U,R)}for(U=v;0<=I.l(R);){for(P=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),q=d(P),z=q.j(R);N(z)||0<z.l(I);)P-=V,q=d(P),z=q.j(R);x(q)&&(q=T),U=U.add(q),I=O(I,z)}return new F(U,I)}t.A=function(I){return $(this,I).h},t.and=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)&I.i(V);return new l(P,this.h&I.h)},t.or=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)|I.i(V);return new l(P,this.h|I.h)},t.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),P=[],V=0;V<R;V++)P[V]=this.i(V)^I.i(V);return new l(P,this.h^I.h)};function K(I){for(var R=I.g.length+1,P=[],V=0;V<R;V++)P[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(P,I.h)}function G(I,R){var P=R>>5;R%=32;for(var V=I.g.length-P,U=[],q=0;q<V;q++)U[q]=0<R?I.i(q+P)>>>R|I.i(q+P+1)<<32-R:I.i(q+P);return new l(U,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,Bo=l}).apply(typeof PA<"u"?PA:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fN,Yc,dN,hp,u0,hN,pN,mN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,w,C){return g==Array.prototype||g==Object.prototype||(g[w]=C.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var w=0;w<g.length;++w){var C=g[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=n(this);function r(g,w){if(w)e:{var C=i;g=g.split(".");for(var L=0;L<g.length-1;L++){var W=g[L];if(!(W in C))break e;C=C[W]}g=g[g.length-1],L=C[g],w=w(L),w!=L&&w!=null&&e(C,g,{configurable:!0,writable:!0,value:w})}}function o(g,w){g instanceof String&&(g+="");var C=0,L=!1,W={next:function(){if(!L&&C<g.length){var re=C++;return{value:w(re,g[re]),done:!1}}return L=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}r("Array.prototype.values",function(g){return g||function(){return o(this,function(w,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(g){var w=typeof g;return w=w!="object"?w:g?Array.isArray(g)?"array":w:"null",w=="array"||w=="object"&&typeof g.length=="number"}function d(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function p(g,w,C){return g.call.apply(g.bind,arguments)}function v(g,w,C){if(!g)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,L),g.apply(w,W)}}return function(){return g.apply(w,arguments)}}function T(g,w,C){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:v,T.apply(null,arguments)}function b(g,w){var C=Array.prototype.slice.call(arguments,1);return function(){var L=C.slice();return L.push.apply(L,arguments),g.apply(this,L)}}function x(g,w){function C(){}C.prototype=w.prototype,g.aa=w.prototype,g.prototype=new C,g.prototype.constructor=g,g.Qb=function(L,W,re){for(var ge=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)ge[Et-2]=arguments[Et];return w.prototype[W].apply(L,ge)}}function N(g){const w=g.length;if(0<w){const C=Array(w);for(let L=0;L<w;L++)C[L]=g[L];return C}return[]}function D(g,w){for(let C=1;C<arguments.length;C++){const L=arguments[C];if(f(L)){const W=g.length||0,re=L.length||0;g.length=W+re;for(let ge=0;ge<re;ge++)g[W+ge]=L[ge]}else g.push(L)}}class O{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function k(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=c.navigator;return g&&(g=g.userAgent)?g:""}function $(g){return $[" "](g),g}$[" "]=function(){};var K=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function G(g,w,C){for(const L in g)w.call(C,g[L],L,g)}function I(g,w){for(const C in g)w.call(void 0,g[C],C,g)}function R(g){const w={};for(const C in g)w[C]=g[C];return w}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(g,w){let C,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(C in L)g[C]=L[C];for(let re=0;re<P.length;re++)C=P[re],Object.prototype.hasOwnProperty.call(L,C)&&(g[C]=L[C])}}function U(g){var w=1;g=g.split(":");const C=[];for(;0<w&&g.length;)C.push(g.shift()),w--;return g.length&&C.push(g.join(":")),C}function q(g){c.setTimeout(()=>{throw g},0)}function z(){var g=Ce;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class xe{constructor(){this.h=this.g=null}add(w,C){const L=ke.get();L.set(w,C),this.h?this.h.next=L:this.g=L,this.h=L}}var ke=new O(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,me=!1,Ce=new xe,Ie=()=>{const g=c.Promise.resolve(void 0);ae=()=>{g.then(j)}};var j=()=>{for(var g;g=z();){try{g.h.call(g.g)}catch(C){q(C)}var w=ke;w.j(g),100>w.h&&(w.h++,g.next=w.g,w.g=g)}me=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var ne=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};c.addEventListener("test",C,w),c.removeEventListener("test",C,w)}catch{}return g})();function he(g,w){if(pe.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var C=this.type=g.type,L=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget){if(K){e:{try{$(w.nodeName);var W=!0;break e}catch{}W=!1}W||(w=null)}}else C=="mouseover"?w=g.fromElement:C=="mouseout"&&(w=g.toElement);this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ee[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&he.aa.h.call(this)}}x(he,pe);var Ee={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Tt(g,w,C,L,W){this.listener=g,this.proxy=null,this.src=w,this.type=C,this.capture=!!L,this.ha=W,this.key=++Be,this.da=this.fa=!1}function Nn(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function fi(g){this.src=g,this.g={},this.h=0}fi.prototype.add=function(g,w,C,L,W){var re=g.toString();g=this.g[re],g||(g=this.g[re]=[],this.h++);var ge=Jn(g,w,L,W);return-1<ge?(w=g[ge],C||(w.fa=!1)):(w=new Tt(w,this.src,re,!!L,W),w.fa=C,g.push(w)),w};function Zt(g,w){var C=w.type;if(C in g.g){var L=g.g[C],W=Array.prototype.indexOf.call(L,w,void 0),re;(re=0<=W)&&Array.prototype.splice.call(L,W,1),re&&(Nn(w),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Jn(g,w,C,L){for(var W=0;W<g.length;++W){var re=g[W];if(!re.da&&re.listener==w&&re.capture==!!C&&re.ha==L)return W}return-1}var Un="closure_lm_"+(1e6*Math.random()|0),An={};function di(g,w,C,L,W){if(Array.isArray(w)){for(var re=0;re<w.length;re++)di(g,w[re],C,L,W);return null}return C=tn(C),g&&g[Ve]?g.K(w,C,d(L)?!!L.capture:!1,W):Oi(g,w,C,!1,L,W)}function Oi(g,w,C,L,W,re){if(!w)throw Error("Invalid event type");var ge=d(W)?!!W.capture:!!W,Et=Qn(g);if(Et||(g[Un]=Et=new fi(g)),C=Et.add(w,C,L,ge,re),C.proxy)return C;if(L=en(),C.proxy=L,L.src=g,L.listener=C,g.addEventListener)ne||(W=ge),W===void 0&&(W=!1),g.addEventListener(w.toString(),L,W);else if(g.attachEvent)g.attachEvent(Ai(w.toString()),L);else if(g.addListener&&g.removeListener)g.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return C}function en(){function g(C){return w.call(g.src,g.listener,C)}const w=Xn;return g}function wi(g,w,C,L,W){if(Array.isArray(w))for(var re=0;re<w.length;re++)wi(g,w[re],C,L,W);else L=d(L)?!!L.capture:!!L,C=tn(C),g&&g[Ve]?(g=g.i,w=String(w).toString(),w in g.g&&(re=g.g[w],C=Jn(re,C,L,W),-1<C&&(Nn(re[C]),Array.prototype.splice.call(re,C,1),re.length==0&&(delete g.g[w],g.h--)))):g&&(g=Qn(g))&&(w=g.g[w.toString()],g=-1,w&&(g=Jn(w,C,L,W)),(C=-1<g?w[g]:null)&&Wn(C))}function Wn(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[Ve])Zt(w.i,g);else{var C=g.type,L=g.proxy;w.removeEventListener?w.removeEventListener(C,L,g.capture):w.detachEvent?w.detachEvent(Ai(C),L):w.addListener&&w.removeListener&&w.removeListener(L),(C=Qn(w))?(Zt(C,g),C.h==0&&(C.src=null,w[Un]=null)):Nn(g)}}}function Ai(g){return g in An?An[g]:An[g]="on"+g}function Xn(g,w){if(g.da)g=!0;else{w=new he(w,this);var C=g.listener,L=g.ha||g.src;g.fa&&Wn(g),g=C.call(L,w)}return g}function Qn(g){return g=g[Un],g instanceof fi?g:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function tn(g){return typeof g=="function"?g:(g[Re]||(g[Re]=function(w){return g.handleEvent(w)}),g[Re])}function Pe(){Z.call(this),this.i=new fi(this),this.M=this,this.F=null}x(Pe,Z),Pe.prototype[Ve]=!0,Pe.prototype.removeEventListener=function(g,w,C,L){wi(this,g,w,C,L)};function Ot(g,w){var C,L=g.F;if(L)for(C=[];L;L=L.F)C.push(L);if(g=g.M,L=w.type||w,typeof w=="string")w=new pe(w,g);else if(w instanceof pe)w.target=w.target||g;else{var W=w;w=new pe(L,g),V(w,W)}if(W=!0,C)for(var re=C.length-1;0<=re;re--){var ge=w.g=C[re];W=$t(ge,L,!0,w)&&W}if(ge=w.g=g,W=$t(ge,L,!0,w)&&W,W=$t(ge,L,!1,w)&&W,C)for(re=0;re<C.length;re++)ge=w.g=C[re],W=$t(ge,L,!1,w)&&W}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var g=this.i,w;for(w in g.g){for(var C=g.g[w],L=0;L<C.length;L++)Nn(C[L]);delete g.g[w],g.h--}}this.F=null},Pe.prototype.K=function(g,w,C,L){return this.i.add(String(g),w,!1,C,L)},Pe.prototype.L=function(g,w,C,L){return this.i.add(String(g),w,!0,C,L)};function $t(g,w,C,L){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();for(var W=!0,re=0;re<w.length;++re){var ge=w[re];if(ge&&!ge.da&&ge.capture==C){var Et=ge.listener,yn=ge.ha||ge.src;ge.fa&&Zt(g.i,ge),W=Et.call(yn,L)!==!1&&W}}return W&&!L.defaultPrevented}function Jt(g,w,C){if(typeof g=="function")C&&(g=T(g,C));else if(g&&typeof g.handleEvent=="function")g=T(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:c.setTimeout(g,w||0)}function Sr(g){g.g=Jt(()=>{g.g=null,g.i&&(g.i=!1,Sr(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class zr extends Z{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(g){Z.call(this),this.h=g,this.g={}}x(Pn,Z);var hi=[];function cn(g){G(g.g,function(w,C){this.g.hasOwnProperty(C)&&Wn(w)},g),g.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),cn(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=c.JSON.stringify,be=c.JSON.parse,we=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function je(){}je.prototype.h=null;function ct(g){return g.h||(g.h=g.i())}function Je(){}var We={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){pe.call(this,"d")}x(Xe,pe);function Qe(){pe.call(this,"c")}x(Qe,pe);var se={},ve=null;function Ke(){return ve=ve||new Pe}se.La="serverreachability";function wt(g){pe.call(this,se.La,g)}x(wt,pe);function Mt(g){const w=Ke();Ot(w,new wt(w))}se.STAT_EVENT="statevent";function xt(g,w){pe.call(this,se.STAT_EVENT,g),this.stat=w}x(xt,pe);function dt(g){const w=Ke();Ot(w,new xt(w,g))}se.Ma="timingevent";function Cn(g,w){pe.call(this,se.Ma,g),this.size=w}x(Cn,pe);function kt(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},w)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function er(g,w,C,L,W,re){g.info(function(){if(g.g)if(re)for(var ge="",Et=re.split("&"),yn=0;yn<Et.length;yn++){var Ze=Et[yn].split("=");if(1<Ze.length){var Mn=Ze[0];Ze=Ze[1];var kn=Mn.split("_");ge=2<=kn.length&&kn[1]=="type"?ge+(Mn+"="+Ze+"&"):ge+(Mn+"=redacted&")}}else ge=null;else ge=re;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+w+`
`+C+`
`+ge})}function Fn(g,w,C,L,W,re,ge){g.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+w+`
`+C+`
`+re+" "+ge})}function pi(g,w,C,L){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ui(g,C)+(L?" "+L:"")})}function us(g,w){g.info(function(){return"TIMEOUT: "+w})}Zn.prototype.info=function(){};function Ui(g,w){if(!g.g)return w;if(!w)return null;try{var C=JSON.parse(w);if(C){for(g=0;g<C.length;g++)if(Array.isArray(C[g])){var L=C[g];if(!(2>L.length)){var W=L[1];if(Array.isArray(W)&&!(1>W.length)){var re=W[0];if(re!="noop"&&re!="stop"&&re!="close")for(var ge=1;ge<W.length;ge++)W[ge]=""}}}}return fe(C)}catch{return w}}var Ut={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fi;function tr(){}x(tr,je),tr.prototype.g=function(){return new XMLHttpRequest},tr.prototype.i=function(){return{}},Fi=new tr;function Bi(g,w,C,L){this.j=g,this.i=w,this.l=C,this.R=L||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oa}function oa(){this.i=null,this.g="",this.h=!1}var br={},nr={};function ir(g,w,C){g.L=1,g.v=la(nn(w)),g.m=C,g.P=!0,Ci(g,null)}function Ci(g,w){g.F=Date.now(),mi(g),g.A=nn(g.v);var C=g.A,L=g.R;Array.isArray(L)||(L=[String(L)]),fs(C.i,"t",L),g.C=0,C=g.j.J,g.h=new oa,g.g=xd(g.j,C?w:null,!g.m),0<g.O&&(g.M=new zr(T(g.Y,g,g.g),g.O)),w=g.U,C=g.g,L=g.ca;var W="readystatechange";Array.isArray(W)||(W&&(hi[0]=W.toString()),W=hi);for(var re=0;re<W.length;re++){var ge=di(C,W[re],L||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=g.H?R(g.H):{},g.m?(g.u||(g.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,w)):(g.u="GET",g.g.ea(g.A,g.u,null,w)),Mt(),er(g.i,g.u,g.A,g.l,g.R,g.m)}Bi.prototype.ca=function(g){g=g.target;const w=this.M;w&&vi(g)==3?w.j():this.Y(g)},Bi.prototype.Y=function(g){try{if(g==this.g)e:{const kn=vi(this.g);var w=this.g.Ba();const io=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||fa(this.g)))){this.J||kn!=4||w==7||(w==8||0>=io?Mt(3):Mt(2)),wr(this);var C=this.g.Z();this.X=C;t:if(rr(this)){var L=fa(this.g);g="";var W=L.length,re=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gi(this),Ar(this);var ge="";break t}this.h.i=new c.TextDecoder}for(w=0;w<W;w++)this.h.h=!0,g+=this.h.i.decode(L[w],{stream:!(re&&w==W-1)});L.length=0,this.h.g+=g,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=C==200,Fn(this.i,this.u,this.A,this.l,this.R,kn,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,yn=this.g;if((Et=yn.g?yn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Et)){var Ze=Et;break t}}Ze=null}if(C=Ze)pi(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,C);else{this.o=!1,this.s=3,dt(12),gi(this),Ar(this);break e}}if(this.P){C=!0;let Ii;for(;!this.J&&this.C<ge.length;)if(Ii=Gr(this,ge),Ii==nr){kn==4&&(this.s=4,dt(14),C=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ii==br){this.s=4,dt(15),pi(this.i,this.l,ge,"[Invalid Chunk]"),C=!1;break}else pi(this.i,this.l,Ii,null),Hr(this,Ii);if(rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ge.length!=0||this.h.h||(this.s=1,dt(16),C=!1),this.o=this.o&&C,!C)pi(this.i,this.l,ge,"[Invalid Chunked Response]"),gi(this),Ar(this);else if(0<ge.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),Qu(Mn),Mn.M=!0,dt(11))}}else pi(this.i,this.l,ge,null),Hr(this,ge);kn==4&&gi(this),this.o&&!this.J&&(kn==4?wd(this.j,this):(this.o=!1,mi(this)))}else vd(this.g),C==400&&0<ge.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),gi(this),Ar(this)}}}catch{}finally{}};function rr(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Gr(g,w){var C=g.C,L=w.indexOf(`
`,C);return L==-1?nr:(C=Number(w.substring(C,L)),isNaN(C)?br:(L+=1,L+C>w.length?nr:(w=w.slice(L,L+C),g.C=L+C,w)))}Bi.prototype.cancel=function(){this.J=!0,gi(this)};function mi(g){g.S=Date.now()+g.I,Kt(g,g.I)}function Kt(g,w){if(g.B!=null)throw Error("WatchDog timer not null");g.B=kt(T(g.ba,g),w)}function wr(g){g.B&&(c.clearTimeout(g.B),g.B=null)}Bi.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(us(this.i,this.A),this.L!=2&&(Mt(),dt(17)),gi(this),this.s=2,Ar(this)):Kt(this,this.S-g)};function Ar(g){g.j.G==0||g.J||wd(g.j,g)}function gi(g){wr(g);var w=g.M;w&&typeof w.ma=="function"&&w.ma(),g.M=null,cn(g.U),g.g&&(w=g.g,g.g=null,w.abort(),w.ma())}function Hr(g,w){try{var C=g.j;if(C.G!=0&&(C.g==g||$s(C.h,g))){if(!g.K&&$s(C.h,g)&&C.G==3){try{var L=C.Da.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<g.F)to(C),eo(C);else break e;Xu(C),dt(18)}}else C.za=W[1],0<C.za-C.T&&37500>W[2]&&C.F&&C.v==0&&!C.C&&(C.C=kt(T(C.Za,C),6e3));if(1>=dd(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else hs(C,11)}else if((g.K||C.g==g)&&to(C),!k(w))for(W=C.Da.g.parse(w),w=0;w<W.length;w++){let Ze=W[w];if(C.T=Ze[0],Ze=Ze[1],C.G==2)if(Ze[0]=="c"){C.K=Ze[1],C.ia=Ze[2];const Mn=Ze[3];Mn!=null&&(C.la=Mn,C.j.info("VER="+C.la));const kn=Ze[4];kn!=null&&(C.Aa=kn,C.j.info("SVER="+C.Aa));const io=Ze[5];io!=null&&typeof io=="number"&&0<io&&(L=1.5*io,C.L=L,C.j.info("backChannelRequestTimeoutMs_="+L)),L=C;const Ii=g.g;if(Ii){const pa=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pa){var re=L.h;re.g||pa.indexOf("spdy")==-1&&pa.indexOf("quic")==-1&&pa.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ks(re,re.h),re.h=null))}if(L.D){const ps=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(L.ya=ps,ht(L.I,L.D,ps))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-g.F,C.j.info("Handshake RTT: "+C.R+"ms")),L=C;var ge=g;if(L.qa=Cd(L,L.J?L.ia:null,L.W),ge.K){sr(L.h,ge);var Et=ge,yn=L.L;yn&&(Et.I=yn),Et.B&&(wr(Et),mi(Et)),L.g=ge}else Sd(L);0<C.i.length&&dl(C)}else Ze[0]!="stop"&&Ze[0]!="close"||hs(C,7);else C.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?hs(C,7):Ju(C):Ze[0]!="noop"&&C.l&&C.l.ta(Ze),C.v=0)}}Mt(4)}catch{}}var hg=class{constructor(g,w){this.g=g,this.map=w}};function zu(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gu(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function dd(g){return g.h?1:g.g?g.g.size:0}function $s(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function Ks(g,w){g.g?g.g.add(w):g.h=w}function sr(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}zu.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yi(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const C of g.g.values())w=w.concat(C.D);return w}return N(g.i)}function hd(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(f(g)){for(var w=[],C=g.length,L=0;L<C;L++)w.push(g[L]);return w}w=[],C=0;for(L in g)w[C++]=g[L];return w}function pg(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(f(g)||typeof g=="string"){var w=[];g=g.length;for(var C=0;C<g;C++)w.push(C);return w}w=[],C=0;for(const L in g)w[C++]=L;return w}}}function sl(g,w){if(g.forEach&&typeof g.forEach=="function")g.forEach(w,void 0);else if(f(g)||typeof g=="string")Array.prototype.forEach.call(g,w,void 0);else for(var C=pg(g),L=hd(g),W=L.length,re=0;re<W;re++)w.call(void 0,L[re],C&&C[re],g)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ol(g,w){if(g){g=g.split("&");for(var C=0;C<g.length;C++){var L=g[C].indexOf("="),W=null;if(0<=L){var re=g[C].substring(0,L);W=g[C].substring(L+1)}else re=g[C];w(re,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function cs(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof cs){this.h=g.h,Ys(this,g.j),this.o=g.o,this.g=g.g,aa(this,g.s),this.l=g.l;var w=g.i,C=new jr;C.i=w.i,w.g&&(C.g=new Map(w.g),C.h=w.h),al(this,C),this.m=g.m}else g&&(w=String(g).match(Hu))?(this.h=!1,Ys(this,w[1]||"",!0),this.o=Js(w[2]||""),this.g=Js(w[3]||"",!0),aa(this,w[4]),this.l=Js(w[5]||"",!0),al(this,w[6]||"",!0),this.m=Js(w[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}cs.prototype.toString=function(){var g=[],w=this.j;w&&g.push(or(w,ju,!0),":");var C=this.g;return(C||w=="file")&&(g.push("//"),(w=this.o)&&g.push(or(w,ju,!0),"@"),g.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&g.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(or(C,C.charAt(0)=="/"?$u:pd,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",or(C,yg)),g.join("")};function nn(g){return new cs(g)}function Ys(g,w,C){g.j=C?Js(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function aa(g,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);g.s=w}else g.s=null}function al(g,w,C){w instanceof jr?(g.i=w,md(g.i,g.h)):(C||(w=or(w,gg)),g.i=new jr(w,g.h))}function ht(g,w,C){g.i.set(w,C)}function la(g){return ht(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Js(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function or(g,w,C){return typeof g=="string"?(g=encodeURI(g).replace(w,mg),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function mg(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ju=/[#\/\?@]/g,pd=/[#\?:]/g,$u=/[#\?]/g,gg=/[#\?@]/g,yg=/#/g;function jr(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function Dn(g){g.g||(g.g=new Map,g.h=0,g.i&&ol(g.i,function(w,C){g.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}t=jr.prototype,t.add=function(g,w){Dn(this),this.i=null,g=qi(this,g);var C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(w),this.h+=1,this};function ll(g,w){Dn(g),w=qi(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function ul(g,w){return Dn(g),w=qi(g,w),g.g.has(w)}t.forEach=function(g,w){Dn(this),this.g.forEach(function(C,L){C.forEach(function(W){g.call(w,W,L,this)},this)},this)},t.na=function(){Dn(this);const g=Array.from(this.g.values()),w=Array.from(this.g.keys()),C=[];for(let L=0;L<w.length;L++){const W=g[L];for(let re=0;re<W.length;re++)C.push(w[L])}return C},t.V=function(g){Dn(this);let w=[];if(typeof g=="string")ul(this,g)&&(w=w.concat(this.g.get(qi(this,g))));else{g=Array.from(this.g.values());for(let C=0;C<g.length;C++)w=w.concat(g[C])}return w},t.set=function(g,w){return Dn(this),this.i=null,g=qi(this,g),ul(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},t.get=function(g,w){return g?(g=this.V(g),0<g.length?String(g[0]):w):w};function fs(g,w,C){ll(g,w),0<C.length&&(g.i=null,g.g.set(qi(g,w),N(C)),g.h+=C.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(var C=0;C<w.length;C++){var L=w[C];const re=encodeURIComponent(String(L)),ge=this.V(L);for(L=0;L<ge.length;L++){var W=re;ge[L]!==""&&(W+="="+encodeURIComponent(String(ge[L]))),g.push(W)}}return this.i=g.join("&")};function qi(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function md(g,w){w&&!g.j&&(Dn(g),g.i=null,g.g.forEach(function(C,L){var W=L.toLowerCase();L!=W&&(ll(this,L),fs(this,W,C))},g)),g.j=w}function Ku(g,w){const C=new Zn;if(c.Image){const L=new Image;L.onload=b(xi,C,"TestLoadImage: loaded",!0,w,L),L.onerror=b(xi,C,"TestLoadImage: error",!1,w,L),L.onabort=b(xi,C,"TestLoadImage: abort",!1,w,L),L.ontimeout=b(xi,C,"TestLoadImage: timeout",!1,w,L),c.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=g}else w(!1)}function gd(g,w){const C=new Zn,L=new AbortController,W=setTimeout(()=>{L.abort(),xi(C,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:L.signal}).then(re=>{clearTimeout(W),re.ok?xi(C,"TestPingServer: ok",!0,w):xi(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),xi(C,"TestPingServer: error",!1,w)})}function xi(g,w,C,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(C)}catch{}}function Cr(){this.g=new we}function Yu(g,w,C){const L=C||"";try{sl(g,function(W,re){let ge=W;d(W)&&(ge=fe(W)),w.push(L+re+"="+encodeURIComponent(ge))})}catch(W){throw w.push(L+"type="+encodeURIComponent("_badmap")),W}}function $r(g){this.l=g.Ub||null,this.j=g.eb||!1}x($r,je),$r.prototype.g=function(){return new zi(this.l,this.j)},$r.prototype.i=(function(g){return function(){return g}})({});function zi(g,w){Pe.call(this),this.D=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(zi,Pe),t=zi.prototype,t.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=w,this.readyState=1,Ws(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(w.body=g),(this.D||c).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cl(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function cl(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Kr(this):Ws(this),this.readyState==3&&cl(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Kr(this))},t.Qa=function(g){this.g&&(this.response=g,Kr(this))},t.ga=function(){this.g&&Kr(this)};function Kr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Ws(g)}t.setRequestHeader=function(g,w){this.u.append(g,w)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=w.next();return g.join(`\r
`)};function Ws(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ua(g){let w="";return G(g,function(C,L){w+=L,w+=":",w+=C,w+=`\r
`}),w}function Xs(g,w,C){e:{for(L in C){var L=!1;break e}L=!0}L||(C=ua(C),typeof g=="string"?C!=null&&encodeURIComponent(String(C)):ht(g,w,C))}function Ft(g){Pe.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ft,Pe);var ei=/^https?$/i,ds=["POST","PUT"];t=Ft.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,w,C,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fi.g(),this.v=this.o?ct(this.o):ct(Fi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(re){ca(this,re);return}if(g=C||"",C=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)C.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const re of L.keys())C.set(re,L.get(re));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(C.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&g instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ds,w,void 0))||L||W||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,ge]of C)this.g.setRequestHeader(re,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fl(this),this.u=!0,this.g.send(g),this.u=!1}catch(re){ca(this,re)}};function ca(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.m=5,Qs(g),Zs(g)}function Qs(g){g.A||(g.A=!0,Ot(g,"complete"),Ot(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Ot(this,"complete"),Ot(this,"abort"),Zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zs(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yd(this):this.bb())},t.bb=function(){yd(this)};function yd(g){if(g.h&&typeof l<"u"&&(!g.v[1]||vi(g)!=4||g.Z()!=2)){if(g.u&&vi(g)==4)Jt(g.Ea,0,g);else if(Ot(g,"readystatechange"),vi(g)==4){g.h=!1;try{const ge=g.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var L;if(L=ge===0){var W=String(g.D).match(Hu)[1]||null;!W&&c.self&&c.self.location&&(W=c.self.location.protocol.slice(0,-1)),L=!ei.test(W?W.toLowerCase():"")}C=L}if(C)Ot(g,"complete"),Ot(g,"success");else{g.m=6;try{var re=2<vi(g)?g.g.statusText:""}catch{re=""}g.l=re+" ["+g.Z()+"]",Qs(g)}}finally{Zs(g)}}}}function Zs(g,w){if(g.g){fl(g);const C=g.g,L=g.v[0]?()=>{}:null;g.g=null,g.v=null,w||Ot(g,"ready");try{C.onreadystatechange=L}catch{}}}function fl(g){g.I&&(c.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function vi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),be(w)}};function fa(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(g){const w={};g=(g.g&&2<=vi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<g.length;L++){if(k(g[L]))continue;var C=U(g[L]);const W=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const re=w[W]||[];w[W]=re,re.push(C)}I(w,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function da(g,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||w}function _d(g){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=da("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=da("baseRetryDelayMs",5e3,g),this.cb=da("retryDelaySeedMs",1e4,g),this.Wa=da("forwardChannelMaxRetries",2,g),this.wa=da("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new zu(g&&g.concurrentRequestLimit),this.Da=new Cr,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_d.prototype,t.la=8,t.G=1,t.connect=function(g,w,C,L){dt(0),this.W=g,this.H=w||{},C&&L!==void 0&&(this.H.OSID=C,this.H.OAID=L),this.F=this.X,this.I=Cd(this,null,this.W),dl(this)};function Ju(g){if(Td(g),g.G==3){var w=g.U++,C=nn(g.I);if(ht(C,"SID",g.K),ht(C,"RID",w),ht(C,"TYPE","terminate"),ha(g,C),w=new Bi(g,g.j,w),w.L=2,w.v=la(nn(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(w.v.toString(),"")}catch{}!C&&c.Image&&(new Image().src=w.v,C=!0),C||(w.g=xd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),mi(w)}Zu(g)}function eo(g){g.g&&(Qu(g),g.g.cancel(),g.g=null)}function Td(g){eo(g),g.u&&(c.clearTimeout(g.u),g.u=null),to(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&c.clearTimeout(g.s),g.s=null)}function dl(g){if(!Gu(g.h)&&!g.s){g.s=!0;var w=g.Ga;ae||Ie(),me||(ae(),me=!0),Ce.add(w,g),g.B=0}}function vg(g,w){return dd(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=w.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=kt(T(g.Ga,g,w),Ad(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const W=new Bi(this,this.j,g);let re=this.o;if(this.S&&(re?(re=R(re),V(re,this.S)):re=this.S),this.m!==null||this.O||(W.H=re,re=null),this.P)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var L=this.i[C];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,4096<w){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=Wu(this,W,w),C=nn(this.I),ht(C,"RID",g),ht(C,"CVER",22),this.D&&ht(C,"X-HTTP-Session-Id",this.D),ha(this,C),re&&(this.O?w="headers="+encodeURIComponent(String(ua(re)))+"&"+w:this.m&&Xs(C,this.m,re)),Ks(this.h,W),this.Ua&&ht(C,"TYPE","init"),this.P?(ht(C,"$req",w),ht(C,"SID","null"),W.T=!0,ir(W,C,null)):ir(W,C,w),this.G=2}}else this.G==3&&(g?Ed(this,g):this.i.length==0||Gu(this.h)||Ed(this))};function Ed(g,w){var C;w?C=w.l:C=g.U++;const L=nn(g.I);ht(L,"SID",g.K),ht(L,"RID",C),ht(L,"AID",g.T),ha(g,L),g.m&&g.o&&Xs(L,g.m,g.o),C=new Bi(g,g.j,C,g.B+1),g.m===null&&(C.H=g.o),w&&(g.i=w.D.concat(g.i)),w=Wu(g,C,1e3),C.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ks(g.h,C),ir(C,L,w)}function ha(g,w){g.H&&G(g.H,function(C,L){ht(w,L,C)}),g.l&&sl({},function(C,L){ht(w,L,C)})}function Wu(g,w,C){C=Math.min(g.i.length,C);var L=g.l?T(g.l.Na,g.l,g):null;e:{var W=g.i;let re=-1;for(;;){const ge=["count="+C];re==-1?0<C?(re=W[0].g,ge.push("ofs="+re)):re=0:ge.push("ofs="+re);let Et=!0;for(let yn=0;yn<C;yn++){let Ze=W[yn].g;const Mn=W[yn].map;if(Ze-=re,0>Ze)re=Math.max(0,W[yn].g-100),Et=!1;else try{Yu(Mn,ge,"req"+Ze+"_")}catch{L&&L(Mn)}}if(Et){L=ge.join("&");break e}}}return g=g.i.splice(0,C),w.D=g,L}function Sd(g){if(!g.g&&!g.u){g.Y=1;var w=g.Fa;ae||Ie(),me||(ae(),me=!0),Ce.add(w,g),g.v=0}}function Xu(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=kt(T(g.Fa,g),Ad(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,bd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=kt(T(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),eo(this),bd(this))};function Qu(g){g.A!=null&&(c.clearTimeout(g.A),g.A=null)}function bd(g){g.g=new Bi(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var w=nn(g.qa);ht(w,"RID","rpc"),ht(w,"SID",g.K),ht(w,"AID",g.T),ht(w,"CI",g.F?"0":"1"),!g.F&&g.ja&&ht(w,"TO",g.ja),ht(w,"TYPE","xmlhttp"),ha(g,w),g.m&&g.o&&Xs(w,g.m,g.o),g.L&&(g.g.I=g.L);var C=g.g;g=g.ia,C.L=1,C.v=la(nn(w)),C.m=null,C.P=!0,Ci(C,g)}t.Za=function(){this.C!=null&&(this.C=null,eo(this),Xu(this),dt(19))};function to(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function wd(g,w){var C=null;if(g.g==w){to(g),Qu(g),g.g=null;var L=2}else if($s(g.h,w))C=w.D,sr(g.h,w),L=1;else return;if(g.G!=0){if(w.o)if(L==1){C=w.m?w.m.length:0,w=Date.now()-w.F;var W=g.B;L=Ke(),Ot(L,new Cn(L,C)),dl(g)}else Sd(g);else if(W=w.s,W==3||W==0&&0<w.X||!(L==1&&vg(g,w)||L==2&&Xu(g)))switch(C&&0<C.length&&(w=g.h,w.i=w.i.concat(C)),W){case 1:hs(g,5);break;case 4:hs(g,10);break;case 3:hs(g,6);break;default:hs(g,2)}}}function Ad(g,w){let C=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(C*=2),C*w}function hs(g,w){if(g.j.info("Error code "+w),w==2){var C=T(g.fb,g),L=g.Xa;const W=!L;L=new cs(L||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ys(L,"https"),la(L),W?Ku(L.toString(),C):gd(L.toString(),C)}else dt(2);g.G=0,g.l&&g.l.sa(w),Zu(g),Td(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Zu(g){if(g.G=0,g.ka=[],g.l){const w=yi(g.h);(w.length!=0||g.i.length!=0)&&(D(g.ka,w),D(g.ka,g.i),g.h.i.length=0,N(g.i),g.i.length=0),g.l.ra()}}function Cd(g,w,C){var L=C instanceof cs?nn(C):new cs(C);if(L.g!="")w&&(L.g=w+"."+L.g),aa(L,L.s);else{var W=c.location;L=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;var re=new cs(null);L&&Ys(re,L),w&&(re.g=w),W&&aa(re,W),C&&(re.l=C),L=re}return C=g.D,w=g.ya,C&&w&&ht(L,C,w),ht(L,"VER",g.la),ha(g,L),L}function xd(g,w,C){if(w&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Ca&&!g.pa?new Ft(new $r({eb:C})):new Ft(g.pa),w.Ha(g.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Id(){}t=Id.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hl(){}hl.prototype.g=function(g,w){return new _i(g,w)};function _i(g,w){Pe.call(this),this.g=new _d(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(g?g["X-WebChannel-Client-Profile"]=w.va:g={"X-WebChannel-Client-Profile":w.va}),this.g.S=g,(g=w&&w.Sb)&&!k(g)&&(this.g.m=g),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!k(w)&&(this.g.D=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new no(this)}x(_i,Pe),_i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_i.prototype.close=function(){Ju(this.g)},_i.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.u&&(C={},C.__data__=fe(g),g=C);w.i.push(new hg(w.Ya++,g)),w.G==3&&dl(w)},_i.prototype.N=function(){this.g.l=null,delete this.j,Ju(this.g),delete this.g,_i.aa.N.call(this)};function Rd(g){Xe.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const C in w){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}x(Rd,Xe);function Nd(){Qe.call(this),this.status=1}x(Nd,Qe);function no(g){this.g=g}x(no,Id),no.prototype.ua=function(){Ot(this.g,"a")},no.prototype.ta=function(g){Ot(this.g,new Rd(g))},no.prototype.sa=function(g){Ot(this.g,new Nd)},no.prototype.ra=function(){Ot(this.g,"b")},hl.prototype.createWebChannel=hl.prototype.g,_i.prototype.send=_i.prototype.o,_i.prototype.open=_i.prototype.m,_i.prototype.close=_i.prototype.close,mN=function(){return new hl},pN=function(){return Ke()},hN=se,u0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ut.NO_ERROR=0,Ut.TIMEOUT=8,Ut.HTTP_ERROR=6,hp=Ut,fn.COMPLETE="complete",dN=fn,Je.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Yc=Je,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,fN=Ft}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});const DA="@firebase/firestore",MA="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new E_("@firebase/firestore");function Kl(){return Ja.logLevel}function Se(t,...e){if(Ja.logLevel<=ot.DEBUG){const n=e.map(k_);Ja.debug(`Firestore (${Ru}): ${t}`,...n)}}function Fs(t,...e){if(Ja.logLevel<=ot.ERROR){const n=e.map(k_);Ja.error(`Firestore (${Ru}): ${t}`,...n)}}function Ho(t,...e){if(Ja.logLevel<=ot.WARN){const n=e.map(k_);Ja.warn(`Firestore (${Ru}): ${t}`,...n)}}function k_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,gN(t,i,n)}function gN(t,e,n){let i=`FIRESTORE (${Ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Fs(i),new Error(i)}function bt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||gN(e,r,i)}function He(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(oi.UNAUTHENTICATED)))}shutdown(){}}class e3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class t3{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let o=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qo,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},c=f=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(bt(typeof i.accessToken=="string",31837,{l:i}),new yN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class n3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new n3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bt(this.o===void 0,3512);const i=o=>{o.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,Se("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kA(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=s3(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function et(t,e){return t<e?-1:t>e?1:0}function c0(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return et(i,r);{const o=vN(),l=o3(o.encode(VA(t,n)),o.encode(VA(e,n)));return l!==0?l:et(i,r)}}n+=i>65535?2:1}return et(t.length,e.length)}function VA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function o3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return et(t[n],e[n]);return et(t.length,e.length)}function gu(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="__name__";class Zr{constructor(e,n,i){n===void 0?n=0:n>e.length&&Fe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Fe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Zr.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return et(e.length,n.length)}static compareSegments(e,n){const i=Zr.isNumericId(e),r=Zr.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):c0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bo.fromString(e.substring(4,e.length-2))}}class Vt extends Zr{construct(e,n,i){return new Vt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new Vt(n)}static emptyPath(){return new Vt([])}}const a3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Zr{construct(e,n,i){return new Kn(e,n,i)}static isValidIdentifier(e){return a3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===LA}static keyField(){return new Kn([LA])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Te(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Te(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new Te(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Vt.fromString(e))}static fromName(e){return new Me(Vt.fromString(e).popFirst(5))}static empty(){return new Me(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Vt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e,n){if(!n)throw new Te(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function l3(t,e,n,i){if(e===!0&&i===!0)throw new Te(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OA(t){if(!Me.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UA(t){if(Me.isDocumentKey(t))throw new Te(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pm(t);throw new Te(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zf(t,e){if(!TN(t))throw new Te(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Te(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=-62135596800,BA=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*BA);return new Ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<FA)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BA}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zf(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:wn("string",Ht._jsonSchemaVersion),seconds:wn("number"),nanoseconds:wn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Ht(0,0))}static max(){return new qe(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function u3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=qe.fromTimestamp(i===1e9?new Ht(n+1,0):new Ht(n,i));return new jo(r,Me.empty(),e)}function c3(t){return new jo(t.readTime,t.key,Pf)}class jo{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new jo(qe.min(),Me.empty(),Pf)}static max(){return new jo(qe.max(),Me.empty(),Pf)}}function f3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Me.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class h3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==d3)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,i)=>{n(e)}))}static reject(e){return new de(((n,i)=>{i(e)}))}static waitFor(e){return new de(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(f=>i(f)))})),l=!0,o===r&&n()}))}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next((r=>r?de.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new de(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;n(e[d]).next((p=>{l[d]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new de(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}function p3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Dm.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=-1;function Mm(t){return t==null}function Fp(t){return t===0&&1/t==-1/0}function m3(t){return typeof t=="number"&&Number.isInteger(t)&&!Fp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="";function g3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qA(e)),e=y3(t.get(n),e);return qA(e)}function y3(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case EN:n+="";break;default:n+=o}}return n}function qA(t){return t+EN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??$n.RED,this.left=r??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new $n(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new GA(this.data.getIterator())}getIteratorFrom(e){return new GA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Rn(this.comparator);return n.data=e,n}}class GA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Wi([])}unionWith(e){let n=new Rn(Kn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Wi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gu(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bN("Invalid base64 string: "+o):o}})(e);return new Yn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const v3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(t){if(bt(!!t,39018),typeof t=="string"){let e=0;const n=v3.exec(t);if(bt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mn(t.seconds),nanos:mn(t.nanos)}}function mn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ko(t){return typeof t=="string"?Yn.fromBase64String(t):Yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="server_timestamp",AN="__type__",CN="__previous_value__",xN="__local_write_time__";function O_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AN])===null||n===void 0?void 0:n.stringValue)===wN}function km(t){const e=t.mapValue.fields[CN];return O_(e)?km(e):e}function Df(t){const e=$o(t.mapValue.fields[xN].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e,n,i,r,o,l,c,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const Bp="(default)";class Mf{constructor(e,n){this.projectId=e,this.database=n||Bp}static empty(){return new Mf("","")}get isDefaultDatabase(){return this.database===Bp}isEqual(e){return e instanceof Mf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="__type__",T3="__max__",Oh={mapValue:{}},RN="__vector__",qp="value";function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?O_(t)?4:S3(t)?9007199254740991:E3(t)?10:11:Fe(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Df(t).isEqual(Df(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=$o(r.timestampValue),c=$o(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return Ko(r.bytesValue).isEqual(Ko(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return mn(r.geoPointValue.latitude)===mn(o.geoPointValue.latitude)&&mn(r.geoPointValue.longitude)===mn(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return mn(r.integerValue)===mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=mn(r.doubleValue),c=mn(o.doubleValue);return l===c?Fp(l)===Fp(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return gu(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(zA(l)!==zA(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!ls(l[f],c[f])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function kf(t,e){return(t.values||[]).find((n=>ls(n,e)))!==void 0}function yu(t,e){if(t===e)return 0;const n=Yo(t),i=Yo(e);if(n!==i)return et(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mn(o.integerValue||o.doubleValue),f=mn(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return HA(t.timestampValue,e.timestampValue);case 4:return HA(Df(t),Df(e));case 5:return c0(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=Ko(o),f=Ko(l);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const p=et(c[d],f[d]);if(p!==0)return p}return et(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=et(mn(o.latitude),mn(l.latitude));return c!==0?c:et(mn(o.longitude),mn(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return jA(t.arrayValue,e.arrayValue);case 10:return(function(o,l){var c,f,d,p;const v=o.fields||{},T=l.fields||{},b=(c=v[qp])===null||c===void 0?void 0:c.arrayValue,x=(f=T[qp])===null||f===void 0?void 0:f.arrayValue,N=et(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((p=x==null?void 0:x.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:jA(b,x)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Oh.mapValue&&l===Oh.mapValue)return 0;if(o===Oh.mapValue)return 1;if(l===Oh.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let v=0;v<f.length&&v<p.length;++v){const T=c0(f[v],p[v]);if(T!==0)return T;const b=yu(c[f[v]],d[p[v]]);if(b!==0)return b}return et(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{le:n})}}function HA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=$o(t),i=$o(e),r=et(n.seconds,i.seconds);return r!==0?r:et(n.nanos,i.nanos)}function jA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=yu(n[r],i[r]);if(o)return o}return et(n.length,i.length)}function vu(t){return f0(t)}function f0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=$o(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ko(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Me.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=f0(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${f0(n.fields[l])}`;return r+"}"})(t.mapValue):Fe(61005,{value:t})}function pp(t){switch(Yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=km(t);return e?16+pp(e):16;case 5:return 2*t.stringValue.length;case 6:return Ko(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+pp(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return na(i.fields,((o,l)=>{r+=o.length+pp(l)})),r})(t.mapValue);default:throw Fe(13486,{value:t})}}function $A(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function d0(t){return!!t&&"integerValue"in t}function U_(t){return!!t&&"arrayValue"in t}function KA(t){return!!t&&"nullValue"in t}function YA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mp(t){return!!t&&"mapValue"in t}function E3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[IN])===null||n===void 0?void 0:n.stringValue)===RN}function lf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=lf(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function S3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===T3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!mp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lf(n)}setAll(e){let n=Kn.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=lf(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());mp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){na(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Vi(lf(this.value))}}function NN(t){const e=[];return na(t.fields,((n,i)=>{const r=new Kn([n]);if(mp(i)){const o=NN(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new Wi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new ai(e,0,qe.min(),qe.min(),qe.min(),Vi.empty(),0)}static newFoundDocument(e,n,i,r){return new ai(e,1,n,qe.min(),i,r,0)}static newNoDocument(e,n){return new ai(e,2,n,qe.min(),qe.min(),Vi.empty(),0)}static newUnknownDocument(e,n){return new ai(e,3,n,qe.min(),qe.min(),Vi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n){this.position=e,this.inclusive=n}}function JA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=Me.comparator(Me.fromName(l.referenceValue),n.key):i=yu(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function WA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n="asc"){this.field=e,this.dir=n}}function b3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{}class bn extends PN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new A3(e,n,i):n==="array-contains"?new I3(e,i):n==="in"?new R3(e,i):n==="not-in"?new N3(e,i):n==="array-contains-any"?new P3(e,i):new bn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new C3(e,i):new x3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yu(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(yu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ur extends PN{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Ur(e,n)}matches(e){return DN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function DN(t){return t.op==="and"}function MN(t){return w3(t)&&DN(t)}function w3(t){for(const e of t.filters)if(e instanceof Ur)return!1;return!0}function h0(t){if(t instanceof bn)return t.field.canonicalString()+t.op.toString()+vu(t.value);if(MN(t))return t.filters.map((e=>h0(e))).join(",");{const e=t.filters.map((n=>h0(n))).join(",");return`${t.op}(${e})`}}function kN(t,e){return t instanceof bn?(function(i,r){return r instanceof bn&&i.op===r.op&&i.field.isEqual(r.field)&&ls(i.value,r.value)})(t,e):t instanceof Ur?(function(i,r){return r instanceof Ur&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&kN(l,r.filters[c])),!0):!1})(t,e):void Fe(19439)}function VN(t){return t instanceof bn?(function(n){return`${n.field.canonicalString()} ${n.op} ${vu(n.value)}`})(t):t instanceof Ur?(function(n){return n.op.toString()+" {"+n.getFilters().map(VN).join(" ,")+"}"})(t):"Filter"}class A3 extends bn{constructor(e,n,i){super(e,n,i),this.key=Me.fromName(i.referenceValue)}matches(e){const n=Me.comparator(e.key,this.key);return this.matchesComparison(n)}}class C3 extends bn{constructor(e,n){super(e,"in",n),this.keys=LN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class x3 extends bn{constructor(e,n){super(e,"not-in",n),this.keys=LN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function LN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((i=>Me.fromName(i.referenceValue)))}class I3 extends bn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return U_(n)&&kf(n.arrayValue,this.value)}}class R3 extends bn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kf(this.value.arrayValue,n)}}class N3 extends bn{constructor(e,n){super(e,"not-in",n)}matches(e){if(kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kf(this.value.arrayValue,n)}}class P3 extends bn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!U_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>kf(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Pe=null}}function XA(t,e=null,n=[],i=[],r=null,o=null,l=null){return new D3(t,e,n,i,r,o,l)}function F_(t){const e=He(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>h0(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Mm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>vu(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>vu(i))).join(",")),e.Pe=n}return e.Pe}function B_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WA(t.startAt,e.startAt)&&WA(t.endAt,e.endAt)}function p0(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function M3(t,e,n,i,r,o,l,c){return new ed(t,e,n,i,r,o,l,c)}function Vm(t){return new ed(t)}function QA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ON(t){return t.collectionGroup!==null}function uf(t){const e=He(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Rn(Kn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Gp(o,i))})),n.has(Kn.keyField().canonicalString())||e.Te.push(new Gp(Kn.keyField(),i))}return e.Te}function ns(t){const e=He(t);return e.Ie||(e.Ie=k3(e,uf(t))),e.Ie}function k3(t,e){if(t.limitType==="F")return XA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new Gp(r.field,o)}));const n=t.endAt?new zp(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new zp(t.startAt.position,t.startAt.inclusive):null;return XA(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function m0(t,e){const n=t.filters.concat([e]);return new ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function g0(t,e,n){return new ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lm(t,e){return B_(ns(t),ns(e))&&t.limitType===e.limitType}function UN(t){return`${F_(ns(t))}|lt:${t.limitType}`}function Yl(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>VN(r))).join(", ")}]`),Mm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>vu(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>vu(r))).join(",")),`Target(${i})`})(ns(t))}; limitType=${t.limitType})`}function Om(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Me.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of uf(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,f){const d=JA(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,uf(i),r)||i.endAt&&!(function(l,c,f){const d=JA(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,uf(i),r))})(t,e)}function V3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function FN(t){return(e,n)=>{let i=!1;for(const r of uf(t)){const o=L3(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function L3(t,e,n){const i=t.field.isKeyField()?Me.comparator(e.key,n.key):(function(o,l,c){const f=l.data.field(o),d=c.data.field(o);return f!==null&&d!==null?yu(f,d):Fe(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return SN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new Qt(Me.comparator);function Bs(){return O3}const BN=new Qt(Me.comparator);function Jc(...t){let e=BN;for(const n of t)e=e.insert(n.key,n);return e}function qN(t){let e=BN;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Ua(){return cf()}function zN(){return cf()}function cf(){return new tl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const U3=new Qt(Me.comparator),F3=new Rn(Me.comparator);function at(...t){let e=F3;for(const n of t)e=e.add(n);return e}const B3=new Rn(et);function q3(){return B3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fp(e)?"-0":e}}function GN(t){return{integerValue:""+t}}function z3(t,e){return m3(e)?GN(e):q_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this._=void 0}}function G3(t,e,n){return t instanceof Hp?(function(r,o){const l={fields:{[AN]:{stringValue:wN},[xN]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&O_(o)&&(o=km(o)),o&&(l.fields[CN]=o),{mapValue:l}})(n,e):t instanceof Vf?jN(t,e):t instanceof Lf?$N(t,e):(function(r,o){const l=HN(r,o),c=ZA(l)+ZA(r.Ee);return d0(l)&&d0(r.Ee)?GN(c):q_(r.serializer,c)})(t,e)}function H3(t,e,n){return t instanceof Vf?jN(t,e):t instanceof Lf?$N(t,e):n}function HN(t,e){return t instanceof jp?(function(i){return d0(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Hp extends Um{}class Vf extends Um{constructor(e){super(),this.elements=e}}function jN(t,e){const n=KN(e);for(const i of t.elements)n.some((r=>ls(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Lf extends Um{constructor(e){super(),this.elements=e}}function $N(t,e){let n=KN(e);for(const i of t.elements)n=n.filter((r=>!ls(r,i)));return{arrayValue:{values:n}}}class jp extends Um{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function ZA(t){return mn(t.integerValue||t.doubleValue)}function KN(t){return U_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function j3(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Vf&&r instanceof Vf||i instanceof Lf&&r instanceof Lf?gu(i.elements,r.elements,ls):i instanceof jp&&r instanceof jp?ls(i.Ee,r.Ee):i instanceof Hp&&r instanceof Hp})(t.transform,e.transform)}class $3{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fm{}function YN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new z_(t.key,Or.none()):new td(t.key,t.data,Or.none());{const n=t.data,i=Vi.empty();let r=new Rn(Kn.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new ia(t.key,i,new Wi(r.toArray()),Or.none())}}function K3(t,e,n){t instanceof td?(function(r,o,l){const c=r.value.clone(),f=tC(r.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ia?(function(r,o,l){if(!gp(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=tC(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(JN(r)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function ff(t,e,n,i){return t instanceof td?(function(o,l,c,f){if(!gp(o.precondition,l))return c;const d=o.value.clone(),p=nC(o.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof ia?(function(o,l,c,f){if(!gp(o.precondition,l))return c;const d=nC(o.fieldTransforms,f,l),p=l.data;return p.setAll(JN(o)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(t,e,n,i):(function(o,l,c){return gp(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function Y3(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=HN(i.transform,r||null);o!=null&&(n===null&&(n=Vi.empty()),n.set(i.field,o))}return n||null}function eC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&gu(i,r,((o,l)=>j3(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class td extends Fm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ia extends Fm{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function JN(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function tC(t,e,n){const i=new Map;bt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,H3(l,c,n[r]))}return i}function nC(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,G3(o,l,e))}return i}class z_ extends Fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J3 extends Fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&K3(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ff(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ff(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zN();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const f=YN(l,c);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(qe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&gu(this.mutations,e.mutations,((n,i)=>eC(n,i)))&&gu(this.baseMutations,e.baseMutations,((n,i)=>eC(n,i)))}}class G_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){bt(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=(function(){return U3})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new G_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,ft;function Z3(t){switch(t){case ce.OK:return Fe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function WN(t){if(t===void 0)return Fs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Sn.OK:return ce.OK;case Sn.CANCELLED:return ce.CANCELLED;case Sn.UNKNOWN:return ce.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return ce.INTERNAL;case Sn.UNAVAILABLE:return ce.UNAVAILABLE;case Sn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Sn.NOT_FOUND:return ce.NOT_FOUND;case Sn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Sn.ABORTED:return ce.ABORTED;case Sn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Sn.DATA_LOSS:return ce.DATA_LOSS;default:return Fe(39323,{code:t})}}(ft=Sn||(Sn={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=new Bo([4294967295,4294967295],0);function iC(t){const e=vN().encode(t),n=new cN;return n.update(e),new Uint8Array(n.digest())}function rC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bo([n,i],0),new Bo([r,o],0)]}class H_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wc(`Invalid padding: ${n}`);if(i<0)throw new Wc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Bo.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Bo.fromNumber(i)));return r.compare(e6)===1&&(r=new Bo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=iC(e),[i,r]=rC(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new H_(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.fe===0)return;const n=iC(e),[i,r]=rC(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bm(qe.min(),r,new Qt(et),Bs(),at())}}class nd{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new nd(i,n,at(),at(),at())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class XN{constructor(e,n){this.targetId=e,this.De=n}}class QN{constructor(e,n,i=Yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class sC{constructor(){this.ve=0,this.Ce=oC(),this.Fe=Yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=at(),n=at(),i=at();return this.Ce.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Fe(38017,{changeType:o})}})),new nd(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=oC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,bt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class t6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Bs(),this.je=Uh(),this.Je=Uh(),this.He=new Qt(et)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((i,r)=>{this.nt(r)&&n(r)}))}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(p0(o))if(i===0){const l=new Me(o.path);this.Xe(n,l,ai.newNoDocument(l,qe.min()))}else bt(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const c=this._t(e),f=c?this.ut(c,e,l):1;if(f!==0){this.rt(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,d)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=Ko(i).toUint8Array()}catch(f){if(f instanceof bN)return Ho("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new H_(l,r,o)}catch(f){return Ho(f instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.fe===0?null:c}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.We.lt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(n,o,null),r++)})),r}Pt(e){const n=new Map;this.Ge.forEach(((o,l)=>{const c=this.st(l);if(c){if(o.current&&p0(c.target)){const f=new Me(c.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,ai.newNoDocument(f,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}}));let i=at();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const d=this.st(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.ze.forEach(((o,l)=>l.setReadTime(e)));const r=new Bm(e,n,this.He,this.ze,i);return this.ze=Bs(),this.je=Uh(),this.Je=Uh(),this.He=new Qt(et),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new sC,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Rn(et),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Rn(et),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Se("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sC),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Uh(){return new Qt(Me.comparator)}function oC(){return new Qt(Me.comparator)}const n6={asc:"ASCENDING",desc:"DESCENDING"},i6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r6={and:"AND",or:"OR"};class s6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function y0(t,e){return t.useProto3Json||Mm(e)?e:{value:e}}function $p(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function o6(t,e){return $p(t,e.toTimestamp())}function is(t){return bt(!!t,49232),qe.fromTimestamp((function(n){const i=$o(n);return new Ht(i.seconds,i.nanos)})(t))}function j_(t,e){return v0(t,e).canonicalString()}function v0(t,e){const n=(function(r){return new Vt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function eP(t){const e=Vt.fromString(t);return bt(sP(e),10190,{key:e.toString()}),e}function _0(t,e){return j_(t.databaseId,e.path)}function Cv(t,e){const n=eP(e);if(n.get(1)!==t.databaseId.projectId)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Te(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Me(nP(n))}function tP(t,e){return j_(t.databaseId,e)}function a6(t){const e=eP(t);return e.length===4?Vt.emptyPath():nP(e)}function T0(t){return new Vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nP(t){return bt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function aC(t,e,n){return{name:_0(t,e),fields:n.value.mapValue.fields}}function l6(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Fe(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(bt(p===void 0||typeof p=="string",58123),Yn.fromBase64String(p||"")):(bt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Yn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const p=d.code===void 0?ce.UNKNOWN:WN(d.code);return new Te(p,d.message||"")})(l);n=new QN(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Cv(t,i.document.name),o=is(i.document.updateTime),l=i.document.createTime?is(i.document.createTime):qe.min(),c=new Vi({mapValue:{fields:i.document.fields}}),f=ai.newFoundDocument(r,o,l,c),d=i.targetIds||[],p=i.removedTargetIds||[];n=new yp(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Cv(t,i.document),o=i.readTime?is(i.readTime):qe.min(),l=ai.newNoDocument(r,o),c=i.removedTargetIds||[];n=new yp([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Cv(t,i.document),o=i.removedTargetIds||[];n=new yp([],o,r,null)}else{if(!("filter"in e))return Fe(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new Q3(r,o),c=i.targetId;n=new XN(c,l)}}return n}function u6(t,e){let n;if(e instanceof td)n={update:aC(t,e.key,e.value)};else if(e instanceof z_)n={delete:_0(t,e.key)};else if(e instanceof ia)n={update:aC(t,e.key,e.data),updateMask:v6(e.fieldMask)};else{if(!(e instanceof J3))return Fe(16599,{Rt:e.type});n={verify:_0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Hp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jp)return{fieldPath:l.field.canonicalString(),increment:c.Ee};throw Fe(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:o6(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Fe(27497)})(t,e.precondition)),n}function c6(t,e){return t&&t.length>0?(bt(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?is(r.updateTime):is(o);return l.isEqual(qe.min())&&(l=is(o)),new $3(l,r.transformResults||[])})(n,e)))):[]}function f6(t,e){return{documents:[tP(t,e.path)]}}function d6(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=tP(t,r);const o=(function(d){if(d.length!==0)return rP(Ur.create(d,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((p=>(function(T){return{field:Jl(T.field),direction:m6(T.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=y0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{Vt:n,parent:r}}function h6(t){let e=a6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){bt(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(v){const T=iP(v);return T instanceof Ur&&MN(T)?T.getFilters():[T]})(n.where));let l=[];n.orderBy&&(l=(function(v){return v.map((T=>(function(x){return new Gp(Wl(x.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(T)))})(n.orderBy));let c=null;n.limit&&(c=(function(v){let T;return T=typeof v=="object"?v.value:v,Mm(T)?null:T})(n.limit));let f=null;n.startAt&&(f=(function(v){const T=!!v.before,b=v.values||[];return new zp(b,T)})(n.startAt));let d=null;return n.endAt&&(d=(function(v){const T=!v.before,b=v.values||[];return new zp(b,T)})(n.endAt)),M3(e,r,l,o,c,"F",f,d)}function p6(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iP(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Wl(n.unaryFilter.field);return bn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Wl(n.unaryFilter.field);return bn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wl(n.unaryFilter.field);return bn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Wl(n.unaryFilter.field);return bn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return bn.create(Wl(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ur.create(n.compositeFilter.filters.map((i=>iP(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(n.compositeFilter.op))})(t):Fe(30097,{filter:t})}function m6(t){return n6[t]}function g6(t){return i6[t]}function y6(t){return r6[t]}function Jl(t){return{fieldPath:t.canonicalString()}}function Wl(t){return Kn.fromServerFormat(t.fieldPath)}function rP(t){return t instanceof bn?(function(n){if(n.op==="=="){if(YA(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NAN"}};if(KA(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YA(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NOT_NAN"}};if(KA(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(n.field),op:g6(n.op),value:n.value}}})(t):t instanceof Ur?(function(n){const i=n.getFilters().map((r=>rP(r)));return i.length===1?i[0]:{compositeFilter:{op:y6(n.op),filters:i}}})(t):Fe(54877,{filter:t})}function v6(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function sP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n,i,r,o=qe.min(),l=qe.min(),c=Yn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.gt=e}}function T6(t){const e=h6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?g0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.Dn=new S6}addToCollectionParentIndex(e,n){return this.Dn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(jo.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class S6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Rn(Vt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Rn(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oP=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(oP,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new _u(0)}static ur(){return new _u(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="LruGarbageCollector",b6=1048576;function cC([t,e],[n,i]){const r=et(t,n);return r===0?et(e,i):r}class w6{constructor(e){this.Tr=e,this.buffer=new Rn(cC),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();cC(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Se(uC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pu(n)?Se(uC,"Ignoring IndexedDB error during garbage collection: ",n):await Nu(n)}await this.Rr(3e5)}))}}class C6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Dm.ue);const i=new w6(n);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.gr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(lC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lC):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,c,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r)))).next((v=>(i=v,c=Date.now(),this.removeTargets(e,i,n)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(d=Date.now(),Kl()<=ot.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${v} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v}))))}}function x6(t,e){return new C6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.changes=new tl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&ff(i.mutation,r,Wi.empty(),Ht.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,at()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=at()){const r=Ua();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=Jc();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=Ua();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,at())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=Bs();const l=cf(),c=(function(){return cf()})();return n.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof ia)?o=o.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),ff(p.mutation,d,p.mutation.getFieldMask(),Ht.now())):l.set(d.key,Wi.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((d,p)=>l.set(d,p))),n.forEach(((d,p)=>{var v;return c.set(d,new R6(p,(v=l.get(d))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,n){const i=cf();let r=new Qt(((l,c)=>l-c)),o=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||Wi.empty();p=c.applyToLocalView(d,p),i.set(f,p);const v=(r.get(c.batchId)||at()).add(f);r=r.insert(c.batchId,v)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,p=f.value,v=zN();p.forEach((T=>{if(!o.has(T)){const b=YN(n.get(T),i.get(T));b!==null&&v.set(T,b),o=o.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,v))}return de.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return Me.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ON(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):de.resolve(Ua());let c=Pf,f=o;return l.next((d=>de.forEach(d,((p,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{f=f.insert(p,T)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,f,d,at()))).next((p=>({batchId:c,changes:qN(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Me(n)).next((i=>{let r=Jc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=Jc();return this.indexManager.getCollectionParents(e,o).next((c=>de.forEach(c,(f=>{const d=(function(v,T){return new ed(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((p=>{p.forEach(((v,T)=>{l=l.insert(v,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,ai.newInvalidDocument(p)))}));let c=Jc();return l.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&ff(p.mutation,d,Wi.empty(),Ht.now()),Om(n,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return de.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:is(r.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(r){return{name:r.name,query:T6(r.bundledQuery),readTime:is(r.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.overlays=new Qt(Me.comparator),this.kr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ua();return de.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.wt(e,n,o)})),de.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const r=Ua(),o=n.length+1,l=new Me(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return de.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Qt(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=Ua(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=Ua(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>c.set(d,p))),!(c.size()>=r)););return de.resolve(c)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new X3(n,i));let o=this.kr.get(n);o===void 0&&(o=at(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.sessionToken=Yn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.qr=new Rn(On.Qr),this.$r=new Rn(On.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new On(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new On(e,n))}Gr(e,n){e.forEach((i=>this.removeReference(i,n)))}zr(e){const n=new Me(new Vt([])),i=new On(n,e),r=new On(n,e+1),o=[];return this.$r.forEachInRange([i,r],(l=>{this.Wr(l),o.push(l.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Me(new Vt([])),i=new On(n,e),r=new On(n,e+1);let o=at();return this.$r.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new On(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Me.comparator(e.key,n.key)||et(e.Hr,n.Hr)}static Ur(e,n){return et(e.Hr,n.Hr)||Me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Rn(On.Qr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new W3(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Yr=this.Yr.add(new On(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?L_:this.er-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new On(n,0),r=new On(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);o.push(c)})),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Rn(et);return n.forEach((r=>{const o=new On(r,0),l=new On(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],(c=>{i=i.add(c.Hr)}))})),de.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;Me.isDocumentKey(o)||(o=o.child(""));const l=new On(new Me(o),0);let c=new Rn(et);return this.Yr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(f.Hr)),!0)}),l),de.resolve(this.ei(c))}ei(e){const n=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){bt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return de.forEach(n.mutations,(r=>{const o=new On(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Yr=i}))}rr(e){}containsKey(e,n){const i=new On(n,0),r=this.Yr.firstAfterOrEqual(i);return de.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.ni=e,this.docs=(function(){return new Qt(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(e,n){let i=Bs();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ai.newInvalidDocument(r))})),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Bs();const l=n.path,c=new Me(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||f3(c3(p),i)<=0||(r.has(p.key)||Om(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Fe(9500)}ri(e,n){return de.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new L6(this)}getSize(e){return de.resolve(this.size)}}class L6 extends I6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)})),de.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.persistence=e,this.ii=new tl((n=>F_(n)),B_),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new $_,this.targetCount=0,this._i=_u.ar()}forEachTarget(e,n){return this.ii.forEach(((i,r)=>n(r))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),de.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new _u(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.hr(n),de.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),de.waitFor(o).next((()=>r))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),de.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.ai={},this.overlays={},this.ui=new Dm(0),this.ci=!1,this.ci=!0,this.li=new M6,this.referenceDelegate=e(this),this.hi=new O6(this),this.indexManager=new E6,this.remoteDocumentCache=(function(r){return new V6(r)})((i=>this.referenceDelegate.Pi(i))),this.serializer=new _6(n),this.Ti=new P6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new k6(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){Se("MemoryPersistence","Starting transaction:",e);const r=new U6(this.ui.next());return this.referenceDelegate.Ii(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ei(e,n){return de.or(Object.values(this.ai).map((i=>()=>i.containsKey(e,n))))}}class U6 extends h3{constructor(e){super(),this.currentSequenceNumber=e}}class K_{constructor(e){this.persistence=e,this.Ai=new $_,this.Ri=null}static Vi(e){return new K_(e)}get mi(){if(this.Ri)return this.Ri;throw Fe(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((r=>this.mi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.mi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.mi,(i=>{const r=Me.fromPath(i);return this.fi(e,r).next((o=>{o||n.removeEntry(r,qe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return de.or([()=>de.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kp{constructor(e,n){this.persistence=e,this.gi=new tl((i=>g3(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=x6(this,n)}static Vi(e,n){return new Kp(e,n)}Ii(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}yr(e){let n=0;return this.gr(e,(i=>{n++})).next((()=>n))}gr(e,n){return de.forEach(this.gi,((i,r)=>this.Sr(e,i,r).next((o=>o?de.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,(l=>this.Sr(e,l,n).next((c=>{c||(i++,o.removeEntry(l,qe.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),de.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pp(e.data.value)),n}Sr(e,n,i){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return de.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=at(),r=at();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Y_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return vL()?8:p3(ci())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ys(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new F6;return this.ws(e,n,l).next((c=>{if(o.result=c,this.Rs)return this.Ss(e,n,l,c.size)}))})).next((()=>o.result))}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(Kl()<=ot.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Kl()<=ot.DEBUG&&Se("QueryEngine","Query:",Yl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Kl()<=ot.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):de.resolve())}ps(e,n){if(QA(n))return de.resolve(null);let i=ns(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=g0(n,null,"F"),i=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=at(...o);return this.gs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.bs(n,c);return this.Ds(n,d,l,f.readTime)?this.ps(e,g0(n,null,"F")):this.vs(e,d,n,f)}))))})))))}ys(e,n,i,r){return QA(n)||r.isEqual(qe.min())?de.resolve(null):this.gs.getDocuments(e,i).next((o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?de.resolve(null):(Kl()<=ot.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yl(n)),this.vs(e,l,n,u3(r,Pf)).next((c=>c)))}))}bs(e,n){let i=new Rn(FN(e));return n.forEach(((r,o)=>{Om(e,o)&&(i=i.add(o))})),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return Kl()<=ot.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Yl(n)),this.gs.getDocumentsMatchingQuery(e,n,jo.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LocalStore",q6=3e8;class z6{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new Qt(et),this.Ms=new tl((o=>F_(o)),B_),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function G6(t,e,n,i){return new z6(t,e,n,i)}async function lP(t,e){const n=He(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let f=at();for(const d of r){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Bs:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function H6(t,e){const n=He(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,p){const v=d.batch,T=v.keys();let b=de.resolve();return T.forEach((x=>{b=b.next((()=>p.getEntry(f,x))).next((N=>{const D=d.docVersions.get(x);bt(D!==null,48541),N.version.compareTo(D)<0&&(v.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(f,v)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=at();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function uP(t){const e=He(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function j6(t,e){const n=He(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const c=[];e.targetChanges.forEach(((p,v)=>{const T=r.get(v);if(!T)return;c.push(n.hi.removeMatchingKeys(o,p.removedDocuments,v).next((()=>n.hi.addMatchingKeys(o,p.addedDocuments,v))));let b=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Yn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,i)),r=r.insert(v,b),(function(N,D,O){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=q6?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(T,b,p)&&c.push(n.hi.updateTargetData(o,b))}));let f=Bs(),d=at();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push($6(o,l,e.documentUpdates).next((p=>{f=p.Ls,d=p.ks}))),!i.isEqual(qe.min())){const p=n.hi.getLastRemoteSnapshotVersion(o).next((v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return de.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(n.Fs=r,o)))}function $6(t,e,n){let i=at(),r=at();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=Bs();return n.forEach(((c,f)=>{const d=o.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),f.isNoDocument()&&f.version.isEqual(qe.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):Se(J_,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{Ls:l,ks:r}}))}function K6(t,e){const n=He(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=L_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Y6(t,e){const n=He(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.hi.getTargetData(i,e).next((o=>o?(r=o,de.resolve(r)):n.hi.allocateTargetId(i).next((l=>(r=new Lo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i}))}async function E0(t,e,n){const i=He(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Pu(l))throw l;Se(J_,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function fC(t,e,n){const i=He(t);let r=qe.min(),o=at();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const v=He(f),T=v.Ms.get(p);return T!==void 0?de.resolve(v.Fs.get(T)):v.hi.getTargetData(d,p)})(i,l,ns(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:qe.min(),n?o:at()))).next((c=>(J6(i,V3(e),c),{documents:c,qs:o})))))}function J6(t,e,n){let i=t.xs.get(e)||qe.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.xs.set(e,i)}class dC{constructor(){this.activeTargetIds=q3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W6{constructor(){this.Fo=new dC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new dC,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="ConnectivityMonitor";class pC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Se(hC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Se(hC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function S0(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="RestConnection",Q6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z6{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Bp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=S0(),c=this.Go(e,n.toUriEncodedString());Se(xv,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,r,o);const{host:d}=new URL(c),p=Gs(d);return this.jo(e,c,f,i,p).then((v=>(Se(xv,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw Ho(xv,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",i),v}))}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ru})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}Go(e,n){const i=Q6[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class t5 extends Z6{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=S0();return new Promise(((c,f)=>{const d=new fN;d.setWithCredentials(!0),d.listenOnce(dN.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case hp.NO_ERROR:const v=d.getResponseJson();Se(ni,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case hp.TIMEOUT:Se(ni,`RPC '${e}' ${l} timed out`),f(new Te(ce.DEADLINE_EXCEEDED,"Request time out"));break;case hp.HTTP_ERROR:const T=d.getStatus();if(Se(ni,`RPC '${e}' ${l} failed with status:`,T,"response text:",d.getResponseText()),T>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const x=b==null?void 0:b.error;if(x&&x.status&&x.message){const N=(function(O){const k=O.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(k)>=0?k:ce.UNKNOWN})(x.status);f(new Te(N,x.message))}else f(new Te(ce.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Te(ce.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{c_:e,streamId:l,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Se(ni,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);Se(ni,`RPC '${e}' ${l} sending request:`,r),d.send(n,"POST",p,i,15)}))}P_(e,n,i){const r=S0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=mN(),c=pN(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const p=o.join("");Se(ni,`Creating RPC '${e}' stream ${r}: ${p}`,f);const v=l.createWebChannel(p,f);this.T_(v);let T=!1,b=!1;const x=new e5({Ho:D=>{b?Se(ni,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(T||(Se(ni,`Opening RPC '${e}' stream ${r} transport.`),v.open(),T=!0),Se(ni,`RPC '${e}' stream ${r} sending:`,D),v.send(D))},Yo:()=>v.close()}),N=(D,O,k)=>{D.listen(O,(F=>{try{k(F)}catch($){setTimeout((()=>{throw $}),0)}}))};return N(v,Yc.EventType.OPEN,(()=>{b||(Se(ni,`RPC '${e}' stream ${r} transport opened.`),x.s_())})),N(v,Yc.EventType.CLOSE,(()=>{b||(b=!0,Se(ni,`RPC '${e}' stream ${r} transport closed`),x.__(),this.I_(v))})),N(v,Yc.EventType.ERROR,(D=>{b||(b=!0,Ho(ni,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),x.__(new Te(ce.UNAVAILABLE,"The operation could not be completed")))})),N(v,Yc.EventType.MESSAGE,(D=>{var O;if(!b){const k=D.data[0];bt(!!k,16349);const F=k,$=(F==null?void 0:F.error)||((O=F[0])===null||O===void 0?void 0:O.error);if($){Se(ni,`RPC '${e}' stream ${r} received error:`,$);const K=$.status;let G=(function(P){const V=Sn[P];if(V!==void 0)return WN(V)})(K),I=$.message;G===void 0&&(G=ce.INTERNAL,I="Unknown error status: "+K+" with message "+$.message),b=!0,x.__(new Te(G,I)),v.close()}else Se(ni,`RPC '${e}' stream ${r} received:`,k),x.a_(k)}})),N(c,hN.STAT_EVENT,(D=>{D.stat===u0.PROXY?Se(ni,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===u0.NOPROXY&&Se(ni,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{x.o_()}),0),x}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function Iv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){return new s6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&Se("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="PersistentStream";class fP{constructor(e,n,i,r,o,l,c,f){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cP(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.b_===n&&this.W_(i,r)}),(i=>{e((()=>{const r=new Te(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)}))}))}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.e_((()=>{i((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((r=>{i((()=>this.G_(r)))})),this.stream.onMessage((r=>{i((()=>++this.C_==1?this.j_(r):this.onNext(r)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Se(mC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Se(mC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class n5 extends fP{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=l6(this.serializer,e),i=(function(o){if(!("targetChange"in o))return qe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?qe.min():l.readTime?is(l.readTime):qe.min()})(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=T0(this.serializer),n.addTarget=(function(o,l){let c;const f=l.target;if(c=p0(f)?{documents:f6(o,f)}:{query:d6(o,f).Vt},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ZN(o,l.resumeToken);const d=y0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(qe.min())>0){c.readTime=$p(o,l.snapshotVersion.toTimestamp());const d=y0(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const i=p6(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=T0(this.serializer),n.removeTarget=e,this.k_(n)}}class i5 extends fP{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return bt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){bt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=c6(e.writeResults,e.commitTime),i=is(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=T0(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>u6(this.serializer,i)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{}class s5 extends r5{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,v0(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ce.UNKNOWN,o.toString())}))}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Jo(e,v0(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(ce.UNKNOWN,l.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class o5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fs(n),this._a=!1):Se("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="RemoteStore";class a5{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((l=>{i.enqueueAndForget((async()=>{nl(this)&&(Se(Wa,"Restarting streams for network reachability change."),await(async function(f){const d=He(f);d.Ia.add(4),await id(d),d.Aa.set("Unknown"),d.Ia.delete(4),await zm(d)})(this))}))})),this.Aa=new o5(i,r)}}async function zm(t){if(nl(t))for(const e of t.da)await e(!0)}async function id(t){for(const e of t.da)await e(!1)}function dP(t,e){const n=He(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Z_(n)?Q_(n):Du(n).x_()&&X_(n,e))}function W_(t,e){const n=He(t),i=Du(n);n.Ta.delete(e),i.x_()&&hP(n,e),n.Ta.size===0&&(i.x_()?i.B_():nl(n)&&n.Aa.set("Unknown"))}function X_(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Du(t).H_(e)}function hP(t,e){t.Ra.$e(e),Du(t).Y_(e)}function Q_(t){t.Ra=new t6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Du(t).start(),t.Aa.aa()}function Z_(t){return nl(t)&&!Du(t).M_()&&t.Ta.size>0}function nl(t){return He(t).Ia.size===0}function pP(t){t.Ra=void 0}async function l5(t){t.Aa.set("Online")}async function u5(t){t.Ta.forEach(((e,n)=>{X_(t,e)}))}async function c5(t,e){pP(t),Z_(t)?(t.Aa.la(e),Q_(t)):t.Aa.set("Unknown")}async function f5(t,e,n){if(t.Aa.set("Online"),e instanceof QN&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ta.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ta.delete(c),r.Ra.removeTarget(c))})(t,e)}catch(i){Se(Wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yp(t,i)}else if(e instanceof yp?t.Ra.Ye(e):e instanceof XN?t.Ra.it(e):t.Ra.et(e),!n.isEqual(qe.min()))try{const i=await uP(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Ra.Pt(l);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ta.get(d);p&&o.Ta.set(d,p.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,d)=>{const p=o.Ta.get(f);if(!p)return;o.Ta.set(f,p.withResumeToken(Yn.EMPTY_BYTE_STRING,p.snapshotVersion)),hP(o,f);const v=new Lo(p.target,f,d,p.sequenceNumber);X_(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){Se(Wa,"Failed to raise snapshot:",i),await Yp(t,i)}}async function Yp(t,e,n){if(!Pu(e))throw e;t.Ia.add(1),await id(t),t.Aa.set("Offline"),n||(n=()=>uP(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(Wa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await zm(t)}))}function mP(t,e){return e().catch((n=>Yp(t,n,e)))}async function Gm(t){const e=He(t),n=Jo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:L_;for(;d5(e);)try{const r=await K6(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,h5(e,r)}catch(r){await Yp(e,r)}gP(e)&&yP(e)}function d5(t){return nl(t)&&t.Pa.length<10}function h5(t,e){t.Pa.push(e);const n=Jo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function gP(t){return nl(t)&&!Jo(t).M_()&&t.Pa.length>0}function yP(t){Jo(t).start()}async function p5(t){Jo(t).na()}async function m5(t){const e=Jo(t);for(const n of t.Pa)e.X_(n.mutations)}async function g5(t,e,n){const i=t.Pa.shift(),r=G_.from(i,e,n);await mP(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Gm(t)}async function y5(t,e){e&&Jo(t).Z_&&await(async function(i,r){if((function(l){return Z3(l)&&l!==ce.ABORTED})(r.code)){const o=i.Pa.shift();Jo(i).N_(),await mP(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Gm(i)}})(t,e),gP(t)&&yP(t)}async function gC(t,e){const n=He(t);n.asyncQueue.verifyOperationInProgress(),Se(Wa,"RemoteStore received new credentials");const i=nl(n);n.Ia.add(3),await id(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await zm(n)}async function v5(t,e){const n=He(t);e?(n.Ia.delete(2),await zm(n)):e||(n.Ia.add(2),await id(n),n.Aa.set("Unknown"))}function Du(t){return t.Va||(t.Va=(function(n,i,r){const o=He(n);return o.ia(),new n5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:l5.bind(null,t),e_:u5.bind(null,t),n_:c5.bind(null,t),J_:f5.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),Z_(t)?Q_(t):t.Aa.set("Unknown")):(await t.Va.stop(),pP(t))}))),t.Va}function Jo(t){return t.ma||(t.ma=(function(n,i,r){const o=He(n);return o.ia(),new i5(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:p5.bind(null,t),n_:y5.bind(null,t),ea:m5.bind(null,t),ta:g5.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Gm(t)):(await t.ma.stop(),t.Pa.length>0&&(Se(Wa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new eT(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tT(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),Pu(t))return new Te(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{static emptySet(e){return new lu(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Me.comparator(n.key,i.key):(n,i)=>Me.comparator(n.key,i.key),this.keyedMap=Jc(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new lu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.fa=new Qt(Me.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Fe(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Tu{constructor(e,n,i,r,o,l,c,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new Tu(e,n,lu.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class T5{constructor(){this.queries=vC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=He(n),o=r.queries;r.queries=vC(),o.forEach(((l,c)=>{for(const f of c.wa)f.onError(i)}))})(this,new Te(ce.ABORTED,"Firestore shutting down"))}}function vC(){return new tl((t=>UN(t)),Lm)}async function vP(t,e){const n=He(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new _5,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=tT(l,`Initialization of query '${Yl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&nT(n)}async function _P(t,e){const n=He(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function E5(t,e){const n=He(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.wa)c.Ca(r)&&(i=!0);l.ya=r}}i&&nT(n)}function S5(t,e,n){const i=He(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function nT(t){t.Da.forEach((e=>{e.next()}))}var b0,_C;(_C=b0||(b0={})).Fa="default",_C.Cache="cache";class TP{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Tu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==b0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.key=e}}class SP{constructor(e){this.key=e}}class b5{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=at(),this.mutatedKeys=at(),this.Xa=FN(e),this.eu=new lu(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new yC,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,v)=>{const T=r.get(p),b=Om(this.query,v)?v:null,x=!!T&&this.mutatedKeys.has(T.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;T&&b?T.data.isEqual(b.data)?x!==N&&(i.track({type:3,doc:b}),D=!0):this.iu(T,b)||(i.track({type:2,doc:b}),D=!0,(f&&this.Xa(b,f)>0||d&&this.Xa(b,d)<0)&&(c=!0)):!T&&b?(i.track({type:0,doc:b}),D=!0):T&&!b&&(i.track({type:1,doc:T}),D=!0,(f||d)&&(c=!0)),D&&(b?(l=l.add(b),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{eu:l,ru:i,Ds:c,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort(((p,v)=>(function(b,x){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{At:D})}};return N(b)-N(x)})(p.type,v.type)||this.Xa(p.doc,v.doc))),this.su(i),r=r!=null&&r;const c=n&&!r?this.ou():[],f=this.Za.size===0&&this.current&&!r?1:0,d=f!==this.Ya;return this.Ya=f,l.length!==0||d?{snapshot:new Tu(this.query,e.eu,o,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new yC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=at(),this.eu.forEach((i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))}));const n=[];return e.forEach((i=>{this.Za.has(i)||n.push(new SP(i))})),this.Za.forEach((i=>{e.has(i)||n.push(new EP(i))})),n}uu(e){this.Ha=e.qs,this.Za=at();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Tu.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const iT="SyncEngine";class w5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class A5{constructor(e){this.key=e,this.lu=!1}}class C5{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new tl((c=>UN(c)),Lm),this.Tu=new Map,this.Iu=new Set,this.du=new Qt(Me.comparator),this.Eu=new Map,this.Au=new $_,this.Ru={},this.Vu=new Map,this.mu=_u.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function x5(t,e,n=!0){const i=IP(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await bP(i,e,n,!0),r}async function I5(t,e){const n=IP(t);await bP(n,e,!0,!1)}async function bP(t,e,n,i){const r=await Y6(t.localStore,ns(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await R5(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&dP(t.remoteStore,r),c}async function R5(t,e,n,i,r){t.gu=(v,T,b)=>(async function(N,D,O,k){let F=D.view.nu(O);F.Ds&&(F=await fC(N.localStore,D.query,!1).then((({documents:I})=>D.view.nu(I,F))));const $=k&&k.targetChanges.get(D.targetId),K=k&&k.targetMismatches.get(D.targetId)!=null,G=D.view.applyChanges(F,N.isPrimaryClient,$,K);return EC(N,D.targetId,G._u),G.snapshot})(t,v,T,b);const o=await fC(t.localStore,e,!0),l=new b5(e,o.qs),c=l.nu(o.documents),f=nd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=l.applyChanges(c,t.isPrimaryClient,f);EC(t,n,d._u);const p=new w5(e,n,l);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),d.snapshot}async function N5(t,e,n){const i=He(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter((l=>!Lm(l,e)))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await E0(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&W_(i.remoteStore,r.targetId),w0(i,r.targetId)})).catch(Nu)):(w0(i,r.targetId),await E0(i.localStore,r.targetId,!0))}async function P5(t,e){const n=He(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),W_(n.remoteStore,i.targetId))}async function D5(t,e,n){const i=F5(t);try{const r=await(function(l,c){const f=He(l),d=Ht.now(),p=c.reduce(((b,x)=>b.add(x.key)),at());let v,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let x=Bs(),N=at();return f.Os.getEntries(b,p).next((D=>{x=D,x.forEach(((O,k)=>{k.isValidDocument()||(N=N.add(O))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,x))).next((D=>{v=D;const O=[];for(const k of c){const F=Y3(k,v.get(k.key).overlayedDocument);F!=null&&O.push(new ia(k.key,F,NN(F.value.mapValue),Or.exists(!0)))}return f.mutationQueue.addMutationBatch(b,d,O,c)})).next((D=>{T=D;const O=D.applyToLocalDocumentSet(v,N);return f.documentOverlayCache.saveOverlays(b,D.batchId,O)}))})).then((()=>({batchId:T.batchId,changes:qN(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,f){let d=l.Ru[l.currentUser.toKey()];d||(d=new Qt(et)),d=d.insert(c,f),l.Ru[l.currentUser.toKey()]=d})(i,r.batchId,n),await rd(i,r.changes),await Gm(i.remoteStore)}catch(r){const o=tT(r,"Failed to persist write");n.reject(o)}}async function wP(t,e){const n=He(t);try{const i=await j6(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Eu.get(o);l&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?bt(l.lu,14607):r.removedDocuments.size>0&&(bt(l.lu,42227),l.lu=!1))})),await rd(n,i,e)}catch(i){await Nu(i)}}function TC(t,e,n){const i=He(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const f=He(l);f.onlineState=c;let d=!1;f.queries.forEach(((p,v)=>{for(const T of v.wa)T.va(c)&&(d=!0)})),d&&nT(f)})(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function M5(t,e,n){const i=He(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new Qt(Me.comparator);l=l.insert(o,ai.newNoDocument(o,qe.min()));const c=at().add(o),f=new Bm(qe.min(),new Map,new Qt(et),l,c);await wP(i,f),i.du=i.du.remove(o),i.Eu.delete(e),rT(i)}else await E0(i.localStore,e,!1).then((()=>w0(i,e,n))).catch(Nu)}async function k5(t,e){const n=He(t),i=e.batch.batchId;try{const r=await H6(n.localStore,e);CP(n,i,null),AP(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await rd(n,r)}catch(r){await Nu(r)}}async function V5(t,e,n){const i=He(t);try{const r=await(function(l,c){const f=He(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,c).next((v=>(bt(v!==null,37113),p=v.keys(),f.mutationQueue.removeMutationBatch(d,v)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,e);CP(i,e,n),AP(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await rd(i,r)}catch(r){await Nu(r)}}function AP(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function CP(t,e,n){const i=He(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function w0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((i=>{t.Au.containsKey(i)||xP(t,i)}))}function xP(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(W_(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),rT(t))}function EC(t,e,n){for(const i of n)i instanceof EP?(t.Au.addReference(i.key,e),L5(t,i)):i instanceof SP?(Se(iT,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||xP(t,i.key)):Fe(19791,{yu:i})}function L5(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(Se(iT,"New document in limbo: "+n),t.Iu.add(i),rT(t))}function rT(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Me(Vt.fromString(e)),i=t.mu.next();t.Eu.set(i,new A5(n)),t.du=t.du.insert(n,i),dP(t.remoteStore,new Lo(ns(Vm(n.path)),i,"TargetPurposeLimboResolution",Dm.ue))}}async function rd(t,e,n){const i=He(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach(((c,f)=>{l.push(i.gu(f,e,n).then((d=>{var p;if((d||n)&&i.isPrimaryClient){const v=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(f.targetId))===null||p===void 0?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(d){r.push(d);const v=Y_.Es(f.targetId,d);o.push(v)}})))})),await Promise.all(l),i.hu.J_(r),await(async function(f,d){const p=He(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>de.forEach(d,(T=>de.forEach(T.Is,(b=>p.persistence.referenceDelegate.addReference(v,T.targetId,b))).next((()=>de.forEach(T.ds,(b=>p.persistence.referenceDelegate.removeReference(v,T.targetId,b)))))))))}catch(v){if(!Pu(v))throw v;Se(J_,"Failed to update sequence numbers: "+v)}for(const v of d){const T=v.targetId;if(!v.fromCache){const b=p.Fs.get(T),x=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(x);p.Fs=p.Fs.insert(T,N)}}})(i.localStore,o))}async function O5(t,e){const n=He(t);if(!n.currentUser.isEqual(e)){Se(iT,"User change. New user:",e.toKey());const i=await lP(n.localStore,e);n.currentUser=e,(function(o,l){o.Vu.forEach((c=>{c.forEach((f=>{f.reject(new Te(ce.CANCELLED,l))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rd(n,i.Bs)}}function U5(t,e){const n=He(t),i=n.Eu.get(e);if(i&&i.lu)return at().add(i.key);{let r=at();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const c=n.Pu.get(l);r=r.unionWith(c.view.tu)}return r}}function IP(t){const e=He(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M5.bind(null,e),e.hu.J_=E5.bind(null,e.eventManager),e.hu.pu=S5.bind(null,e.eventManager),e}function F5(t){const e=He(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V5.bind(null,e),e}class Jp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qm(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return G6(this.persistence,new B6,e.initialUser,this.serializer)}Du(e){return new aP(K_.Vi,this.serializer)}bu(e){return new W6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jp.provider={build:()=>new Jp};class B5 extends Jp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){bt(this.persistence.referenceDelegate instanceof Kp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new A6(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new aP((i=>Kp.Vi(i,n)),this.serializer)}}class A0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O5.bind(null,this.syncEngine),await v5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new T5})()}createDatastore(e){const n=qm(e.databaseInfo.databaseId),i=(function(o){return new t5(o)})(e.databaseInfo);return(function(o,l,c,f){return new s5(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new a5(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>TC(this.syncEngine,n,0)),(function(){return pC.C()?new pC:new X6})())}createSyncEngine(e,n){return(function(r,o,l,c,f,d,p){const v=new C5(r,o,l,c,f,d);return p&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const o=He(r);Se(Wa,"RemoteStore shutting down."),o.Ia.add(5),await id(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}A0.provider={build:()=>new A0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="FirestoreClient";class q5{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=oi.UNAUTHENTICATED,this.clientId=V_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{Se(Wo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Se(Wo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=tT(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Rv(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Wo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await lP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>{Ho("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Se("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((r=>{Ho("Terminating Firestore due to IndexedDb database deletion failed",r)}))})),t._offlineComponents=e}async function SC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await z5(t);Se(Wo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>gC(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>gC(e.remoteStore,r))),t._onlineComponents=e}async function z5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Wo,"Using user provided OfflineComponentProvider");try{await Rv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ce.FAILED_PRECONDITION||r.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await Rv(t,new Jp)}}else Se(Wo,"Using default OfflineComponentProvider"),await Rv(t,new B5(void 0));return t._offlineComponents}async function NP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Wo,"Using user provided OnlineComponentProvider"),await SC(t,t._uninitializedComponentsProvider._online)):(Se(Wo,"Using default OnlineComponentProvider"),await SC(t,new A0))),t._onlineComponents}function G5(t){return NP(t).then((e=>e.syncEngine))}async function C0(t){const e=await NP(t),n=e.eventManager;return n.onListen=x5.bind(null,e.syncEngine),n.onUnlisten=N5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P5.bind(null,e.syncEngine),n}function H5(t,e,n={}){const i=new qo;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,f,d){const p=new RP({next:T=>{p.Ou(),l.enqueueAndForget((()=>_P(o,v)));const b=T.docs.has(c);!b&&T.fromCache?d.reject(new Te(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&T.fromCache&&f&&f.source==="server"?d.reject(new Te(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(T)},error:T=>d.reject(T)}),v=new TP(Vm(c.path),p,{includeMetadataChanges:!0,ka:!0});return vP(o,v)})(await C0(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="firestore.googleapis.com",wC=!0;class AC{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DP,this.ssl=wC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b6)throw new Te(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Te(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Z4;switch(i.type){case"firstParty":return new i3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=bC.get(n);i&&(Se("ComponentProvider","Removing Datastore"),bC.delete(n),i.terminate())})(this),Promise.resolve()}}function j5(t,e,n,i={}){var r;t=ts(t,Hm);const o=Gs(e),l=t._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;o&&(Am(`https://${f}`),Cm("Firestore",!0)),l.host!==DP&&l.host!==f&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},l),{host:f,ssl:o,emulatorOptions:i});if(!$a(d,c)&&(t._setSettings(d),i.mockUserToken)){let p,v;if(typeof i.mockUserToken=="string")p=i.mockUserToken,v=oi.MOCK_USER;else{p=A1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Te(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new oi(T)}t._authCredentials=new e3(new yN(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mu(this.firestore,e,this._query)}}class gn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}toJSON(){return{type:gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Zf(n,gn._jsonSchema))return new gn(e,i||null,new Me(Vt.fromString(n.referencePath)))}}gn._jsonSchemaVersion="firestore/documentReference/1.0",gn._jsonSchema={type:wn("string",gn._jsonSchemaVersion),referencePath:wn("string")};class zo extends Mu{constructor(e,n,i){super(e,n,Vm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Me(e))}withConverter(e){return new zo(this.firestore,e,this._path)}}function ku(t,e,...n){if(t=Lt(t),_N("collection","path",e),t instanceof Hm){const i=Vt.fromString(e,...n);return UA(i),new zo(t,null,i)}{if(!(t instanceof gn||t instanceof zo))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Vt.fromString(e,...n));return UA(i),new zo(t.firestore,null,i)}}function Vu(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=V_.newId()),_N("doc","path",e),t instanceof Hm){const i=Vt.fromString(e,...n);return OA(i),new gn(t,null,new Me(i))}{if(!(t instanceof gn||t instanceof zo))throw new Te(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Vt.fromString(e,...n));return OA(i),new gn(t.firestore,t instanceof zo?t.converter:null,new Me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="AsyncQueue";class xC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cP(this,"async_queue_retry"),this.oc=()=>{const i=Iv();i&&Se(CC,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Iv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Iv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new qo;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Pu(e))throw e;Se(CC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((i=>{throw this.tc=i,this.nc=!1,Fs("INTERNAL UNHANDLED ERROR: ",IC(i)),i})).then((i=>(this.nc=!1,i))))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=eT.createAndSchedule(this,e,n,i,(o=>this.lc(o)));return this.ec.push(r),r}ac(){this.tc&&Fe(47125,{hc:IC(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function IC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){return(function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Xa extends Hm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new xC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xC(e),this._firestoreClient=void 0,await e}}}function $5(t,e){const n=typeof t=="object"?t:xm(),i=typeof t=="string"?t:Bp,r=Yf(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=T_("firestore");o&&j5(r,...o)}return r}function sT(t){if(t._terminated)throw new Te(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K5(t),t._firestoreClient}function K5(t){var e,n,i;const r=t._freezeSettings(),o=(function(c,f,d,p){return new _3(c,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,PP(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new q5(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(Yn.fromBase64String(e))}catch(n){throw new Te(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zf(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:wn("string",vr._jsonSchemaVersion),bytes:wn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rs._jsonSchemaVersion}}static fromJSON(e){if(Zf(e,rs._jsonSchema))return new rs(e.latitude,e.longitude)}}rs._jsonSchemaVersion="firestore/geoPoint/1.0",rs._jsonSchema={type:wn("string",rs._jsonSchemaVersion),latitude:wn("number"),longitude:wn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zf(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ss(e.vectorValues);throw new Te(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:wn("string",ss._jsonSchemaVersion),vectorValues:wn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=/^__.*__$/;class J5{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ia(e,this.data,this.fieldMask,n,this.fieldTransforms):new td(e,this.data,n,this.fieldTransforms)}}class MP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ia(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ec:t})}}class aT{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new aT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kP(this.Ec)&&Y5.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class W5{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qm(e)}Dc(e,n,i,r=!1){return new aT({Ec:e,methodName:n,bc:i,path:Kn.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lT(t){const e=t._freezeSettings(),n=qm(t._databaseId);return new W5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function X5(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);uT("Data must be an object, but it was:",l,i);const c=VP(i,l);let f,d;if(o.merge)f=new Wi(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const v of o.mergeFields){const T=x0(e,v,n);if(!l.contains(T))throw new Te(ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);OP(p,T)||p.push(T)}f=new Wi(p),d=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,d=l.fieldTransforms;return new J5(new Vi(c),f,d)}class $m extends oT{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $m}}function Q5(t,e,n,i){const r=t.Dc(1,e,n);uT("Data must be an object, but it was:",r,i);const o=[],l=Vi.empty();na(i,((f,d)=>{const p=cT(e,f,n);d=Lt(d);const v=r.gc(p);if(d instanceof $m)o.push(p);else{const T=sd(d,v);T!=null&&(o.push(p),l.set(p,T))}}));const c=new Wi(o);return new MP(l,c,r.fieldTransforms)}function Z5(t,e,n,i,r,o){const l=t.Dc(1,e,n),c=[x0(e,i,n)],f=[r];if(o.length%2!=0)throw new Te(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)c.push(x0(e,o[T])),f.push(o[T+1]);const d=[],p=Vi.empty();for(let T=c.length-1;T>=0;--T)if(!OP(d,c[T])){const b=c[T];let x=f[T];x=Lt(x);const N=l.gc(b);if(x instanceof $m)d.push(b);else{const D=sd(x,N);D!=null&&(d.push(b),p.set(b,D))}}const v=new Wi(d);return new MP(p,v,l.fieldTransforms)}function eF(t,e,n,i=!1){return sd(n,t.Dc(i?4:3,e))}function sd(t,e){if(LP(t=Lt(t)))return uT("Unsupported field value:",e,t),VP(t,e);if(t instanceof oT)return(function(i,r){if(!kP(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let f=sd(c,r.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return z3(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ht.fromDate(i);return{timestampValue:$p(r.serializer,o)}}if(i instanceof Ht){const o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$p(r.serializer,o)}}if(i instanceof rs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vr)return{bytesValue:ZN(r.serializer,i._byteString)};if(i instanceof gn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:j_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ss)return(function(l,c){return{mapValue:{fields:{[IN]:{stringValue:RN},[qp]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return q_(c.serializer,d)}))}}}}}})(i,r);throw r.wc(`Unsupported field value: ${Pm(i)}`)})(t,e)}function VP(t,e){const n={};return SN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,((i,r)=>{const o=sd(r,e.Vc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function LP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ht||t instanceof rs||t instanceof vr||t instanceof gn||t instanceof oT||t instanceof ss)}function uT(t,e,n){if(!LP(n)||!TN(n)){const i=Pm(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function x0(t,e,n){if((e=Lt(e))instanceof jm)return e._internalPath;if(typeof e=="string")return cT(t,e);throw Wp("Field path arguments must be of type string or ",t,!1,void 0,n)}const tF=new RegExp("[~\\*/\\[\\]]");function cT(t,e,n){if(e.search(tF)>=0)throw Wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jm(...e.split("."))._internalPath}catch{throw Wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wp(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new Te(ce.INVALID_ARGUMENT,c+t+f)}function OP(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(FP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nF extends UP{data(){return super.data()}}function FP(t,e){return typeof e=="string"?cT(t,e):e instanceof jm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fT{}class rF extends fT{}function dT(t,e,...n){let i=[];e instanceof fT&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((f=>f instanceof pT)).length,c=o.filter((f=>f instanceof hT)).length;if(l>1||l>0&&c>0)throw new Te(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class hT extends rF{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new hT(e,n,i)}_apply(e){const n=this._parse(e);return BP(e._query,n),new Mu(e.firestore,e.converter,m0(e._query,n))}_parse(e){const n=lT(e.firestore);return(function(o,l,c,f,d,p,v){let T;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){PC(v,p);const x=[];for(const N of v)x.push(NC(f,o,N));T={arrayValue:{values:x}}}else T=NC(f,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||PC(v,p),T=eF(c,l,v,p==="in"||p==="not-in");return bn.create(d,p,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class pT extends fT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pT(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ur.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const f of c)BP(l,f),l=m0(l,f)})(e._query,n),new Mu(e.firestore,e.converter,m0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NC(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new Te(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ON(e)&&n.indexOf("/")!==-1)throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Vt.fromString(n));if(!Me.isDocumentKey(i))throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $A(t,new Me(i))}if(n instanceof gn)return $A(t,n._key);throw new Te(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pm(n)}.`)}function PC(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BP(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sF{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return na(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[qp].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map((l=>mn(l.doubleValue)));return new ss(o)}convertGeoPoint(e){return new rs(mn(e.latitude),mn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=km(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Df(e));default:return null}}convertTimestamp(e){const n=$o(e);return new Ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Vt.fromString(e);bt(sP(i),9688,{name:e});const r=new Mf(i.get(1),i.get(3)),o=new Me(i.popFirst(5));return r.isEqual(n)||Fs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends UP{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(FP("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ba._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:wn("string",Ba._jsonSchemaVersion),bundleSource:wn("string","DocumentSnapshot"),bundleName:wn("string"),bundle:wn("string")};class vp extends Ba{data(e={}){return super.data(e)}}class uu{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Xc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new vp(this._firestore,this._userDataWriter,i.key,i,new Xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const f=new vp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new vp(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:aF(c.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=V_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){t=ts(t,gn);const e=ts(t.firestore,Xa);return H5(sT(e),t._key).then((n=>zP(e,t,n)))}uu._jsonSchemaVersion="firestore/querySnapshot/1.0",uu._jsonSchema={type:wn("string",uu._jsonSchemaVersion),bundleSource:wn("string","QuerySnapshot"),bundleName:wn("string"),bundle:wn("string")};class qP extends sF{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,n)}}function uF(t,e,n,...i){t=ts(t,gn);const r=ts(t.firestore,Xa),o=lT(r);let l;return l=typeof(e=Lt(e))=="string"||e instanceof jm?Z5(o,"updateDoc",t._key,e,n,i):Q5(o,"updateDoc",t._key,e),vT(r,[l.toMutation(t._key,Or.exists(!0))])}function mT(t){return vT(ts(t.firestore,Xa),[new z_(t._key,Or.none())])}function gT(t,e){const n=ts(t.firestore,Xa),i=Vu(t),r=oF(t.converter,e);return vT(n,[X5(lT(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Or.exists(!1))]).then((()=>i))}function yT(t,...e){var n,i,r;t=Lt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||RC(e[l])||(o=e[l++]);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(RC(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let f,d,p;if(t instanceof gn)d=ts(t.firestore,Xa),p=Vm(t._key.path),f={next:v=>{e[l]&&e[l](zP(d,t,v))},error:e[l+1],complete:e[l+2]};else{const v=ts(t,Mu);d=ts(v.firestore,Xa),p=v._query;const T=new qP(d);f={next:b=>{e[l]&&e[l](new uu(d,T,v,b))},error:e[l+1],complete:e[l+2]},iF(t._query)}return(function(T,b,x,N){const D=new RP(N),O=new TP(b,D,x);return T.asyncQueue.enqueueAndForget((async()=>vP(await C0(T),O))),()=>{D.Ou(),T.asyncQueue.enqueueAndForget((async()=>_P(await C0(T),O)))}})(sT(d),p,c,f)}function vT(t,e){return(function(i,r){const o=new qo;return i.asyncQueue.enqueueAndForget((async()=>D5(await G5(i),r,o))),o.promise})(sT(t),e)}function zP(t,e,n){const i=n.docs.get(e._key),r=new qP(t);return new Ba(t,r,e._key,i,new Xc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ru=r})(el),Go(new Ls("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new Xa(new t3(i.getProvider("auth-internal")),new r3(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Te(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mf(d.options.projectId,p)})(l,r),l);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),_r(DA,MA,e),_r(DA,MA,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firebasestorage.googleapis.com",HP="storageBucket",cF=120*1e3,fF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un extends Fr{constructor(e,n,i=0){super(Nv(e),`Firebase Storage: ${n} (${Nv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ln||(ln={}));function Nv(t){return"storage/"+t}function _T(){const t="An unknown error occurred, please check the error payload for server response.";return new un(ln.UNKNOWN,t)}function dF(t){return new un(ln.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function hF(t){return new un(ln.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(ln.UNAUTHENTICATED,t)}function mF(){return new un(ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gF(t){return new un(ln.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function yF(){return new un(ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vF(){return new un(ln.CANCELED,"User canceled the upload/download.")}function _F(t){return new un(ln.INVALID_URL,"Invalid URL '"+t+"'.")}function TF(t){return new un(ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function EF(){return new un(ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HP+"' property when initializing the app?")}function SF(){return new un(ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bF(){return new un(ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wF(t){return new un(ln.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I0(t){return new un(ln.INVALID_ARGUMENT,t)}function jP(){return new un(ln.APP_DELETED,"The Firebase app was deleted.")}function AF(t){return new un(ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function df(t,e){return new un(ln.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uc(t){throw new un(ln.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Xi.makeFromUrl(e,n)}catch{return new Xi(e,"")}if(i.path==="")return i;throw TF(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+r+l,"i"),f={bucket:1,path:3};function d($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${p}/b/${r}/o${T}`,"i"),x={bucket:1,path:3},N=n===GP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",O=new RegExp(`^https?://${N}/${r}/${D}`,"i"),F=[{regex:c,indices:f,postModify:o},{regex:b,indices:x,postModify:d},{regex:O,indices:{bucket:1,path:2},postModify:d}];for(let $=0;$<F.length;$++){const K=F[$],G=K.regex.exec(e);if(G){const I=G[K.indices.bucket];let R=G[K.indices.path];R||(R=""),i=new Xi(I,R),K.postModify(i);break}}if(i==null)throw _F(e);return i}}class CF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t,e,n){let i=1,r=null,o=null,l=!1,c=0;function f(){return c===2}let d=!1;function p(...D){d||(d=!0,e.apply(null,D))}function v(D){r=setTimeout(()=>{r=null,t(b,f())},D)}function T(){o&&clearTimeout(o)}function b(D,...O){if(d){T();return}if(D){T(),p.call(null,D,...O);return}if(f()||l){T(),p.call(null,D,...O);return}i<64&&(i*=2);let F;c===1?(c=2,F=0):F=(i+Math.random())*1e3,v(F)}let x=!1;function N(D){x||(x=!0,T(),!d&&(r!==null?(D||(c=2),clearTimeout(r),v(0)):D||(c=1)))}return v(0),o=setTimeout(()=>{l=!0,N(!0)},n),N}function IF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t){return t!==void 0}function NF(t){return typeof t=="object"&&!Array.isArray(t)}function TT(t){return typeof t=="string"||t instanceof String}function DC(t){return ET()&&t instanceof Blob}function ET(){return typeof Blob<"u"}function MC(t,e,n,i){if(i<e)throw I0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw I0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function $P(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var qa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(qa||(qa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,n,i,r,o,l,c,f,d,p,v,T=!0,b=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=v,this.retry=T,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,N)=>{this.resolve_=x,this.reject_=N,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Bh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const f=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,d)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===qa.NO_ERROR,f=o.getStatus();if(!c||PF(f,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===qa.ABORT;i(!1,new Bh(!1,null,p));return}const d=this.successCodes_.indexOf(f)!==-1;i(!0,new Bh(d,o))})},n=(i,r)=>{const o=this.resolve_,l=this.reject_,c=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());RF(f)?o(f):o()}catch(f){l(f)}else if(c!==null){const f=_T();f.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,f)):l(f)}else if(r.canceled){const f=this.appDelete_?jP():vF();l(f)}else{const f=yF();l(f)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=xF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function MF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OF(t,e,n,i,r,o,l=!0,c=!1){const f=$P(t.urlParams),d=t.url+f,p=Object.assign({},t.headers);return VF(p,e),MF(p,n),kF(p,o),LF(p,i),new DF(d,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FF(...t){const e=UF();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(ET())return new Blob(t);throw new un(ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){if(typeof atob>"u")throw wF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pv{constructor(e,n){this.data=e,this.contentType=n||null}}function KP(t,e){switch(t){case kr.RAW:return new Pv(YP(e));case kr.BASE64:case kr.BASE64URL:return new Pv(JP(t,e));case kr.DATA_URL:return new Pv(GF(e),HF(e))}throw _T()}function YP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,l=t.charCodeAt(++n);i=65536|(o&1023)<<10|l&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function zF(t){let e;try{e=decodeURIComponent(t)}catch{throw df(kr.DATA_URL,"Malformed data URL.")}return YP(e)}function JP(t,e){switch(t){case kr.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw df(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case kr.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw df(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qF(e)}catch(r){throw r.message.includes("polyfill")?r:df(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class WP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw df(kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=jF(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function GF(t){const e=new WP(t);return e.base64?JP(kr.BASE64,e.rest):zF(e.rest)}function HF(t){return new WP(t).contentType}function jF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){let i=0,r="";DC(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(DC(this.data_)){const i=this.data_,r=BF(i,e,n);return r===null?null:new Do(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Do(i,!0)}}static getBlob(...e){if(ET()){const n=e.map(i=>i instanceof Do?i.data_:i);return new Do(FF.apply(null,n))}else{const n=e.map(l=>TT(l)?KP(kr.RAW,l).data:l.data_);let i=0;n.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)r[o++]=l[c]}),new Do(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){let e;try{e=JSON.parse(t)}catch{return null}return NF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KF(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function QP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t,e){return e}class Ei{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||YF}}let qh=null;function JF(t){return!TT(t)||t.length<2?t:QP(t)}function ZP(){if(qh)return qh;const t=[];t.push(new Ei("bucket")),t.push(new Ei("generation")),t.push(new Ei("metageneration")),t.push(new Ei("name","fullPath",!0));function e(o,l){return JF(l)}const n=new Ei("name");n.xform=e,t.push(n);function i(o,l){return l!==void 0?Number(l):l}const r=new Ei("size");return r.xform=i,t.push(r),t.push(new Ei("timeCreated")),t.push(new Ei("updated")),t.push(new Ei("md5Hash",null,!0)),t.push(new Ei("cacheControl",null,!0)),t.push(new Ei("contentDisposition",null,!0)),t.push(new Ei("contentEncoding",null,!0)),t.push(new Ei("contentLanguage",null,!0)),t.push(new Ei("contentType",null,!0)),t.push(new Ei("metadata","customMetadata",!0)),qh=t,qh}function WF(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new Xi(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function XF(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const l=n[o];i[l.local]=l.xform(i,e[l.server])}return WF(i,t),i}function eD(t,e,n){const i=XP(e);return i===null?null:XF(t,i,n)}function QF(t,e,n,i){const r=XP(e);if(r===null||!TT(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(d=>{const p=t.bucket,v=t.fullPath,T="/b/"+l(p)+"/o/"+l(v),b=ST(T,n,i),x=$P({alt:"media",token:d});return b+x})[0]}function ZF(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class tD{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){if(!t)throw _T()}function eB(t,e){function n(i,r){const o=eD(t,r,e);return nD(o!==null),o}return n}function tB(t,e){function n(i,r){const o=eD(t,r,e);return nD(o!==null),QF(o,r,t.host,t._protocol)}return n}function iD(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=mF():r=pF():n.getStatus()===402?r=hF(t.bucket):n.getStatus()===403?r=gF(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function nB(t){const e=iD(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=dF(t.path)),o.serverResponse=r.serverResponse,o}return n}function iB(t,e,n){const i=e.fullServerUrl(),r=ST(i,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,c=new tD(r,o,tB(t,n),l);return c.errorHandler=nB(e),c}function rB(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function sB(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=rB(null,e)),i}function oB(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let F="";for(let $=0;$<2;$++)F=F+Math.random().toString().slice(2);return F}const f=c();l["Content-Type"]="multipart/related; boundary="+f;const d=sB(e,i,r),p=ZF(d,n),v="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+f+`\r
Content-Type: `+d.contentType+`\r
\r
`,T=`\r
--`+f+"--",b=Do.getBlob(v,i,T);if(b===null)throw SF();const x={name:d.fullPath},N=ST(o,t.host,t._protocol),D="POST",O=t.maxUploadRetryTime,k=new tD(N,D,eB(t,n),O);return k.urlParams=x,k.headers=l,k.body=b.uploadData(),k.errorHandler=iD(e),k}class aB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Uc("cannot .send() more than once");if(Gs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lB extends aB{initXhr(){this.xhr_.responseType="text"}}function rD(){return new lB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this._service=e,n instanceof Xi?this._location=n:this._location=Xi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qa(e,n)}get root(){const e=new Xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QP(this._location.path)}get storage(){return this._service}get parent(){const e=$F(this._location.path);if(e===null)return null;const n=new Xi(this._location.bucket,e);return new Qa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AF(e)}}function uB(t,e,n){t._throwIfRoot("uploadBytes");const i=oB(t.storage,t._location,ZP(),new Do(e,!0),n);return t.storage.makeRequestWithTokens(i,rD).then(r=>({metadata:r,ref:t}))}function cB(t,e,n=kr.RAW,i){t._throwIfRoot("uploadString");const r=KP(n,e),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),uB(t,r.data,o)}function fB(t){t._throwIfRoot("getDownloadURL");const e=iB(t.storage,t._location,ZP());return t.storage.makeRequestWithTokens(e,rD).then(n=>{if(n===null)throw bF();return n})}function dB(t,e){const n=KF(t._location.path,e),i=new Xi(t._location.bucket,n);return new Qa(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){return/^[A-Za-z]+:\/\//.test(t)}function pB(t,e){return new Qa(t,e)}function sD(t,e){if(t instanceof bT){const n=t;if(n._bucket==null)throw EF();const i=new Qa(n,n._bucket);return e!=null?sD(i,e):i}else return e!==void 0?dB(t,e):t}function mB(t,e){if(e&&hB(e)){if(t instanceof bT)return pB(t,e);throw I0("To use ref(service, url), the first argument must be a Storage instance.")}else return sD(t,e)}function kC(t,e){const n=e==null?void 0:e[HP];return n==null?null:Xi.makeFromBucketSpec(n,t)}function gB(t,e,n,i={}){t.host=`${e}:${n}`;const r=Gs(e);r&&(Am(`https://${t.host}/b`),Cm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:A1(o,t.app.options.projectId))}class bT{constructor(e,n,i,r,o,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=GP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cF,this._maxUploadRetryTime=fF,this._requests=new Set,r!=null?this._bucket=Xi.makeFromBucketSpec(r,this._host):this._bucket=kC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xi.makeFromBucketSpec(this._url,e):this._bucket=kC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qa(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new CF(jP());{const l=OF(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const VC="@firebase/storage",LC="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD="storage";function yB(t,e,n,i){return t=Lt(t),cB(t,e,n,i)}function vB(t){return t=Lt(t),fB(t)}function _B(t,e){return t=Lt(t),mB(t,e)}function TB(t=xm(),e){t=Lt(t);const i=Yf(t,oD).getImmediate({identifier:e}),r=T_("storage");return r&&EB(i,...r),i}function EB(t,e,n,i={}){gB(t,e,n,i)}function SB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new bT(n,i,r,e,el)}function bB(){Go(new Ls(oD,SB,"PUBLIC").setMultipleInstances(!0)),_r(VC,LC,""),_r(VC,LC,"esm2017")}bB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB="type.googleapis.com/google.protobuf.Int64Value",AB="type.googleapis.com/google.protobuf.UInt64Value";function aD(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Xp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Xp(e));if(typeof t=="function"||typeof t=="object")return aD(t,e=>Xp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Eu(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case wB:case AB:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Eu(e)):typeof t=="function"||typeof t=="object"?aD(t,e=>Eu(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Fr{constructor(e,n,i){super(`${wT}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Li.prototype)}}function CB(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Qp(t,e){let n=CB(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!OC[l])return new Li("internal","internal");n=OC[l],i=l}const c=o.message;typeof c=="string"&&(i=c),r=o.details,r!==void 0&&(r=Eu(r))}}catch{}return n==="ok"?null:new Li(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Si(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="us-central1",IB=/^data: (.*?)(?:\n|$)/;function RB(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class NB{constructor(e,n,i,r,o=R0,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new xB(e,n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=R0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function PB(t,e,n){const i=Gs(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Am(t.emulatorOrigin),Cm("Functions",!0))}function DB(t,e,n){const i=r=>kB(t,e,r,{});return i.stream=(r,o)=>LB(t,e,r,o),i}async function MB(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function lD(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function kB(t,e,n,i){const r=t._url(e);return VB(t,r,n,i)}async function VB(t,e,n,i){n=Xp(n);const r={data:n},o=await lD(t,i),l=i.timeout||7e4,c=RB(l),f=await Promise.race([MB(e,r,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!f)throw new Li("cancelled","Firebase Functions instance was deleted.");const d=Qp(f.status,f.json);if(d)throw d;if(!f.json)throw new Li("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new Li("internal","Response is missing data field.");return{data:Eu(p)}}function LB(t,e,n,i){const r=t._url(e);return OB(t,r,n,i||{})}async function OB(t,e,n,i){var r;n=Xp(n);const o={data:n},l=await lD(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const N=new Li("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const x=Qp(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let f,d;const p=new Promise((b,x)=>{f=b,d=x});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const b=new Li("cancelled","Request was cancelled.");d(b)});const v=c.body.getReader(),T=UB(v,f,d,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=T.getReader();return{async next(){const{value:x,done:N}=await b.read();return{value:x,done:N}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function UB(t,e,n,i){const r=(l,c)=>{const f=l.match(IB);if(!f)return;const d=f[1];try{const p=JSON.parse(d);if("result"in p){e(Eu(p.result));return}if("message"in p){c.enqueue(Eu(p.message));return}if("error"in p){const v=Qp(0,p);c.error(v),n(v);return}}catch(p){if(p instanceof Li){c.error(p),n(p);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return f();async function f(){if(i!=null&&i.aborted){const d=new Li("cancelled","Request was cancelled");return l.error(d),n(d),Promise.resolve()}try{const{value:d,done:p}=await t.read();if(p){c.trim()&&r(c.trim(),l),l.close();return}if(i!=null&&i.aborted){const T=new Li("cancelled","Request was cancelled");l.error(T),n(T),await t.cancel();return}c+=o.decode(d,{stream:!0});const v=c.split(`
`);c=v.pop()||"";for(const T of v)T.trim()&&r(T.trim(),l);return f()}catch(d){const p=d instanceof Li?d:Qp(0,null);l.error(p),n(p)}}},cancel(){return t.cancel()}})}const UC="@firebase/functions",FC="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB="auth-internal",BB="app-check-internal",qB="messaging-internal";function zB(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(FB),l=n.getProvider(qB),c=n.getProvider(BB);return new NB(r,o,l,c,i)};Go(new Ls(wT,e,"PUBLIC").setMultipleInstances(!0)),_r(UC,FC,t),_r(UC,FC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(t=xm(),e=R0){const i=Yf(Lt(t),wT).getImmediate({identifier:e}),r=T_("functions");return r&&HB(i,...r),i}function HB(t,e,n){PB(Lt(t),e,n)}function jB(t,e,n){return DB(Lt(t),e)}zB();const $B={apiKey:"AIzaSyAoMQ8oVPP5oFjw8YzgF0H1Dy4DAJmNaKM",authDomain:"dresscode-ai-32c50.firebaseapp.com",projectId:"dresscode-ai-32c50",storageBucket:"dresscode-ai-32c50.firebasestorage.app",messagingSenderId:"215593114437",appId:"1:215593114437:web:5d9c1f3161182802f37c2c"},Km=I1($B),Ma=J4(Km),KB=new Ns,Br=$5(Km),YB=TB(Km),JB=GB(Km,"us-central1");/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WB,XB;function QB(){return{geminiUrl:WB,vertexUrl:XB}}function ZB(t,e,n,i){var r,o;if(!(t!=null&&t.baseUrl)){const l=QB();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:n:(o=l.geminiUrl)!==null&&o!==void 0?o:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hs{}function _e(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const p=f[d];y(p,e.slice(o+1),n[d])}else for(const d of f)y(d,e.slice(o+1),n)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];y(f[0],e.slice(o+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function e9(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),l=new Set;let c=-1;for(let f=0;f<r.length;f++)if(r[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const d=o[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}N0(t,r,o,0,l)}}function N0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const o=e[i];if(o.endsWith("[]")){const l=o.slice(0,-2),c=t;if(l in c&&Array.isArray(c[l]))for(const f of c[l])N0(f,e,n,i+1,r)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,c=Object.keys(l).filter(d=>!d.startsWith("_")&&!r.has(d)),f={};for(const d of c)f[d]=l[d];for(const[d,p]of Object.entries(f)){const v=[];for(const T of n.slice(i))T==="*"?v.push(d):v.push(T);y(l,v,p)}for(const d of c)delete l[d]}}else{const l=t;o in l&&N0(l[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AT(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t9(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function n9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],r9(l)),e}function i9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],s9(l)),e}function r9(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>o9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function s9(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>a9(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function o9(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],h9(n)),e}function a9(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],p9(n)),e}function l9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function u9(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function c9(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],f9(l)),e}function f9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function uD(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],d9(l)),e}function d9(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function h9(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],AT(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function p9(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],AT(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var BC;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(BC||(BC={}));var qC;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(qC||(qC={}));var zC;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(zC||(zC={}));var Ge;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ge||(Ge={}));var GC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(GC||(GC={}));var HC;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HC||(HC={}));var jC;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(jC||(jC={}));var $C;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($C||($C={}));var KC;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(KC||(KC={}));var YC;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(YC||(YC={}));var JC;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(JC||(JC={}));var WC;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(WC||(WC={}));var XC;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(XC||(XC={}));var QC;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(QC||(QC={}));var ZC;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ZC||(ZC={}));var ex;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ex||(ex={}));var tx;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tx||(tx={}));var nx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(nx||(nx={}));var ix;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ix||(ix={}));var Zp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Zp||(Zp={}));var rx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rx||(rx={}));var sx;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sx||(sx={}));var ox;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ox||(ox={}));var P0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(P0||(P0={}));var ax;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ax||(ax={}));var lx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(lx||(lx={}));var ux;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ux||(ux={}));var cx;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cx||(cx={}));var fx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fx||(fx={}));var dx;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dx||(dx={}));var hx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(hx||(hx={}));var px;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(px||(px={}));var mx;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(mx||(mx={}));var gx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(gx||(gx={}));var yx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yx||(yx={}));var vx;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vx||(vx={}));var _x;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_x||(_x={}));var Tx;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tx||(Tx={}));var Ex;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ex||(Ex={}));var Sx;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Sx||(Sx={}));var bx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(bx||(bx={}));var wx;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(wx||(wx={}));var Ax;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ax||(Ax={}));var Cx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Cx||(Cx={}));var xx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(xx||(xx={}));var Ix;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Ix||(Ix={}));var Rx;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Rx||(Rx={}));var Nx;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Nx||(Nx={}));var Px;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Px||(Px={}));var Dx;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Dx||(Dx={}));var Mx;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Mx||(Mx={}));var kx;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(kx||(kx={}));var Vx;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Vx||(Vx={}));var Lx;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Lx||(Lx={}));var Ql;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ql||(Ql={}));class D0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Fc{get text(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const v=[];for(const T of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[b,x]of Object.entries(T))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(x!==null||x!==void 0)&&v.push(b);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;p=!0,d+=T.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const v of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[T,b]of Object.entries(v))T!=="inlineData"&&(b!==null||b!==void 0)&&p.push(T);v.inlineData&&typeof v.inlineData.data=="string"&&(d+=atob(v.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,o,l,c,f;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,r,o,l,c,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,o,l,c,f,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class Ox{}class Ux{}class m9{}class g9{}class y9{}class v9{}class Fx{}class Bx{}class qx{}class _9{}class em{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new em;let r;const o=e;return n?r=i9(o):r=n9(o),Object.assign(i,r),i}}class zx{}class Gx{}class Hx{}class T9{}class E9{}class S9{}class CT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new CT,o=c9(e);return Object.assign(i,o),i}}class b9{}class w9{}class A9{}class jx{}class C9{get text(){var e,n,i;let r="",o=!1;const l=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class x9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class xT{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new xT,o=uD(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cD(t,e){const n=yt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fD(t){return Array.isArray(t)?t.map(e=>tm(e)):[tm(t)]}function tm(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dD(t){const e=tm(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hD(t){const e=tm(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $x(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pD(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$x(e)):[$x(t)]}function M0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Kx(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Yx(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function li(t){if(t==null)throw new Error("ContentUnion is required");return M0(t)?t:{role:"user",parts:pD(t)}}function IT(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=li(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=li(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>li(n)):[li(e)]}function Tr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Kx(t)||Yx(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[li(t)]}const e=[],n=[],i=M0(t[0]);for(const r of t){const o=M0(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(Kx(r)||Yx(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:pD(n)}),e}function I9(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Ge).includes(n[0].toUpperCase())?n[0].toUpperCase():Ge.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Ge).includes(i.toUpperCase())?i.toUpperCase():Ge.TYPE_UNSPECIFIED})}}function cu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&I9(t.type,e);for(const[l,c]of Object.entries(t))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ge).includes(c.toUpperCase())?c.toUpperCase():Ge.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=cu(c);else if(i.includes(l)){const f=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(cu(d))}e[l]=f}else if(r.includes(l)){const f={};for(const[d,p]of Object.entries(c))f[d]=cu(p);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function RT(t){return cu(t)}function NT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function PT(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Lu(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=cu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=cu(e.response));return t}function Ou(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function R9(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function js(t,e){if(typeof e!="string")throw new Error("name must be a string");return R9(t,e,"cachedContents")}function mD(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ra(t){return AT(t)}function N9(t){return t!=null&&typeof t=="object"&&"name"in t}function P9(t){return t!=null&&typeof t=="object"&&"video"in t}function D9(t){return t!=null&&typeof t=="object"&&"uri"in t}function gD(t){var e;let n;if(N9(t)&&(n=t.name),!(D9(t)&&(n=t.uri,n===void 0))&&!(P9(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yD(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vD(t){for(const e of["models","tunedModels","publisherModels"])if(M9(t,e))return t[e];return[]}function M9(t,e){return t!==null&&typeof t=="object"&&e in t}function k9(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function V9(t,e={}){const n=[],i=new Set;for(const r of t){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const l=k9(r,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function _D(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function L9(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function TD(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let o=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Uu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ED(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O9(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>yq(l))),y(e,["inlinedResponses"],o)}const r=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["inlinedEmbedContentResponses"],o)}return e}function U9(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigqueryDestination","outputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function F9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigqueryDestination","outputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function _p(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["metadata","state"]);r!=null&&y(e,["state"],ED(r));const o=m(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const l=m(t,["metadata","endTime"]);l!=null&&y(e,["endTime"],l);const c=m(t,["metadata","updateTime"]);c!=null&&y(e,["updateTime"],c);const f=m(t,["metadata","model"]);f!=null&&y(e,["model"],f);const d=m(t,["metadata","output"]);return d!=null&&y(e,["dest"],O9(TD(d))),e}function k0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["state"]);r!=null&&y(e,["state"],ED(r));const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["createTime"]);l!=null&&y(e,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(e,["startTime"],c);const f=m(t,["endTime"]);f!=null&&y(e,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(e,["updateTime"],d);const p=m(t,["model"]);p!=null&&y(e,["model"],p);const v=m(t,["inputConfig"]);v!=null&&y(e,["src"],B9(v));const T=m(t,["outputConfig"]);T!=null&&y(e,["dest"],U9(TD(T)));const b=m(t,["completionStats"]);return b!=null&&y(e,["completionStats"],b),e}function B9(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const r=m(t,["bigquerySource","inputUri"]);return r!=null&&y(e,["bigqueryUri"],r),e}function q9(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const r=m(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>gq(t,l))),y(n,["requests","requests"],o)}return n}function z9(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const r=m(t,["bigqueryUri"]);if(r!=null&&y(e,["bigquerySource","inputUri"],r),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function G9(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function H9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function j9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function $9(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],K9(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&y(e,["index"],f);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function K9(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function SD(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>wq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Y9(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function J9(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["dest"]);return e!==void 0&&r!=null&&y(e,["outputConfig"],F9(L9(r))),n}function Jx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],q9(t,_D(t,r)));const o=m(e,["config"]);return o!=null&&Y9(o,n),n}function W9(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["inputConfig"],z9(_D(t,r)));const o=m(e,["config"]);return o!=null&&J9(o,n),n}function X9(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function Q9(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["src"]);r!=null&&y(n,["batch","inputConfig"],sq(t,r));const o=m(e,["config"]);return o!=null&&X9(o,n),n}function Z9(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function eq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function tq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function nq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);return o!=null&&y(e,["error"],o),e}function iq(t,e){const n={},i=m(e,["contents"]);if(i!=null){let o=IT(t,i);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["requests[]","request","content"],o)}const r=m(e,["config"]);return r!=null&&(y(n,["_self"],rq(r,n)),e9(n,{"requests[].*":"requests[].request.*"})),n}function rq(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sq(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const r=m(e,["inlinedRequests"]);return r!=null&&y(n,["requests"],iq(t,r)),n}function oq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function aq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uq(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],SD(li(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],RT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let q=F;Array.isArray(q)&&(q=q.map(z=>Aq(z))),y(n,["safetySettings"],q)}const $=m(e,["tools"]);if(n!==void 0&&$!=null){let q=Ou($);Array.isArray(q)&&(q=q.map(z=>xq(Lu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],Cq(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],js(t,G));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],NT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],mq(U)),i}function cq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>$9(d))),y(e,["candidates"],f)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function fq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function dq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Uu(t,i)),n}function hq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function pq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function mq(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function gq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=Tr(r);Array.isArray(c)&&(c=c.map(f=>SD(f))),y(n,["request","contents"],c)}const o=m(e,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(e,["config"]);return l!=null&&y(n,["request","generationConfig"],uq(t,l,m(n,["request"],{}))),n}function yq(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],cq(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function vq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);if(e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function _q(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const o=m(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function Tq(t){const e={},n=m(t,["config"]);return n!=null&&vq(n,e),e}function Eq(t){const e={},n=m(t,["config"]);return n!=null&&_q(n,e),e}function Sq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>_p(l))),y(e,["batchJobs"],o)}return e}function bq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>k0(l))),y(e,["batchJobs"],o)}return e}function wq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],oq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],aq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],G9(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Aq(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function Cq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],lq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function xq(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],hq(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],pq(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(qs||(qs={}));class il{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iq extends Hs{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new il(qs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Jx(this.apiClient,e),i=n._url,r=_e("{model}:batchGenerateContent",i),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const p of f){const v=Object.assign({},p);if(v.systemInstruction){const T=v.systemInstruction;delete v.systemInstruction;const b=v.request;b.systemInstruction=T,v.request=b}d.push(v)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=W9(this.apiClient,e);return c=_e("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>k0(p))}else{const d=Jx(this.apiClient,e);return c=_e("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>_p(p))}}async createEmbeddingsInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q9(this.apiClient,e);return o=_e("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>_p(f))}}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=dq(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>k0(p))}else{const d=fq(this.apiClient,e);return c=_e("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>_p(p))}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const f=j9(this.apiClient,e);l=_e("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=H9(this.apiClient,e);l=_e("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Eq(e);return c=_e("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=bq(p),T=new jx;return Object.assign(T,v),T})}else{const d=Tq(e);return c=_e("batches",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Sq(p),T=new jx;return Object.assign(T,v),T})}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=eq(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>nq(p))}else{const d=Z9(this.apiClient,e);return c=_e("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>tq(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rq(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Wx(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Qq(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Nq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let p=Tr(l);Array.isArray(p)&&(p=p.map(v=>Wx(v))),y(e,["contents"],p)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],Wx(li(c)));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(v=>ez(v))),y(e,["tools"],p)}const d=m(t,["toolConfig"]);if(e!==void 0&&d!=null&&y(e,["toolConfig"],Zq(d)),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Pq(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);e!==void 0&&r!=null&&y(e,["expireTime"],r);const o=m(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const l=m(t,["contents"]);if(e!==void 0&&l!=null){let v=Tr(l);Array.isArray(v)&&(v=v.map(T=>T)),y(e,["contents"],v)}const c=m(t,["systemInstruction"]);e!==void 0&&c!=null&&y(e,["systemInstruction"],li(c));const f=m(t,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(T=>tz(T))),y(e,["tools"],v)}const d=m(t,["toolConfig"]);e!==void 0&&d!=null&&y(e,["toolConfig"],d);const p=m(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function Dq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],cD(t,i));const r=m(e,["config"]);return r!=null&&Nq(r,n),n}function Mq(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],cD(t,i));const r=m(e,["config"]);return r!=null&&Pq(r,n),n}function kq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],js(t,i)),n}function Vq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],js(t,i)),n}function Lq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Oq(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Uq(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Fq(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bq(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qq(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function zq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],js(t,i)),n}function Gq(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],js(t,i)),n}function Hq(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function jq(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function $q(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Kq(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function Yq(t){const e={},n=m(t,["config"]);return n!=null&&$q(n,e),e}function Jq(t){const e={},n=m(t,["config"]);return n!=null&&Kq(n,e),e}function Wq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function Xq(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["cachedContents"],o)}return e}function Qq(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Uq(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Fq(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],Rq(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Zq(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],Bq(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function ez(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Hq(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],jq(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function tz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>qq(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function nz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function iz(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const r=m(t,["expireTime"]);return e!==void 0&&r!=null&&y(e,["expireTime"],r),n}function rz(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],js(t,i));const r=m(e,["config"]);return r!=null&&nz(r,n),n}function sz(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],js(t,i));const r=m(e,["config"]);return r!=null&&iz(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oz extends Hs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new il(qs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Mq(this.apiClient,e);return c=_e("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=Dq(this.apiClient,e);return c=_e("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Gq(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=zq(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Vq(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Oq(p),T=new Gx;return Object.assign(T,v),T})}else{const d=kq(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Lq(p),T=new Gx;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=sz(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const d=rz(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Jq(e);return c=_e("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Xq(p),T=new Hx;return Object.assign(T,v),T})}else{const d=Yq(e);return c=_e("cachedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Wq(p),T=new Hx;return Object.assign(T,v),T})}}}function Xx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gt(t){return this instanceof Gt?(this.v=t,this):new Gt(t)}function fu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(x){return Promise.resolve(x).then(b,v)}}function c(b,x){i[b]&&(r[b]=function(N){return new Promise(function(D,O){o.push([b,N,D,O])>1||f(b,N)})},x&&(r[b]=x(r[b])))}function f(b,x){try{d(i[b](x))}catch(N){T(o[0][3],N)}}function d(b){b.value instanceof Gt?Promise.resolve(b.value.v).then(p,v):T(o[0][2],b)}function p(b){f("next",b)}function v(b){f("throw",b)}function T(b,x){b(x),o.shift(),o.length&&f(o[0][0],o[0][1])}}function hf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Xx=="function"?Xx(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,f){l=t[o](l),r(c,f,l.done,l.value)})}}function r(o,l,c,f){Promise.resolve(f).then(function(d){o({value:d,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function az(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:bD(n)}function bD(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function lz(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Qx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let o=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),o&&!bD(t[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class uz{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new cz(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class cz{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),lz(o)}async sendMessage(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,l,c;const f=await r,d=(l=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,p=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let T=[];p!=null&&(T=(c=p.slice(v))!==null&&c!==void 0?c:[]);const b=d?[d]:[];this.recordHistory(i,b,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=li(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?Qx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return fu(this,arguments,function*(){var l,c,f,d;const p=[];try{for(var v=!0,T=hf(e),b;b=yield Gt(T.next()),l=b.done,!l;v=!0){d=b.value,v=!1;const x=d;if(az(x)){const N=(r=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;N!==void 0&&p.push(N)}yield yield Gt(x)}}catch(x){c={error:x}}finally{try{!v&&!l&&(f=T.return)&&(yield Gt(f.call(T)))}finally{if(c)throw c.error}}this.recordHistory(n,p)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Qx(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ym extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ym.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fz(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function dz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function hz(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],gD(n)),e}function pz(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function mz(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],gD(n)),e}function gz(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function yz(t){const e={},n=m(t,["config"]);return n!=null&&gz(n,e),e}function vz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _z extends Hs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new il(qs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yz(e);return o=_e("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=vz(f),p=new b9;return Object.assign(p,d),p})}}async createInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fz(e);return o=_e("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=dz(f),p=new w9;return Object.assign(p,d),p})}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mz(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=hz(e);return o=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=pz(f),p=new A9;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tp(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Tz(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Lz(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Ez(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Sz(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bz(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function wz(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const f=m(t,["logprobs"]);f!=null&&y(e,["logprobs"],f);const d=m(t,["maxOutputTokens"]);d!=null&&y(e,["maxOutputTokens"],d);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const x=m(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],wD(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const $=m(t,["temperature"]);$!=null&&y(e,["temperature"],$);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Az(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function Cz(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function xz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],PT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],Tz(li(x)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Ou(N);Array.isArray(G)&&(G=G.map(I=>Uz(Lu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],Oz(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Iz(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],wz(i));const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],wD(PT(v)));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],li(x));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Ou(N);Array.isArray(G)&&(G=G.map(I=>Fz(Lu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],D);const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function Rz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],xz(r,n)),n}function Nz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],Iz(r,n)),n}function Pz(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function Dz(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["weightedPrompts"],i)}return e}function Mz(t){const e={},n=m(t,["media"]);if(n!=null){let d=fD(n);Array.isArray(d)&&(d=d.map(p=>Tp(p))),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],Tp(hD(i)));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],Tp(dD(o)));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function kz(t){const e={},n=m(t,["media"]);if(n!=null){let d=fD(n);Array.isArray(d)&&(d=d.map(p=>p)),y(e,["mediaChunks"],d)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],hD(i));const r=m(t,["audioStreamEnd"]);r!=null&&y(e,["audioStreamEnd"],r);const o=m(t,["video"]);o!=null&&y(e,["video"],dD(o));const l=m(t,["text"]);l!=null&&y(e,["text"],l);const c=m(t,["activityStart"]);c!=null&&y(e,["activityStart"],c);const f=m(t,["activityEnd"]);return f!=null&&y(e,["activityEnd"],f),e}function Vz(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const r=m(t,["toolCall"]);r!=null&&y(e,["toolCall"],r);const o=m(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const l=m(t,["usageMetadata"]);l!=null&&y(e,["usageMetadata"],Bz(l));const c=m(t,["goAway"]);c!=null&&y(e,["goAway"],c);const f=m(t,["sessionResumptionUpdate"]);return f!=null&&y(e,["sessionResumptionUpdate"],f),e}function Lz(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],Ez(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],Sz(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],Tp(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function Oz(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wD(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Uz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],Az(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],Cz(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function Fz(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>bz(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function Bz(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const r=m(t,["candidatesTokenCount"]);r!=null&&y(e,["responseTokenCount"],r);const o=m(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const l=m(t,["thoughtsTokenCount"]);l!=null&&y(e,["thoughtsTokenCount"],l);const c=m(t,["totalTokenCount"]);c!=null&&y(e,["totalTokenCount"],c);const f=m(t,["promptTokensDetails"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(x=>x)),y(e,["promptTokensDetails"],b)}const d=m(t,["cacheTokensDetails"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(x=>x)),y(e,["cacheTokensDetails"],b)}const p=m(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(x=>x)),y(e,["responseTokensDetails"],b)}const v=m(t,["toolUsePromptTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(x=>x)),y(e,["toolUsePromptTokensDetails"],b)}const T=m(t,["trafficType"]);return T!=null&&y(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qz(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function zz(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],Gz(i));const r=m(t,["tokenCount"]);r!=null&&y(e,["tokenCount"],r);const o=m(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const l=m(t,["avgLogprobs"]);l!=null&&y(e,["avgLogprobs"],l);const c=m(t,["groundingMetadata"]);c!=null&&y(e,["groundingMetadata"],c);const f=m(t,["index"]);f!=null&&y(e,["index"],f);const d=m(t,["logprobsResult"]);d!=null&&y(e,["logprobsResult"],d);const p=m(t,["safetyRatings"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),y(e,["safetyRatings"],T)}const v=m(t,["urlContextMetadata"]);return v!=null&&y(e,["urlContextMetadata"],v),e}function Gz(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),y(e,["citations"],i)}return e}function Hz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let o=Tr(r);Array.isArray(o)&&(o=o.map(l=>l)),y(n,["contents"],o)}return n}function jz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["tokensInfo"],r)}return e}function $z(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],Kz(i)),e}function Kz(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function Jm(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>nH(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Yz(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function Jz(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Wz(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],li(i));const r=m(t,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>RD(c))),y(e,["tools"],l)}const o=m(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],qG(o)),n}function Xz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Jm(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&Jz(o),n}function Qz(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&Wz(o,n),n}function Zz(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const r=m(t,["cachedContentTokenCount"]);return r!=null&&y(e,["cachedContentTokenCount"],r),e}function eG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function tG(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function nG(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function iG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function rG(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function sG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const x=m(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["editMode"]);e!==void 0&&k!=null&&y(e,["parameters","editMode"],k);const F=m(t,["baseSteps"]);return e!==void 0&&F!=null&&y(e,["parameters","editConfig","baseSteps"],F),n}function oG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>lH(f))),y(n,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&sG(l,n),n}function aG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Wm(o))),y(e,["generatedImages"],r)}return e}function lG(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["requests[]","title"],r);const o=m(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uG(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const r=m(t,["title"]);e!==void 0&&r!=null&&y(e,["instances[]","title"],r);const o=m(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const l=m(t,["mimeType"]);e!==void 0&&l!=null&&y(e,["instances[]","mimeType"],l);const c=m(t,["autoTruncate"]);return e!==void 0&&c!=null&&y(e,["parameters","autoTruncate"],c),n}function cG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let c=IT(t,r);Array.isArray(c)&&(c=c.map(f=>f)),y(n,["requests[]","content"],c)}const o=m(e,["config"]);o!=null&&lG(o,n);const l=m(e,["model"]);return l!==void 0&&y(n,["requests[]","model"],yt(t,l)),n}function fG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=IT(t,r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["instances[]","content"],l)}const o=m(e,["config"]);return o!=null&&uG(o,n),n}function dG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function hG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>$z(l))),y(e,["embeddings"],o)}const r=m(t,["metadata"]);return r!=null&&y(e,["metadata"],r),e}function pG(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function mG(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function gG(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yG(t){const e={},n=m(t,["mode"]);n!=null&&y(e,["mode"],n);const i=m(t,["allowedFunctionNames"]);if(i!=null&&y(e,["allowedFunctionNames"],i),m(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vG(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const r=m(t,["parameters"]);r!=null&&y(e,["parameters"],r);const o=m(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const l=m(t,["response"]);l!=null&&y(e,["response"],l);const c=m(t,["responseJsonSchema"]);return c!=null&&y(e,["responseJsonSchema"],c),e}function _G(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],Jm(li(r)));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],RT(O));const k=m(e,["responseJsonSchema"]);if(k!=null&&y(i,["responseJsonSchema"],k),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=m(e,["safetySettings"]);if(n!==void 0&&F!=null){let q=F;Array.isArray(q)&&(q=q.map(z=>uH(z))),y(n,["safetySettings"],q)}const $=m(e,["tools"]);if(n!==void 0&&$!=null){let q=Ou($);Array.isArray(q)&&(q=q.map(z=>gH(Lu(z)))),y(n,["tools"],q)}const K=m(e,["toolConfig"]);if(n!==void 0&&K!=null&&y(n,["toolConfig"],mH(K)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],js(t,G));const I=m(e,["responseModalities"]);I!=null&&y(i,["responseModalities"],I);const R=m(e,["mediaResolution"]);R!=null&&y(i,["mediaResolution"],R);const P=m(e,["speechConfig"]);if(P!=null&&y(i,["speechConfig"],NT(P)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=m(e,["thinkingConfig"]);V!=null&&y(i,["thinkingConfig"],V);const U=m(e,["imageConfig"]);return U!=null&&y(i,["imageConfig"],$G(U)),i}function TG(t,e,n){const i={},r=m(e,["systemInstruction"]);n!==void 0&&r!=null&&y(n,["systemInstruction"],li(r));const o=m(e,["temperature"]);o!=null&&y(i,["temperature"],o);const l=m(e,["topP"]);l!=null&&y(i,["topP"],l);const c=m(e,["topK"]);c!=null&&y(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&y(i,["candidateCount"],f);const d=m(e,["maxOutputTokens"]);d!=null&&y(i,["maxOutputTokens"],d);const p=m(e,["stopSequences"]);p!=null&&y(i,["stopSequences"],p);const v=m(e,["responseLogprobs"]);v!=null&&y(i,["responseLogprobs"],v);const T=m(e,["logprobs"]);T!=null&&y(i,["logprobs"],T);const b=m(e,["presencePenalty"]);b!=null&&y(i,["presencePenalty"],b);const x=m(e,["frequencyPenalty"]);x!=null&&y(i,["frequencyPenalty"],x);const N=m(e,["seed"]);N!=null&&y(i,["seed"],N);const D=m(e,["responseMimeType"]);D!=null&&y(i,["responseMimeType"],D);const O=m(e,["responseSchema"]);O!=null&&y(i,["responseSchema"],RT(O));const k=m(e,["responseJsonSchema"]);k!=null&&y(i,["responseJsonSchema"],k);const F=m(e,["routingConfig"]);F!=null&&y(i,["routingConfig"],F);const $=m(e,["modelSelectionConfig"]);$!=null&&y(i,["modelConfig"],$);const K=m(e,["safetySettings"]);if(n!==void 0&&K!=null){let ee=K;Array.isArray(ee)&&(ee=ee.map(ae=>ae)),y(n,["safetySettings"],ee)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let ee=Ou(G);Array.isArray(ee)&&(ee=ee.map(ae=>RD(Lu(ae)))),y(n,["tools"],ee)}const I=m(e,["toolConfig"]);n!==void 0&&I!=null&&y(n,["toolConfig"],I);const R=m(e,["labels"]);n!==void 0&&R!=null&&y(n,["labels"],R);const P=m(e,["cachedContent"]);n!==void 0&&P!=null&&y(n,["cachedContent"],js(t,P));const V=m(e,["responseModalities"]);V!=null&&y(i,["responseModalities"],V);const U=m(e,["mediaResolution"]);U!=null&&y(i,["mediaResolution"],U);const q=m(e,["speechConfig"]);q!=null&&y(i,["speechConfig"],ID(NT(q)));const z=m(e,["audioTimestamp"]);z!=null&&y(i,["audioTimestamp"],z);const xe=m(e,["thinkingConfig"]);xe!=null&&y(i,["thinkingConfig"],xe);const ke=m(e,["imageConfig"]);return ke!=null&&y(i,["imageConfig"],KG(ke)),i}function Zx(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>Jm(c))),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],_G(t,o,n)),n}function eI(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["contents"]);if(r!=null){let l=Tr(r);Array.isArray(l)&&(l=l.map(c=>c)),y(n,["contents"],l)}const o=m(e,["config"]);return o!=null&&y(n,["generationConfig"],TG(t,o,n)),n}function tI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(d=>zz(d))),y(e,["candidates"],f)}const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const o=m(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const l=m(t,["responseId"]);l!=null&&y(e,["responseId"],l);const c=m(t,["usageMetadata"]);return c!=null&&y(e,["usageMetadata"],c),e}function nI(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["candidates"],d)}const r=m(t,["createTime"]);r!=null&&y(e,["createTime"],r);const o=m(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const l=m(t,["promptFeedback"]);l!=null&&y(e,["promptFeedback"],l);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const f=m(t,["usageMetadata"]);return f!=null&&y(e,["usageMetadata"],f),e}function EG(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const o=m(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&y(e,["parameters","safetySetting"],l);const c=m(t,["personGeneration"]);e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c);const f=m(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&y(e,["parameters","includeSafetyAttributes"],f);const d=m(t,["includeRaiReason"]);e!==void 0&&d!=null&&y(e,["parameters","includeRaiReason"],d);const p=m(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const v=m(t,["outputMimeType"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","mimeType"],v);const T=m(t,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&y(e,["parameters","outputOptions","compressionQuality"],T),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=m(t,["imageSize"]);if(e!==void 0&&b!=null&&y(e,["parameters","sampleImageSize"],b),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function SG(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["negativePrompt"]);e!==void 0&&r!=null&&y(e,["parameters","negativePrompt"],r);const o=m(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const l=m(t,["aspectRatio"]);e!==void 0&&l!=null&&y(e,["parameters","aspectRatio"],l);const c=m(t,["guidanceScale"]);e!==void 0&&c!=null&&y(e,["parameters","guidanceScale"],c);const f=m(t,["seed"]);e!==void 0&&f!=null&&y(e,["parameters","seed"],f);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&y(e,["parameters","includeSafetyAttributes"],v);const T=m(t,["includeRaiReason"]);e!==void 0&&T!=null&&y(e,["parameters","includeRaiReason"],T);const b=m(t,["language"]);e!==void 0&&b!=null&&y(e,["parameters","language"],b);const x=m(t,["outputMimeType"]);e!==void 0&&x!=null&&y(e,["parameters","outputOptions","mimeType"],x);const N=m(t,["outputCompressionQuality"]);e!==void 0&&N!=null&&y(e,["parameters","outputOptions","compressionQuality"],N);const D=m(t,["addWatermark"]);e!==void 0&&D!=null&&y(e,["parameters","addWatermark"],D);const O=m(t,["labels"]);e!==void 0&&O!=null&&y(e,["labels"],O);const k=m(t,["imageSize"]);e!==void 0&&k!=null&&y(e,["parameters","sampleImageSize"],k);const F=m(t,["enhancePrompt"]);return e!==void 0&&F!=null&&y(e,["parameters","enhancePrompt"],F),n}function bG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&EG(o,n),n}function wG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["config"]);return o!=null&&SG(o,n),n}function AG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>OG(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],CD(r)),e}function CG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>Wm(l))),y(e,["generatedImages"],o)}const r=m(t,["positivePromptSafetyAttributes"]);return r!=null&&y(e,["positivePromptSafetyAttributes"],xD(r)),e}function xG(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=m(t,["durationSeconds"]);if(e!==void 0&&r!=null&&y(e,["parameters","durationSeconds"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=m(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const l=m(t,["resolution"]);e!==void 0&&l!=null&&y(e,["parameters","resolution"],l);const c=m(t,["personGeneration"]);if(e!==void 0&&c!=null&&y(e,["parameters","personGeneration"],c),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(t,["negativePrompt"]);e!==void 0&&f!=null&&y(e,["parameters","negativePrompt"],f);const d=m(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&y(e,["parameters","enhancePrompt"],d),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=m(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],Xm(p));const v=m(t,["referenceImages"]);if(e!==void 0&&v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>RH(b))),y(e,["instances[0]","referenceImages"],T)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function IG(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const o=m(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const l=m(t,["durationSeconds"]);e!==void 0&&l!=null&&y(e,["parameters","durationSeconds"],l);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const f=m(t,["aspectRatio"]);e!==void 0&&f!=null&&y(e,["parameters","aspectRatio"],f);const d=m(t,["resolution"]);e!==void 0&&d!=null&&y(e,["parameters","resolution"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const v=m(t,["pubsubTopic"]);e!==void 0&&v!=null&&y(e,["parameters","pubsubTopic"],v);const T=m(t,["negativePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","negativePrompt"],T);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const x=m(t,["generateAudio"]);e!==void 0&&x!=null&&y(e,["parameters","generateAudio"],x);const N=m(t,["lastFrame"]);e!==void 0&&N!=null&&y(e,["instances[0]","lastFrame"],qr(N));const D=m(t,["referenceImages"]);if(e!==void 0&&D!=null){let F=D;Array.isArray(F)&&(F=F.map($=>NH($))),y(e,["instances[0]","referenceImages"],F)}const O=m(t,["mask"]);e!==void 0&&O!=null&&y(e,["instances[0]","mask"],IH(O));const k=m(t,["compressionQuality"]);return e!==void 0&&k!=null&&y(e,["parameters","compressionQuality"],k),n}function RG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response","generateVideoResponse"]);return l!=null&&y(e,["response"],MG(l)),e}function NG(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],kG(l)),e}function PG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],Xm(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],ND(l));const c=m(e,["source"]);c!=null&&VG(c,n);const f=m(e,["config"]);return f!=null&&xG(f,n),n}function DG(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["prompt"]);r!=null&&y(n,["instances[0]","prompt"],r);const o=m(e,["image"]);o!=null&&y(n,["instances[0]","image"],qr(o));const l=m(e,["video"]);l!=null&&y(n,["instances[0]","video"],PD(l));const c=m(e,["source"]);c!=null&&LG(c,n);const f=m(e,["config"]);return f!=null&&IG(f,n),n}function MG(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FG(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function kG(t){const e={},n=m(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>BG(l))),y(e,["generatedVideos"],o)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const r=m(t,["raiMediaFilteredReasons"]);return r!=null&&y(e,["raiMediaFilteredReasons"],r),e}function VG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],Xm(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],ND(o)),n}function LG(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],qr(r));const o=m(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],PD(o)),n}function OG(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],YG(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);return r!=null&&y(e,["safetyAttributes"],CD(r)),e}function Wm(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],AD(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const r=m(t,["_self"]);r!=null&&y(e,["safetyAttributes"],xD(r));const o=m(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function UG(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],AD(n));const i=m(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(e,["labels"],r)}return e}function FG(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],CH(n)),e}function BG(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],xH(n)),e}function qG(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const r=m(t,["audioTimestamp"]);r!=null&&y(e,["audioTimestamp"],r);const o=m(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const l=m(t,["enableAffectiveDialog"]);l!=null&&y(e,["enableAffectiveDialog"],l);const c=m(t,["frequencyPenalty"]);c!=null&&y(e,["frequencyPenalty"],c);const f=m(t,["logprobs"]);f!=null&&y(e,["logprobs"],f);const d=m(t,["maxOutputTokens"]);d!=null&&y(e,["maxOutputTokens"],d);const p=m(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const v=m(t,["presencePenalty"]);v!=null&&y(e,["presencePenalty"],v);const T=m(t,["responseLogprobs"]);T!=null&&y(e,["responseLogprobs"],T);const b=m(t,["responseMimeType"]);b!=null&&y(e,["responseMimeType"],b);const x=m(t,["responseModalities"]);x!=null&&y(e,["responseModalities"],x);const N=m(t,["responseSchema"]);N!=null&&y(e,["responseSchema"],N);const D=m(t,["routingConfig"]);D!=null&&y(e,["routingConfig"],D);const O=m(t,["seed"]);O!=null&&y(e,["seed"],O);const k=m(t,["speechConfig"]);k!=null&&y(e,["speechConfig"],ID(k));const F=m(t,["stopSequences"]);F!=null&&y(e,["stopSequences"],F);const $=m(t,["temperature"]);$!=null&&y(e,["temperature"],$);const K=m(t,["thinkingConfig"]);K!=null&&y(e,["thinkingConfig"],K);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const I=m(t,["topP"]);if(I!=null&&y(e,["topP"],I),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zG(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function GG(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],yt(t,i)),n}function HG(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function jG(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function $G(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);if(i!=null&&y(e,["imageSize"],i),m(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function KG(t){const e={},n=m(t,["aspectRatio"]);n!=null&&y(e,["aspectRatio"],n);const i=m(t,["imageSize"]);i!=null&&y(e,["imageSize"],i);const r=m(t,["outputMimeType"]);r!=null&&y(e,["imageOutputOptions","mimeType"],r);const o=m(t,["outputCompressionQuality"]);return o!=null&&y(e,["imageOutputOptions","compressionQuality"],o),e}function YG(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],ra(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function AD(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],ra(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Xm(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],ra(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function qr(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ra(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function JG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],yD(t,c)),i}function WG(t,e,n){const i={},r=m(e,["pageSize"]);n!==void 0&&r!=null&&y(n,["_query","pageSize"],r);const o=m(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const l=m(e,["filter"]);n!==void 0&&l!=null&&y(n,["_query","filter"],l);const c=m(e,["queryBase"]);return n!==void 0&&c!=null&&y(n,["_url","models_url"],yD(t,c)),i}function XG(t,e){const n={},i=m(e,["config"]);return i!=null&&JG(t,i,n),n}function QG(t,e){const n={},i=m(e,["config"]);return i!=null&&WG(t,i,n),n}function ZG(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=vD(r);Array.isArray(o)&&(o=o.map(l=>V0(l))),y(e,["models"],o)}return e}function eH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["_self"]);if(r!=null){let o=vD(r);Array.isArray(o)&&(o=o.map(l=>L0(l))),y(e,["models"],o)}return e}function tH(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const r=m(t,["maskDilation"]);return r!=null&&y(e,["dilation"],r),e}function V0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["version"]);o!=null&&y(e,["version"],o);const l=m(t,["_self"]);l!=null&&y(e,["tunedModelInfo"],yH(l));const c=m(t,["inputTokenLimit"]);c!=null&&y(e,["inputTokenLimit"],c);const f=m(t,["outputTokenLimit"]);f!=null&&y(e,["outputTokenLimit"],f);const d=m(t,["supportedGenerationMethods"]);d!=null&&y(e,["supportedActions"],d);const p=m(t,["temperature"]);p!=null&&y(e,["temperature"],p);const v=m(t,["maxTemperature"]);v!=null&&y(e,["maxTemperature"],v);const T=m(t,["topP"]);T!=null&&y(e,["topP"],T);const b=m(t,["topK"]);b!=null&&y(e,["topK"],b);const x=m(t,["thinking"]);return x!=null&&y(e,["thinking"],x),e}function L0(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);r!=null&&y(e,["description"],r);const o=m(t,["versionId"]);o!=null&&y(e,["version"],o);const l=m(t,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>pG(T))),y(e,["endpoints"],v)}const c=m(t,["labels"]);c!=null&&y(e,["labels"],c);const f=m(t,["_self"]);f!=null&&y(e,["tunedModelInfo"],vH(f));const d=m(t,["defaultCheckpointId"]);d!=null&&y(e,["defaultCheckpointId"],d);const p=m(t,["checkpoints"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(T=>T)),y(e,["checkpoints"],v)}return e}function nH(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],mG(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],gG(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],qz(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function iH(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],qr(n)),e}function rH(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const r=m(t,["baseSteps"]);e!==void 0&&r!=null&&y(e,["parameters","baseSteps"],r);const o=m(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const l=m(t,["seed"]);e!==void 0&&l!=null&&y(e,["parameters","seed"],l);const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const f=m(t,["personGeneration"]);e!==void 0&&f!=null&&y(e,["parameters","personGeneration"],f);const d=m(t,["addWatermark"]);e!==void 0&&d!=null&&y(e,["parameters","addWatermark"],d);const p=m(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const v=m(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&y(e,["parameters","outputOptions","compressionQuality"],v);const T=m(t,["enhancePrompt"]);e!==void 0&&T!=null&&y(e,["parameters","enhancePrompt"],T);const b=m(t,["labels"]);return e!==void 0&&b!=null&&y(e,["labels"],b),n}function sH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&aH(r,n);const o=m(e,["config"]);return o!=null&&rH(o,n),n}function oH(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Wm(r))),y(e,["generatedImages"],i)}return e}function aH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["personImage"]);e!==void 0&&r!=null&&y(e,["instances[0]","personImage","image"],qr(r));const o=m(t,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>iH(c))),y(e,["instances[0]","productImages"],l)}return n}function lH(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],qr(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const r=m(t,["referenceType"]);r!=null&&y(e,["referenceType"],r);const o=m(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],tH(o));const l=m(t,["controlImageConfig"]);l!=null&&y(e,["controlImageConfig"],Yz(l));const c=m(t,["styleImageConfig"]);c!=null&&y(e,["styleImageConfig"],c);const f=m(t,["subjectImageConfig"]);return f!=null&&y(e,["subjectImageConfig"],f),e}function CD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function xD(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const r=m(t,["contentType"]);return r!=null&&y(e,["contentType"],r),e}function uH(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function cH(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],qr(n)),e}function fH(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const r=m(t,["maxPredictions"]);e!==void 0&&r!=null&&y(e,["parameters","maxPredictions"],r);const o=m(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const l=m(t,["maskDilation"]);e!==void 0&&l!=null&&y(e,["parameters","maskDilation"],l);const c=m(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&y(e,["parameters","binaryColorThreshold"],c);const f=m(t,["labels"]);return e!==void 0&&f!=null&&y(e,["labels"],f),n}function dH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["source"]);r!=null&&pH(r,n);const o=m(e,["config"]);return o!=null&&fH(o,n),n}function hH(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>UG(r))),y(e,["generatedMasks"],i)}return e}function pH(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const r=m(t,["image"]);e!==void 0&&r!=null&&y(e,["instances[0]","image"],qr(r));const o=m(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],cH(o)),n}function ID(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function mH(t){const e={},n=m(t,["functionCallingConfig"]);n!=null&&y(e,["functionCallingConfig"],yG(n));const i=m(t,["retrievalConfig"]);return i!=null&&y(e,["retrievalConfig"],i),e}function gH(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],HG(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],jG(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}function RD(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(T=>vG(T))),y(e,["functionDeclarations"],v)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const r=m(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const o=m(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(t,["codeExecution"]);l!=null&&y(e,["codeExecution"],l);const c=m(t,["enterpriseWebSearch"]);c!=null&&y(e,["enterpriseWebSearch"],c);const f=m(t,["googleMaps"]);f!=null&&y(e,["googleMaps"],f);const d=m(t,["googleSearch"]);d!=null&&y(e,["googleSearch"],d);const p=m(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function yH(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function vH(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const r=m(t,["updateTime"]);return r!=null&&y(e,["updateTime"],r),e}function _H(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function TH(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const r=m(t,["description"]);e!==void 0&&r!=null&&y(e,["description"],r);const o=m(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function EH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],yt(t,i));const r=m(e,["config"]);return r!=null&&_H(r,n),n}function SH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&TH(r,n),n}function bH(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const r=m(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&y(e,["parameters","safetySetting"],r);const o=m(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const l=m(t,["includeRaiReason"]);e!==void 0&&l!=null&&y(e,["parameters","includeRaiReason"],l);const c=m(t,["outputMimeType"]);e!==void 0&&c!=null&&y(e,["parameters","outputOptions","mimeType"],c);const f=m(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&y(e,["parameters","outputOptions","compressionQuality"],f);const d=m(t,["enhanceInputImage"]);e!==void 0&&d!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=m(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["numberOfImages"]);e!==void 0&&T!=null&&y(e,["parameters","sampleCount"],T);const b=m(t,["mode"]);return e!==void 0&&b!=null&&y(e,["parameters","mode"],b),n}function wH(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],yt(t,i));const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],qr(r));const o=m(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const l=m(e,["config"]);return l!=null&&bH(l,n),n}function AH(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Wm(o))),y(e,["generatedImages"],r)}return e}function CH(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],ra(i));const r=m(t,["encoding"]);return r!=null&&y(e,["mimeType"],r),e}function xH(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],ra(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function IH(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],qr(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function RH(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Xm(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function NH(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],qr(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function ND(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],ra(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["encoding"],r),e}function PD(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],ra(i));const r=m(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PH="Content-Type",DH="X-Server-Timeout",MH="User-Agent",O0="x-goog-api-client",kH="1.30.0",VH=`google-genai-sdk/${kH}`,LH="v1beta1",OH="v1beta",iI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class UH{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:LH,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:OH,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>o.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&FH(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await rI(r),new D0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await rI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return fu(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield Gt(r.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(f,{stream:!0});try{const v=JSON.parse(d);if("error"in v){const T=JSON.parse(JSON.stringify(v.error)),b=T.status,x=T.code,N=`got status: ${b}. ${JSON.stringify(v)}`;if(x>=400&&x<600)throw new Ym({message:N,status:x})}}catch(v){if(v.name==="ApiError")throw v}l+=d;let p=l.match(iI);for(;p;){const v=p[1];try{const T=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Gt(new D0(T)),l=l.slice(p[0].length),p=l.match(iI)}catch(T){throw new Error(`exception parsing stream chunk ${v}. ${T}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=VH+" "+this.clientOptions.userAgentExtra;return e[MH]=n,e[O0]=n,e[PH]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(DH,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);r.sizeBytes=String(l.size);const c=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const f={file:r},d=this.getFileName(e),p=_e("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(p,r.sizeBytes,r.mimeType,d,f,n==null?void 0:n.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,l=await o.stat(n),c=String(l.size),f=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),v={};i!=null&&i.customMetadata&&(v.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(v.chunkingConfig=i.chunkingConfig);const T=await this.fetchUploadUrl(d,c,f,p,v,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,l){var c;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function rI(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Ym({message:r,status:n}):new Error(r)}}function FH(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,l){const c=Object.assign({},o);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const d=l[f],p=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?c[f]=i(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BH="mcp_used/unknown";let qH=!1;function DD(t){for(const e of t)if(zH(e)||typeof e=="object"&&"inputSchema"in e)return!0;return qH}function MD(t){var e;const n=(e=t[O0])!==null&&e!==void 0?e:"";t[O0]=(n+` ${BH}`).trimStart()}function zH(t){return t!==null&&typeof t=="object"&&t instanceof DT}function GH(t,e=100){return fu(this,arguments,function*(){let i,r=0;for(;r<e;){const o=yield Gt(t.listTools({cursor:i}));for(const l of o.tools)yield yield Gt(l),r++;if(!o.nextCursor)break;i=o.nextCursor}})}class DT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new DT(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},l=[];for(const p of this.mcpClients)try{for(var c=!0,f=(n=void 0,hf(GH(p))),d;d=await f.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const v=r;l.push(v);const T=v.name;if(o[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);o[T]=p}}catch(v){n={error:v}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),V9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function HH(t,e,n){const i=new x9;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class jH{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=YH(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const p=new Promise(F=>{d=F}),v=e.callbacks,T=function(){d({})},b=this.apiClient,x={onopen:T,onmessage:F=>{HH(b,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},N=this.webSocketFactory.create(f,KH(l),x);N.connect(),await p;const k={setup:{model:yt(this.apiClient,e.model)}};return N.send(JSON.stringify(k)),new $H(N,this.apiClient)}}class $H{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Dz(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Pz(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ql.PLAY)}pause(){this.sendPlaybackControl(Ql.PAUSE)}stop(){this.sendPlaybackControl(Ql.STOP)}resetContext(){this.sendPlaybackControl(Ql.RESET_CONTEXT)}close(){this.conn.close()}}function KH(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function YH(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JH="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function WH(t,e,n){const i=new C9;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(t.isVertexAI()){const l=Vz(o);Object.assign(i,l)}else Object.assign(i,o);e(i)}class XH{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new jH(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&DD(e.config.tools)&&MD(v);const T=t8(v);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,p);else{const P=this.apiClient.getApiKey();let V="BidiGenerateContent",U="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",U="access_token"),p=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${V}?${U}=${P}`}let b=()=>{};const x=new Promise(P=>{b=P}),N=e.callbacks,D=function(){var P;(P=N==null?void 0:N.onopen)===null||P===void 0||P.call(N),b({})},O=this.apiClient,k={onopen:D,onmessage:P=>{WH(O,N.onmessage,P)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(P){},onclose:(i=N==null?void 0:N.onclose)!==null&&i!==void 0?i:function(P){}},F=this.webSocketFactory.create(p,e8(T),k);F.connect(),await x;let $=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const P=this.apiClient.getProject(),V=this.apiClient.getLocation();$=`projects/${P}/locations/${V}/`+$}let K={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zp.AUDIO]}:e.config.responseModalities=[Zp.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],I=[];for(const P of G)if(this.isCallableTool(P)){const V=P;I.push(await V.tool())}else I.push(P);I.length>0&&(e.config.tools=I);const R={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=Nz(this.apiClient,R):K=Rz(this.apiClient,R),delete K.config,F.send(JSON.stringify(K)),new ZH(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const QH={turnComplete:!0};class ZH{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Tr(n.turns),e.isVertexAI()||(i=i.map(r=>Jm(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(JH)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},QH),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:kz(e)}:n={realtimeInput:Mz(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function e8(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function t8(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sI=10;function oI(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(du(l)){r=!0;break}if(!r)return!0;const o=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function du(t){return"callTool"in t&&typeof t.callTool=="function"}function n8(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>du(r)))!==null&&i!==void 0?i:!1}function aI(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(du(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function lI(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i8 extends Hs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,l,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!n8(n)||oI(n.config))return await this.generateContentInternal(f);const d=aI(n);if(d.length>0){const N=d.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,v;const T=Tr(f.contents),b=(o=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:sI;let x=0;for(;x<b&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,D=[];for(const O of(c=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(du(O)){const F=await O.callTool(p.functionCalls);D.push(...F)}x++,v={role:"user",parts:D},f.contents=Tr(f.contents),f.contents.push(N),f.contents.push(v),lI(f.config)&&(T.push(N),T.push(v))}return lI(f.config)&&(p.automaticFunctionCallingHistory=T),p},this.generateContentStream=async n=>{var i,r,o,l,c;if(this.maybeMoveToResponseJsonSchem(n),oI(n.config)){const v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}const f=aI(n);if(f.length>0){const v=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,p=(c=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:l.push(f);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new il(qs.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,l,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(o=n.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const l=await Promise.all(o.map(async f=>du(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&DD(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),MD(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(du(l)){const c=l,f=await c.tool();for(const d of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,c)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:sI;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(d,p,v){var T,b;return fu(this,arguments,function*(){for(var x,N,D,O;c<o;){l&&(c++,l=!1);const K=yield Gt(d.processParamsMaybeAddMcpUsage(v)),G=yield Gt(d.generateContentStreamInternal(K)),I=[],R=[];try{for(var k=!0,F=(N=void 0,hf(G)),$;$=yield Gt(F.next()),x=$.done,!x;k=!0){O=$.value,k=!1;const P=O;if(yield yield Gt(P),P.candidates&&(!((T=P.candidates[0])===null||T===void 0)&&T.content)){R.push(P.candidates[0].content);for(const V of(b=P.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(c<o&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(V.functionCall.name)){const U=yield Gt(p.get(V.functionCall.name).callTool([V.functionCall]));I.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(P){N={error:P}}finally{try{!k&&!x&&(D=F.return)&&(yield Gt(D.call(F)))}finally{if(N)throw N.error}}if(I.length>0){l=!0;const P=new Fc;P.candidates=[{content:{role:"user",parts:I}}],yield yield Gt(P);const V=[];V.push(...R),V.push({role:"user",parts:I});const U=Tr(v.contents).concat(V);v.contents=U}else break}})})(this,f,e)}async generateContentInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=eI(this.apiClient,e);return c=_e("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=nI(p),T=new Fc;return Object.assign(T,v),T})}else{const d=Zx(this.apiClient,e);return c=_e("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=tI(p),T=new Fc;return Object.assign(T,v),T})}}async generateContentStreamInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=eI(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(v){return fu(this,arguments,function*(){var T,b,x,N;try{for(var D=!0,O=hf(v),k;k=yield Gt(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,$=nI(yield Gt(F.json()));$.sdkHttpResponse={headers:F.headers};const K=new Fc;Object.assign(K,$),yield yield Gt(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(x=O.return)&&(yield Gt(x.call(O)))}finally{if(b)throw b.error}}})})}else{const d=Zx(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return fu(this,arguments,function*(){var T,b,x,N;try{for(var D=!0,O=hf(v),k;k=yield Gt(O.next()),T=k.done,!T;D=!0){N=k.value,D=!1;const F=N,$=tI(yield Gt(F.json()));$.sdkHttpResponse={headers:F.headers};const K=new Fc;Object.assign(K,$),yield yield Gt(K)}}catch(F){b={error:F}}finally{try{!D&&!T&&(x=O.return)&&(yield Gt(x.call(O)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=fG(this.apiClient,e);return c=_e("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=hG(p),T=new Ox;return Object.assign(T,v),T})}else{const d=cG(this.apiClient,e);return c=_e("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=dG(p),T=new Ox;return Object.assign(T,v),T})}}async generateImagesInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=wG(this.apiClient,e);return c=_e("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=CG(p),T=new Ux;return Object.assign(T,v),T})}else{const d=bG(this.apiClient,e);return c=_e("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=AG(p),T=new Ux;return Object.assign(T,v),T})}}async editImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=oG(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=aG(f),p=new m9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=wH(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=AH(f),p=new g9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=sH(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=oH(f),p=new y9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=dH(this.apiClient,e);return o=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=hH(f),p=new v9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=GG(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>L0(p))}else{const d=zG(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>V0(p))}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=QG(this.apiClient,e);return c=_e("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=eH(p),T=new Fx;return Object.assign(T,v),T})}else{const d=XG(this.apiClient,e);return c=_e("{models_url}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=ZG(p),T=new Fx;return Object.assign(T,v),T})}}async update(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=SH(this.apiClient,e);return c=_e("{model}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>L0(p))}else{const d=EH(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>V0(p))}}async delete(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=nG(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=rG(p),T=new Bx;return Object.assign(T,v),T})}else{const d=tG(this.apiClient,e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=iG(p),T=new Bx;return Object.assign(T,v),T})}}async countTokens(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=Qz(this.apiClient,e);return c=_e("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=eG(p),T=new qx;return Object.assign(T,v),T})}else{const d=Xz(this.apiClient,e);return c=_e("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=Zz(p),T=new qx;return Object.assign(T,v),T})}}async computeTokens(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=Hz(this.apiClient,e);return o=_e("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>{const d=jz(f),p=new _9;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=DG(this.apiClient,e);return c=_e("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const v=NG(p),T=new em;return Object.assign(T,v),T})}else{const d=PG(this.apiClient,e);return c=_e("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>{const v=RG(p),T=new em;return Object.assign(T,v),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r8 extends Hs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=u9(e);return c=_e("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}else{const d=l9(e);return c=_e("{operationName}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=t9(e);return o=_e("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s8(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function o8(t){const e={},n=m(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>m8(o))),y(e,["parts"],r)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function a8(t,e,n){const i={},r=m(e,["expireTime"]);n!==void 0&&r!=null&&y(n,["expireTime"],r);const o=m(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const l=m(e,["uses"]);n!==void 0&&l!=null&&y(n,["uses"],l);const c=m(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&y(n,["bidiGenerateContentSetup"],p8(t,c));const f=m(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&y(n,["fieldMask"],f),i}function l8(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],a8(t,i,n)),n}function u8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function c8(t){const e={},n=m(t,["id"]);n!=null&&y(e,["id"],n);const i=m(t,["args"]);i!=null&&y(e,["args"],i);const r=m(t,["name"]);if(r!=null&&y(e,["name"],r),m(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function f8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function d8(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function h8(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const r=m(t,["responseModalities"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","responseModalities"],r);const o=m(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const l=m(t,["topP"]);e!==void 0&&l!=null&&y(e,["setup","generationConfig","topP"],l);const c=m(t,["topK"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topK"],c);const f=m(t,["maxOutputTokens"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","maxOutputTokens"],f);const d=m(t,["mediaResolution"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","mediaResolution"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const v=m(t,["speechConfig"]);e!==void 0&&v!=null&&y(e,["setup","generationConfig","speechConfig"],PT(v));const T=m(t,["thinkingConfig"]);e!==void 0&&T!=null&&y(e,["setup","generationConfig","thinkingConfig"],T);const b=m(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],b);const x=m(t,["systemInstruction"]);e!==void 0&&x!=null&&y(e,["setup","systemInstruction"],o8(li(x)));const N=m(t,["tools"]);if(e!==void 0&&N!=null){let G=Ou(N);Array.isArray(G)&&(G=G.map(I=>y8(Lu(I)))),y(e,["setup","tools"],G)}const D=m(t,["sessionResumption"]);e!==void 0&&D!=null&&y(e,["setup","sessionResumption"],g8(D));const O=m(t,["inputAudioTranscription"]);e!==void 0&&O!=null&&y(e,["setup","inputAudioTranscription"],O);const k=m(t,["outputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","outputAudioTranscription"],k);const F=m(t,["realtimeInputConfig"]);e!==void 0&&F!=null&&y(e,["setup","realtimeInputConfig"],F);const $=m(t,["contextWindowCompression"]);e!==void 0&&$!=null&&y(e,["setup","contextWindowCompression"],$);const K=m(t,["proactivity"]);return e!==void 0&&K!=null&&y(e,["setup","proactivity"],K),n}function p8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],yt(t,i));const r=m(e,["config"]);return r!=null&&y(n,["config"],h8(r,n)),n}function m8(t){const e={},n=m(t,["mediaResolution"]);n!=null&&y(e,["mediaResolution"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const r=m(t,["executableCode"]);r!=null&&y(e,["executableCode"],r);const o=m(t,["fileData"]);o!=null&&y(e,["fileData"],u8(o));const l=m(t,["functionCall"]);l!=null&&y(e,["functionCall"],c8(l));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const f=m(t,["inlineData"]);f!=null&&y(e,["inlineData"],s8(f));const d=m(t,["text"]);d!=null&&y(e,["text"],d);const p=m(t,["thought"]);p!=null&&y(e,["thought"],p);const v=m(t,["thoughtSignature"]);v!=null&&y(e,["thoughtSignature"],v);const T=m(t,["videoMetadata"]);return T!=null&&y(e,["videoMetadata"],T),e}function g8(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function y8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(v=>v)),y(e,["functionDeclarations"],p)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const r=m(t,["computerUse"]);r!=null&&y(e,["computerUse"],r);const o=m(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const l=m(t,["codeExecution"]);if(l!=null&&y(e,["codeExecution"],l),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(t,["googleMaps"]);c!=null&&y(e,["googleMaps"],f8(c));const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],d8(f));const d=m(t,["urlContext"]);return d!=null&&y(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v8(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function _8(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const o=v8(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(d=>l.includes(d)?`generationConfig.${d}`:d));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class T8 extends Hs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=l8(this.apiClient,e);o=_e("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=_8(c,e.config);return r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E8(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function S8(t){const e={},n=m(t,["config"]);return n!=null&&E8(n,e),e}function b8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function w8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&b8(i,e),e}function A8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function C8(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["customMetadata"],o)}const r=m(t,["chunkingConfig"]);return e!==void 0&&r!=null&&y(e,["chunkingConfig"],r),n}function x8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const r=m(t,["done"]);r!=null&&y(e,["done"],r);const o=m(t,["error"]);o!=null&&y(e,["error"],o);const l=m(t,["response"]);return l!=null&&y(e,["response"],R8(l)),e}function I8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const r=m(t,["config"]);return r!=null&&C8(r,e),e}function R8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const r=m(t,["documentName"]);return r!=null&&y(e,["documentName"],r),e}function N8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function P8(t){const e={},n=m(t,["config"]);return n!=null&&N8(n,e),e}function D8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["fileSearchStores"],o)}return e}function M8(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const o=m(t,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),y(e,["customMetadata"],c)}const l=m(t,["chunkingConfig"]);return e!==void 0&&l!=null&&y(e,["chunkingConfig"],l),n}function k8(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&M8(i,e),e}function V8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L8(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function O8(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&L8(i,e),e}function U8(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function F8(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const r=m(t,["pageToken"]);return e!==void 0&&r!=null&&y(e,["_query","pageToken"],r),n}function B8(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&F8(i,e),e}function q8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const r=m(t,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z8 extends Hs{constructor(e){super(),this.apiClient=e,this.list=async n=>new il(qs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=U8(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=O8(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=B8(e);return o=_e("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=q8(f),p=new T9;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G8 extends Hs{constructor(e,n=new z8(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new il(qs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=S8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async get(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=A8(e);return o=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=w8(e);r=_e("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=P8(e);return o=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=D8(f),p=new E9;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k8(e);return o=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=V8(f),p=new S9;return Object.assign(p,d),p})}}async importFile(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=I8(e);return o=_e("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const d=x8(f),p=new CT;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function j8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function $8(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=m(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&y(e,["displayName"],r),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=m(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const l=m(t,["learningRateMultiplier"]);if(l!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(t,["batchSize"]);e!==void 0&&c!=null&&y(e,["tuningTask","hyperparameters","batchSize"],c);const f=m(t,["learningRate"]);if(e!==void 0&&f!=null&&y(e,["tuningTask","hyperparameters","learningRate"],f),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function K8(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec"],uI(b))}else if(r==="PREFERENCE_TUNING"){const b=m(t,["validationDataset"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec"],uI(b))}const o=m(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const l=m(t,["description"]);e!==void 0&&l!=null&&y(e,["description"],l);let c=m(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(c==="PREFERENCE_TUNING"){const b=m(t,["epochCount"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(f==="PREFERENCE_TUNING"){const b=m(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(d==="PREFERENCE_TUNING"){const b=m(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=m(t,["adapterSize"]);e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=m(t,["labels"]);e!==void 0&&v!=null&&y(e,["labels"],v);const T=m(t,["beta"]);return e!==void 0&&T!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function Y8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&s7(o);const l=m(t,["config"]);return l!=null&&$8(l,n),n}function J8(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const r=m(t,["preTunedModel"]);r!=null&&y(n,["preTunedModel"],r);const o=m(t,["trainingDataset"]);o!=null&&o7(o,n,e);const l=m(t,["config"]);return l!=null&&K8(l,n,e),n}function W8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function X8(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function Q8(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function Z8(t,e,n){const i={},r=m(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const o=m(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const l=m(t,["filter"]);return e!==void 0&&l!=null&&y(e,["_query","filter"],l),i}function e7(t,e){const n={},i=m(t,["config"]);return i!=null&&Q8(i,n),n}function t7(t,e){const n={},i=m(t,["config"]);return i!=null&&Z8(i,n),n}function n7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>kD(c))),y(n,["tuningJobs"],l)}return n}function i7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["nextPageToken"]);r!=null&&y(n,["nextPageToken"],r);const o=m(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>U0(c))),y(n,["tuningJobs"],l)}return n}function r7(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const r=m(t,["name"]);return r!=null&&y(n,["endpoint"],r),n}function s7(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),y(n,["examples","examples"],r)}return n}function o7(t,e,n){const i={};let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=m(t,["gcsUri"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=m(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=m(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function kD(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],mD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["tuningTask","startTime"]);c!=null&&y(n,["startTime"],c);const f=m(t,["tuningTask","completeTime"]);f!=null&&y(n,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const p=m(t,["description"]);p!=null&&y(n,["description"],p);const v=m(t,["baseModel"]);v!=null&&y(n,["baseModel"],v);const T=m(t,["_self"]);return T!=null&&y(n,["tunedModel"],r7(T)),n}function U0(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["state"]);o!=null&&y(n,["state"],mD(o));const l=m(t,["createTime"]);l!=null&&y(n,["createTime"],l);const c=m(t,["startTime"]);c!=null&&y(n,["startTime"],c);const f=m(t,["endTime"]);f!=null&&y(n,["endTime"],f);const d=m(t,["updateTime"]);d!=null&&y(n,["updateTime"],d);const p=m(t,["error"]);p!=null&&y(n,["error"],p);const v=m(t,["description"]);v!=null&&y(n,["description"],v);const T=m(t,["baseModel"]);T!=null&&y(n,["baseModel"],T);const b=m(t,["tunedModel"]);b!=null&&y(n,["tunedModel"],b);const x=m(t,["preTunedModel"]);x!=null&&y(n,["preTunedModel"],x);const N=m(t,["supervisedTuningSpec"]);N!=null&&y(n,["supervisedTuningSpec"],N);const D=m(t,["preferenceOptimizationSpec"]);D!=null&&y(n,["preferenceOptimizationSpec"],D);const O=m(t,["tuningDataStats"]);O!=null&&y(n,["tuningDataStats"],O);const k=m(t,["encryptionSpec"]);k!=null&&y(n,["encryptionSpec"],k);const F=m(t,["partnerModelTuningSpec"]);F!=null&&y(n,["partnerModelTuningSpec"],F);const $=m(t,["customBaseModel"]);$!=null&&y(n,["customBaseModel"],$);const K=m(t,["experiment"]);K!=null&&y(n,["experiment"],K);const G=m(t,["labels"]);G!=null&&y(n,["labels"],G);const I=m(t,["outputUri"]);I!=null&&y(n,["outputUri"],I);const R=m(t,["pipelineJob"]);R!=null&&y(n,["pipelineJob"],R);const P=m(t,["serviceAccount"]);P!=null&&y(n,["serviceAccount"],P);const V=m(t,["tunedModelDisplayName"]);V!=null&&y(n,["tunedModelDisplayName"],V);const U=m(t,["veoTuningSpec"]);return U!=null&&y(n,["veoTuningSpec"],U),n}function a7(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const r=m(t,["name"]);r!=null&&y(n,["name"],r);const o=m(t,["metadata"]);o!=null&&y(n,["metadata"],o);const l=m(t,["done"]);l!=null&&y(n,["done"],l);const c=m(t,["error"]);return c!=null&&y(n,["error"],c),n}function uI(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const r=m(t,["vertexDatasetResource"]);return r!=null&&y(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l7 extends Hs{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new il(qs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:P0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=X8(e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>U0(p))}else{const d=W8(e);return c=_e("{name}",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>kD(p))}}async listInternal(e){var n,i,r,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const d=t7(e);return c=_e("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=i7(p),T=new zx;return Object.assign(T,v),T})}else{const d=e7(e);return c=_e("tunedModels",d._url),f=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(v=>{const T=v;return T.sdkHttpResponse={headers:p.headers},T})),l.then(p=>{const v=n7(p),T=new zx;return Object.assign(T,v),T})}}async cancel(e){var n,i,r,o;let l="",c={};if(this.apiClient.isVertexAI()){const f=j8(e);l=_e("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=H8(e);l=_e("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI()){const c=J8(e,e);return o=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>U0(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Y8(e);return o=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),r.then(f=>a7(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u7{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const c7=1024*1024*8,f7=3,d7=1e3,h7=2,nm="x-goog-upload-status";async function p7(t,e,n){var i;const r=await VD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[nm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function m7(t,e,n){var i;const r=await VD(t,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[nm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=uD(o),c=new xT;return Object.assign(c,l),c}async function VD(t,e,n){var i,r;let o=0,l=0,c=new D0(new Response),f="upload";for(o=t.size;l<o;){const d=Math.min(c7,o-l),p=t.slice(l,l+d);l+d>=o&&(f+=", finalize");let v=0,T=d7;for(;v<f7&&(c=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[nm]));)v++,await y7(T),T=T*h7;if(l+=d,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[nm])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function g7(t){return{size:t.size,type:t.type}}function y7(t){return new Promise(e=>setTimeout(e,t))}class v7{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await p7(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await m7(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g7(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _7{create(e,n,i){return new T7(e,n,i)}}class T7{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cI="x-goog-api-key";class E7{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(cI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(cI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S7="gl-node/";class b7{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=ZB(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new E7(this.apiKey);this.apiClient=new UH({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:S7+"web",uploader:new v7,downloader:new u7}),this.models=new i8(this.apiClient),this.live=new XH(this.apiClient,r,new _7),this.batches=new Iq(this.apiClient),this.chats=new uz(this.models,this.apiClient),this.caches=new oz(this.apiClient),this.files=new _z(this.apiClient),this.operations=new r8(this.apiClient),this.authTokens=new T8(this.apiClient),this.tunings=new l7(this.apiClient),this.fileSearchStores=new G8(this.apiClient)}}const LD={geminiApiKey:"AIzaSyBAzdNikRnpu5iyeg8VJ03fc0HXVG2B2iY",openWeatherApiKey:"074ebc9404ca1a72d5b0759070161539"},Qm=new b7({apiKey:LD.geminiApiKey});function Zm(t){try{if(typeof t.text=="function")return t.text();if(t.candidates&&t.candidates.length>0){const e=t.candidates[0];if(e.content&&e.content.parts&&e.content.parts.length>0)return e.content.parts[0].text||"{}"}return"{}"}catch(e){return console.error("Erreur lors de l'extraction du texte Gemini:",e),"{}"}}async function w7(t){const e={text:`Analyse chacune des images de vtements fournies. Pour chaque image, dans l'ordre, extrais les informations suivantes en franais :
    1. Une description concise incluant son type (ex: T-shirt, jean), sa couleur principale, et son style.
    2. Sa catgorie : "Hauts", "Bas", "Chaussures", ou "Accessoires".
    3. Sa couleur principale (ex: "Bleu", "Noir"). Sois concis.
    4. Sa matire principale (ex: "Coton", "Cuir"). Sois concis.
    
    Retourne le rsultat sous la forme d'un objet JSON unique contenant une cl "items", qui est un tableau d'objets.`},n=t.map(r=>({inlineData:{data:r,mimeType:"image/jpeg"}})),i=await Qm.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[e,...n]},config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{items:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{analysis:{type:Ge.STRING},category:{type:Ge.STRING,enum:["Hauts","Bas","Chaussures","Accessoires"]},color:{type:Ge.STRING},material:{type:Ge.STRING}},required:["analysis","category","color","material"]}}},required:["items"]}}});try{const r=Zm(i),o=JSON.parse(r),l=["Hauts","Bas","Chaussures","Accessoires"];return o.items?(o.items.forEach(c=>{l.includes(c.category)||(c.category="Accessoires")}),o.items):[]}catch(r){throw console.error("Erreur parsing Gemini:",r),new Error("L'IA a renvoy une rponse malforme.")}}async function A7(t,e,n,i){const r=new Set((e||[]).flatMap(T=>T.itemIds)),l=t.filter(T=>!r.has(T.id)).map(T=>`- ${T.analysis} (ID: ${T.id}, Cat: ${T.category}, Matire: ${T.material})`).join(`
`),c=e.map(T=>`- ${T.name} (Ensemble, ID: ${T.id})`).join(`
`),f=[l,c].filter(Boolean).join(`
`),d=i?`
**RGLE D'ANCRAGE : La tenue DOIT inclure : "${"name"in i?i.name:i.analysis} (ID: ${i.id})".**
`:"",p=`Tu es un styliste expert reconnu pour ton got impeccable. Cre 3 tenues compltes et harmonieuses bases sur le contexte : "${n}".
    
Vtements disponibles :
${f}
${d}

**RGLES CRITIQUES** :

1. **BASE** : Utilise UNIQUEMENT les articles lists. Chaque tenue doit tre complte (Haut + Bas + Chaussures).

2. **ACCESSOIRES** : Chaque tenue DOIT tre accompagne d'une montre (si disponible).

3. **SUPERPOSITION (LAYERING)** :
   - **Pull col V**  OBLIGATOIREMENT avec une chemise en dessous
   - **Pull col camionneur/zipp**  OBLIGATOIREMENT avec un t-shirt ou chemise en dessous
   - **Veste/Blazer**  Peut aller sur t-shirt, chemise, ou pull fin

4. **LOGIQUE THERMIQUE (CRITIQUE)** :
   - Analyse la mto mentionne dans le contexte.
   
   | Temprature | Rgle |
   |-------------|-------|
   | **< 10C (FROID)** | Layering OBLIGATOIRE : T-shirt + Pull + Manteau. JAMAIS une chemise seule sous un manteau. |
   | **10-20C (DOUX)** | Pull, sweat ou veste lgre suffisent. |
   | **> 20C (CHAUD)** | Une seule couche lgre (t-shirt OU chemise). JAMAIS de pull ni veste. |
   | **> 30C (TRS CHAUD)** | Vtements trs lgers uniquement. INTERDITS : jeans pais, matires synthtiques. |

5. **INTERDICTIONS THERMIQUES ABSOLUES** :
   -  Doudoune/veste d'hiver si > 15C
   -  Short si < 12C
   -  Sandales si < 15C
   -  Pull en laine si > 22C

6. **MATIRES ADAPTES** :
   - **Chaud (> 25C)** : Privilgier coton lger, lin, matires respirantes
   - **Froid (< 10C)** : Privilgier laine, polaire, matires chaudes
   
7. **HARMONIE DES COULEURS & MOTIFS** :
   - **Rgle des 3 couleurs** : Maximum 3 couleurs diffrentes par tenue
   - **quilibre motifs** : Si le haut est  motifs  bas UNI. Jamais 2 motifs diffrents ensemble.
   - **Contraste** : viter les tons trop proches (bleu marine + noir) sauf choix dlibr

8. **VARIT** : Les 3 tenues doivent tre VISUELLEMENT diffrentes. vite de rpter le mme pantalon 3 fois.

**SORTIE** : Renvoie l'ID EXACT et la description pour chaque article slectionn.`,v=await Qm.models.generateContent({model:"gemini-2.5-flash",contents:p,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{tenues:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},description:{type:Ge.STRING},vetements:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","description","vetements"]}}},required:["tenues"]}}});try{const T=Zm(v);return JSON.parse(T).tenues}catch(T){throw console.error("Erreur parsing Gemini:",T),new Error("Rponse malforme.")}}async function C7(t,e){const n=t.map(l=>`${l.category}: ${l.analysis}`).join(`
`),i=`Analyse cette garde-robe (${t.length} pices) et suggre 3-5 achats stratgiques.
  
  Garde-robe :
  ${n}
  
  Renvoie un rsum, les points forts, les manques, et des suggestions avec priorit et prix estim.`,r=await Qm.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{summary:{type:Ge.STRING},strengths:{type:Ge.ARRAY,items:{type:Ge.STRING}},gaps:{type:Ge.ARRAY,items:{type:Ge.STRING}},suggestions:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{category:{type:Ge.STRING},description:{type:Ge.STRING},reason:{type:Ge.STRING},priority:{type:Ge.STRING,enum:["high","medium","low"]},estimatedPrice:{type:Ge.STRING}},required:["category","description","reason","priority","estimatedPrice"]}}},required:["summary","strengths","gaps","suggestions"]}}}),o=Zm(r);return JSON.parse(o)}async function x7(t,e,n,i,r){const o=new Set((e||[]).flatMap(x=>x.itemIds)),c=t.filter(x=>!o.has(x.id)).map(x=>`- ${x.analysis} (ID: ${x.id}, Cat: ${x.category}, Couleur: ${x.color}, Matire: ${x.material})`).join(`
`),f=e.map(x=>`- ${x.name} (Ensemble, ID: ${x.id})`).join(`
`),d=[c,f].filter(Boolean).join(`
`),p=r?`
**CONTRAINTE POIDS (${r} kg max)** :
- C'est une LIMITE MAXIMALE, pas un objectif  minimiser
- Tu DOIS prparer une valise COMPLTE pour ${n} jours
- Estime les poids moyens : t-shirt ~150g, chemise ~200g, jean ~600g, pantalon lger ~400g, pull ~400g, veste ~700g, chaussures ~800g
- Vrifie que le total ne DPASSE PAS ${r} kg, mais n'hsite pas  t'en approcher
- Si tu es largement en dessous de la limite, AJOUTE des vtements utiles`:"",v=`Tu es un expert en prparation de valise. Cre une **CAPSULE WARDROBE** optimise pour ${n} jours.

**DESTINATION & CONTEXTE** : ${i}

**PRINCIPE CAPSULE WARDROBE** : Slectionner peu de pices qui se combinent TOUTES entre elles pour crer un maximum de tenues diffrentes.

**RGLES CRITIQUES** :

1. **LOGIQUE THERMIQUE (PRIORIT ABSOLUE)** :
   
   | Temprature | Vtements adapts |
   |-------------|-------------------|
   | **> 30C (TRS CHAUD)** | T-shirts lgers, shorts, robes, sandales. INTERDITS : jeans, pulls, vestes |
   | **25-30C (CHAUD)** | T-shirts, pantalons lgers, une chemise, baskets lgres |
   | **15-25C (DOUX)** | Mix lger + 1 pull fin ou veste lgre |
   | **10-15C (FRAIS)** | Pulls, pantalons, veste, chaussures fermes |
   | **< 10C (FROID)** | Layering complet : sous-couche + pull + manteau chaud |

2. **INTERDICTIONS ABSOLUES** :
   -  Doudoune/veste ski/polaire paisse si > 20C
   -  Shorts si < 15C
   -  Sandales si < 18C
   -  Pulls en laine si > 25C
   -  Jeans pais si > 32C

3. **MATIRES ADAPTES** :
   - **Climat chaud** : Coton lger, lin, matires respirantes uniquement
   - **Climat froid** : Laine, polaire, matires isolantes
   - **Voyage** : Privilgier matires qui ne se froissent pas

4. **QUANTITS RECOMMANDES pour ${n} jours** :
   - Hauts : ${Math.min(n+1,7)} pices max (on peut reporter un t-shirt)
   - Bas : ${Math.min(Math.ceil(n/2)+1,4)} pices max
   - Chaussures : 2-3 paires max
   - Accessoires : selon besoin

5. **LAYERING INTELLIGENT (si climat variable)** :
   - Prvoir des couches qui s'empilent : t-shirt  chemise/pull lger  veste
   - Chaque couche doit tre portable seule ET en combinaison

${p}

**VTEMENTS DISPONIBLES** :
${d}

**SORTIE** : 
- Un titre accrocheur pour cette valise
- Un rsum expliquant tes choix (mto, style, combinaisons possibles)
- Ne mentionne pas l'existence des rgles
- La liste des articles avec leur ID exact`,T=await Qm.models.generateContent({model:"gemini-2.5-flash",contents:v,config:{responseMimeType:"application/json",responseSchema:{type:Ge.OBJECT,properties:{titre:{type:Ge.STRING},resume:{type:Ge.STRING},valise:{type:Ge.ARRAY,items:{type:Ge.OBJECT,properties:{id:{type:Ge.STRING},description:{type:Ge.STRING}},required:["id","description"]}}},required:["titre","resume","valise"]}}}),b=Zm(T);return JSON.parse(b)}const I7=jB(JB,"generateVisualOutfit");async function R7(t,e){console.log(" Prparation du Virtual Try-On...");const n=t[0];if(!n||!n.imageSrc)throw new Error("Aucun vtement valide trouv pour l'essayage.");try{const r=(await I7({garmentUrl:n.imageSrc,category:n.category,description:n.analysis})).data;if(!r||!r.imageUrl)throw new Error("Pas d'image retourne par le serveur.");return console.log(" Image reue de Replicate !"),r.imageUrl}catch(i){throw console.error(" Erreur lors de l'appel Cloud Function :",i),i}}const N7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),P7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),fI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),OD=({className:t="h-8 w-8 text-gold"})=>S.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M10 3a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0V7H8a1 1 0 110-2h1V4a1 1 0 011-1zM4 9a1 1 0 011 1v1h1a1 1 0 110 2H5v1a1 1 0 11-2 0v-1H2a1 1 0 110-2h1v-1a1 1 0 011-1zM16 9a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})}),eg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),dI=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.5 6.6C12.5 5.54903 11.651 4.7 10.6 4.7C9.54903 4.7 8.7 5.54903 8.7 6.6V8.7C8.7 9.36274 9.23726 9.9 9.9 9.9H14.1C14.7627 9.9 15.3 9.36274 15.3 8.7V7.8"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.10879 16.5C4.43285 14.805 5.86246 13.5 7.6 13.5H16.4C18.1375 13.5 19.5672 14.805 19.8912 16.5L20.5 19.5H3.5L4.10879 16.5Z"})]}),UD=()=>S.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.132-.497 2.16-1.32 2.874-.823.714-1.823 1.126-2.904 1.126H12v.01M12 17h.01"})}),D7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4h6l2 5-2 1-3-4-3 4-2-1 2-5z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v10m-3-10v10h6V10"})]}),M7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 4h12v10H6z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 14v6h-2L6 4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 14v6h2l1-16"})]}),k7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 18h16l-3-6H7L4 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 12V7a2 2 0 012-2h0a2 2 0 012 2v5"})]}),V7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 000-18 9 9 0 000 18z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.5l-3.5 3.5"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.5 8.5l-3.5 3.5"})]}),im=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"3",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),kT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),tg=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),VT=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),L7=()=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),O7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M8 3a1 1 0 000 2h4a1 1 0 100-2H8z"}),S.jsx("path",{fillRule:"evenodd",d:"M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 3a1 1 0 011-1h10a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1V7z",clipRule:"evenodd"})]}),LT=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.5l1.318-1.182a4.5 4.5 0 116.364 6.364L12 18.75l-7.682-7.682a4.5 4.5 0 010-6.364z"})}),Of=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),U7=()=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})]}),FD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),BD=({className:t="h-5 w-5"})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"})}),F7=({theme:t,toggleTheme:e,children:n,isModalOpen:i=!1})=>S.jsx("header",{className:`bg-snow/80 dark:bg-onyx/80 backdrop-blur-lg border-b border-black/5 dark:border-white/10 sticky top-0 transition-all ${i?"z-10":"z-50"}`,children:S.jsxs("div",{className:"container mx-auto px-4 lg:px-8 h-24 flex justify-between items-center",children:[S.jsxs("h1",{className:"text-4xl font-serif font-bold tracking-wider text-raisin-black dark:text-snow",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsxs("div",{className:"flex items-center gap-4",children:[n,S.jsx("button",{onClick:e,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx transition-colors","aria-label":"Changer le thme",children:t==="light"?S.jsx(P7,{}):S.jsx(N7,{})})]})]})}),B7="DRESSMEUP2025",hI=({user:t})=>{var $,K,G;const[e,n]=B.useState(""),[i,r]=B.useState(""),[o,l]=B.useState(""),[c,f]=B.useState(!1),[d,p]=B.useState(!1),[v,T]=B.useState(null),[b,x]=B.useState(!1),N=B.useRef(null);B.useEffect(()=>{const I=R=>{N.current&&!N.current.contains(R.target)&&p(!1)};return d&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[d]);const D=async I=>{try{return(await lF(Vu(Br,"allowedEmails",I.toLowerCase()))).exists()}catch(R){return console.error("Erreur vrification email:",R),!1}},O=async()=>{x(!0),T(null);try{const R=(await r4(Ma,KB)).user.email;if(!R){await wv(Ma),T("Impossible de rcuprer l'email du compte Google.");return}if(!await D(R)){await wv(Ma),T("Dsol, cette application est en beta ferme. Votre email n'est pas autoris.");return}}catch(I){console.error("Erreur de connexion Google:",I),T(I.message||"Erreur de connexion")}finally{x(!1)}},k=async I=>{I.preventDefault(),x(!0),T(null);try{if(c){if(o!==B7){T("Code d'invitation invalide."),x(!1);return}if(!await D(e)){T("Votre email n'est pas dans la liste des beta testeurs."),x(!1);return}await kU(Ma,e,i)}else{if(!await D(e)){T("Votre email n'est pas autoris  accder  la beta."),x(!1);return}await VU(Ma,e,i)}}catch(R){console.error("Erreur d'authentification:",R),R.code==="auth/user-not-found"?T("Aucun compte trouv avec cet email."):R.code==="auth/wrong-password"?T("Mot de passe incorrect."):R.code==="auth/email-already-in-use"?T("Cet email est dj utilis."):R.code==="auth/weak-password"?T("Le mot de passe doit contenir au moins 6 caractres."):T(R.message||"Erreur d'authentification")}finally{x(!1)}},F=async()=>{try{await wv(Ma)}catch(I){console.error("Erreur de dconnexion:",I)}};return t?S.jsxs("div",{className:"relative",ref:N,children:[S.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-3 px-4 py-2 rounded-full bg-gold/10 hover:bg-gold/20 transition-all border border-gold/30",children:[S.jsx("div",{className:"w-8 h-8 rounded-full bg-gold flex items-center justify-center text-onyx font-bold",children:((($=t.displayName)==null?void 0:$[0])||((K=t.email)==null?void 0:K[0])||"U").toUpperCase()}),S.jsx("span",{className:"hidden md:block text-sm font-medium",children:t.displayName||((G=t.email)==null?void 0:G.split("@")[0])})]}),d&&S.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-raisin-black rounded-xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden z-50",children:[S.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[S.jsx("p",{className:"text-sm font-medium",children:t.displayName||"Utilisateur"}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email}),S.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-gold/20 text-gold text-xs font-semibold rounded-full",children:"Beta Testeur"})]}),S.jsxs("button",{onClick:F,className:"w-full px-4 py-3 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors flex items-center gap-2",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Dconnexion"]})]})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl p-8 max-w-md mx-auto border border-black/5 dark:border-white/10",children:[S.jsxs("div",{className:"text-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:["Dress ",S.jsx("span",{className:"text-gold",children:"Me"})," Up!"]}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c?"Rejoindre la beta":"Bienvenue"}),S.jsx("div",{className:"mt-3 inline-block px-3 py-1 bg-gold/10 border border-gold/30 rounded-full",children:S.jsx("span",{className:"text-xs font-semibold text-gold",children:" Beta prive"})})]}),v&&S.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-500 text-sm",children:v}),S.jsx("button",{onClick:O,disabled:b,className:"w-full mb-6 px-6 py-4 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl hover:border-gold hover:shadow-lg hover:shadow-gold/20 transition-all duration-300 flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[S.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),S.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),S.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),S.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),S.jsx("span",{className:"font-semibold group-hover:text-gold transition-colors",children:"Continuer avec Google"})]})}),S.jsxs("div",{className:"relative my-6",children:[S.jsx("div",{className:"absolute inset-0 flex items-center",children:S.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700"})}),S.jsx("div",{className:"relative flex justify-center text-sm",children:S.jsx("span",{className:"px-4 bg-white dark:bg-raisin-black text-gray-500",children:"Ou avec email"})})]}),S.jsxs("form",{onSubmit:k,className:"space-y-4",children:[S.jsx("input",{type:"email",placeholder:"Email",value:e,onChange:I=>n(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),S.jsx("input",{type:"password",placeholder:"Mot de passe",value:i,onChange:I=>r(I.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-white dark:bg-gray-800 transition-all",required:!0}),c&&S.jsx("input",{type:"text",placeholder:"Code d'invitation",value:o,onChange:I=>l(I.target.value.toUpperCase()),className:"w-full px-4 py-3 border border-gold/50 dark:border-gold/30 rounded-xl focus:ring-2 focus:ring-gold focus:border-transparent bg-gold/5 dark:bg-gold/10 transition-all placeholder:text-gold/50",required:!0}),S.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-4 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all duration-300 font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:b?S.jsxs("svg",{className:"animate-spin h-5 w-5 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):c?"Rejoindre la beta":"Se connecter"})]}),S.jsx("button",{onClick:()=>{f(!c),T(null)},className:"w-full mt-6 text-sm text-gray-500 hover:text-gold transition-colors",children:c?"Dj un compte ? Se connecter":"Pas encore de compte ? Rejoindre la beta"})]})},q7=({onAnalyze:t,isAnalyzing:e})=>{const n=B.useRef(null),[i,r]=B.useState([]),[o,l]=B.useState(!1),[c,f]=B.useState(!1);B.useEffect(()=>{const k=()=>f(window.innerWidth<1024);return k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)},[]),B.useEffect(()=>()=>{i.forEach(k=>URL.revokeObjectURL(k.preview))},[i]);const d=k=>{const F=k.map($=>({id:`${$.name}-${$.lastModified}-${Math.random()}`,file:$,preview:URL.createObjectURL($)}));r($=>[...$,...F])},p=k=>{k.target.files&&(d(Array.from(k.target.files)),k.target.value="")},v=()=>{var k;e||(k=n.current)==null||k.click()},T=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!0))},b=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1))},x=k=>{c||(k.preventDefault(),k.stopPropagation())},N=k=>{c||(k.preventDefault(),k.stopPropagation(),l(!1),k.dataTransfer.files&&k.dataTransfer.files.length>0&&(d(Array.from(k.dataTransfer.files)),k.dataTransfer.clearData()))},D=k=>{const F=i.find($=>$.id===k);F&&URL.revokeObjectURL(F.preview),r($=>$.filter(K=>K.id!==k))},O=()=>{i.length>0&&!e&&(t(i.map(k=>k.file)),r([]))};return S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",onDragEnter:T,onDragLeave:b,onDragOver:x,onDrop:N,children:[S.jsx("h2",{className:"text-2xl font-serif font-bold mb-6 text-gold",children:"Ajouter  ma garde-robe"}),S.jsxs("div",{onClick:v,className:`relative bg-snow dark:bg-onyx rounded-lg p-12 text-center transition-all duration-300 ring-1 ring-dashed ring-black/20 dark:ring-white/20 ${e?"cursor-default":"cursor-pointer hover:ring-gold dark:hover:ring-gold"}`,children:[S.jsx("input",{type:"file",ref:n,onChange:p,className:"hidden",accept:"image/png, image/jpeg, image/webp",multiple:!0,disabled:e}),S.jsx("div",{className:"flex flex-col items-center justify-center min-h-[8rem]",children:e?S.jsxs(S.Fragment,{children:[S.jsx(OD,{}),S.jsx("p",{className:"mt-4 text-sm font-medium text-gray-500 dark:text-gray-400 tracking-wide",children:"Analyse en cours..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-gray-400 dark:text-gray-600 mb-4",children:S.jsx(fI,{})}),S.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:c?"Appuyez pour ajouter des photos":"Glissez-dposez vos photos"}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["ou ",S.jsx("span",{className:"text-gold font-medium",children:"cliquez pour slectionner"})]})]})}),o&&!c&&S.jsxs("div",{className:"absolute inset-0 bg-gold/90 backdrop-blur-sm rounded-lg flex flex-col items-center justify-center transition-opacity",children:[S.jsx("div",{className:"text-black transform-gpu scale-110",children:S.jsx(fI,{})}),S.jsx("p",{className:"mt-2 font-bold text-lg text-black",children:"Dposez pour ajouter"})]})]}),i.length>0&&!e&&S.jsxs("div",{className:"mt-8",children:[S.jsx("h3",{className:"font-semibold mb-4 text-gray-600 dark:text-gray-300",children:"Prts pour l'analyse :"}),S.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 mb-6",children:i.map(k=>S.jsxs("div",{className:"relative group aspect-square",children:[S.jsx("img",{src:k.preview,alt:k.file.name,className:"w-full h-full object-cover rounded-md shadow-md"}),S.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-md"}),S.jsx("button",{onClick:()=>D(k.id),className:"absolute -top-2 -right-2 p-1 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:scale-110 focus:opacity-100","aria-label":"Supprimer",children:S.jsx(eg,{})})]},k.id))}),S.jsxs("button",{onClick:O,disabled:e||i.length===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(MT,{}),"Analyser les ",i.length," article(s)"]})]})]})},OT=B.createContext({});function UT(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}const ng=B.createContext(null),FT=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class z7 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function G7({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=B.useContext(FT);return B.useInsertionEffect(()=>{const{width:l,height:c,top:f,left:d}=r.current;if(e||!i.current||!l||!c)return;i.current.dataset.motionPopId=n;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            top: ${f}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),S.jsx(z7,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const H7=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l})=>{const c=UT(j7),f=B.useId(),d=B.useCallback(v=>{c.set(v,!0);for(const T of c.values())if(!T)return;i&&i()},[c,i]),p=B.useMemo(()=>({id:f,initial:e,isPresent:n,custom:r,onExitComplete:d,register:v=>(c.set(v,!1),()=>c.delete(v))}),o?[Math.random(),d]:[n,d]);return B.useMemo(()=>{c.forEach((v,T)=>c.set(T,!1))},[n]),B.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),l==="popLayout"&&(t=S.jsx(G7,{isPresent:n,children:t})),S.jsx(ng.Provider,{value:p,children:t})};function j7(){return new Map}function qD(t=!0){const e=B.useContext(ng);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=B.useId();B.useEffect(()=>{t&&r(o)},[t]);const l=B.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const zh=t=>t.key||"";function pI(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const BT=typeof window<"u",zD=BT?B.useLayoutEffect:B.useEffect,$7=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1})=>{const[c,f]=qD(l),d=B.useMemo(()=>pI(t),[t]),p=l&&!c?[]:d.map(zh),v=B.useRef(!0),T=B.useRef(d),b=UT(()=>new Map),[x,N]=B.useState(d),[D,O]=B.useState(d);zD(()=>{v.current=!1,T.current=d;for(let $=0;$<D.length;$++){const K=zh(D[$]);p.includes(K)?b.delete(K):b.get(K)!==!0&&b.set(K,!1)}},[D,p.length,p.join("-")]);const k=[];if(d!==x){let $=[...d];for(let K=0;K<D.length;K++){const G=D[K],I=zh(G);p.includes(I)||($.splice(K,0,G),k.push(G))}o==="wait"&&k.length&&($=k),O(pI($)),N(d);return}const{forceRender:F}=B.useContext(OT);return S.jsx(S.Fragment,{children:D.map($=>{const K=zh($),G=l&&!c?!1:d===D||p.includes(K),I=()=>{if(b.has(K))b.set(K,!0);else return;let R=!0;b.forEach(P=>{P||(R=!1)}),R&&(F==null||F(),O(T.current),l&&(f==null||f()),i&&i())};return S.jsx(H7,{isPresent:G,initial:!v.current||n?void 0:!1,custom:G?void 0:e,presenceAffectsLayout:r,mode:o,onExitComplete:G?void 0:I,children:$},K)})})},Qi=t=>t;let GD=Qi;function qT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Su=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},ks=t=>t*1e3,Vs=t=>t/1e3,K7={useManualTiming:!1};function Y7(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(f.schedule(d),t()),d(l)}const f={schedule:(d,p=!1,v=!1)=>{const b=v&&i?e:n;return p&&o.add(d),b.has(d)||b.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(c),e.clear(),i=!1,r&&(r=!1,f.process(d))}};return f}const Gh=["read","resolveKeyframes","update","preRender","render","postRender"],J7=40;function HD(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Gh.reduce((O,k)=>(O[k]=Y7(o),O),{}),{read:c,resolveKeyframes:f,update:d,preRender:p,render:v,postRender:T}=l,b=()=>{const O=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(O-r.timestamp,J7),1),r.timestamp=O,r.isProcessing=!0,c.process(r),f.process(r),d.process(r),p.process(r),v.process(r),T.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},x=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Gh.reduce((O,k)=>{const F=l[k];return O[k]=($,K=!1,G=!1)=>(n||x(),F.schedule($,K,G)),O},{}),cancel:O=>{for(let k=0;k<Gh.length;k++)l[Gh[k]].cancel(O)},state:r,steps:l}}const{schedule:jt,cancel:Xo,state:jn,steps:Dv}=HD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0),jD=B.createContext({strict:!1}),mI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bu={};for(const t in mI)bu[t]={isEnabled:e=>mI[t].some(n=>!!e[n])};function W7(t){for(const e in t)bu[e]={...bu[e],...t[e]}}const X7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||X7.has(t)}let $D=t=>!rm(t);function Q7(t){t&&($D=e=>e.startsWith("on")?!rm(e):t(e))}try{Q7(require("@emotion/is-prop-valid").default)}catch{}function Z7(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||($D(r)||n===!0&&rm(r)||!e&&!rm(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function ej(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const ig=B.createContext({});function Uf(t){return typeof t=="string"||Array.isArray(t)}function rg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const zT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GT=["initial",...zT];function sg(t){return rg(t.animate)||GT.some(e=>Uf(t[e]))}function KD(t){return!!(sg(t)||t.variants)}function tj(t,e){if(sg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Uf(n)?n:void 0,animate:Uf(i)?i:void 0}}return t.inherit!==!1?e:{}}function nj(t){const{initial:e,animate:n}=tj(t,B.useContext(ig));return B.useMemo(()=>({initial:e,animate:n}),[gI(e),gI(n)])}function gI(t){return Array.isArray(t)?t.join(" "):t}const ij=Symbol.for("motionComponentSymbol");function Zl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rj(t,e,n){return B.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Zl(n)&&(n.current=i))},[e])}const HT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sj="framerAppearId",YD="data-"+HT(sj),{schedule:jT}=HD(queueMicrotask,!1),JD=B.createContext({});function oj(t,e,n,i,r){var o,l;const{visualElement:c}=B.useContext(ig),f=B.useContext(jD),d=B.useContext(ng),p=B.useContext(FT).reducedMotion,v=B.useRef(null);i=i||f.renderer,!v.current&&i&&(v.current=i(t,{visualState:e,parent:c,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p}));const T=v.current,b=B.useContext(JD);T&&!T.projection&&r&&(T.type==="html"||T.type==="svg")&&aj(v.current,n,r,b);const x=B.useRef(!1);B.useInsertionEffect(()=>{T&&x.current&&T.update(n,d)});const N=n[YD],D=B.useRef(!!N&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,N))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,N)));return zD(()=>{T&&(x.current=!0,window.MotionIsMounted=!0,T.updateFeatures(),jT.render(T.render),D.current&&T.animationState&&T.animationState.animateChanges())}),B.useEffect(()=>{T&&(!D.current&&T.animationState&&T.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var O;(O=window.MotionHandoffMarkAsComplete)===null||O===void 0||O.call(window,N)}),D.current=!1))}),T}function aj(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:WD(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&Zl(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:d})}function WD(t){if(t)return t.options.allowProjection!==!1?t.projection:WD(t.parent)}function lj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,l;t&&W7(t);function c(d,p){let v;const T={...B.useContext(FT),...d,layoutId:uj(d)},{isStatic:b}=T,x=nj(d),N=i(d,b);if(!b&&BT){cj();const D=fj(T);v=D.MeasureLayout,x.visualElement=oj(r,N,T,e,D.ProjectionNode)}return S.jsxs(ig.Provider,{value:x,children:[v&&x.visualElement?S.jsx(v,{visualElement:x.visualElement,...T}):null,n(r,d,rj(N,x.visualElement,p),N,b,x.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(l=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&l!==void 0?l:""})`}`;const f=B.forwardRef(c);return f[ij]=r,f}function uj({layoutId:t}){const e=B.useContext(OT).id;return e&&t!==void 0?e+"-"+t:t}function cj(t,e){B.useContext(jD).strict}function fj(t){const{drag:e,layout:n}=bu;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const dj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $T(t){return typeof t!="string"||t.includes("-")?!1:!!(dj.indexOf(t)>-1||/[A-Z]/u.test(t))}function yI(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function KT(t,e,n,i){if(typeof e=="function"){const[r,o]=yI(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=yI(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const F0=t=>Array.isArray(t),hj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),pj=t=>F0(t)?t[t.length-1]||0:t,ui=t=>!!(t&&t.getVelocity);function Ep(t){const e=ui(t)?t.get():t;return hj(e)?e.toValue():e}function mj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const l={latestValues:gj(i,r,o,t),renderState:e()};return n&&(l.onMount=c=>n({props:i,current:c,...l}),l.onUpdate=c=>n(c)),l}const XD=t=>(e,n)=>{const i=B.useContext(ig),r=B.useContext(ng),o=()=>mj(t,e,i,r);return n?o():UT(o)};function gj(t,e,n,i){const r={},o=i(t,{});for(const T in o)r[T]=Ep(o[T]);let{initial:l,animate:c}=t;const f=sg(t),d=KD(t);e&&d&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const v=p?c:l;if(v&&typeof v!="boolean"&&!rg(v)){const T=Array.isArray(v)?v:[v];for(let b=0;b<T.length;b++){const x=KT(t,T[b]);if(x){const{transitionEnd:N,transition:D,...O}=x;for(const k in O){let F=O[k];if(Array.isArray(F)){const $=p?F.length-1:0;F=F[$]}F!==null&&(r[k]=F)}for(const k in N)r[k]=N[k]}}}return r}const Fu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rl=new Set(Fu),QD=t=>e=>typeof e=="string"&&e.startsWith(t),ZD=QD("--"),yj=QD("var(--"),YT=t=>yj(t)?vj.test(t.split("/*")[0].trim()):!1,vj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,eM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zs=(t,e,n)=>n>e?e:n<t?t:n,Bu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ff={...Bu,transform:t=>zs(0,1,t)},Hh={...Bu,default:1},od=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Io=od("deg"),os=od("%"),Oe=od("px"),_j=od("vh"),Tj=od("vw"),vI={...os,parse:t=>os.parse(t)/100,transform:t=>os.transform(t*100)},Ej={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe},Sj={rotate:Io,rotateX:Io,rotateY:Io,rotateZ:Io,scale:Hh,scaleX:Hh,scaleY:Hh,scaleZ:Hh,skew:Io,skewX:Io,skewY:Io,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Ff,originX:vI,originY:vI,originZ:Oe},_I={...Bu,transform:Math.round},JT={...Ej,...Sj,zIndex:_I,size:Oe,fillOpacity:Ff,strokeOpacity:Ff,numOctaves:_I},bj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wj=Fu.length;function Aj(t,e,n){let i="",r=!0;for(let o=0;o<wj;o++){const l=Fu[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const d=eM(c,JT[l]);if(!f){r=!1;const p=bj[l]||l;i+=`${p}(${d}) `}n&&(e[l]=d)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function WT(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const d=e[f];if(rl.has(f)){l=!0;continue}else if(ZD(f)){r[f]=d;continue}else{const p=eM(d,JT[f]);f.startsWith("origin")?(c=!0,o[f]=p):i[f]=p}}if(e.transform||(l||n?i.transform=Aj(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=o;i.transformOrigin=`${f} ${d} ${p}`}}const Cj={offset:"stroke-dashoffset",array:"stroke-dasharray"},xj={offset:"strokeDashoffset",array:"strokeDasharray"};function Ij(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?Cj:xj;t[o.offset]=Oe.transform(-i);const l=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${l} ${c}`}function TI(t,e,n){return typeof t=="string"?t:Oe.transform(e+n*t)}function Rj(t,e,n){const i=TI(e,t.x,t.width),r=TI(n,t.y,t.height);return`${i} ${r}`}function XT(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:l,pathSpacing:c=1,pathOffset:f=0,...d},p,v){if(WT(t,d,v),p){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:T,style:b,dimensions:x}=t;T.transform&&(x&&(b.transform=T.transform),delete T.transform),x&&(r!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=Rj(x,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(T.x=e),n!==void 0&&(T.y=n),i!==void 0&&(T.scale=i),l!==void 0&&Ij(T,l,c,f,!1)}const QT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),tM=()=>({...QT(),attrs:{}}),ZT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function nM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const iM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rM(t,e,n,i){nM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(iM.has(r)?r:HT(r),e.attrs[r])}const sm={};function Nj(t){Object.assign(sm,t)}function sM(t,{layout:e,layoutId:n}){return rl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sm[t]||t==="opacity")}function eE(t,e,n){var i;const{style:r}=t,o={};for(const l in r)(ui(r[l])||e.style&&ui(e.style[l])||sM(l,t)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[l]=r[l]);return o}function oM(t,e,n){const i=eE(t,e,n);for(const r in t)if(ui(t[r])||ui(e[r])){const o=Fu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function Pj(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const EI=["x","y","width","height","cx","cy","r"],Dj={useVisualState:XD({scrapeMotionValuesFromProps:oM,createRenderState:tM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const c in r)if(rl.has(c)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let c=0;c<EI.length;c++){const f=EI[c];t[f]!==e[f]&&(l=!0)}l&&jt.read(()=>{Pj(n,i),jt.render(()=>{XT(i,r,ZT(n.tagName),t.transformTemplate),rM(n,i)})})}})},Mj={useVisualState:XD({scrapeMotionValuesFromProps:eE,createRenderState:QT})};function aM(t,e,n){for(const i in e)!ui(e[i])&&!sM(i,n)&&(t[i]=e[i])}function kj({transformTemplate:t},e){return B.useMemo(()=>{const n=QT();return WT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Vj(t,e){const n=t.style||{},i={};return aM(i,n,t),Object.assign(i,kj(t,e)),i}function Lj(t,e){const n={},i=Vj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Oj(t,e,n,i){const r=B.useMemo(()=>{const o=tM();return XT(o,e,ZT(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};aM(o,t.style,t),r.style={...o,...r.style}}return r}function Uj(t=!1){return(n,i,r,{latestValues:o},l)=>{const f=($T(n)?Oj:Lj)(i,o,l,n),d=Z7(i,typeof n=="string",t),p=n!==B.Fragment?{...d,...f,ref:r}:{},{children:v}=i,T=B.useMemo(()=>ui(v)?v.get():v,[v]);return B.createElement(n,{...p,children:T})}}function Fj(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...$T(i)?Dj:Mj,preloadedFeatures:t,useRender:Uj(r),createVisualElement:e,Component:i};return lj(l)}}function lM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function og(t,e,n){const i=t.getProps();return KT(i,e,n!==void 0?n:i.custom,t)}const Bj=qT(()=>window.ScrollTimeline!==void 0);class qj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(Bj()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class zj extends qj{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function tE(t,e){return t?t[e]||t.default||t:void 0}const B0=2e4;function uM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<B0;)e+=n,i=t.next(e);return e>=B0?1/0:e}function nE(t){return typeof t=="function"}function SI(t,e){t.timeline=e,t.onfinish=null}const iE=t=>Array.isArray(t)&&typeof t[0]=="number",Gj={linearEasing:void 0};function Hj(t,e){const n=qT(t);return()=>{var i;return(i=Gj[e])!==null&&i!==void 0?i:n()}}const om=Hj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Su(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function fM(t){return!!(typeof t=="function"&&om()||!t||typeof t=="string"&&(t in q0||om())||iE(t)||Array.isArray(t)&&t.every(fM))}const Qc=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,q0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qc([0,.65,.55,1]),circOut:Qc([.55,0,1,.45]),backIn:Qc([.31,.01,.66,-.59]),backOut:Qc([.33,1.53,.69,.99])};function dM(t,e){if(t)return typeof t=="function"&&om()?cM(t,e):iE(t)?Qc(t):Array.isArray(t)?t.map(n=>dM(n,e)||q0.easeOut):q0[t]}const Nr={x:!1,y:!1};function hM(){return Nr.x||Nr.y}function jj(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function pM(t,e){const n=jj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function bI(t){return e=>{e.pointerType==="touch"||hM()||t(e)}}function $j(t,e,n={}){const[i,r,o]=pM(t,n),l=bI(c=>{const{target:f}=c,d=e(c);if(typeof d!="function"||!f)return;const p=bI(v=>{d(v),f.removeEventListener("pointerleave",p)});f.addEventListener("pointerleave",p,r)});return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const mM=(t,e)=>e?t===e?!0:mM(t,e.parentElement):!1,rE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Kj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Yj(t){return Kj.has(t.tagName)||t.tabIndex!==-1}const Zc=new WeakSet;function wI(t){return e=>{e.key==="Enter"&&t(e)}}function Mv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Jj=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=wI(()=>{if(Zc.has(n))return;Mv(n,"down");const r=wI(()=>{Mv(n,"up")}),o=()=>Mv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function AI(t){return rE(t)&&!hM()}function Wj(t,e,n={}){const[i,r,o]=pM(t,n),l=c=>{const f=c.currentTarget;if(!AI(c)||Zc.has(f))return;Zc.add(f);const d=e(c),p=(b,x)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",T),!(!AI(b)||!Zc.has(f))&&(Zc.delete(f),typeof d=="function"&&d(b,{success:x}))},v=b=>{p(b,n.useGlobalTarget||mM(f,b.target))},T=b=>{p(b,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",T,r)};return i.forEach(c=>{!Yj(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),c.addEventListener("focus",d=>Jj(d,r),r)}),o}function Xj(t){return t==="x"||t==="y"?Nr[t]?null:(Nr[t]=!0,()=>{Nr[t]=!1}):Nr.x||Nr.y?null:(Nr.x=Nr.y=!0,()=>{Nr.x=Nr.y=!1})}const gM=new Set(["width","height","top","left","right","bottom",...Fu]);let Sp;function Qj(){Sp=void 0}const as={now:()=>(Sp===void 0&&as.set(jn.isProcessing||K7.useManualTiming?jn.timestamp:performance.now()),Sp),set:t=>{Sp=t,queueMicrotask(Qj)}};function sE(t,e){t.indexOf(e)===-1&&t.push(e)}function oE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class aE{constructor(){this.subscriptions=[]}add(e){return sE(this.subscriptions,e),()=>oE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function yM(t,e){return e?t*(1e3/e):0}const CI=30,Zj=t=>!isNaN(parseFloat(t));class e${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=as.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=as.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Zj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new aE);const i=this.events[e].add(n);return e==="change"?()=>{i(),jt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=as.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>CI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,CI);return yM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bf(t,e){return new e$(t,e)}function t$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bf(n))}function n$(t,e){const n=og(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=pj(o[l]);t$(t,l,c)}}function i$(t){return!!(ui(t)&&t.add)}function z0(t,e){const n=t.getValue("willChange");if(i$(n))return n.add(e)}function vM(t){return t.props[YD]}const _M=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,r$=1e-7,s$=12;function o$(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=_M(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>r$&&++c<s$);return l}function ad(t,e,n,i){if(t===e&&n===i)return Qi;const r=o=>o$(o,0,1,t,n);return o=>o===0||o===1?o:_M(r(o),e,i)}const TM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,EM=t=>e=>1-t(1-e),SM=ad(.33,1.53,.69,.99),lE=EM(SM),bM=TM(lE),wM=t=>(t*=2)<1?.5*lE(t):.5*(2-Math.pow(2,-10*(t-1))),uE=t=>1-Math.sin(Math.acos(t)),AM=EM(uE),CM=TM(uE),xM=t=>/^0[^.\s]+$/u.test(t);function a$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xM(t):!0}const pf=t=>Math.round(t*1e5)/1e5,cE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l$(t){return t==null}const u$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fE=(t,e)=>n=>!!(typeof n=="string"&&u$.test(n)&&n.startsWith(t)||e&&!l$(n)&&Object.prototype.hasOwnProperty.call(n,e)),IM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(cE);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},c$=t=>zs(0,255,t),kv={...Bu,transform:t=>Math.round(c$(t))},Fa={test:fE("rgb","red"),parse:IM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+kv.transform(t)+", "+kv.transform(e)+", "+kv.transform(n)+", "+pf(Ff.transform(i))+")"};function f$(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const G0={test:fE("#"),parse:f$,transform:Fa.transform},eu={test:fE("hsl","hue"),parse:IM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+os.transform(pf(e))+", "+os.transform(pf(n))+", "+pf(Ff.transform(i))+")"},ri={test:t=>Fa.test(t)||G0.test(t)||eu.test(t),parse:t=>Fa.test(t)?Fa.parse(t):eu.test(t)?eu.parse(t):G0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fa.transform(t):eu.transform(t)},d$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function h$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(cE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(d$))===null||n===void 0?void 0:n.length)||0)>0}const RM="number",NM="color",p$="var",m$="var(",xI="${}",g$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qf(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(g$,f=>(ri.test(f)?(i.color.push(o),r.push(NM),n.push(ri.parse(f))):f.startsWith(m$)?(i.var.push(o),r.push(p$),n.push(f)):(i.number.push(o),r.push(RM),n.push(parseFloat(f))),++o,xI)).split(xI);return{values:n,split:c,indexes:i,types:r}}function PM(t){return qf(t).values}function DM(t){const{split:e,types:n}=qf(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===RM?o+=pf(r[l]):c===NM?o+=ri.transform(r[l]):o+=r[l]}return o}}const y$=t=>typeof t=="number"?0:t;function v$(t){const e=PM(t);return DM(t)(e.map(y$))}const Qo={test:h$,parse:PM,createTransformer:DM,getAnimatableNone:v$},_$=new Set(["brightness","contrast","saturate","opacity"]);function T$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(cE)||[];if(!i)return t;const r=n.replace(i,"");let o=_$.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const E$=/\b([a-z-]*)\(.*?\)/gu,H0={...Qo,getAnimatableNone:t=>{const e=t.match(E$);return e?e.map(T$).join(" "):t}},S$={...JT,color:ri,backgroundColor:ri,outlineColor:ri,fill:ri,stroke:ri,borderColor:ri,borderTopColor:ri,borderRightColor:ri,borderBottomColor:ri,borderLeftColor:ri,filter:H0,WebkitFilter:H0},dE=t=>S$[t];function MM(t,e){let n=dE(t);return n!==H0&&(n=Qo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const b$=new Set(["auto","none","0"]);function w$(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!b$.has(o)&&qf(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=MM(n,r)}const II=t=>t===Bu||t===Oe,RI=(t,e)=>parseFloat(t.split(", ")[e]),NI=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return RI(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?RI(o[1],t):0}},A$=new Set(["x","y","z"]),C$=Fu.filter(t=>!A$.has(t));function x$(t){const e=[];return C$.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const wu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:NI(4,13),y:NI(5,14)};wu.translateX=wu.x;wu.translateY=wu.y;const za=new Set;let j0=!1,$0=!1;function kM(){if($0){const t=Array.from(za).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=x$(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{var c;(c=i.getValue(o))===null||c===void 0||c.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}$0=!1,j0=!1,za.forEach(t=>t.complete()),za.clear()}function VM(){za.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($0=!0)})}function I$(){VM(),kM()}class hE{constructor(e,n,i,r,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(za.add(this),j0||(j0=!0,jt.read(VM),jt.resolveKeyframes(kM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=r==null?void 0:r.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const f=i.readValue(n,c);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=c),r&&l===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),za.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,za.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const LM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),R$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function N$(t){const e=R$.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function OM(t,e,n=1){const[i,r]=N$(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return LM(l)?parseFloat(l):l}return YT(r)?OM(r,e,n+1):r}const UM=t=>e=>e.test(t),P$={test:t=>t==="auto",parse:t=>t},FM=[Bu,Oe,os,Io,Tj,_j,P$],PI=t=>FM.find(UM(t));class BM extends hE{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),YT(d))){const p=OM(d,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!gM.has(i)||e.length!==2)return;const[r,o]=e,l=PI(r),c=PI(o);if(l!==c)if(II(l)&&II(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)a$(e[r])&&i.push(r);i.length&&w$(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const l=r.length-1,c=r[l];r[l]=wu[i](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([f,d])=>{n.getValue(f).set(d)}),this.resolveNoneKeyframes()}}const DI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qo.test(t)||t==="0")&&!t.startsWith("url("));function D$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function M$(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=DI(r,e),c=DI(o,e);return!l||!c?!1:D$(t)||(n==="spring"||nE(n))&&i}const k$=t=>t!==null;function ag(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(k$),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const V$=40;class qM{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=as.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>V$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&I$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=as.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:l,onComplete:c,onUpdate:f,isGenerator:d}=this.options;if(!d&&!M$(e,i,r,o))if(l)this.options.duration=0;else{f&&f(ag(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const p=this.initPlayback(e,n);p!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xt=(t,e,n)=>t+(e-t)*n;function Vv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function L$({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;r=Vv(f,c,t+1/3),o=Vv(f,c,t),l=Vv(f,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function am(t,e){return n=>n>0?e:t}const Lv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},O$=[G0,Fa,eu],U$=t=>O$.find(e=>e.test(t));function MI(t){const e=U$(t);if(!e)return!1;let n=e.parse(t);return e===eu&&(n=L$(n)),n}const kI=(t,e)=>{const n=MI(t),i=MI(e);if(!n||!i)return am(t,e);const r={...n};return o=>(r.red=Lv(n.red,i.red,o),r.green=Lv(n.green,i.green,o),r.blue=Lv(n.blue,i.blue,o),r.alpha=Xt(n.alpha,i.alpha,o),Fa.transform(r))},F$=(t,e)=>n=>e(t(n)),ld=(...t)=>t.reduce(F$),K0=new Set(["none","hidden"]);function B$(t,e){return K0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function q$(t,e){return n=>Xt(t,e,n)}function pE(t){return typeof t=="number"?q$:typeof t=="string"?YT(t)?am:ri.test(t)?kI:H$:Array.isArray(t)?zM:typeof t=="object"?ri.test(t)?kI:z$:am}function zM(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>pE(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function z$(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=pE(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function G$(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],c=t.indexes[l][r[l]],f=(n=t.values[c])!==null&&n!==void 0?n:0;i[o]=f,r[l]++}return i}const H$=(t,e)=>{const n=Qo.createTransformer(e),i=qf(t),r=qf(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?K0.has(t)&&!r.values.length||K0.has(e)&&!i.values.length?B$(t,e):ld(zM(G$(i,r),r.values),n):am(t,e)};function GM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xt(t,e,n):pE(t)(t,e)}const j$=5;function HM(t,e,n){const i=Math.max(e-j$,0);return yM(n-t(i),e-i)}const an={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ov=.001;function $$({duration:t=an.duration,bounce:e=an.bounce,velocity:n=an.velocity,mass:i=an.mass}){let r,o,l=1-e;l=zs(an.minDamping,an.maxDamping,l),t=zs(an.minDuration,an.maxDuration,Vs(t)),l<1?(r=d=>{const p=d*l,v=p*t,T=p-n,b=Y0(d,l),x=Math.exp(-v);return Ov-T/b*x},o=d=>{const v=d*l*t,T=v*n+n,b=Math.pow(l,2)*Math.pow(d,2)*t,x=Math.exp(-v),N=Y0(Math.pow(d,2),l);return(-r(d)+Ov>0?-1:1)*((T-b)*x)/N}):(r=d=>{const p=Math.exp(-d*t),v=(d-n)*t+1;return-Ov+p*v},o=d=>{const p=Math.exp(-d*t),v=(n-d)*(t*t);return p*v});const c=5/t,f=Y$(r,o,c);if(t=ks(t),isNaN(f))return{stiffness:an.stiffness,damping:an.damping,duration:t};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:t}}}const K$=12;function Y$(t,e,n){let i=n;for(let r=1;r<K$;r++)i=i-t(i)/e(i);return i}function Y0(t,e){return t*Math.sqrt(1-e*e)}const J$=["duration","bounce"],W$=["stiffness","damping","mass"];function VI(t,e){return e.some(n=>t[n]!==void 0)}function X$(t){let e={velocity:an.velocity,stiffness:an.stiffness,damping:an.damping,mass:an.mass,isResolvedFromDuration:!1,...t};if(!VI(t,W$)&&VI(t,J$))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*zs(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:an.mass,stiffness:r,damping:o}}else{const n=$$(t);e={...e,...n,mass:an.mass},e.isResolvedFromDuration=!0}return e}function jM(t=an.visualDuration,e=an.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:d,mass:p,duration:v,velocity:T,isResolvedFromDuration:b}=X$({...n,velocity:-Vs(n.velocity||0)}),x=T||0,N=d/(2*Math.sqrt(f*p)),D=l-o,O=Vs(Math.sqrt(f/p)),k=Math.abs(D)<5;i||(i=k?an.restSpeed.granular:an.restSpeed.default),r||(r=k?an.restDelta.granular:an.restDelta.default);let F;if(N<1){const K=Y0(O,N);F=G=>{const I=Math.exp(-N*O*G);return l-I*((x+N*O*D)/K*Math.sin(K*G)+D*Math.cos(K*G))}}else if(N===1)F=K=>l-Math.exp(-O*K)*(D+(x+O*D)*K);else{const K=O*Math.sqrt(N*N-1);F=G=>{const I=Math.exp(-N*O*G),R=Math.min(K*G,300);return l-I*((x+N*O*D)*Math.sinh(R)+K*D*Math.cosh(R))/K}}const $={calculatedDuration:b&&v||null,next:K=>{const G=F(K);if(b)c.done=K>=v;else{let I=0;N<1&&(I=K===0?ks(x):HM(F,K,G));const R=Math.abs(I)<=i,P=Math.abs(l-G)<=r;c.done=R&&P}return c.value=c.done?l:G,c},toString:()=>{const K=Math.min(uM($),B0),G=cM(I=>$.next(K*I).value,K,30);return K+"ms "+G}};return $}function LI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:d=.5,restSpeed:p}){const v=t[0],T={done:!1,value:v},b=R=>c!==void 0&&R<c||f!==void 0&&R>f,x=R=>c===void 0?f:f===void 0||Math.abs(c-R)<Math.abs(f-R)?c:f;let N=n*e;const D=v+N,O=l===void 0?D:l(D);O!==D&&(N=O-v);const k=R=>-N*Math.exp(-R/i),F=R=>O+k(R),$=R=>{const P=k(R),V=F(R);T.done=Math.abs(P)<=d,T.value=T.done?O:V};let K,G;const I=R=>{b(T.value)&&(K=R,G=jM({keyframes:[T.value,x(T.value)],velocity:HM(F,R,T.value),damping:r,stiffness:o,restDelta:d,restSpeed:p}))};return I(0),{calculatedDuration:null,next:R=>{let P=!1;return!G&&K===void 0&&(P=!0,$(R),I(R)),K!==void 0&&R>=K?G.next(R-K):(!P&&$(R),T)}}}const Q$=ad(.42,0,1,1),Z$=ad(0,0,.58,1),$M=ad(.42,0,.58,1),eK=t=>Array.isArray(t)&&typeof t[0]!="number",tK={linear:Qi,easeIn:Q$,easeInOut:$M,easeOut:Z$,circIn:uE,circInOut:CM,circOut:AM,backIn:lE,backInOut:bM,backOut:SM,anticipate:wM},OI=t=>{if(iE(t)){GD(t.length===4);const[e,n,i,r]=t;return ad(e,n,i,r)}else if(typeof t=="string")return tK[t];return t};function nK(t,e,n){const i=[],r=n||GM,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Qi:e;c=ld(f,c)}i.push(c)}return i}function iK(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(GD(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=nK(e,i,r),f=c.length,d=p=>{if(l&&p<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(p<t[v+1]);v++);const T=Su(t[v],t[v+1],p);return c[v](T)};return n?p=>d(zs(t[0],t[o-1],p)):d}function rK(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Su(0,e,i);t.push(Xt(n,1,r))}}function sK(t){const e=[0];return rK(e,t.length-1),e}function oK(t,e){return t.map(n=>n*e)}function aK(t,e){return t.map(()=>e||$M).splice(0,t.length-1)}function lm({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=eK(i)?i.map(OI):OI(i),o={done:!1,value:e[0]},l=oK(n&&n.length===e.length?n:sK(e),t),c=iK(l,e,{ease:Array.isArray(r)?r:aK(e,r)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const lK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>jt.update(e,!0),stop:()=>Xo(e),now:()=>jn.isProcessing?jn.timestamp:as.now()}},uK={decay:LI,inertia:LI,tween:lm,keyframes:lm,spring:jM},cK=t=>t/100;class mE extends qM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,l=(r==null?void 0:r.KeyframeResolver)||hE,c=(f,d)=>this.onKeyframesResolved(f,d);this.resolver=new l(o,c,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=this.options,c=nE(n)?n:uK[n]||lm;let f,d;c!==lm&&typeof e[0]!="number"&&(f=ld(cK,GM(e[0],e[1])),e=[0,100]);const p=c({...this.options,keyframes:e});o==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=uM(p));const{calculatedDuration:v}=p,T=v+r,b=T*(i+1)-r;return{generator:p,mirroredGenerator:d,mapPercentToKeyframes:f,calculatedDuration:v,resolvedDuration:T,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:f,calculatedDuration:d,totalDuration:p,resolvedDuration:v}=i;if(this.startTime===null)return o.next(0);const{delay:T,repeat:b,repeatType:x,repeatDelay:N,onUpdate:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-p/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const O=this.currentTime-T*(this.speed>=0?1:-1),k=this.speed>=0?O<0:O>p;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let F=this.currentTime,$=o;if(b){const R=Math.min(this.currentTime,p)/v;let P=Math.floor(R),V=R%1;!V&&R>=1&&(V=1),V===1&&P--,P=Math.min(P,b+1),!!(P%2)&&(x==="reverse"?(V=1-V,N&&(V-=N/v)):x==="mirror"&&($=l)),F=zs(0,1,V)*v}const K=k?{done:!1,value:f[0]}:$.next(F);c&&(K.value=c(K.value));let{done:G}=K;!k&&d!==null&&(G=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return I&&r!==void 0&&(K.value=ag(f,this.options,r)),D&&D(K.value),I&&this.finish(),K}get duration(){const{resolved:e}=this;return e?Vs(e.calculatedDuration):0}get time(){return Vs(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=lK,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const fK=new Set(["opacity","clipPath","filter","transform"]);function dK(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeInOut",times:f}={}){const d={[e]:n};f&&(d.offset=f);const p=dM(c,r);return Array.isArray(p)&&(d.easing=p),t.animate(d,{delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const hK=qT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),um=10,pK=2e4;function mK(t){return nE(t.type)||t.type==="spring"||!fM(t.ease)}function gK(t,e){const n=new mE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<pK;)i=n.sample(o),r.push(i.value),o+=um;return{times:void 0,keyframes:r,duration:o-um,ease:"linear"}}const KM={anticipate:wM,backInOut:bM,circInOut:CM};function yK(t){return t in KM}class UI extends qM{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new BM(o,(l,c)=>this.onKeyframesResolved(l,c),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:l,motionValue:c,name:f,startTime:d}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof o=="string"&&om()&&yK(o)&&(o=KM[o]),mK(this.options)){const{onComplete:v,onUpdate:T,motionValue:b,element:x,...N}=this.options,D=gK(e,N);e=D.keyframes,e.length===1&&(e[1]=e[0]),i=D.duration,r=D.times,o=D.ease,l="keyframes"}const p=dK(c.owner.current,f,e,{...this.options,duration:i,times:r,ease:o});return p.startTime=d??this.calcStartTime(),this.pendingTimeline?(SI(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:v}=this.options;c.set(ag(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:r,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Vs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Vs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qi;const{animation:i}=n;SI(i,e)}return Qi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:p,onComplete:v,element:T,...b}=this.options,x=new mE({...b,keyframes:i,duration:r,type:o,ease:l,times:c,isGenerator:!0}),N=ks(this.time);d.setWithVelocity(x.sample(N-um).value,x.sample(N).value,um)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=n.owner.getProps();return hK()&&i&&fK.has(i)&&!f&&!d&&!r&&o!=="mirror"&&l!==0&&c!=="inertia"}}const vK={type:"spring",stiffness:500,damping:25,restSpeed:10},_K=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TK={type:"keyframes",duration:.8},EK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SK=(t,{keyframes:e})=>e.length>2?TK:rl.has(t)?t.startsWith("scale")?_K(e[1]):vK:EK;function bK({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const gE=(t,e,n,i={},r,o)=>l=>{const c=tE(i,t)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-ks(f);let p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:T=>{e.set(T),c.onUpdate&&c.onUpdate(T)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};bK(c)||(p={...p,...SK(t,p)}),p.duration&&(p.duration=ks(p.duration)),p.repeatDelay&&(p.repeatDelay=ks(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let v=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const T=ag(p.keyframes,c);if(T!==void 0)return jt.update(()=>{p.onUpdate(T),p.onComplete()}),new zj([])}return!o&&UI.supports(p)?new UI(p):new mE(p)};function wK({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function YM(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...f}=e;i&&(l=i);const d=[],p=r&&t.animationState&&t.animationState.getState()[r];for(const v in f){const T=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),b=f[v];if(b===void 0||p&&wK(p,v))continue;const x={delay:n,...tE(l||{},v)};let N=!1;if(window.MotionHandoffAnimation){const O=vM(t);if(O){const k=window.MotionHandoffAnimation(O,v,jt);k!==null&&(x.startTime=k,N=!0)}}z0(t,v),T.start(gE(v,T,b,t.shouldReduceMotion&&gM.has(v)?{type:!1}:x,t,N));const D=T.animation;D&&d.push(D)}return c&&Promise.all(d).then(()=>{jt.update(()=>{c&&n$(t,c)})}),d}function J0(t,e,n={}){var i;const r=og(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const l=r?()=>Promise.all(YM(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:v,staggerDirection:T}=o;return AK(t,e,p+d,v,T,n)}:()=>Promise.resolve(),{when:f}=o;if(f){const[d,p]=f==="beforeChildren"?[l,c]:[c,l];return d().then(()=>p())}else return Promise.all([l(),c(n.delay)])}function AK(t,e,n=0,i=0,r=1,o){const l=[],c=(t.variantChildren.size-1)*i,f=r===1?(d=0)=>d*i:(d=0)=>c-d*i;return Array.from(t.variantChildren).sort(CK).forEach((d,p)=>{d.notify("AnimationStart",e),l.push(J0(d,e,{...o,delay:n+f(p)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(l)}function CK(t,e){return t.sortNodePosition(e)}function xK(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>J0(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=J0(t,e,n);else{const r=typeof e=="function"?og(t,e,n.custom):e;i=Promise.all(YM(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const IK=GT.length;function JM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?JM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<IK;n++){const i=GT[n],r=t.props[i];(Uf(r)||r===!1)&&(e[i]=r)}return e}const RK=[...zT].reverse(),NK=zT.length;function PK(t){return e=>Promise.all(e.map(({animation:n,options:i})=>xK(t,n,i)))}function DK(t){let e=PK(t),n=FI(),i=!0;const r=f=>(d,p)=>{var v;const T=og(t,p,f==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(T){const{transition:b,transitionEnd:x,...N}=T;d={...d,...N,...x}}return d};function o(f){e=f(t)}function l(f){const{props:d}=t,p=JM(t.parent)||{},v=[],T=new Set;let b={},x=1/0;for(let D=0;D<NK;D++){const O=RK[D],k=n[O],F=d[O]!==void 0?d[O]:p[O],$=Uf(F),K=O===f?k.isActive:null;K===!1&&(x=D);let G=F===p[O]&&F!==d[O]&&$;if(G&&i&&t.manuallyAnimateOnMount&&(G=!1),k.protectedKeys={...b},!k.isActive&&K===null||!F&&!k.prevProp||rg(F)||typeof F=="boolean")continue;const I=MK(k.prevProp,F);let R=I||O===f&&k.isActive&&!G&&$||D>x&&$,P=!1;const V=Array.isArray(F)?F:[F];let U=V.reduce(r(O),{});K===!1&&(U={});const{prevResolvedValues:q={}}=k,z={...q,...U},xe=ae=>{R=!0,T.has(ae)&&(P=!0,T.delete(ae)),k.needsAnimating[ae]=!0;const me=t.getValue(ae);me&&(me.liveStyle=!1)};for(const ae in z){const me=U[ae],Ce=q[ae];if(b.hasOwnProperty(ae))continue;let Ie=!1;F0(me)&&F0(Ce)?Ie=!lM(me,Ce):Ie=me!==Ce,Ie?me!=null?xe(ae):T.add(ae):me!==void 0&&T.has(ae)?xe(ae):k.protectedKeys[ae]=!0}k.prevProp=F,k.prevResolvedValues=U,k.isActive&&(b={...b,...U}),i&&t.blockInitialAnimation&&(R=!1),R&&(!(G&&I)||P)&&v.push(...V.map(ae=>({animation:ae,options:{type:O}})))}if(T.size){const D={};T.forEach(O=>{const k=t.getBaseTarget(O),F=t.getValue(O);F&&(F.liveStyle=!0),D[O]=k??null}),v.push({animation:D})}let N=!!v.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(v):Promise.resolve()}function c(f,d){var p;if(n[f].isActive===d)return Promise.resolve();(p=t.variantChildren)===null||p===void 0||p.forEach(T=>{var b;return(b=T.animationState)===null||b===void 0?void 0:b.setActive(f,d)}),n[f].isActive=d;const v=l(f);for(const T in n)n[T].protectedKeys={};return v}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=FI(),i=!0}}}function MK(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!lM(e,t):!1}function Na(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function FI(){return{animate:Na(!0),whileInView:Na(),whileHover:Na(),whileTap:Na(),whileDrag:Na(),whileFocus:Na(),exit:Na()}}class sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kK extends sa{constructor(e){super(e),e.animationState||(e.animationState=DK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let VK=0;class LK extends sa{constructor(){super(...arguments),this.id=VK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const OK={animation:{Feature:kK},exit:{Feature:LK}};function zf(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ud(t){return{point:{x:t.pageX,y:t.pageY}}}const UK=t=>e=>rE(e)&&t(e,ud(e));function mf(t,e,n,i){return zf(t,e,UK(n),i)}const BI=(t,e)=>Math.abs(t-e);function FK(t,e){const n=BI(t.x,e.x),i=BI(t.y,e.y);return Math.sqrt(n**2+i**2)}class WM{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Fv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,b=FK(v.offset,{x:0,y:0})>=3;if(!T&&!b)return;const{point:x}=v,{timestamp:N}=jn;this.history.push({...x,timestamp:N});const{onStart:D,onMove:O}=this.handlers;T||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,T)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Uv(T,this.transformPagePoint),jt.update(this.updatePoint,!0)},this.handlePointerUp=(v,T)=>{this.end();const{onEnd:b,onSessionEnd:x,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=Fv(v.type==="pointercancel"?this.lastMoveEventInfo:Uv(T,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,D),x&&x(v,D)},!rE(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=ud(e),c=Uv(l,this.transformPagePoint),{point:f}=c,{timestamp:d}=jn;this.history=[{...f,timestamp:d}];const{onSessionStart:p}=n;p&&p(e,Fv(c,this.history)),this.removeListeners=ld(mf(this.contextWindow,"pointermove",this.handlePointerMove),mf(this.contextWindow,"pointerup",this.handlePointerUp),mf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xo(this.updatePoint)}}function Uv(t,e){return e?{point:e(t.point)}:t}function qI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fv({point:t},e){return{point:t,delta:qI(t,XM(e)),offset:qI(t,BK(e)),velocity:qK(e,.1)}}function BK(t){return t[0]}function XM(t){return t[t.length-1]}function qK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=XM(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>ks(e)));)n--;if(!i)return{x:0,y:0};const o=Vs(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const QM=1e-4,zK=1-QM,GK=1+QM,ZM=.01,HK=0-ZM,jK=0+ZM;function Zi(t){return t.max-t.min}function $K(t,e,n){return Math.abs(t-e)<=n}function zI(t,e,n,i=.5){t.origin=i,t.originPoint=Xt(e.min,e.max,t.origin),t.scale=Zi(n)/Zi(e),t.translate=Xt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zK&&t.scale<=GK||isNaN(t.scale))&&(t.scale=1),(t.translate>=HK&&t.translate<=jK||isNaN(t.translate))&&(t.translate=0)}function gf(t,e,n,i){zI(t.x,e.x,n.x,i?i.originX:void 0),zI(t.y,e.y,n.y,i?i.originY:void 0)}function GI(t,e,n){t.min=n.min+e.min,t.max=t.min+Zi(e)}function KK(t,e,n){GI(t.x,e.x,n.x),GI(t.y,e.y,n.y)}function HI(t,e,n){t.min=e.min-n.min,t.max=t.min+Zi(e)}function yf(t,e,n){HI(t.x,e.x,n.x),HI(t.y,e.y,n.y)}function YK(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Xt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Xt(n,t,i.max):Math.min(t,n)),t}function jI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function JK(t,{top:e,left:n,bottom:i,right:r}){return{x:jI(t.x,n,r),y:jI(t.y,e,i)}}function $I(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function WK(t,e){return{x:$I(t.x,e.x),y:$I(t.y,e.y)}}function XK(t,e){let n=.5;const i=Zi(t),r=Zi(e);return r>i?n=Su(e.min,e.max-i,t.min):i>r&&(n=Su(t.min,t.max-r,e.min)),zs(0,1,n)}function QK(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const W0=.35;function ZK(t=W0){return t===!1?t=0:t===!0&&(t=W0),{x:KI(t,"left","right"),y:KI(t,"top","bottom")}}function KI(t,e,n){return{min:YI(t,e),max:YI(t,n)}}function YI(t,e){return typeof t=="number"?t:t[e]||0}const JI=()=>({translate:0,scale:1,origin:0,originPoint:0}),tu=()=>({x:JI(),y:JI()}),WI=()=>({min:0,max:0}),pn=()=>({x:WI(),y:WI()});function gr(t){return[t("x"),t("y")]}function ek({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function eY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Bv(t){return t===void 0||t===1}function X0({scale:t,scaleX:e,scaleY:n}){return!Bv(t)||!Bv(e)||!Bv(n)}function ka(t){return X0(t)||tk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tk(t){return XI(t.x)||XI(t.y)}function XI(t){return t&&t!=="0%"}function cm(t,e,n){const i=t-n,r=e*i;return n+r}function QI(t,e,n,i,r){return r!==void 0&&(t=cm(t,r,i)),cm(t,n,i)+e}function Q0(t,e=0,n=1,i,r){t.min=QI(t.min,e,n,i,r),t.max=QI(t.max,e,n,i,r)}function nk(t,{x:e,y:n}){Q0(t.x,e.translate,e.scale,e.originPoint),Q0(t.y,n.translate,n.scale,n.originPoint)}const ZI=.999999999999,eR=1.0000000000001;function nY(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&iu(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,nk(t,l)),i&&ka(o.latestValues)&&iu(t,o.latestValues))}e.x<eR&&e.x>ZI&&(e.x=1),e.y<eR&&e.y>ZI&&(e.y=1)}function nu(t,e){t.min=t.min+e,t.max=t.max+e}function tR(t,e,n,i,r=.5){const o=Xt(t.min,t.max,r);Q0(t,e,n,o,i)}function iu(t,e){tR(t.x,e.x,e.scaleX,e.scale,e.originX),tR(t.y,e.y,e.scaleY,e.scale,e.originY)}function ik(t,e){return ek(tY(t.getBoundingClientRect(),e))}function iY(t,e,n){const i=ik(t,n),{scroll:r}=e;return r&&(nu(i.x,r.offset.x),nu(i.y,r.offset.y)),i}const rk=({current:t})=>t?t.ownerDocument.defaultView:null,rY=new WeakMap;class sY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ud(p).point)},o=(p,v)=>{const{drag:T,dragPropagation:b,onDragStart:x}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Xj(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gr(D=>{let O=this.getAxisMotionValue(D).get()||0;if(os.test(O)){const{projection:k}=this.visualElement;if(k&&k.layout){const F=k.layout.layoutBox[D];F&&(O=Zi(F)*(parseFloat(O)/100))}}this.originPoint[D]=O}),x&&jt.postRender(()=>x(p,v)),z0(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},l=(p,v)=>{const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:x,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=v;if(b&&this.currentDirection===null){this.currentDirection=oY(D),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),N&&N(p,v)},c=(p,v)=>this.stop(p,v),f=()=>gr(p=>{var v;return this.getAnimationState(p)==="paused"&&((v=this.getAxisMotionValue(p).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new WM(e,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:rk(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&jt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!jh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=YK(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Zl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=JK(r.layoutBox,n):this.constraints=!1,this.elastic=ZK(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=QK(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=iY(i,r.root,this.visualElement.getTransformPagePoint());let l=WK(r.layout.layoutBox,o);if(n){const c=n(eY(l));this.hasMutatedConstraints=!!c,c&&(l=ek(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=gr(p=>{if(!jh(p,n,this.currentDirection))return;let v=f&&f[p]||{};l&&(v={min:0,max:0});const T=r?200:1e6,b=r?40:1e7,x={type:"inertia",velocity:i?e[p]:0,bounceStiffness:T,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(p,x)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return z0(this.visualElement,e),i.start(gE(e,i,0,n,this.visualElement,!1))}stopAnimation(){gr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){gr(n=>{const{drag:i}=this.getProps();if(!jh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Xt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Zl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();r[l]=XK({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),gr(l=>{if(!jh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];c.set(Xt(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;rY.set(this.visualElement,this);const e=this.visualElement.current,n=mf(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Zl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),jt.read(i);const l=zf(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(gr(p=>{const v=this.getAxisMotionValue(p);v&&(this.originPoint[p]+=f[p].translate,v.set(v.get()+f[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=W0,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function jh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function oY(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class aY extends sa{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new sY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const nR=t=>(e,n)=>{t&&jt.postRender(()=>t(e,n))};class lY extends sa{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new WM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:nR(e),onStart:nR(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&jt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=mf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=iR(t,e.target.x),i=iR(t,e.target.y);return`${n}% ${i}%`}},uY={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Qo.parse(t);if(r.length>5)return i;const o=Qo.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=f;const d=Xt(c,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),o(r)}};class cY extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;Nj(fY),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),bp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,l=i.projection;return l&&(l.isPresent=o,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||jt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),jT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sk(t){const[e,n]=qD(),i=B.useContext(OT);return S.jsx(cY,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(JD),isPresent:e,safeToRemove:n})}const fY={borderRadius:{...Bc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bc,borderTopRightRadius:Bc,borderBottomLeftRadius:Bc,borderBottomRightRadius:Bc,boxShadow:uY};function dY(t,e,n){const i=ui(t)?t:Bf(t);return i.start(gE("",i,e,n)),i.animation}function hY(t){return t instanceof SVGElement&&t.tagName!=="svg"}const pY=(t,e)=>t.depth-e.depth;class mY{constructor(){this.children=[],this.isDirty=!1}add(e){sE(this.children,e),this.isDirty=!0}remove(e){oE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pY),this.isDirty=!1,this.children.forEach(e)}}function gY(t,e){const n=as.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(Xo(i),t(o-e))};return jt.read(i,!0),()=>Xo(i)}const ok=["TopLeft","TopRight","BottomLeft","BottomRight"],yY=ok.length,rR=t=>typeof t=="string"?parseFloat(t):t,sR=t=>typeof t=="number"||Oe.test(t);function vY(t,e,n,i,r,o){r?(t.opacity=Xt(0,n.opacity!==void 0?n.opacity:1,_Y(i)),t.opacityExit=Xt(e.opacity!==void 0?e.opacity:1,0,TY(i))):o&&(t.opacity=Xt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<yY;l++){const c=`border${ok[l]}Radius`;let f=oR(e,c),d=oR(n,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||sR(f)===sR(d)?(t[c]=Math.max(Xt(rR(f),rR(d),i),0),(os.test(d)||os.test(f))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=Xt(e.rotate||0,n.rotate||0,i))}function oR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _Y=ak(0,.5,AM),TY=ak(.5,.95,Qi);function ak(t,e,n){return i=>i<t?0:i>e?1:n(Su(t,e,i))}function aR(t,e){t.min=e.min,t.max=e.max}function mr(t,e){aR(t.x,e.x),aR(t.y,e.y)}function lR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function uR(t,e,n,i,r){return t-=e,t=cm(t,1/n,i),r!==void 0&&(t=cm(t,1/r,i)),t}function EY(t,e=0,n=1,i=.5,r,o=t,l=t){if(os.test(e)&&(e=parseFloat(e),e=Xt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Xt(o.min,o.max,i);t===o&&(c-=e),t.min=uR(t.min,e,n,c,r),t.max=uR(t.max,e,n,c,r)}function cR(t,e,[n,i,r],o,l){EY(t,e[n],e[i],e[r],e.scale,o,l)}const SY=["x","scaleX","originX"],bY=["y","scaleY","originY"];function fR(t,e,n,i){cR(t.x,e,SY,n?n.x:void 0,i?i.x:void 0),cR(t.y,e,bY,n?n.y:void 0,i?i.y:void 0)}function dR(t){return t.translate===0&&t.scale===1}function lk(t){return dR(t.x)&&dR(t.y)}function hR(t,e){return t.min===e.min&&t.max===e.max}function wY(t,e){return hR(t.x,e.x)&&hR(t.y,e.y)}function pR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function uk(t,e){return pR(t.x,e.x)&&pR(t.y,e.y)}function mR(t){return Zi(t.x)/Zi(t.y)}function gR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AY{constructor(){this.members=[]}add(e){sE(this.members,e),e.scheduleRender()}remove(e){if(oE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CY(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:p,rotateX:v,rotateY:T,skewX:b,skewY:x}=n;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),v&&(i+=`rotateX(${v}deg) `),T&&(i+=`rotateY(${T}deg) `),b&&(i+=`skewX(${b}deg) `),x&&(i+=`skewY(${x}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const Va={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ef=typeof window<"u"&&window.MotionDebug!==void 0,qv=["","X","Y","Z"],xY={visibility:"hidden"},yR=1e3;let IY=0;function zv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function ck(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=vM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",jt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&ck(i)}function fk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e==null?void 0:e()){this.id=IY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ef&&(Va.totalNodes=Va.resolvedTargetDeltas=Va.recalculatedProjection=0),this.nodes.forEach(PY),this.nodes.forEach(LY),this.nodes.forEach(OY),this.nodes.forEach(DY),ef&&window.MotionDebug.record(Va)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new mY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new aE),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hY(l),this.instance=l;const{layoutId:f,layout:d,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(d||f)&&(this.isLayoutDirty=!0),t){let v;const T=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=gY(T,250),bp.hasAnimatedSinceResize&&(bp.hasAnimatedSinceResize=!1,this.nodes.forEach(_R))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&p&&(f||d)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:T,hasRelativeTargetChanged:b,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||p.getDefaultTransition()||zY,{onLayoutAnimationStart:D,onLayoutAnimationComplete:O}=p.getProps(),k=!this.targetLayout||!uk(this.targetLayout,x)||b,F=!T&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||F||T&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const $={...tE(N,"layout"),onPlay:D,onComplete:O};(p.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($)}else T||_R(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UY),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ck(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const v=this.path[p];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vR);return}this.isUpdating||this.nodes.forEach(kY),this.isUpdating=!1,this.nodes.forEach(VY),this.nodes.forEach(RY),this.nodes.forEach(NY),this.clearAllSnapshots();const c=as.now();jn.delta=zs(0,1e3/60,c-jn.timestamp),jn.timestamp=c,jn.isProcessing=!0,Dv.update.process(jn),Dv.preRender.process(jn),Dv.render.process(jn),jn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,jT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MY),this.sharedNodes.forEach(FY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!lk(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&(c||ka(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),GY(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return pn();const f=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(HY))){const{scroll:p}=this.root;p&&(nu(f.x,p.offset.x),nu(f.y,p.offset.y))}return f}removeElementScroll(l){var c;const f=pn();if(mr(f,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return f;for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:v,options:T}=p;p!==this.root&&v&&T.layoutScroll&&(v.wasRoot&&mr(f,l),nu(f.x,v.offset.x),nu(f.y,v.offset.y))}return f}applyTransform(l,c=!1){const f=pn();mr(f,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&iu(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ka(p.latestValues)&&iu(f,p.latestValues)}return ka(this.latestValues)&&iu(f,this.latestValues),f}removeTransform(l){const c=pn();mr(c,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!ka(d.latestValues))continue;X0(d.latestValues)&&d.updateSnapshot();const p=pn(),v=d.measurePageBox();mr(p,v),fR(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return ka(this.latestValues)&&fR(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==f;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:T}=this.options;if(!(!this.layout||!(v||T))){if(this.resolvedRelativeTargetAt=jn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),yf(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mr(this.target,this.layout.layoutBox),nk(this.target,this.targetDelta)):mr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),yf(this.relativeTargetOrigin,this.target,b.target),mr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ef&&Va.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||X0(this.parent.latestValues)||tk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),f=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(d=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===jn.timestamp&&(d=!1),d)return;const{layout:p,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||v))return;mr(this.layoutCorrected,this.layout.layoutBox);const T=this.treeScale.x,b=this.treeScale.y;nY(this.layoutCorrected,this.treeScale,this.path,f),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pn());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lR(this.prevProjectionDelta.x,this.projectionDelta.x),lR(this.prevProjectionDelta.y,this.projectionDelta.y)),gf(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==T||this.treeScale.y!==b||!gR(this.projectionDelta.x,this.prevProjectionDelta.x)||!gR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),ef&&Va.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tu(),this.projectionDelta=tu(),this.projectionDeltaWithTransform=tu()}setAnimationOrigin(l,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},v=tu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const T=pn(),b=f?f.source:void 0,x=this.layout?this.layout.source:void 0,N=b!==x,D=this.getStack(),O=!D||D.members.length<=1,k=!!(N&&!O&&this.options.crossfade===!0&&!this.path.some(qY));this.animationProgress=0;let F;this.mixTargetDelta=$=>{const K=$/1e3;TR(v.x,l.x,K),TR(v.y,l.y,K),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BY(this.relativeTarget,this.relativeTargetOrigin,T,K),F&&wY(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=pn()),mr(F,this.relativeTarget)),N&&(this.animationValues=p,vY(p,d,this.latestValues,K,k,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jt.update(()=>{bp.hasAnimatedSinceResize=!0,this.currentAnimation=dY(0,yR,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=l;if(!(!c||!f||!d)){if(this!==l&&this.layout&&d&&dk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||pn();const v=Zi(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+v;const T=Zi(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+T}mr(c,f),iu(c,p),gf(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new AY),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&zv("z",l,d,this.animationValues);for(let p=0;p<qv.length;p++)zv(`rotate${qv[p]}`,l,d,this.animationValues),zv(`skew${qv[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}getProjectionStyles(l){var c,f;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xY;const d={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Ep(l==null?void 0:l.pointerEvents)||"",d.transform=p?p(this.latestValues,""):"none",d;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=Ep(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ka(this.latestValues)&&(N.transform=p?p({},""):"none",this.hasProjected=!1),N}const T=v.animationValues||v.latestValues;this.applyTransformsToTarget(),d.transform=CY(this.projectionDeltaWithTransform,this.treeScale,T),p&&(d.transform=p(T,d.transform));const{x:b,y:x}=this.projectionDelta;d.transformOrigin=`${b.origin*100}% ${x.origin*100}% 0`,v.animationValues?d.opacity=v===this?(f=(c=T.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&f!==void 0?f:1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:d.opacity=v===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const N in sm){if(T[N]===void 0)continue;const{correct:D,applyTo:O}=sm[N],k=d.transform==="none"?T[N]:D(T[N],v);if(O){const F=O.length;for(let $=0;$<F;$++)d[O[$]]=k}else d[N]=k}return this.options.layoutId&&(d.pointerEvents=v===this?Ep(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(vR),this.root.sharedNodes.clear()}}}function RY(t){t.updateLayout()}function NY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,l=n.source!==t.layout.source;o==="size"?gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=Zi(T);T.min=i[v].min,T.max=T.min+b}):dk(o,n.layoutBox,i)&&gr(v=>{const T=l?n.measuredBox[v]:n.layoutBox[v],b=Zi(i[v]);T.max=T.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const c=tu();gf(c,i,n.layoutBox);const f=tu();l?gf(f,t.applyTransform(r,!0),n.measuredBox):gf(f,i,n.layoutBox);const d=!lk(c);let p=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:T,layout:b}=v;if(T&&b){const x=pn();yf(x,n.layoutBox,T.layoutBox);const N=pn();yf(N,i,b.layoutBox),uk(x,N)||(p=!0),v.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=x,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:f,layoutDelta:c,hasLayoutChanged:d,hasRelativeTargetChanged:p})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function PY(t){ef&&Va.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function DY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MY(t){t.clearSnapshot()}function vR(t){t.clearMeasurements()}function kY(t){t.isLayoutDirty=!1}function VY(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _R(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LY(t){t.resolveTargetDelta()}function OY(t){t.calcProjection()}function UY(t){t.resetSkewAndRotation()}function FY(t){t.removeLeadSnapshot()}function TR(t,e,n){t.translate=Xt(e.translate,0,n),t.scale=Xt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ER(t,e,n,i){t.min=Xt(e.min,n.min,i),t.max=Xt(e.max,n.max,i)}function BY(t,e,n,i){ER(t.x,e.x,n.x,i),ER(t.y,e.y,n.y,i)}function qY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zY={duration:.45,ease:[.4,0,.1,1]},SR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),bR=SR("applewebkit/")&&!SR("chrome/")?Math.round:Qi;function wR(t){t.min=bR(t.min),t.max=bR(t.max)}function GY(t){wR(t.x),wR(t.y)}function dk(t,e,n){return t==="position"||t==="preserve-aspect"&&!$K(mR(e),mR(n),.2)}function HY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jY=fk({attachResizeListener:(t,e)=>zf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gv={current:void 0},hk=fk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gv.current){const t=new jY({});t.mount(window),t.setOptions({layoutScroll:!0}),Gv.current=t}return Gv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),$Y={pan:{Feature:lY},drag:{Feature:aY,ProjectionNode:hk,MeasureLayout:sk}};function AR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&jt.postRender(()=>o(e,ud(e)))}class KY extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=$j(e,n=>(AR(this.node,n,"Start"),i=>AR(this.node,i,"End"))))}unmount(){}}class YY extends sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ld(zf(this.node.current,"focus",()=>this.onFocus()),zf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&jt.postRender(()=>o(e,ud(e)))}class JY extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=Wj(e,n=>(CR(this.node,n,"Start"),(i,{success:r})=>CR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Z0=new WeakMap,Hv=new WeakMap,WY=t=>{const e=Z0.get(t.target);e&&e(t)},XY=t=>{t.forEach(WY)};function QY({root:t,...e}){const n=t||document;Hv.has(n)||Hv.set(n,{});const i=Hv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(XY,{root:t,...e})),i[r]}function ZY(t,e,n){const i=QY(e);return Z0.set(t,n),i.observe(t),()=>{Z0.delete(t),i.unobserve(t)}}const eJ={some:0,all:1};class tJ extends sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:eJ[r]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:v}=this.node.getProps(),T=d?p:v;T&&T(f)};return ZY(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nJ(e,n))&&this.startObserver()}unmount(){}}function nJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const iJ={inView:{Feature:tJ},tap:{Feature:JY},focus:{Feature:YY},hover:{Feature:KY}},rJ={layout:{ProjectionNode:hk,MeasureLayout:sk}},e_={current:null},pk={current:!1};function sJ(){if(pk.current=!0,!!BT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>e_.current=t.matches;t.addListener(e),e()}else e_.current=!1}const oJ=[...FM,ri,Qo],aJ=t=>oJ.find(UM(t)),xR=new WeakMap;function lJ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ui(r))t.addValue(i,r);else if(ui(o))t.addValue(i,Bf(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,Bf(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const IR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uJ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=as.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,jt.render(this.render,!1,!0))};const{latestValues:f,renderState:d,onUpdate:p}=l;this.onUpdate=p,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=sg(n),this.isVariantNode=KD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in T){const x=T[b];f[b]!==void 0&&ui(x)&&x.set(f[b],!1)}}mount(e){this.current=e,xR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),pk.current||sJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:e_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){xR.delete(this.current),this.projection&&this.projection.unmount(),Xo(this.notifyUpdate),Xo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=rl.has(e),r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&jt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bu){const n=bu[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<IR.length;i++){const r=IR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=lJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Bf(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LM(r)||xM(r))?r=parseFloat(r):!aJ(r)&&Qo.test(n)&&(r=MM(e,n)),this.setBaseTarget(e,ui(r)?r.get():r)),ui(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=KT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!ui(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new aE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class mk extends uJ{constructor(){super(...arguments),this.KeyframeResolver=BM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ui(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function cJ(t){return window.getComputedStyle(t)}class fJ extends mk{constructor(){super(...arguments),this.type="html",this.renderInstance=nM}readValueFromInstance(e,n){if(rl.has(n)){const i=dE(n);return i&&i.default||0}else{const i=cJ(e),r=(ZD(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ik(e,n)}build(e,n,i){WT(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return eE(e,n,i)}}class dJ extends mk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(rl.has(n)){const i=dE(n);return i&&i.default||0}return n=iM.has(n)?n:HT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return oM(e,n,i)}build(e,n,i){XT(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){rM(e,n,i,r)}mount(e){this.isSVGTag=ZT(e.tagName),super.mount(e)}}const hJ=(t,e)=>$T(t)?new dJ(e):new fJ(e,{allowProjection:t!==B.Fragment}),pJ=Fj({...OK,...iJ,...$Y,...rJ},hJ),mJ=ej(pJ),gJ=()=>S.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-800 rounded-lg aspect-square relative overflow-hidden",children:S.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12 translate-x-[-100%] animate-shimmer"})}),yJ=({imageSrc:t,analysis:e,onClick:n,onRemove:i,isSelected:r,isSet:o,isFavorite:l})=>S.jsxs("div",{onClick:n,className:"group relative aspect-square bg-raisin-black rounded-lg overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 cursor-pointer",children:[S.jsx("img",{src:t,alt:e,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}),S.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${r?"ring-4 ring-gold":"ring-2 ring-transparent"} rounded-lg`}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),r?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(VT,{})}):l?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Of,{className:"w-4 h-4"})}):o?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(tg,{})}):null,S.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:S.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:e})}),S.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-red-500","aria-label":"Supprimer",children:S.jsx(eg,{})})]}),vJ={Hauts:{color:"Toutes",material:"Toutes"},Bas:{color:"Toutes",material:"Toutes"},Chaussures:{color:"Toutes",material:"Toutes"},Accessoires:{color:"Toutes",material:"Toutes"}},_J=({clothingItems:t,isLoading:e,clothingSets:n=[],onItemClick:i,onDeleteItem:r,onCreateSet:o})=>{var Z,pe;const[l,c]=B.useState("Hauts"),[f,d]=B.useState(vJ),[p,v]=B.useState(""),[T,b]=B.useState("favorites"),[x,N]=B.useState(!1),[D,O]=B.useState(new Set),k=B.useMemo(()=>n||[],[n]),F=B.useMemo(()=>new Set(k.flatMap(ne=>ne.itemIds||[])),[k]),$=t.length,K=[{name:"Hauts",icon:S.jsx(D7,{})},{name:"Bas",icon:S.jsx(M7,{})},{name:"Chaussures",icon:S.jsx(k7,{})},{name:"Accessoires",icon:S.jsx(V7,{})}],G=[{value:"favorites",label:"Favoris d'abord"},{value:"newest",label:"Plus rcents"},{value:"oldest",label:"Plus anciens"},{value:"color",label:"Couleur (A-Z)"},{value:"category",label:"Catgorie"}],I=ne=>{x?O(he=>{const Ee=new Set(he);return Ee.has(ne.id)?Ee.delete(ne.id):Ee.add(ne.id),Ee}):i(ne)},R=(ne,he)=>{ne.stopPropagation(),D.has(he)&&O(Ee=>{const Ve=new Set(Ee);return Ve.delete(he),Ve}),r(he)},P=ne=>[...ne].sort((he,Ee)=>{switch(T){case"favorites":return(Ee.isFavorite?1:0)-(he.isFavorite?1:0);case"newest":return(Ee.createdAt||0)-(he.createdAt||0);case"oldest":return(he.createdAt||0)-(Ee.createdAt||0);case"color":return he.color.localeCompare(Ee.color);case"category":return he.category.localeCompare(Ee.category);default:return 0}}),V=B.useMemo(()=>{if(!p.trim())return t;const ne=p.toLowerCase();return t.filter(he=>he.analysis.toLowerCase().includes(ne)||he.color.toLowerCase().includes(ne)||he.material.toLowerCase().includes(ne)||he.category.toLowerCase().includes(ne))},[t,p]),U=B.useMemo(()=>{if(!l)return[];const ne=V.filter(Ee=>Ee.category===l),he=f[l];return he?ne.filter(Ee=>{const Ve=he.color==="Toutes"||Ee.color===he.color,Be=he.material==="Toutes"||Ee.material===he.material;return Ve&&Be}):ne},[V,l,(Z=f[l])==null?void 0:Z.color,(pe=f[l])==null?void 0:pe.material]),q=B.useMemo(()=>P(U),[U,T]),z=B.useMemo(()=>K.reduce((ne,{name:he})=>(ne[he]=V.filter(Ee=>Ee.category===he).length,ne),{}),[V]),xe=B.useMemo(()=>{if(!l)return[];const ne=V.filter(he=>he.category===l).map(he=>he.color);return["Toutes",...Array.from(new Set(ne))]},[V,l]),ke=B.useMemo(()=>{if(!l)return[];const ne=V.filter(he=>he.category===l).map(he=>he.material);return["Toutes",...Array.from(new Set(ne))]},[V,l]),ee=ne=>{l&&d(he=>({...he,[l]:{...he[l],color:ne}}))},ae=ne=>{l&&d(he=>({...he,[l]:{...he[l],material:ne}}))},me=ne=>{c(l===ne?null:ne)},Ce=()=>{N(!x),O(new Set)},Ie=()=>{if(D.size<2){alert("Veuillez slectionner au moins 2 articles pour crer un ensemble.");return}const ne=window.prompt("Donnez un nom  cet ensemble :");ne&&(o(ne,Array.from(D)),Ce())},j=()=>{v("")};return e?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl p-6 lg:p-8",children:[S.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[S.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),S.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[...Array(10)].map((ne,he)=>S.jsx(gJ,{},he))})]}):$===0?S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-8 text-center",children:[S.jsx(dI,{className:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),S.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-700 dark:text-gray-300",children:"Votre garde-robe est vide"}),S.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Ajoutez vos premiers vtements pour commencer  crer vos tenues !"})]}):S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl shadow-black/10 dark:shadow-black/20 ring-1 ring-black/5 dark:ring-white/10 p-6 lg:p-8",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(dI,{className:"w-8 h-8 text-gold"}),S.jsxs("div",{children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold tracking-tight",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[$," vtement",$>1?"s":""]})]})]}),x?S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[S.jsx("button",{onClick:Ce,className:"flex-shrink-0 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors text-sm font-medium",children:"Annuler"}),S.jsxs("button",{onClick:Ie,disabled:D.size<2,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 text-sm disabled:opacity-50",children:["Valider (",D.size,")"]})]}):S.jsxs("button",{onClick:Ce,className:"flex-shrink-0 flex items-center justify-center gap-2 px-4 py-2 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300 text-sm",children:[S.jsx(tg,{}),"Crer un ensemble"]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[S.jsxs("div",{className:"relative flex-1",children:[S.jsx(FD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:p,onChange:ne=>v(ne.target.value),placeholder:"Rechercher par description, couleur, matire...",className:"w-full pl-10 pr-10 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),p&&S.jsx("button",{onClick:j,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer la recherche",children:S.jsx(eg,{})})]}),S.jsxs("div",{className:"relative sm:w-48",children:[S.jsx(BD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsx("select",{value:T,onChange:ne=>b(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-snow dark:bg-onyx border border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:G.map(ne=>S.jsx("option",{value:ne.value,children:ne.label},ne.value))}),S.jsx(im,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),p&&S.jsxs("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:[V.length," rsultat",V.length>1?"s":"",' pour "',p,'"']}),x&&S.jsxs("div",{className:"bg-gold/10 border border-gold/30 text-gold-dark dark:text-gold p-4 rounded-lg mb-6 text-center",children:[S.jsx("p",{className:"font-semibold",children:"Mode Cration d'Ensemble"}),S.jsx("p",{className:"text-sm",children:"Slectionnez les articles que vous souhaitez lier."})]}),S.jsx("div",{className:"space-y-6",children:K.map(({name:ne,icon:he})=>{const Ee=z[ne]||0,Ve=l===ne;return S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-lg overflow-hidden",children:[S.jsxs("button",{onClick:()=>me(ne),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900/50 hover:bg-gray-100 dark:hover:bg-gray-900 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("span",{className:"w-5 h-5 text-gold",children:he}),S.jsx("span",{className:"font-semibold text-lg",children:ne}),S.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",Ee,")"]})]}),S.jsx(im,{className:`w-5 h-5 transition-transform ${Ve?"rotate-180":""}`})]}),Ve&&S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap gap-4",children:[S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Couleur"}),S.jsx("select",{value:f[ne].color,onChange:Be=>ee(Be.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:xe.map(Be=>S.jsx("option",{value:Be,children:Be},Be))})]}),S.jsxs("div",{className:"flex-1 min-w-[150px]",children:[S.jsx("label",{className:"block text-sm font-medium mb-2",children:"Matire"}),S.jsx("select",{value:f[ne].material,onChange:Be=>ae(Be.target.value),className:"w-full px-4 py-2 border border-black/10 dark:border-white/10 rounded-lg bg-white dark:bg-gray-900 focus:ring-2 focus:ring-gold focus:border-transparent",children:ke.map(Be=>S.jsx("option",{value:Be,children:Be},Be))})]})]}),q.length>0?S.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:S.jsx($7,{mode:"popLayout",children:q.map((Be,Tt)=>S.jsx(mJ.div,{layout:!0,initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{duration:.4,delay:Tt*.05,type:"spring",bounce:.3},children:S.jsx(yJ,{imageSrc:Be.imageSrc,analysis:Be.analysis,onClick:()=>I(Be),onRemove:Nn=>R(Nn,Be.id),isSelected:D.has(Be.id),isSet:F.has(Be.id),isFavorite:Be.isFavorite})},Be.id))})}):S.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Aucun vtement ne correspond aux filtres slectionns."})]})]},ne)})})]})},gk=({clothingItems:t,clothingSets:e,onGenerate:n,isGenerating:i,weatherInfo:r,weatherError:o})=>{const[l,c]=In.useState(""),f=p=>{p.preventDefault(),n(l||"Casual")},d=["Casual","Soire chic","Travail (formel)"];return S.jsxs("div",{children:[S.jsxs("div",{className:"text-center mb-6 p-3 rounded-lg bg-snow dark:bg-onyx border border-black/10 dark:border-white/10",children:[r&&S.jsxs("p",{className:"text-sm font-medium text-blue-500 dark:text-blue-400",children:["Mto : ",r," "]}),o&&S.jsx("p",{className:"text-sm font-medium text-red-500",children:o}),!r&&!o&&S.jsx("p",{className:"text-sm font-medium text-gray-400 animate-pulse",children:"Rcupration de la mto..."})]}),S.jsx("form",{onSubmit:f,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"occasion",className:"block text-sm font-medium text-center text-gray-500 dark:text-gray-400 mb-3",children:"Pour quelle occasion ?"}),S.jsx("div",{className:"flex justify-center gap-2 mb-4",children:d.map(p=>S.jsx("button",{type:"button",onClick:()=>c(p),className:`px-4 py-1.5 rounded-full text-sm font-semibold transition-colors duration-200 ${l===p?"bg-gold text-onyx":"bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 hover:border-gold dark:hover:border-gold text-gray-700 dark:text-gray-300"}`,disabled:i,children:p},p))}),S.jsx("input",{id:"occasion",type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Ou dcrivez... (ex: Brunch dcontract)",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i})]}),S.jsxs("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(MT,{}),i?"Gnration...":"Gnrer des Tenues"]})]})})]})},TJ=({outfits:t,allClothingItems:e,allClothingSets:n,favoriteOutfits:i,onToggleFavorite:r,onGenerateVisual:o,generatingVisualFor:l})=>{const[c,f]=B.useState(null);B.useEffect(()=>{if(!c)return;const p=v=>{v.key==="Escape"&&f(null)};return window.addEventListener("keydown",p),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",p),document.body.style.overflow="auto"}},[c]);const d=p=>{const{id:v,description:T}=p,b=v?v.trim():"",x=T?T.trim().toLowerCase():"";let N=e.find(O=>O.id===b);if(N)return N;let D=n.find(O=>O.id===b);if(D)return D;if(b&&(N=e.find(O=>O.analysis.toLowerCase().includes(b.toLowerCase())),N)||x&&(N=e.find(O=>{const k=O.analysis.toLowerCase();return k.includes(x)||x.includes(k)}),N))return N};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mt-10 space-y-8",children:t.map((p,v)=>{const T=i.some(x=>x.titre===p.titre&&x.description===p.description),b=l===p.titre;return S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5 transition-all duration-300 hover:shadow-lg hover:border-gold/50",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:p.titre}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>o(p),disabled:b,className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors disabled:cursor-not-allowed","aria-label":"Gnrer un rendu visuel",title:"Gnrer un rendu visuel",children:b?S.jsx(OD,{className:"h-5 w-5"}):S.jsx(U7,{})}),S.jsx("button",{onClick:()=>r(p),className:"p-1.5 text-gray-400 hover:text-gold dark:hover:text-gold transition-colors","aria-label":T?"Retirer des favoris":"Ajouter aux favoris",children:T?S.jsx(Of,{className:"w-6 h-6 text-gold"}):S.jsx(LT,{className:"w-6 h-6"})})]})]}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:p.description}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:p.vetements.map((x,N)=>{const D=d(x),O=D?D.imageSrc:null;return S.jsx("button",{onClick:()=>O&&f(O),className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden transition-transform duration-300 hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-onyx disabled:cursor-default disabled:hover:scale-100 relative group",disabled:!O,"aria-label":`Agrandir l'image de : ${x.description}`,title:x.description,children:O?S.jsx("img",{src:O,alt:x.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(UD,{})})},N)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:p.vetements.map((x,N)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:x.description},N))})]},v)})}),c&&S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:()=>f(null),role:"dialog","aria-modal":"true",children:S.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[S.jsx("img",{src:c,alt:"Vue agrandie",className:"max-w-[90vw] max-h-[85vh] object-contain rounded-lg shadow-2xl"}),S.jsx("button",{onClick:()=>f(null),className:"absolute -top-3 -right-3 p-1.5 bg-raisin-black border-2 border-white dark:border-onyx rounded-full text-white hover:bg-red-500 hover:scale-110 transition-all focus:outline-none focus:ring-2 focus:ring-gold","aria-label":"Fermer",children:S.jsx(kT,{})})]})})]})},fm=B.memo(TJ),EJ=({item:t,clothingSets:e,onClose:n,onUpdate:i,onGenerateFrom:r,onRemoveSet:o,onDelete:l})=>{const[c,f]=B.useState({analysis:t.analysis,category:t.category,color:t.color,material:t.material}),[d,p]=B.useState(!1),v=e.find(D=>D.itemIds.includes(t.id));B.useEffect(()=>{f({analysis:t.analysis,category:t.category,color:t.color,material:t.material})},[t]),B.useEffect(()=>{const D=F=>{F.key==="Escape"&&n()};document.body.style.overflow="hidden",window.addEventListener("keydown",D);const O=document.querySelector('[role="dialog"]'),k=O==null?void 0:O.querySelector("button, input, textarea, select");return k==null||k.focus(),()=>{document.body.style.overflow="auto",window.removeEventListener("keydown",D)}},[n]);const T=D=>{const{name:O,value:k}=D.target;f(F=>({...F,[O]:k}))},b=D=>{D.preventDefault(),i({...t,...c}),p(!0),setTimeout(()=>{p(!1)},2e3)},x=()=>{window.confirm("tes-vous sr de vouloir supprimer cet article ? Cette action est irrversible.")&&(l(t.id),n())},N=D=>{D.stopPropagation(),i({...t,isFavorite:!t.isFavorite})};return S.jsx("div",{className:"fixed inset-0 bg-onyx/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"clothing-item-title",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:t.imageSrc,alt:t.analysis,className:"w-full h-auto max-h-[50vh] object-cover"}),S.jsx("button",{onClick:N,className:"absolute top-3 left-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors","aria-label":"Ajouter aux favoris",children:t.isFavorite?S.jsx(Of,{className:"w-6 h-6 text-red-500"}):S.jsx(LT,{className:"w-6 h-6"})}),S.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1.5 bg-black/40 backdrop-blur-sm rounded-full text-white hover:bg-black/60 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gold dark:focus:ring-offset-raisin-black","aria-label":"Fermer la vue dtaille",children:S.jsx(kT,{})})]}),S.jsxs("form",{onSubmit:b,className:"p-6 overflow-y-auto flex-grow flex flex-col",children:[S.jsxs("div",{className:"space-y-4 flex-grow",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"analysis",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),S.jsx("textarea",{id:"analysis",name:"analysis",value:c.analysis,onChange:T,rows:3,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Catgorie"}),S.jsx("select",{id:"category",name:"category",value:c.category,onChange:T,className:"mt-1 w-full appearance-none px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow",children:["Hauts","Bas","Chaussures","Accessoires"].map(D=>S.jsx("option",{value:D,children:D},D))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Couleur"}),S.jsx("input",{type:"text",id:"color",name:"color",value:c.color,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Matire"}),S.jsx("input",{type:"text",id:"material",name:"material",value:c.material,onChange:T,className:"mt-1 w-full px-3 py-2 bg-snow dark:bg-onyx border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-1 focus:ring-gold focus:border-gold transition-colors text-sm text-raisin-black dark:text-snow"})]})]}),v&&S.jsxs("div",{className:"bg-gold/10 dark:bg-gold/20 p-3 rounded-lg flex items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-xs font-semibold text-gold uppercase tracking-wider",children:"Fait partie de l'ensemble"}),S.jsx("p",{className:"font-medium text-onyx dark:text-snow truncate",title:v.name,children:v.name})]}),S.jsxs("button",{type:"button",onClick:()=>{o(v.id),n()},className:"flex-shrink-0 flex items-center gap-2 px-3 py-1.5 text-sm font-semibold bg-white dark:bg-onyx text-rose-500 border border-rose-500/50 rounded-md hover:bg-rose-500 hover:text-white transition-colors",title:"Dissocier l'ensemble",children:[S.jsx(L7,{}),S.jsx("span",{children:"Dissocier"})]})]})]}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-black/10 dark:border-white/10 flex flex-col sm:flex-row gap-3 justify-between",children:[S.jsxs("button",{type:"button",onClick:x,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500/10 text-red-500 font-bold rounded-lg hover:bg-red-500/20 transition-all duration-300",children:[S.jsx(eg,{}),"Supprimer"]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[S.jsxs("button",{type:"button",onClick:()=>r(t),className:"w-full sm:w-auto flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-onyx dark:bg-snow border-2 border-gold text-gold dark:text-onyx font-bold rounded-lg hover:bg-gold/10 dark:hover:bg-onyx/10 transition-all duration-300",children:[S.jsx(MT,{}),"Crer une tenue"]}),S.jsx("button",{type:"submit",disabled:d,className:`w-full sm:w-auto px-6 py-2.5 font-bold rounded-lg transition-all duration-300 flex items-center justify-center gap-2 ${d?"bg-green-600 text-white cursor-not-allowed":"bg-gold text-onyx hover:bg-gold-dark"}`,children:d?S.jsxs(S.Fragment,{children:[S.jsx(VT,{}),"Enregistr !"]}):"Enregistrer"})]})]})]})]})})},yk=({clothingItems:t,clothingSets:e,onGeneratePlan:n,isGenerating:i})=>{const[r,o]=B.useState(3),[l,c]=B.useState(""),[f,d]=B.useState(""),p=v=>{v.preventDefault();const T=l||"",b=f?parseFloat(f):void 0;T.trim()&&r>0&&n(r,T,b)};return S.jsxs("form",{onSubmit:p,className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"days",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Dure (jours)"}),S.jsx("input",{id:"days",type:"number",value:r,onChange:v=>o(parseInt(v.target.value,10)||1),min:"1",max:"30",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i,required:!0})]}),S.jsxs("div",{className:"sm:col-span-1",children:[S.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Poids max (kg)"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{id:"weight",type:"number",value:f,onChange:v=>d(v.target.value),placeholder:"Optionnel",min:"1",max:"50",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center",disabled:i}),S.jsx("span",{className:"absolute right-3 top-3.5 text-gray-400 text-sm",children:"kg"})]})]}),S.jsxs("div",{className:"sm:col-span-2",children:[S.jsx("label",{htmlFor:"vacation-context",className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 text-center sm:text-left",children:"Destination / Mto"}),S.jsx("input",{id:"vacation-context",type:"text",value:l,onChange:v=>c(v.target.value),placeholder:"Ex: Weekend  Rome, temps doux",className:"w-full px-4 py-3 bg-snow dark:bg-onyx border-2 border-gray-200 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-colors text-center sm:text-left",disabled:i,required:!0})]})]}),S.jsxs("button",{type:"submit",disabled:i||!(l||"").trim()||r<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed transform hover:scale-105",children:[S.jsx(O7,{}),i?"Analyse du poids...":"Gnrer la valise"]})]})},vk=({plan:t,allClothingItems:e,allClothingSets:n})=>{const i=r=>{const{id:o,description:l}=r;let c=e.find(d=>d.id===o);if(c)return c;let f=n.find(d=>d.id===o);if(f)return f;if(c=e.find(d=>d.analysis===o),c||(c=e.find(d=>d.analysis===l),c))return c};return S.jsx("div",{className:"mt-10",children:S.jsxs("div",{className:"bg-snow dark:bg-onyx border border-black/10 dark:border-white/10 rounded-lg p-5",children:[S.jsx("h3",{className:"font-serif font-bold text-xl text-gold",children:t.titre}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-5",children:t.resume}),S.jsx("div",{className:"flex flex-wrap gap-3 mb-5",children:t.valise.map((r,o)=>{const l=i(r),c=l?l.imageSrc:null;return S.jsxs("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-800 rounded-md shadow-md border-2 border-white dark:border-raisin-black overflow-hidden relative group",title:r.description,children:[c?S.jsx("img",{src:c,alt:r.description,className:"w-full h-full object-cover"}):S.jsx("div",{className:"w-full h-full flex items-center justify-center p-1 text-center",children:S.jsx(UD,{})}),S.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-2",children:S.jsx("p",{className:"text-white text-xs text-center line-clamp-3",children:r.description})})]},o)})}),S.jsx("ul",{className:"list-disc list-inside space-y-1.5 text-sm pt-4 border-t border-black/5 dark:border-white/10",children:t.valise.map((r,o)=>S.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:r.description},o))})]})})},t_={light:()=>{"vibrate"in navigator&&navigator.vibrate(10)},medium:()=>{"vibrate"in navigator&&navigator.vibrate(20)},success:()=>{"vibrate"in navigator&&navigator.vibrate([10,50,10])},error:()=>{"vibrate"in navigator&&navigator.vibrate([50,30,50])}},SJ=({onFilesSelected:t,isAnalyzing:e,isOtherModalOpen:n})=>{const[i,r]=B.useState(!1),o=B.useRef(null),l=B.useRef(null),c=v=>{const T=Array.from(v.target.files||[]);T.length>0&&(t_.success(),t(T),r(!1)),v.target.value=""},f=()=>{t_.medium(),r(!i)},d=()=>{var v;(v=o.current)==null||v.click()},p=()=>{var v;(v=l.current)==null||v.click()};return n?null:S.jsxs(S.Fragment,{children:[S.jsx("input",{ref:o,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),S.jsx("input",{ref:l,type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"}),i&&S.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>r(!1)}),S.jsxs("div",{className:"md:hidden fixed bottom-24 right-6 z-40",children:[S.jsxs("div",{className:`absolute bottom-20 right-0 transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-75 translate-y-4 pointer-events-none"}`,children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl border border-black/10 dark:border-white/10 overflow-hidden w-56",children:[S.jsxs("button",{type:"button",onClick:d,className:"w-full flex items-center gap-3 p-4 hover:bg-gold/10 active:bg-gold/20 transition-colors cursor-pointer border-b border-black/5 dark:border-white/5 text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gold rounded-full flex items-center justify-center flex-shrink-0",children:S.jsxs("svg",{className:"w-5 h-5 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Appareil Photo"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Prendre une photo"})]})]}),S.jsxs("button",{type:"button",onClick:p,className:"w-full flex items-center gap-3 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 active:bg-gray-200 dark:active:bg-gray-700 transition-colors cursor-pointer text-left",children:[S.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-sm",children:"Galerie"}),S.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Choisir des photos"})]})]})]}),S.jsx("div",{className:"absolute -bottom-2 right-6 w-4 h-4 bg-white dark:bg-raisin-black rotate-45 border-r border-b border-black/10 dark:border-white/10"})]}),S.jsx("button",{onClick:f,disabled:e,className:`
            relative w-16 h-16 
            bg-gradient-to-r from-gold to-gold-dark text-onyx 
            rounded-full shadow-2xl 
            transition-all duration-300 ease-out
            flex items-center justify-center
            disabled:opacity-50 disabled:cursor-not-allowed 
            active:scale-90
            ${i?"rotate-45 shadow-gold/50 ring-4 ring-gold/30":"rotate-0 hover:scale-105 hover:shadow-gold/30"}
          `,"aria-label":i?"Fermer le menu":"Ajouter un vtement",children:e?S.jsxs("svg",{className:"animate-spin h-8 w-8",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-8 h-8 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]})},bJ=({onAnalyzeWardrobe:t,onScrollToOutfits:e,onScrollToVacation:n,onStartSetCreation:i,onShowFavorites:r,isAnalyzingWardrobe:o,clothingCount:l,favoriteOutfitCount:c})=>S.jsxs("div",{className:"space-y-4 pb-24",children:[S.jsxs("div",{className:"text-center py-6",children:[S.jsxs("h2",{className:"text-3xl font-serif font-bold mb-2",children:[S.jsx("span",{className:"text-gold",children:"Ma"})," Garde-Robe"]}),S.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[l," vtement",l>1?"s":""," dans votre collection"]})]}),S.jsxs("div",{className:"space-y-3 px-4",children:[l>=3&&S.jsx("button",{onClick:t,disabled:o,className:"w-full bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-2xl p-5 text-left transition-all active:scale-98 disabled:opacity-50",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gold rounded-xl flex items-center justify-center flex-shrink-0",children:o?S.jsxs("svg",{className:"animate-spin h-6 w-6 text-onyx",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Analyser ma garde-robe"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour plus de polyvalence"})]})]})}),S.jsx("button",{onClick:e,className:"w-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-2 border-purple-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Crateur de Tenues"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gnrez des looks personnaliss avec l'IA"})]})]})}),S.jsx("button",{onClick:n,className:"w-full bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-2 border-blue-500/30 rounded-2xl p-5 text-left transition-all active:scale-98",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center flex-shrink-0",children:S.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h3",{className:"text-lg font-bold mb-1",children:" Planificateur de Valise"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prparez votre valise optimale pour votre voyage"})]})]})})]}),S.jsx("div",{className:"px-4 pt-6",children:S.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-2xl p-4",children:[S.jsx("h4",{className:"font-semibold mb-3 text-sm text-gray-600 dark:text-gray-400",children:"Aperu rapide"}),S.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center",children:[S.jsx("p",{className:"text-2xl font-bold text-gold",children:l}),S.jsx("p",{className:"text-xs text-gray-500",children:"Vtements"})]}),S.jsxs("button",{onClick:i,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsx("div",{className:"text-green-500",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.536a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),S.jsx("p",{className:"text-xs text-gray-500 mt-1.5 font-medium",children:"Crer un ensemble"})]}),S.jsxs("button",{onClick:r,className:"bg-white dark:bg-raisin-black rounded-xl p-3 text-center flex flex-col items-center justify-center hover:bg-gray-50 dark:hover:bg-raisin-black/50 transition-colors active:scale-95",children:[S.jsxs("div",{className:"text-red-500",children:[S.jsx(LT,{})," "]}),S.jsx("p",{className:"text-2xl font-bold",children:c}),S.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-medium",children:"Favorites"})]})]})]})})]}),wJ=({activeTab:t,onTabChange:e,counts:n})=>{const i=[{id:"home",label:"Home",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),count:null},{id:"hauts",label:"Hauts",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),count:n.hauts},{id:"bas",label:"Bas",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),count:n.bas},{id:"chaussures",label:"Chaussures",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5"})}),count:n.chaussures},{id:"accessoires",label:"Accessoires",icon:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),count:n.accessoires}];return S.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-raisin-black border-t border-black/10 dark:border-white/10 z-30 pb-8",children:S.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(r=>{const o=t===r.id;return S.jsxs("button",{onClick:()=>{t_.light(),e(r.id)},className:`flex flex-col items-center justify-center gap-1 px-3 py-2 transition-all flex-1 ${o?"text-gold":"text-gray-500 dark:text-gray-400"}`,children:[S.jsxs("div",{className:"relative",children:[r.icon,r.count!==null&&r.count>0&&S.jsx("span",{className:`absolute -top-1 -right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full ${o?"bg-gold text-onyx":"bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300"}`,children:r.count})]}),S.jsx("span",{className:`text-xs font-medium ${o?"font-bold":""}`,children:r.label})]},r.id)})})})},AJ=({analysis:t,onClose:e})=>{if(!t)return null;const n={high:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20",medium:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20",low:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20"},i={high:"Priorit haute",medium:"Priorit moyenne",low:"Bonne ide"};return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white dark:bg-raisin-black rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[S.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-gold to-gold-dark p-6 rounded-t-2xl",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h2",{className:"text-2xl font-serif font-bold text-onyx",children:" Suggestions d'Achats"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-black/10 rounded-full transition",children:S.jsx("svg",{className:"w-6 h-6 text-onyx",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),S.jsxs("div",{className:"p-6 space-y-6",children:[S.jsxs("div",{className:"bg-gold/5 border border-gold/20 rounded-xl p-4",children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:" Analyse de votre garde-robe"}),S.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.summary})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-green-500",children:""})," Points forts"]}),S.jsx("div",{className:"grid gap-2",children:t.strengths.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-green-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[S.jsx("span",{className:"text-orange-500",children:""})," Opportunits d'amlioration"]}),S.jsx("div",{className:"grid gap-2",children:t.gaps.map((r,o)=>S.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[S.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),S.jsx("span",{children:r})]},o))})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-semibold text-xl mb-4 flex items-center gap-2",children:[S.jsx("span",{children:""})," Pices recommandes"]}),S.jsx("div",{className:"grid gap-4",children:t.suggestions.map((r,o)=>S.jsxs("div",{className:"border border-black/10 dark:border-white/10 rounded-xl p-5 hover:shadow-lg transition-shadow",children:[S.jsxs("div",{className:"flex justify-between items-start mb-3",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-lg",children:r.description}),S.jsx("p",{className:"text-sm text-gray-500",children:r.category})]}),S.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${n[r.priority]}`,children:i[r.priority]})]}),S.jsxs("p",{className:"text-sm mb-3 text-gray-700 dark:text-gray-300",children:[S.jsx("span",{className:"font-semibold",children:"Pourquoi ?"})," ",r.reason]}),r.estimatedPrice&&S.jsxs("div",{className:"flex items-center gap-2 text-sm text-gold font-semibold",children:[S.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.estimatedPrice]})]},o))})]})]})]})})};var CJ=xJ()?B.useLayoutEffect:B.useEffect;function xJ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function IJ(){var t=B.useState(Object.create(null)),e=t[1];return B.useCallback(function(){e(Object.create(null))},[])}var RJ=v1(),NJ=function(e){var n=e.children,i=e.type,r=i===void 0?"reach-portal":i,o=B.useRef(null),l=B.useRef(null),c=IJ();return CJ(function(){if(o.current){var f=o.current.ownerDocument;return l.current=f==null?void 0:f.createElement(r),f.body.appendChild(l.current),c(),function(){l.current&&l.current.ownerDocument&&l.current.ownerDocument.body.removeChild(l.current)}}},[r,c]),l.current?RJ.createPortal(n,l.current):B.createElement("span",{ref:o})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ye.apply(this,arguments)};function yE(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function ut(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o}function zt(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Pt;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Pt||(Pt={}));var Au;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Au||(Au={}));var n_=Pt.Start,vE=Pt.Stop,cd=Pt.Raise,lg=Pt.Send,_k=Pt.Cancel,PJ=Pt.NullEvent,_E=Pt.Assign;Pt.After;Pt.DoneState;var Tk=Pt.Log,DJ=Pt.Init,i_=Pt.Invoke;Pt.ErrorExecution;var RR=Pt.ErrorPlatform,MJ=Pt.ErrorCustom,Ek=Pt.Update,kJ=Pt.Choose,VJ=Pt.Pure,Sk=".",NR={},r_="xstate.guard",LJ="",$h;function TE(t,e,n){n===void 0&&(n=Sk);var i=vf(t,n),r=vf(e,n);return St(r)?St(i)?r===i:!1:St(i)?i in r:Object.keys(i).every(function(o){return o in r?TE(i[o],r[o]):!1})}function bk(t){try{return St(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function s_(t,e){try{return qu(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function OJ(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function vf(t,e){if(OJ(t))return t.value;if(qu(t))return dm(t);if(typeof t!="string")return t;var n=s_(t,e);return dm(n)}function dm(t){if(t.length===1)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function tf(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function PR(t,e,n){var i,r,o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var f=c.value,d=t[f];n(d)&&(o[f]=e(d,f,t))}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}var UJ=function(t){return function(e){var n,i,r=e;try{for(var o=ut(t),l=o.next();!l.done;l=o.next()){var c=l.value;r=r[c]}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function FJ(t,e){return function(n){var i,r,o=n;try{for(var l=ut(t),c=l.next();!c.done;c=l.next()){var f=c.value;o=o[e][f]}}catch(d){i={error:d}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}}function wp(t){if(!t)return[[]];if(St(t))return[[t]];var e=Wt(Object.keys(t).map(function(n){var i=t[n];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[n]]:wp(t[n]).map(function(r){return[n].concat(r)})}));return e}function Wt(t){var e;return(e=[]).concat.apply(e,zt([],gt(t),!1))}function wk(t){return qu(t)?t:[t]}function Pr(t){return t===void 0?[]:wk(t)}function hm(t,e,n){var i,r;if(_t(t))return t(e,n.data);var o={};try{for(var l=ut(Object.keys(t)),c=l.next();!c.done;c=l.next()){var f=c.value,d=t[f];_t(d)?o[f]=d(e,n.data):o[f]=d}}catch(p){i={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return o}function BJ(t){return/^(done|error)\./.test(t)}function DR(t){return!!(t instanceof Promise||t!==null&&(_t(t)||typeof t=="object")&&_t(t.then))}function qJ(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function zJ(t,e){var n,i,r=gt([[],[]],2),o=r[0],l=r[1];try{for(var c=ut(t),f=c.next();!f.done;f=c.next()){var d=f.value;e(d)?o.push(d):l.push(d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}function Ak(t,e){return tf(t.states,function(n,i){if(n){var r=(St(e)?void 0:e[i])||(n?n.current:void 0);if(r)return{current:r,states:Ak(n,r)}}})}function GJ(t,e){return{current:e,states:Ak(t,e)}}function MR(t,e,n,i){var r=t&&n.reduce(function(o,l){var c,f,d=l.assignment,p={state:i,action:l,_event:e},v={};if(_t(d))v=d(o,e.data,p);else try{for(var T=ut(Object.keys(d)),b=T.next();!b.done;b=T.next()){var x=b.value,N=d[x];v[x]=_t(N)?N(o,e.data,p):N}}catch(D){c={error:D}}finally{try{b&&!b.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}return Object.assign({},o,v)},t);return r}var HJ=function(){};function qu(t){return Array.isArray(t)}function _t(t){return typeof t=="function"}function St(t){return typeof t=="string"}function Ck(t,e){if(t)return St(t)?{type:r_,name:t,predicate:e?e[t]:void 0}:_t(t)?{type:r_,name:t.name,predicate:t}:t}function jJ(t){try{return"subscribe"in t&&_t(t.subscribe)}catch{return!1}}var Mo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();$h={},$h[Mo]=function(){return this},$h[Symbol.observable]=function(){return this};function Cu(t){return!!t&&"__xstatenode"in t}function $J(t){return!!t&&typeof t.send=="function"}function ug(t,e){return St(t)||typeof t=="number"?ye({type:t},e):t}function Hn(t,e){if(!St(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=ug(t);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function zl(t,e){var n=wk(e).map(function(i){return typeof i>"u"||typeof i=="string"||Cu(i)?{target:i,event:t}:ye(ye({},i),{event:t})});return n}function KJ(t){if(!(t===void 0||t===LJ))return Pr(t)}function xk(t,e,n,i,r){var o=t.options.guards,l={state:r,cond:e,_event:i};if(e.type===r_)return((o==null?void 0:o[e.name])||e.predicate)(n,i.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,i.data,l)}function Ik(t){return typeof t=="string"?{type:t}:t}function Ap(t,e,n){var i=function(){},r=typeof t=="object",o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function Kh(t,e){return"".concat(t,":invocation[").concat(e,"]")}function o_(t){return(t.type===cd||t.type===lg&&t.to===Au.Internal)&&typeof t.delay!="number"}var hu=Hn({type:DJ});function a_(t,e){return e&&e[t]||void 0}function Gf(t,e){var n;if(St(t)||typeof t=="number"){var i=a_(t,e);_t(i)?n={type:t,exec:i}:i?n=i:n={type:t,exec:void 0}}else if(_t(t))n={type:t.name||t.toString(),exec:t};else{var i=a_(t.type,e);if(_t(i))n=ye(ye({},t),{exec:i});else if(i){var r=i.type||t.type;n=ye(ye(ye({},i),t),{type:r})}else n=t}return n}var ko=function(t,e){if(!t)return[];var n=qu(t)?t:[t];return n.map(function(i){return Gf(i,e)})};function EE(t){var e=Gf(t);return ye(ye({id:St(t)?t:e.id},e),{type:e.type})}function YJ(t,e){return{type:cd,event:typeof t=="function"?t:ug(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function JJ(t,e,n,i){var r={_event:n},o=Hn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;return ye(ye({},t),{type:cd,_event:o,delay:l})}function WJ(t,e){return{to:e?e.to:void 0,type:lg,event:_t(t)?t:ug(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_t(t)?t.name:bk(t)}}function XJ(t,e,n,i){var r={_event:n},o=Hn(_t(t.event)?t.event(e,n.data,r):t.event),l;if(St(t.delay)){var c=i&&i[t.delay];l=_t(c)?c(e,n.data,r):c}else l=_t(t.delay)?t.delay(e,n.data,r):t.delay;var f=_t(t.to)?t.to(e,n.data,r):t.to;return ye(ye({},t),{to:f,_event:o,event:o.data,delay:l})}var QJ=function(t,e,n){return ye(ye({},t),{value:St(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},ZJ=function(t){return{type:_k,sendId:t}};function eW(t){var e=EE(t);return{type:Pt.Start,activity:e,exec:void 0}}function tW(t){var e=_t(t)?t:EE(t);return{type:Pt.Stop,activity:e,exec:void 0}}function nW(t,e,n){var i=_t(t.activity)?t.activity(e,n.data):t.activity,r=typeof i=="string"?{id:i}:i,o={type:Pt.Stop,activity:r};return o}var iW=function(t){return{type:_E,assignment:t}};function rW(t,e){var n=e?"#".concat(e):"";return"".concat(Pt.After,"(").concat(t,")").concat(n)}function Yh(t,e){var n="".concat(Pt.DoneState,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function Cp(t,e){var n="".concat(Pt.DoneInvoke,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}function nf(t,e){var n="".concat(Pt.ErrorPlatform,".").concat(t),i={type:n,data:e};return i.toString=function(){return n},i}var sW=function(t){var e,n,i=[];try{for(var r=ut(t),o=r.next();!o.done;o=r.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===_E){i.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function pm(t,e,n,i,r,o,l){l===void 0&&(l=!1);var c=l?[]:sW(r),f=c.length?MR(n,i,c,e):n,d=l?[n]:void 0,p=[];function v(x,N){var D;switch(N.type){case cd:{var O=JJ(N,f,i,t.options.delays);return o&&typeof O.delay=="number"&&o(O,f,i),O}case lg:var k=XJ(N,f,i,t.options.delays);return o&&k.to!==Au.Internal&&(x==="entry"?p.push(k):o(k,f,i)),k;case Tk:{var F=QJ(N,f,i);return o==null||o(F,f,i),F}case kJ:{var $=N,K=(D=$.conds.find(function(ee){var ae=Ck(ee.cond,t.options.guards);return!ae||xk(t,ae,f,i,o?void 0:e)}))===null||D===void 0?void 0:D.actions;if(!K)return[];var G=gt(pm(t,e,f,i,[{type:x,actions:ko(Pr(K),t.options.actions)}],o,l),2),I=G[0],R=G[1];return f=R,d==null||d.push(f),I}case VJ:{var K=N.get(f,i.data);if(!K)return[];var P=gt(pm(t,e,f,i,[{type:x,actions:ko(Pr(K),t.options.actions)}],o,l),2),V=P[0],U=P[1];return f=U,d==null||d.push(f),V}case vE:{var F=nW(N,f,i);return o==null||o(F,n,i),F}case _E:{f=MR(f,i,[N],o?void 0:e),d==null||d.push(f);break}default:var q=Gf(N,t.options.actions),z=q.exec;if(o)o(q,f,i);else if(z&&d){var xe=d.length-1,ke=ye(ye({},q),{exec:function(ee){for(var ae=[],me=1;me<arguments.length;me++)ae[me-1]=arguments[me];z.apply(void 0,zt([d[xe]],gt(ae),!1))}});q=ke}return q}}function T(x){var N,D,O=[];try{for(var k=ut(x.actions),F=k.next();!F.done;F=k.next()){var $=F.value,K=v(x.type,$);K&&(O=O.concat(K))}}catch(G){N={error:G}}finally{try{F&&!F.done&&(D=k.return)&&D.call(k)}finally{if(N)throw N.error}}return p.forEach(function(G){o(G,f,i)}),p.length=0,O}var b=Wt(r.map(T));return[b,f]}var Xl=function(t,e){var n=e(t);return n};function Rk(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Mo]=function(){return this},e}function oW(t,e,n,i){var r,o=Ik(t.src),l=(r=e==null?void 0:e.options.services)===null||r===void 0?void 0:r[o.type],c=t.data?hm(t.data,n,i):void 0,f=l?Nk(l,t.id,c):Rk(t.id);return f.meta=t,f}function Nk(t,e,n){var i=Rk(e);if(i.deferred=!0,Cu(t)){var r=i.state=Xl(void 0,function(){return(n?t.withContext(n):t).initialState});i.getSnapshot=function(){return r}}return i}function aW(t){try{return typeof t.send=="function"}catch{return!1}}function lW(t){return aW(t)&&"id"in t}function uW(t){var e;return ye((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Mo]=function(){return this},e),t)}var mm=function(t){return t.type==="atomic"||t.type==="final"};function Pk(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Hf(t){return Pk(t).filter(function(e){return e.type!=="history"})}function Dk(t){var e=[t];return mm(t)?e:e.concat(Wt(Hf(t).map(Dk)))}function rf(t,e){var n,i,r,o,l,c,f,d,p=new Set(t),v=l_(p),T=new Set(e);try{for(var b=ut(T),x=b.next();!x.done;x=b.next())for(var N=x.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){n={error:P}}finally{try{x&&!x.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}var O=l_(T);try{for(var k=ut(T),F=k.next();!F.done;F=k.next()){var N=F.value;if(N.type==="compound"&&(!O.get(N)||!O.get(N).length))v.get(N)?v.get(N).forEach(function(V){return T.add(V)}):N.initialStateNodes.forEach(function(V){return T.add(V)});else if(N.type==="parallel")try{for(var $=(l=void 0,ut(Hf(N))),K=$.next();!K.done;K=$.next()){var G=K.value;T.has(G)||(T.add(G),v.get(G)?v.get(G).forEach(function(V){return T.add(V)}):G.initialStateNodes.forEach(function(V){return T.add(V)}))}}catch(V){l={error:V}}finally{try{K&&!K.done&&(c=$.return)&&c.call($)}finally{if(l)throw l.error}}}}catch(P){r={error:P}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(r)throw r.error}}try{for(var I=ut(T),R=I.next();!R.done;R=I.next())for(var N=R.value,D=N.parent;D&&!T.has(D);)T.add(D),D=D.parent}catch(P){f={error:P}}finally{try{R&&!R.done&&(d=I.return)&&d.call(I)}finally{if(f)throw f.error}}return T}function Mk(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var i=n[0];if(i){if(mm(i))return i.key}else return{}}var r={};return n.forEach(function(o){r[o.key]=Mk(o,e)}),r}function l_(t){var e,n,i=new Map;try{for(var r=ut(t),o=r.next();!o.done;o=r.next()){var l=o.value;i.has(l)||i.set(l,[]),l.parent&&(i.has(l.parent)||i.set(l.parent,[]),i.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function cW(t,e){var n=rf([t],e);return Mk(t,l_(n))}function sf(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function fW(t){return zt([],gt(new Set(Wt(zt([],gt(t.map(function(e){return e.ownEvents})),!1)))),!1)}function xp(t,e){return e.type==="compound"?Hf(e).some(function(n){return n.type==="final"&&sf(t,n)}):e.type==="parallel"?Hf(e).every(function(n){return xp(t,n)}):!1}function dW(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function kR(t){return new Set(Wt(t.map(function(e){return e.tags})))}function kk(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(St(t)||St(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every(function(r){return kk(t[r],e[r])})}function hW(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function pW(t,e){var n=t.exec,i=ye(ye({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var yr=(function(){function t(e){var n=this,i;this.actions=[],this.activities=NR,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||NR,this.meta=dW(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(i=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&i!==void 0?i:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return fW(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,events:[],configuration:[],transitions:[],children:{}}):e;var i=hu;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=hu;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var i=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),St(e))return[e];var r=Object.keys(e);return r.concat.apply(r,zt([],gt(r.map(function(o){return i.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var i=yE(e,["configuration","transitions","tags","machine"]);return ye(ye({},i),{tags:Array.from(n)})},t.prototype.matches=function(e){return TE(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;HJ(!!this.machine);var i=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(i!=null&&i.transitions.length)&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},t})(),mW={deferEvents:!1},VR=(function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},mW),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t})(),jv=new Map,gW=0,qc={bookId:function(){return"x:".concat(gW++)},register:function(t,e){return jv.set(t,e),t},get:function(t){return jv.get(t)},free:function(t){jv.delete(t)}};function SE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function yW(){var t=SE();if(t&&"__xstate__"in t)return t.__xstate__}function vW(t){if(SE()){var e=yW();e&&e.register(t)}}function _W(t,e){e===void 0&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,l=function(){if(!o){for(o=!0;r.length>0;){var d=r.shift();n=t.transition(n,d,f),i.forEach(function(p){return p.next(n)})}o=!1}},c=uW({id:e.id,send:function(d){r.push(d),l()},getSnapshot:function(){return n},subscribe:function(d,p,v){var T=Ap(d,p,v);return i.add(T),T.next(n),{unsubscribe:function(){i.delete(T)}}}}),f={parent:e.parent,self:c,id:e.id||"anonymous",observers:i};return n=t.start?t.start(f):n,c}var TW={sync:!1,autoForward:!1},Ln;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Ln||(Ln={}));var EW=(function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Ln.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(p,v){if(qu(p))return i.batch(p),i.state;var T=Hn(ug(p,v));if(i.status===Ln.Stopped)return i.state;if(i.status!==Ln.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(T.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(T.data)));return i.scheduler.schedule(function(){i.forward(T);var b=i._nextState(T);i.update(b,T)}),i._state},this.sendTo=function(p,v,T){var b=i.parent&&(v===Au.Parent||i.parent.id===v),x=b?i.parent:St(v)?v===Au.Internal?i:i.children.get(v)||qc.get(v):$J(v)?v:void 0;if(!x){if(!b)throw new Error("Unable to send event to child '".concat(v,"' from service '").concat(i.id,"'."));return}if("machine"in x){if(i.status!==Ln.Stopped||i.parent!==x||i.state.done){var N=ye(ye({},p),{name:p.name===MJ?"".concat(nf(i.id)):p.name,origin:i.sessionId});!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,N]):x.send(N)}}else!T&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([x,p.data]):x.send(p.data)},this._exec=function(p,v,T,b){b===void 0&&(b=i.machine.options.actions);var x=p.exec||a_(p.type,b),N=_t(x)?x:x?x.exec:p.exec;if(N)try{return N(v,T.data,i.machine.config.predictableActionArguments?{action:p,_event:T}:{action:p,state:i.state,_event:T})}catch(xe){throw i.parent&&i.parent.send({type:"xstate.error",data:xe}),xe}switch(p.type){case cd:{var D=p;i.defer(D);break}case lg:var O=p;if(typeof O.delay=="number"){i.defer(O);return}else O.to?i.sendTo(O._event,O.to,T===hu):i.send(O._event);break;case _k:i.cancel(p.sendId);break;case n_:{if(i.status!==Ln.Running)return;var k=p.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[k.id||k.type])break;if(k.type===Pt.Invoke){var F=Ik(k.src),$=i.machine.options.services?i.machine.options.services[F.type]:void 0,K=k.id,G=k.data,I="autoForward"in k?k.autoForward:!!k.forward;if(!$)return;var R=G?hm(G,v,T):void 0;if(typeof $=="string")return;var P=_t($)?$(v,T.data,{data:R,src:F,meta:k.meta}):$;if(!P)return;var V=void 0;Cu(P)&&(P=R?P.withContext(R):P,V={autoForward:I}),i.spawn(P,K,V)}else i.spawnActivity(k);break}case vE:{i.stopChild(p.activity.id);break}case Tk:var U=p,q=U.label,z=U.value;q?i.logger(q,z):i.logger(z);break}};var r=ye(ye({},t.defaultOptions),n),o=r.clock,l=r.logger,c=r.parent,f=r.id,d=f!==void 0?f:e.id;this.id=d,this.logger=l,this.clock=o,this.parent=c,this.options=r,this.scheduler=new VR({deferEvents:this.options.deferEvents}),this.sessionId=qc.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Xl(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var i,r;try{for(var o=ut(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.update=function(e,n){var i,r,o,l,c,f,d,p,v=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===hu)&&this.options.execute)this.execute(this.state);else for(var T=void 0;T=this._outgoingQueue.shift();)T[0].send(T[1]);if(this.children.forEach(function(P){v.state.children[P.id]=P}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var b=ut(this.eventListeners),x=b.next();!x.done;x=b.next()){var N=x.value;N(e.event)}}catch(P){i={error:P}}finally{try{x&&!x.done&&(r=b.return)&&r.call(b)}finally{if(i)throw i.error}}try{for(var D=ut(this.listeners),O=D.next();!O.done;O=D.next()){var N=O.value;N(e,e.event)}}catch(P){o={error:P}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ut(this.contextListeners),F=k.next();!F.done;F=k.next()){var $=F.value;$(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){c={error:P}}finally{try{F&&!F.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}if(this.state.done){var K=e.configuration.find(function(P){return P.type==="final"&&P.parent===v.machine}),G=K&&K.doneData?hm(K.doneData,e.context,n):void 0;this._doneEvent=Cp(this.id,G);try{for(var I=ut(this.doneListeners),R=I.next();!R.done;R=I.next()){var N=R.value;N(this._doneEvent)}}catch(P){d={error:P}}finally{try{R&&!R.done&&(p=I.return)&&p.call(I)}finally{if(d)throw d.error}}this._stop(),this._stopChildren(),qc.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Ln.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,i){var r=this,o=Ap(e,n,i);this.listeners.add(o.next),this.status!==Ln.NotStarted&&o.next(this.state);var l=function(){r.doneListeners.delete(l),r.stopListeners.delete(l),o.complete()};return this.status===Ln.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(l),r.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Ln.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Ln.Running)return this;this.machine._init(),qc.register(this.sessionId,this),this.initialized=!0,this.status=Ln.Running;var i=e===void 0?this.initialState:Xl(this,function(){return hW(e)?n.machine.resolveState(e):n.machine.resolveState(yr.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(i,hu)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){_t(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,i,r,o,l,c,f,d,p;try{for(var v=ut(this.listeners),T=v.next();!T.done;T=v.next()){var b=T.value;this.listeners.delete(b)}}catch(I){e={error:I}}finally{try{T&&!T.done&&(n=v.return)&&n.call(v)}finally{if(e)throw e.error}}try{for(var x=ut(this.stopListeners),N=x.next();!N.done;N=x.next()){var b=N.value;b(),this.stopListeners.delete(b)}}catch(I){i={error:I}}finally{try{N&&!N.done&&(r=x.return)&&r.call(x)}finally{if(i)throw i.error}}try{for(var D=ut(this.contextListeners),O=D.next();!O.done;O=D.next()){var b=O.value;this.contextListeners.delete(b)}}catch(I){o={error:I}}finally{try{O&&!O.done&&(l=D.return)&&l.call(D)}finally{if(o)throw o.error}}try{for(var k=ut(this.doneListeners),F=k.next();!F.done;F=k.next()){var b=F.value;this.doneListeners.delete(b)}}catch(I){c={error:I}}finally{try{F&&!F.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Ln.Stopped,this._initialState=void 0;try{for(var $=ut(Object.keys(this.delayedEventsMap)),K=$.next();!K.done;K=$.next()){var G=K.value;this.clock.clearTimeout(this.delayedEventsMap[G])}}catch(I){d={error:I}}finally{try{K&&!K.done&&(p=$.return)&&p.call($)}finally{if(d)throw d.error}}this.scheduler.clear(),this.scheduler=new VR({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var i;if(!(!((i=e._state)===null||i===void 0)&&i.done)){var r=Hn({type:"xstate.stop"}),o=Xl(e,function(){var l=Wt(zt([],gt(e.state.configuration),!1).sort(function(v,T){return T.order-v.order}).map(function(v){return ko(v.onExit,e.machine.options.actions)})),c=gt(pm(e.machine,e.state,e.state.context,r,[{type:"exit",actions:l}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),f=c[0],d=c[1],p=new yr({value:e.state.value,context:d,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:f.filter(function(v){return!o_(v)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return p.changed=!0,p});e.update(o,r),e._stopChildren(),qc.free(e.sessionId)}}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Ln.NotStarted&&this.options.deferEvents)){if(this.status!==Ln.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,l=n.state,c=!1,f=[],d=function(b){var x=Hn(b);n.forward(x),l=Xl(n,function(){return n.machine.transition(l,x,void 0,i||void 0)}),f.push.apply(f,zt([],gt(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(N){return pW(N,l)})),!1)),c=c||!!l.changed};try{for(var p=ut(e),v=p.next();!v.done;v=p.next()){var T=v.value;d(T)}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}l.changed=c,l.actions=f,n.update(l,Hn(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var i=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var r=Hn(e);if(r.name.indexOf(RR)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(RR)===0}))throw r.data.data;var o=Xl(this,function(){return i.machine.transition(i.state,r,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,i;try{for(var r=ut(this.forwardTo),o=r.next();!o.done;o=r.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(f){n={error:f}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,i=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=i)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,i){i===void 0&&(i=this.machine.options.actions),this._exec(e,n.context,n._event,i)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),_t(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,i){if(this.status!==Ln.Running)return Nk(e,n);if(DR(e))return this.spawnPromise(Promise.resolve(e),n);if(_t(e))return this.spawnCallback(e,n);if(lW(e))return this.spawnActor(e,n);if(jJ(e))return this.spawnObservable(e,n);if(Cu(e))return this.spawnMachine(e,ye(ye({},i),{id:n}));if(qJ(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;n===void 0&&(n={});var r=new t(e,ye(ye({},this.options),{parent:this,id:n.id||e.id})),o=ye(ye({},TW),n);o.sync&&r.onTransition(function(c){i.send(Ek,{state:c,id:r.id})});var l=r;return this.children.set(r.id,l),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(c){i.removeChild(r.id),i.send(Hn(c,{origin:r.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var i=_W(e,{id:n,parent:this});return this.children.set(n,i),i},t.prototype.spawnPromise=function(e,n){var i,r=this,o=!1,l;e.then(function(f){o||(l=f,r.removeChild(n),r.send(Hn(Cp(n,f),{origin:n})))},function(f){if(!o){r.removeChild(n);var d=nf(n,f);try{r.send(Hn(d,{origin:n}))}catch{r.devTools&&r.devTools.send(d,r.state),r.machine.strict&&r.stop()}}});var c=(i={id:n,send:function(){},subscribe:function(f,d,p){var v=Ap(f,d,p),T=!1;return e.then(function(b){T||(v.next(b),!T&&v.complete())},function(b){T||v.error(b)}),{unsubscribe:function(){return T=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},i[Mo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var i,r=this,o=!1,l=new Set,c=new Set,f,d=function(T){f=T,c.forEach(function(b){return b(T)}),!o&&r.send(Hn(T,{origin:n}))},p;try{p=e(d,function(T){l.add(T)})}catch(T){this.send(nf(n,T))}if(DR(p))return this.spawnPromise(p,n);var v=(i={id:n,send:function(T){return l.forEach(function(b){return b(T)})},subscribe:function(T){var b=Ap(T);return c.add(b.next),{unsubscribe:function(){c.delete(b.next)}}},stop:function(){o=!0,_t(p)&&p()},toJSON:function(){return{id:n}},getSnapshot:function(){return f}},i[Mo]=function(){return this},i);return this.children.set(n,v),v},t.prototype.spawnObservable=function(e,n){var i,r=this,o,l=e.subscribe(function(f){o=f,r.send(Hn(f,{origin:n}))},function(f){r.removeChild(n),r.send(Hn(nf(n,f),{origin:n}))},function(){r.removeChild(n),r.send(Hn(Cp(n),{origin:n}))}),c=(i={id:n,send:function(){},subscribe:function(f,d,p){return e.subscribe(f,d,p)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},i[Mo]=function(){return this},i);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var i=n(this.state.context,e);this.spawnEffect(e.id,i)}},t.prototype.spawnEffect=function(e,n){var i;this.children.set(e,(i={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},i[Mo]=function(){return this},i))},t.prototype.attachDev=function(){var e=SE();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}vW(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Mo]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Ln.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Vk,t})();function Vk(t,e){var n=new EW(t,e);return n}function SW(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Jh(t){return ye(ye({type:i_},t),{toJSON:function(){t.onDone,t.onError;var e=yE(t,["onDone","onError"]);return ye(ye({},e),{type:i_,src:SW(t.src)})}})}var Wh="",u_="#",$v="*",Gl={},Hl=function(t){return t[0]===u_},bW=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},wW=(function(){function t(e,n,i,r){i===void 0&&(i="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(bW(),n),this.parent=r==null?void 0:r.parent,this.key=this.config.key||(r==null?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Sk),this.id=this.config.id||zt([this.machine.key],gt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?tf(this.config.states,function(d,p){var v,T=new t(d,{},void 0,{parent:o,key:p});return Object.assign(o.idMap,ye((v={},v[T.id]=T,v),T.idMap)),T}):Gl;var c=0;function f(d){var p,v;d.order=c++;try{for(var T=ut(Pk(d)),b=T.next();!b.done;b=T.next()){var x=b.value;f(x)}}catch(N){p={error:N}}finally{try{b&&!b.done&&(v=T.return)&&v.call(T)}finally{if(p)throw p.error}}}f(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(d){var p=d.event;return p===Wh}):Wh in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Pr(this.config.entry||this.config.onEntry).map(function(d){return Gf(d)}),this.onExit=Pr(this.config.exit||this.config.onExit).map(function(d){return Gf(d)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Pr(this.config.invoke).map(function(d,p){var v,T;if(Cu(d)){var b=Kh(o.id,p);return o.machine.options.services=ye((v={},v[b]=d,v),o.machine.options.services),Jh({src:b,id:b})}else if(St(d.src)){var b=d.id||Kh(o.id,p);return Jh(ye(ye({},d),{id:b,src:d.src}))}else if(Cu(d.src)||_t(d.src)){var b=d.id||Kh(o.id,p);return o.machine.options.services=ye((T={},T[b]=d.src,T),o.machine.options.services),Jh(ye(ye({id:b},d),{src:b}))}else{var x=d.src;return Jh(ye(ye({id:Kh(o.id,p)},d),{src:x}))}}),this.activities=Pr(this.config.activities).concat(this.invoke).map(function(d){return EE(d)}),this.transition=this.transition.bind(this),this.tags=Pr(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Dk(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,l=i.guards,c=i.services,f=i.delays;return new t(this.config,{actions:ye(ye({},r),e.actions),activities:ye(ye({},o),e.activities),guards:ye(ye({},l),e.guards),services:ye(ye({},c),e.services),delays:ye(ye({},f),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return _t(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:tf(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,i){return n[i.eventType]=n[i.eventType]||[],n[i.eventType].push(i),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Wh,i=this.transitions.filter(function(r){var o=r.eventType===e;return n?o:o||r.eventType===$v});return this.__cache.candidates[e]=i,i},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var i=function(o,l){var c=_t(o)?"".concat(e.id,":delay[").concat(l,"]"):o,f=rW(c,e.id);return e.onEntry.push(WJ(f,{delay:o})),e.onExit.push(ZJ(f)),f},r=qu(n)?n.map(function(o,l){var c=i(o.delay,l);return ye(ye({},o),{event:c})}):Wt(Object.keys(n).map(function(o,l){var c=n[o],f=St(c)?{target:c}:c,d=isNaN(+o)?o:+o,p=i(d,l);return Pr(f).map(function(v){return ye(ye({},v),{event:p,delay:d})})}));return r.map(function(o){var l=o.delay;return ye(ye({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,i=this;if(!e)return[];var r=e instanceof yr?e.value:vf(e,this.delimiter);if(St(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((n={},n[r]=o,n)):[this,this.states[r]]}var l=Object.keys(r),c=[this];return c.push.apply(c,zt([],gt(Wt(l.map(function(f){return i.getStateNode(f).getStateNodes(r[f])}))),!1)),c},t.prototype.handles=function(e){var n=bk(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof yr?e:yr.create(e),i=Array.from(rf([],this.getStateNodes(n.value)));return new yr(ye(ye({},n),{value:this.resolve(n.value),configuration:i,done:xp(i,this),tags:kR(i),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,i){var r=this.getStateNode(e),o=r.next(n,i);return!o||!o.transitions.length?this.next(n,i):o},t.prototype.transitionCompoundNode=function(e,n,i){var r=Object.keys(e),o=this.getStateNode(r[0]),l=o._transition(e[r[0]],n,i);return!l||!l.transitions.length?this.next(n,i):l},t.prototype.transitionParallelNode=function(e,n,i){var r,o,l={};try{for(var c=ut(Object.keys(e)),f=c.next();!f.done;f=c.next()){var d=f.value,p=e[d];if(p){var v=this.getStateNode(d),T=v._transition(p,n,i);T&&(l[d]=T)}}}catch(O){r={error:O}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}var b=Object.keys(l).map(function(O){return l[O]}),x=Wt(b.map(function(O){return O.transitions})),N=b.some(function(O){return O.transitions.length>0});if(!N)return this.next(n,i);var D=Wt(Object.keys(l).map(function(O){return l[O].configuration}));return{transitions:x,exitSet:Wt(b.map(function(O){return O.exitSet})),configuration:D,source:n,actions:Wt(Object.keys(l).map(function(O){return l[O].actions}))}},t.prototype._transition=function(e,n,i){return St(e)?this.transitionLeafNode(e,n,i):Object.keys(e).length===1?this.transitionCompoundNode(e,n,i):this.transitionParallelNode(e,n,i)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Hn(n))},t.prototype.next=function(e,n){var i,r,o=this,l=n.name,c=[],f=[],d;try{for(var p=ut(this.getCandidates(l)),v=p.next();!v.done;v=p.next()){var T=v.value,b=T.cond,x=T.in,N=e.context,D=x?St(x)&&Hl(x)?e.matches(vf(this.getStateNodeById(x).path,this.delimiter)):TE(vf(x,this.delimiter),UJ(this.path.slice(0,-2))(e.value)):!0,O=!1;try{O=!b||xk(this.machine,b,N,n,e)}catch($){throw new Error("Unable to evaluate guard '".concat(b.name||b.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat($.message))}if(O&&D){T.target!==void 0&&(f=T.target),c.push.apply(c,zt([],gt(T.actions),!1)),d=T;break}}}catch($){i={error:$}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}if(d){if(!f.length)return{transitions:[d],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var k=Wt(f.map(function($){return o.getRelativeStateNodes($,e.historyValue)})),F=!!d.internal;return{transitions:[d],exitSet:F?[]:Wt(f.map(function($){return o.getPotentiallyReenteringNodes($)})),configuration:k,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],i=this,r=e;i&&i!==r;)n.push(i),i=i.parent;return i!==r?[]:(n.push(r),n)},t.prototype.getActions=function(e,n,i,r,o,l,c){var f,d,p,v,T=this,b=l?rf([],this.getStateNodes(l.value)):[],x=new Set;try{for(var N=ut(Array.from(e).sort(function(U,q){return U.order-q.order})),D=N.next();!D.done;D=N.next()){var O=D.value;(!sf(b,O)||sf(i.exitSet,O)||O.parent&&x.has(O.parent))&&x.add(O)}}catch(U){f={error:U}}finally{try{D&&!D.done&&(d=N.return)&&d.call(N)}finally{if(f)throw f.error}}try{for(var k=ut(b),F=k.next();!F.done;F=k.next()){var O=F.value;(!sf(e,O)||sf(i.exitSet,O.parent))&&i.exitSet.push(O)}}catch(U){p={error:U}}finally{try{F&&!F.done&&(v=k.return)&&v.call(k)}finally{if(p)throw p.error}}i.exitSet.sort(function(U,q){return q.order-U.order});var $=Array.from(x).sort(function(U,q){return U.order-q.order}),K=new Set(i.exitSet),G=Wt($.map(function(U){var q=[];if(U.type!=="final")return q;var z=U.parent;if(!z.parent)return q;q.push(Yh(U.id,U.doneData),Yh(z.id,U.doneData?hm(U.doneData,r,o):void 0));var xe=z.parent;return xe.type==="parallel"&&Hf(xe).every(function(ke){return xp(i.configuration,ke)})&&q.push(Yh(xe.id)),q})),I=$.map(function(U){var q=U.onEntry,z=U.activities.map(function(xe){return eW(xe)});return{type:"entry",actions:ko(c?zt(zt([],gt(q),!1),gt(z),!1):zt(zt([],gt(z),!1),gt(q),!1),T.machine.options.actions)}}).concat({type:"state_done",actions:G.map(function(U){return YJ(U)})}),R=Array.from(K).map(function(U){return{type:"exit",actions:ko(zt(zt([],gt(U.onExit),!1),gt(U.activities.map(function(q){return tW(q)})),!1),T.machine.options.actions)}}),P=R.concat({type:"transition",actions:ko(i.actions,this.machine.options.actions)}).concat(I);if(n){var V=ko(Wt(zt([],gt(e),!1).sort(function(U,q){return q.order-U.order}).map(function(U){return U.onExit})),this.machine.options.actions).filter(function(U){return!o_(U)});return P.concat({type:"stop",actions:V})}return P},t.prototype.transition=function(e,n,i,r){e===void 0&&(e=this.initialState);var o=Hn(n),l;if(e instanceof yr)l=i===void 0?e:this.resolveState(yr.from(e,i));else{var c=St(e)?this.resolve(dm(this.getResolvedPath(e))):this.resolve(e),f=i??this.machine.context;l=this.resolveState(yr.from(c,f))}if(this.strict&&!this.events.includes(o.name)&&!BJ(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var d=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},p=rf([],this.getStateNodes(l.value)),v=d.configuration.length?rf(p,d.configuration):p;return d.configuration=zt([],gt(v),!1),this.resolveTransition(d,l,l.context,r,o)},t.prototype.resolveRaisedTransition=function(e,n,i,r){var o,l=e.actions;return e=this.transition(e,n,void 0,r),e._event=i,e.event=i.data,(o=e.actions).unshift.apply(o,zt([],gt(l),!1)),e},t.prototype.resolveTransition=function(e,n,i,r,o){var l,c,f,d,p=this;o===void 0&&(o=hu);var v=e.configuration,T=!n||e.transitions.length>0,b=T?e.configuration:n?n.configuration:[],x=xp(b,this),N=T?cW(this.machine,v):void 0,D=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,O=this.getActions(new Set(b),x,e,i,o,n,r),k=n?ye({},n.activities):{};try{for(var F=ut(O),$=F.next();!$.done;$=F.next()){var K=$.value;try{for(var G=(f=void 0,ut(K.actions)),I=G.next();!I.done;I=G.next()){var R=I.value;R.type===n_?k[R.activity.id||R.activity.type]=R:R.type===vE&&(k[R.activity.id||R.activity.type]=!1)}}catch(ne){f={error:ne}}finally{try{I&&!I.done&&(d=G.return)&&d.call(G)}finally{if(f)throw f.error}}}}catch(ne){l={error:ne}}finally{try{$&&!$.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}var P=gt(pm(this,n,i,o,O,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=P[0],U=P[1],q=gt(zJ(V,o_),2),z=q[0],xe=q[1],ke=V.filter(function(ne){var he;return ne.type===n_&&((he=ne.activity)===null||he===void 0?void 0:he.type)===i_}),ee=ke.reduce(function(ne,he){return ne[he.activity.id]=oW(he.activity,p.machine,U,o),ne},n?ye({},n.children):{}),ae=new yr({value:N||n.value,context:U,_event:o,_sessionid:n?n._sessionid:null,historyValue:N?D?GJ(D,N):void 0:n?n.historyValue:void 0,history:!N||e.source?n:void 0,actions:N?xe:[],activities:N?k:n?n.activities:{},events:[],configuration:b,transitions:e.transitions,children:ee,done:x,tags:kR(b),machine:this}),me=i!==U;ae.changed=o.name===Ek||me;var Ce=ae.history;Ce&&delete Ce.history;var Ie=!x&&(this._transient||v.some(function(ne){return ne._transient}));if(!T&&(!Ie||o.name===Wh))return ae;var j=ae;if(!x)for(Ie&&(j=this.resolveRaisedTransition(j,{type:PJ},o,r));z.length;){var Z=z.shift();j=this.resolveRaisedTransition(j,Z._event,o,r)}var pe=j.changed||(Ce?!!j.actions.length||me||typeof Ce.value!=typeof j.value||!kk(j.value,Ce.value):void 0);return j.changed=pe,j.history=Ce,j},t.prototype.getStateNode=function(e){if(Hl(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=Hl(e)?e.slice(u_.length):e;if(n===this.id)return this;var i=this.machine.idMap[n];if(!i)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return i},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Hl(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=s_(e,this.delimiter).slice(),i=this;n.length;){var r=n.shift();if(!r.length)break;i=i.getStateNode(r)}return i},t.prototype.resolve=function(e){var n,i=this;if(!e)return this.initialStateValue||Gl;switch(this.type){case"parallel":return tf(this.initialStateValue,function(o,l){return o?i.getStateNode(l).resolve(e[l]||o):Gl});case"compound":if(St(e)){var r=this.getStateNode(e);return r.type==="parallel"||r.type==="compound"?(n={},n[e]=r.initialStateValue,n):e}return Object.keys(e).length?tf(e,function(o,l){return o?i.getStateNode(l).resolve(o):Gl}):this.initialStateValue||{};default:return e||Gl}},t.prototype.getResolvedPath=function(e){if(Hl(e)){var n=this.machine.idMap[e.slice(u_.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return s_(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=PR(this.states,function(i){return i.initialStateValue||Gl},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=mm(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var i=this.getStateNodes(e);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;St(n.target)?e=Hl(n.target)?dm(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,i){return i===void 0&&(i=!0),i?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(mm(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=wp(this.initialStateValue);return Wt(n.map(function(i){return e.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=gt(e),i=n[0],r=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:PR(this.states,function(n,i){if(!e)return n.historyValue();var r=St(e)?void 0:e[i];return n.historyValue(r||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var i=this.parent;if(!e){var r=this.target;return r?Wt(wp(r).map(function(l){return i.getFromRelativePath(l)})):i.initialStateNodes}var o=FJ(i.path,"states")(e).current;return St(o)?[i.getStateNode(o)]:Wt(wp(o).map(function(l){return n.history==="deep"?i.getFromRelativePath(l):[i.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Wt(Object.keys(this.states).map(function(i){return e.states[i].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=ut(Object.keys(o)),f=c.next();!f.done;f=c.next()){var d=f.value,p=o[d];if(p.states)try{for(var v=(i=void 0,ut(p.events)),T=v.next();!T.done;T=v.next()){var b=T.value;l.add("".concat(b))}}catch(x){i={error:x}}finally{try{T&&!T.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}}catch(x){e={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(i){if(!St(i))return i;var r=i[0]===n.delimiter;if(r&&!n.parent)return n.getStateNodeByPath(i.slice(1));var o=r?n.key+i:i;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,i=KJ(e.target),r="internal"in e?e.internal:i?i.some(function(f){return St(f)&&f[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(i),c=ye(ye({},e),{actions:ko(Pr(e.actions)),cond:Ck(e.cond,o),target:l,source:this,internal:r,eventType:e.event,toJSON:function(){return ye(ye({},c),{target:c.target?c.target.map(function(f){return"#".concat(f.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,l=$v,c=o[l],f=c===void 0?[]:c,d=yE(o,[typeof l=="symbol"?l:l+""]);r=Wt(Object.keys(d).map(function(k){var F=zl(k,d[k]);return F}).concat(zl($v,f)))}var p=this.config.always?zl("",this.config.always):[],v=this.config.onDone?zl(String(Yh(this.id)),this.config.onDone):[],T=Wt(this.invoke.map(function(k){var F=[];return k.onDone&&F.push.apply(F,zt([],gt(zl(String(Cp(k.id)),k.onDone)),!1)),k.onError&&F.push.apply(F,zt([],gt(zl(String(nf(k.id)),k.onError)),!1)),F})),b=this.after,x=Wt(zt(zt(zt(zt([],gt(v),!1),gt(T),!1),gt(r),!1),gt(p),!1).map(function(k){return Pr(k).map(function(F){return i.formatTransition(F)})}));try{for(var N=ut(b),D=N.next();!D.done;D=N.next()){var O=D.value;x.push(O)}}catch(k){e={error:k}}finally{try{D&&!D.done&&(n=N.return)&&n.call(N)}finally{if(e)throw e.error}}return x},t})();function AW(t,e,n){return n===void 0&&(n=t.context),new wW(t,e,n)}var CW=iW,c_;(function(t){t[t.Effect=1]="Effect",t[t.LayoutEffect=2]="LayoutEffect"})(c_||(c_={}));var _f=B.useLayoutEffect;function LR(t){var e=B.useRef();return e.current||(e.current={v:t()}),e.current.v}var xW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},IW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function RW(t,e){var n,i,r=xW([[],[]],2),o=r[0],l=r[1];try{for(var c=IW(t),f=c.next();!f.done;f=c.next()){var d=f.value;e(d)?o.push(d):l.push(d)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[o,l]}var zc=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o},OR=function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};function UR(t,e){var n=t.exec,i=n(e.context,e._event.data,{action:t,state:e,_event:e._event});i()}function NW(t){var e=B.useRef([]),n=B.useRef([]);_f(function(){var i=t.subscribe(function(r){var o,l;if(r.actions.length){var c=r.actions.filter(function(v){return typeof v.exec=="function"&&"__effect"in v.exec}),f=zc(RW(c,function(v){return v.exec.__effect===c_.Effect}),2),d=f[0],p=f[1];(o=e.current).push.apply(o,OR([],zc(d.map(function(v){return[v,r]})),!1)),(l=n.current).push.apply(l,OR([],zc(p.map(function(v){return[v,r]})),!1))}});return function(){i.unsubscribe()}},[]),_f(function(){for(;n.current.length;){var i=zc(n.current.shift(),2),r=i[0],o=i[1];UR(r,o)}}),B.useEffect(function(){for(;e.current.length;){var i=zc(e.current.shift(),2),r=i[0],o=i[1];UR(r,o)}})}var Tf=function(){return Tf=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Tf.apply(this,arguments)},PW=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function DW(t,e,n){if(typeof t=="object")return t;var i=function(){};return{next:t,error:e||i,complete:n||i}}function MW(t,e,n){e===void 0&&(e={});var i=LR(function(){return typeof t=="function"?t():t}),r=e.context,o=e.guards,l=e.actions,c=e.activities,f=e.services,d=e.delays,p=e.state,v=PW(e,["context","guards","actions","activities","services","delays","state"]),T=LR(function(){var b={context:r,guards:o,actions:l,activities:c,services:f,delays:d},x=i.withConfig(b,function(){return Tf(Tf({},i.context),r)});return Vk(x,Tf({deferEvents:!0},v))});return _f(function(){var b;return n&&(b=T.subscribe(DW(n))),function(){b==null||b.unsubscribe()}},[n]),_f(function(){return T.start(p?yr.create(p):void 0),function(){T.stop()}},[]),_f(function(){Object.assign(T.machine.options.actions,l),Object.assign(T.machine.options.guards,o),Object.assign(T.machine.options.activities,c),Object.assign(T.machine.options.services,f),Object.assign(T.machine.options.delays,d)},[l,o,c,f,d]),NW(T),T}var kW=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],l;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){l={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return o};function VW(t,e){e===void 0&&(e={});var n=B.useCallback(function(c){var f=c.changed===void 0&&Object.keys(c.children).length;(c.changed||f)&&l(c)},[]),i=MW(t,e,n),r=kW(B.useState(function(){var c=i.machine.initialState;return e.state?yr.create(e.state):c}),2),o=r[0],l=r[1];return[o,i.send,i]}function on(){return on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},on.apply(null,arguments)}function pu(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const it={arr:Array.isArray,obj:t=>Object.prototype.toString.call(t)==="[object Object]",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0,nul:t=>t===null,set:t=>t instanceof Set,map:t=>t instanceof Map,equ(t,e){if(typeof t!=typeof e)return!1;if(it.str(t)||it.num(t))return t===e;if(it.obj(t)&&it.obj(e)&&Object.keys(t).length+Object.keys(e).length===0)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return it.und(n)?t===e:!0}};function LW(t,e){return n=>(it.arr(n)?n:Object.keys(n)).reduce((i,r)=>{const o=r;return i[o]=t(o),i},t)}function OW(){const t=B.useState(!1),e=t[1];return B.useCallback(()=>e(i=>!i),[])}function Pa(t,e){return it.und(t)||it.nul(t)?e:t}function Xh(t){return it.und(t)?[]:it.arr(t)?t:[t]}function ru(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return it.fun(t)?t(...n):t}function UW(t){return t.to,t.from,t.config,t.onStart,t.onRest,t.onFrame,t.children,t.reset,t.reverse,t.force,t.immediate,t.delay,t.attach,t.destroyed,t.interpolateTo,t.ref,t.lazy,pu(t,["to","from","config","onStart","onRest","onFrame","children","reset","reverse","force","immediate","delay","attach","destroyed","interpolateTo","ref","lazy"])}function Kv(t){const e=UW(t);if(it.und(e))return on({to:e},t);const n=Object.keys(t).reduce((i,r)=>it.und(e[r])?on({},i,{[r]:t[r]}):i,{});return on({to:e},n)}function FW(t,e){return e&&(it.fun(e)?e(t):it.obj(e)&&(e.current=t)),t}class Dr{constructor(){this.payload=void 0,this.children=[]}getAnimatedValue(){return this.getValue()}getPayload(){return this.payload||this}attach(){}detach(){}getChildren(){return this.children}addChild(e){this.children.length===0&&this.attach(),this.children.push(e)}removeChild(e){const n=this.children.indexOf(e);this.children.splice(n,1),this.children.length===0&&this.detach()}}class f_ extends Dr{constructor(){super(...arguments),this.payload=[],this.attach=()=>this.payload.forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>this.payload.forEach(e=>e instanceof Dr&&e.removeChild(this))}}class Lk extends Dr{constructor(){super(...arguments),this.payload={},this.attach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.addChild(this)),this.detach=()=>Object.values(this.payload).forEach(e=>e instanceof Dr&&e.removeChild(this))}getValue(e){e===void 0&&(e=!1);const n={};for(const i in this.payload){const r=this.payload[i];e&&!(r instanceof Dr)||(n[i]=r instanceof Dr?r[e?"getAnimatedValue":"getValue"]():r)}return n}getAnimatedValue(){return this.getValue(!0)}}let bE;function BW(t,e){bE={fn:t,transform:e}}let Ok;function qW(t){Ok=t}let Uk=t=>typeof window<"u"?window.requestAnimationFrame(t):-1,gm;function zW(t){gm=t}let Fk=()=>Date.now(),GW=t=>t.current,Bk;function HW(t){Bk=t}class jW extends Lk{constructor(e,n){super(),this.update=void 0,this.payload=e.style?on({},e,{style:Bk(e.style)}):e,this.update=n,this.attach()}}const $W=t=>it.fun(t)&&!(t.prototype instanceof In.Component),KW=t=>B.forwardRef((n,i)=>{const r=OW(),o=B.useRef(!0),l=B.useRef(null),c=B.useRef(null),f=B.useCallback(T=>{const b=l.current,x=()=>{let N=!1;c.current&&(N=bE.fn(c.current,l.current.getAnimatedValue())),(!c.current||N===!1)&&r()};l.current=new jW(T,x),b&&b.detach()},[]);B.useEffect(()=>()=>{o.current=!1,l.current&&l.current.detach()},[]),B.useImperativeHandle(i,()=>GW(c)),f(n);const d=l.current.getValue();d.scrollTop,d.scrollLeft;const p=pu(d,["scrollTop","scrollLeft"]),v=$W(t)?void 0:T=>c.current=FW(T,i);return In.createElement(t,on({},p,{ref:v}))});let Ef=!1;const Ga=new Set,qk=()=>{if(!Ef)return!1;let t=Fk();for(let e of Ga){let n=!1;for(let i=0;i<e.configs.length;i++){let r=e.configs[i],o,l;for(let c=0;c<r.animatedValues.length;c++){let f=r.animatedValues[c];if(f.done)continue;let d=r.fromValues[c],p=r.toValues[c],v=f.lastPosition,T=p instanceof Dr,b=Array.isArray(r.initialVelocity)?r.initialVelocity[c]:r.initialVelocity;if(T&&(p=p.getValue()),r.immediate){f.setValue(p),f.done=!0;continue}if(typeof d=="string"||typeof p=="string"){f.setValue(p),f.done=!0;continue}if(r.duration!==void 0)v=d+r.easing((t-f.startTime)/r.duration)*(p-d),o=t>=f.startTime+r.duration;else if(r.decay)v=d+b/(1-.998)*(1-Math.exp(-.0020000000000000018*(t-f.startTime))),o=Math.abs(f.lastPosition-v)<.1,o&&(p=v);else{l=f.lastTime!==void 0?f.lastTime:t,b=f.lastVelocity!==void 0?f.lastVelocity:r.initialVelocity,t>l+64&&(l=t);let x=Math.floor(t-l);for(let k=0;k<x;++k){let F=-r.tension*(v-p),$=-r.friction*b,K=(F+$)/r.mass;b=b+K*1/1e3,v=v+b*1/1e3}let N=r.clamp&&r.tension!==0?d<p?v>p:v<p:!1,D=Math.abs(b)<=r.precision,O=r.tension!==0?Math.abs(p-v)<=r.precision:!0;o=N||D&&O,f.lastVelocity=b,f.lastTime=t}T&&!r.toValues[c].done&&(o=!1),o?(f.value!==p&&(v=p),f.done=!0):n=!0,f.setValue(v),f.lastPosition=v}e.props.onFrame&&(e.values[r.name]=r.interpolation.getValue())}e.props.onFrame&&e.props.onFrame(e.values),n||(Ga.delete(e),e.stop(!0))}return Ga.size?Uk(qk):Ef=!1,Ef},YW=t=>{Ga.has(t)||Ga.add(t),Ef||(Ef=!0,Uk(qk))},JW=t=>{Ga.has(t)&&Ga.delete(t)};function ym(t,e,n){if(typeof t=="function")return t;if(Array.isArray(t))return ym({range:t,output:e,extrapolate:n});if(gm&&typeof t.output[0]=="string")return gm(t);const i=t,r=i.output,o=i.range||[0,1],l=i.extrapolateLeft||i.extrapolate||"extend",c=i.extrapolateRight||i.extrapolate||"extend",f=i.easing||(d=>d);return d=>{const p=XW(d,o);return WW(d,o[p],o[p+1],r[p],r[p+1],f,l,c,i.map)}}function WW(t,e,n,i,r,o,l,c,f){let d=f?f(t):t;if(d<e){if(l==="identity")return d;l==="clamp"&&(d=e)}if(d>n){if(c==="identity")return d;c==="clamp"&&(d=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?d=-d:n===1/0?d=d-e:d=(d-e)/(n-e),d=o(d),i===-1/0?d=-d:r===1/0?d=d+i:d=d*(r-i)+i,d)}function XW(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}class xu extends f_{constructor(e,n,i,r){super(),this.calc=void 0,this.payload=e instanceof f_&&!(e instanceof xu)?e.getPayload():Array.isArray(e)?e:[e],this.calc=ym(n,i,r)}getValue(){return this.calc(...this.payload.map(e=>e.getValue()))}updateConfig(e,n,i){this.calc=ym(e,n,i)}interpolate(e,n,i){return new xu(this,e,n,i)}}const jl=(t,e,n)=>t&&new xu(t,e,n),QW={default:{tension:170,friction:26}};function zk(t,e){"update"in t?e.add(t):t.getChildren().forEach(n=>zk(n,e))}class d_ extends Dr{constructor(e){var n;super(),n=this,this.animatedStyles=new Set,this.value=void 0,this.startPosition=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.startTime=void 0,this.lastTime=void 0,this.done=!1,this.setValue=function(i,r){r===void 0&&(r=!0),n.value=i,r&&n.flush()},this.value=e,this.startPosition=e,this.lastPosition=e}flush(){this.animatedStyles.size===0&&zk(this,this.animatedStyles),this.animatedStyles.forEach(e=>e.update())}clearStyles(){this.animatedStyles.clear()}getValue(){return this.value}interpolate(e,n,i){return new xu(this,e,n,i)}}class ZW extends f_{constructor(e){super(),this.payload=e.map(n=>new d_(n))}setValue(e,n){n===void 0&&(n=!0),Array.isArray(e)?e.length===this.payload.length&&e.forEach((i,r)=>this.payload[r].setValue(i,n)):this.payload.forEach(i=>i.setValue(e,n))}getValue(){return this.payload.map(e=>e.getValue())}interpolate(e,n){return new xu(this,e,n)}}let eX=0,tX=class{constructor(){this.id=void 0,this.idle=!0,this.hasChanged=!1,this.guid=0,this.local=0,this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.listeners=[],this.queue=[],this.localQueue=void 0,this.getValues=()=>this.interpolations,this.id=eX++}update(e){if(!e)return this;const n=Kv(e),i=n.delay,r=i===void 0?0:i,o=n.to,l=pu(n,["delay","to"]);if(it.arr(o)||it.fun(o))this.queue.push(on({},l,{delay:r,to:o}));else if(o){let c={};Object.entries(o).forEach(f=>{let d=f[0],p=f[1];const v=on({to:{[d]:p},delay:ru(r,d)},l),T=c[v.delay]&&c[v.delay].to;c[v.delay]=on({},c[v.delay],v,{to:on({},T,v.to)})}),this.queue=Object.values(c)}return this.queue=this.queue.sort((c,f)=>c.delay-f.delay),this.diff(l),this}start(e){if(this.queue.length){this.idle=!1,this.localQueue&&this.localQueue.forEach(r=>{let o=r.from,l=o===void 0?{}:o,c=r.to,f=c===void 0?{}:c;it.obj(l)&&(this.merged=on({},l,this.merged)),it.obj(f)&&(this.merged=on({},this.merged,f))});const n=this.local=++this.guid,i=this.localQueue=this.queue;this.queue=[],i.forEach((r,o)=>{let l=r.delay,c=pu(r,["delay"]);const f=p=>{o===i.length-1&&n===this.guid&&p&&(this.idle=!0,this.props.onRest&&this.props.onRest(this.merged)),e&&e()};let d=it.arr(c.to)||it.fun(c.to);l?setTimeout(()=>{n===this.guid&&(d?this.runAsync(c,f):this.diff(c).start(f))},l):d?this.runAsync(c,f):this.diff(c).start(f)})}else it.fun(e)&&this.listeners.push(e),this.props.onStart&&this.props.onStart(),YW(this);return this}stop(e){return this.listeners.forEach(n=>n(e)),this.listeners=[],this}pause(e){return this.stop(!0),e&&JW(this),this}runAsync(e,n){var i=this;e.delay;let r=pu(e,["delay"]);const o=this.local;let l=Promise.resolve(void 0);if(it.arr(r.to))for(let c=0;c<r.to.length;c++){const f=c,d=on({},r,Kv(r.to[f]));it.arr(d.config)&&(d.config=d.config[f]),l=l.then(()=>{if(o===this.guid)return new Promise(p=>this.diff(d).start(p))})}else if(it.fun(r.to)){let c=0,f;l=l.then(()=>r.to(d=>{const p=on({},r,Kv(d));if(it.arr(p.config)&&(p.config=p.config[c]),c++,o===this.guid)return f=new Promise(v=>this.diff(p).start(v))},function(d){return d===void 0&&(d=!0),i.stop(d)}).then(()=>f))}l.then(n)}diff(e){this.props=on({},this.props,e);let n=this.props,i=n.from,r=i===void 0?{}:i,o=n.to,l=o===void 0?{}:o,c=n.config,f=c===void 0?{}:c,d=n.reverse,p=n.attach,v=n.reset,T=n.immediate;if(d){var b=[l,r];r=b[0],l=b[1]}this.merged=on({},r,this.merged,l),this.hasChanged=!1;let x=p&&p(this);if(this.animations=Object.entries(this.merged).reduce((N,D)=>{let O=D[0],k=D[1],F=N[O]||{};const $=it.num(k),K=it.str(k)&&!k.startsWith("#")&&!/\d/.test(k)&&!Ok[k],G=it.arr(k),I=!$&&!G&&!K;let R=it.und(r[O])?k:r[O],P=$||G||K?k:1,V=ru(f,O);x&&(P=x.animations[O].parent);let U=F.parent,q=F.interpolation,z=Xh(x?P.getPayload():P),xe,ke=k;I&&(ke=gm({range:[0,1],output:[k,k]})(1));let ee=q&&q.getValue();const me=!it.und(U)&&F.animatedValues.some(Z=>!Z.done),Ce=!it.equ(ke,ee),Ie=!it.equ(ke,F.previous),j=!it.equ(V,F.config);if(v||Ie&&Ce||j){if($||K)U=q=F.parent||new d_(R);else if(G)U=q=F.parent||new ZW(R);else if(I){let Z=F.interpolation&&F.interpolation.calc(F.parent.value);Z=Z!==void 0&&!v?Z:R,F.parent?(U=F.parent,U.setValue(0,!1)):U=new d_(0);const pe={output:[Z,k]};F.interpolation?(q=F.interpolation,F.interpolation.updateConfig(pe)):q=U.interpolate(pe)}return z=Xh(x?P.getPayload():P),xe=Xh(U.getPayload()),v&&!I&&U.setValue(R,!1),this.hasChanged=!0,xe.forEach(Z=>{Z.startPosition=Z.value,Z.lastPosition=Z.value,Z.lastVelocity=me?Z.lastVelocity:void 0,Z.lastTime=me?Z.lastTime:void 0,Z.startTime=Fk(),Z.done=!1,Z.animatedStyles.clear()}),ru(T,O)&&U.setValue(I?P:k,!1),on({},N,{[O]:on({},F,{name:O,parent:U,interpolation:q,animatedValues:xe,toValues:z,previous:ke,config:V,fromValues:Xh(U.getValue()),immediate:ru(T,O),initialVelocity:Pa(V.velocity,0),clamp:Pa(V.clamp,!1),precision:Pa(V.precision,.01),tension:Pa(V.tension,170),friction:Pa(V.friction,26),mass:Pa(V.mass,1),duration:V.duration,easing:Pa(V.easing,Z=>Z),decay:V.decay})})}else return Ce?N:(I&&(U.setValue(1,!1),q.updateConfig({output:[ke,ke]})),U.done=!0,this.hasChanged=!0,on({},N,{[O]:on({},N[O],{previous:ke})}))},this.animations),this.hasChanged){this.configs=Object.values(this.animations),this.values={},this.interpolations={};for(let N in this.animations)this.interpolations[N]=this.animations[N].interpolation,this.values[N]=this.animations[N].interpolation.getValue()}return this}destroy(){this.stop(),this.props={},this.merged={},this.animations={},this.interpolations={},this.values={},this.configs=[],this.local=0}};const nX=(t,e)=>{const n=B.useRef(!1),i=B.useRef(),r=it.fun(e),o=B.useMemo(()=>{i.current&&(i.current.map(v=>v.destroy()),i.current=void 0);let p;return[new Array(t).fill().map((v,T)=>{const b=new tX,x=r?ru(e,T,b):e[T];return T===0&&(p=x.ref),b.update(x),p||b.start(),b}),p]},[t]),l=o[0],c=o[1];i.current=l,B.useImperativeHandle(c,()=>({start:()=>Promise.all(i.current.map(p=>new Promise(v=>p.start(v)))),stop:p=>i.current.forEach(v=>v.stop(p)),get controllers(){return i.current}}));const f=B.useMemo(()=>p=>i.current.map((v,T)=>{v.update(r?ru(p,T,v):p[T]),c||v.start()}),[t]);B.useEffect(()=>{n.current?r||f(e):c||i.current.forEach(p=>p.start())}),B.useEffect(()=>(n.current=!0,()=>i.current.forEach(p=>p.destroy())),[]);const d=i.current.map(p=>p.getValues());return r?[d,f,p=>i.current.forEach(v=>v.pause(p))]:d},iX=t=>{const e=it.fun(t),n=nX(1,e?t:[t]),i=n[0],r=n[1],o=n[2];return e?[i[0],r,o]:i};class rX extends Lk{constructor(e){e===void 0&&(e={}),super(),e.transform&&!(e.transform instanceof Dr)&&(e=bE.transform(e)),this.payload=e}}const vm={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Vr="[-+]?\\d*\\.?\\d+",_m=Vr+"%";function cg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const sX=new RegExp("rgb"+cg(Vr,Vr,Vr)),oX=new RegExp("rgba"+cg(Vr,Vr,Vr,Vr)),aX=new RegExp("hsl"+cg(Vr,_m,_m)),lX=new RegExp("hsla"+cg(Vr,_m,_m,Vr)),uX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cX=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,fX=/^#([0-9a-fA-F]{6})$/,dX=/^#([0-9a-fA-F]{8})$/;function hX(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=fX.exec(t))?parseInt(e[1]+"ff",16)>>>0:vm.hasOwnProperty(t)?vm[t]:(e=sX.exec(t))?($l(e[1])<<24|$l(e[2])<<16|$l(e[3])<<8|255)>>>0:(e=oX.exec(t))?($l(e[1])<<24|$l(e[2])<<16|$l(e[3])<<8|qR(e[4]))>>>0:(e=uX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=dX.exec(t))?parseInt(e[1],16)>>>0:(e=cX.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=aX.exec(t))?(FR(BR(e[1]),Qh(e[2]),Qh(e[3]))|255)>>>0:(e=lX.exec(t))?(FR(BR(e[1]),Qh(e[2]),Qh(e[3]))|qR(e[4]))>>>0:null}function Yv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function FR(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=Yv(r,i,t+1/3),l=Yv(r,i,t),c=Yv(r,i,t-1/3);return Math.round(o*255)<<24|Math.round(l*255)<<16|Math.round(c*255)<<8}function $l(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function BR(t){return(parseFloat(t)%360+360)%360/360}function qR(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Qh(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function zR(t){let e=hX(t);if(e===null)return t;e=e||0;let n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,o=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${o})`}const Zh=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,pX=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,mX=new RegExp(`(${Object.keys(vm).join("|")})`,"g"),gX=t=>{const e=t.output.map(r=>r.replace(pX,zR)).map(r=>r.replace(mX,zR)),n=e[0].match(Zh).map(()=>[]);e.forEach(r=>{r.match(Zh).forEach((o,l)=>n[l].push(+o))});const i=e[0].match(Zh).map((r,o)=>ym(on({},t,{output:n[o]})));return r=>{let o=0;return e[0].replace(Zh,()=>i[o++](r)).replace(/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,(l,c,f,d,p)=>`rgba(${Math.round(c)}, ${Math.round(f)}, ${Math.round(d)}, ${p})`)}};let Sf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const yX=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),vX=["Webkit","Ms","Moz","O"];Sf=Object.keys(Sf).reduce((t,e)=>(vX.forEach(n=>t[yX(n,e)]=t[e]),t),Sf);function _X(t,e,n){return e==null||typeof e=="boolean"||e===""?"":!n&&typeof e=="number"&&e!==0&&!(Sf.hasOwnProperty(t)&&Sf[t])?e+"px":(""+e).trim()}const GR={};HW(t=>new rX(t));zW(gX);qW(vm);BW((t,e)=>{if(t.nodeType&&t.setAttribute!==void 0){const r=e.style,o=e.children,l=e.scrollTop,c=e.scrollLeft,f=pu(e,["style","children","scrollTop","scrollLeft"]),d=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter";l!==void 0&&(t.scrollTop=l),c!==void 0&&(t.scrollLeft=c),o!==void 0&&(t.textContent=o);for(let p in r)if(r.hasOwnProperty(p)){var n=p.indexOf("--")===0,i=_X(p,r[p],n);p==="float"&&(p="cssFloat"),n?t.style.setProperty(p,i):t.style[p]=i}for(let p in f){const v=d?p:GR[p]||(GR[p]=p.replace(/([A-Z])/g,T=>"-"+T.toLowerCase()));typeof t.getAttribute(v)<"u"&&t.setAttribute(v,f[p])}return}else return!1},t=>t);const TX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],EX=LW(KW),SX=EX(TX);function HR(t,e){return t.map(function(n,i){return n+e[i]})}function Gk(t,e){return t.map(function(n,i){return n-e[i]})}function h_(t){return Math.hypot.apply(Math,t)}function bX(t,e,n){var i=h_(e),r=i===0?0:1/i,o=n===0?0:1/n,l=o*i,c=e.map(function(p){return o*p}),f=e.map(function(p){return r*p}),d=h_(t);return{velocities:c,velocity:l,distance:d,direction:f}}function p_(t){return Math.sign?Math.sign(t):+(t>0)-+(t<0)||+t}function wX(t,e,n){return Math.max(e,Math.min(t,n))}function AX(t,e){return Math.pow(t,e*5)}function jR(t,e,n){return e===0||Math.abs(e)===1/0?AX(t,n):t*e*n/(e+n*t)}function bf(t,e,n,i){return i===void 0&&(i=.15),i===0?wX(t,e,n):t<e?-jR(e-t,n-e,i)+e:t>n?+jR(t-n,n-e,i)+n:t}function CX(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xX(t,e,n){return e&&CX(t.prototype,e),t}function bi(){return bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bi.apply(this,arguments)}function Hk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function IX(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ep(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RX(t,e){if(t){if(typeof t=="string")return $R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $R(t,e)}}function $R(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function fg(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=RX(t))||e){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=t[Symbol.iterator](),n.next.bind(n)}function jk(){}function $k(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?jk:e.length===1?e[0]:function(){for(var i,r=fg(e),o;!(o=r()).done;){var l=o.value;i=l.apply(this,arguments)||i}return i}}function Vo(t,e){if(t===void 0){if(e===void 0)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function tp(t){if(typeof t=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}else return t}function wE(t,e){t===void 0&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],l=o[0],c=o[1];switch(typeof c){case"function":n[l]=c.call(n,t[l],l,t);break;case"object":n[l]=wE(t[l],c);break;case"boolean":c&&(n[l]=t[l]);break}}return n}var NX=180,PX=.15,DX=.5,MX=60,kX={threshold:function(e){return e===void 0&&(e=0),Vo(e)},rubberband:function(e){switch(e===void 0&&(e=0),e){case!0:return Vo(PX);case!1:return Vo(0);default:return Vo(e)}},enabled:function(e){return e===void 0&&(e=!0),e},triggerAllEvents:function(e){return e===void 0&&(e=!1),e},initial:function(e){return e===void 0&&(e=0),typeof e=="function"?e:Vo(e)}},Kk=bi({},kX,{axis:!0,lockDirection:function(e){return e===void 0&&(e=!1),e},bounds:function(e){if(e===void 0&&(e={}),typeof e=="function")return function(v){return Kk.bounds(e(v))};var n=e,i=n.left,r=i===void 0?-1/0:i,o=n.right,l=o===void 0?1/0:o,c=n.top,f=c===void 0?-1/0:c,d=n.bottom,p=d===void 0?1/0:d;return[[r,l],[f,p]]}}),VX=typeof window<"u"&&window.document&&window.document.createElement,LX={enabled:function(e){return e===void 0&&(e=!0),e},domTarget:!0,window:(function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e})(function(t){return t===void 0&&(t=VX?window:void 0),t}),eventOptions:function(e){var n=e===void 0?{}:e,i=n.passive,r=i===void 0?!0:i,o=n.capture,l=o===void 0?!1:o;return{passive:r,capture:l}}},OX=bi({},Kk,{threshold:function(e,n,i){var r=i.filterTaps,o=r===void 0?!1:r,l=i.lockDirection,c=l===void 0?!1:l,f=i.axis,d=f===void 0?void 0:f,p=Vo(e,o?3:c||d?1:0);return this.filterTaps=o||p[0]+p[1]>0,p},swipeVelocity:function(e){return e===void 0&&(e=DX),Vo(e)},swipeDistance:function(e){return e===void 0&&(e=MX),Vo(e)},delay:function(e){switch(e===void 0&&(e=0),e){case!0:return NX;case!1:return 0;default:return e}}});function UX(t){return t===void 0&&(t={}),wE(t,LX)}function FX(t){return t===void 0&&(t={}),wE(t,OX)}function BX(t){var e=t.domTarget,n=t.eventOptions,i=t.window,r=t.enabled,o=IX(t,["domTarget","eventOptions","window","enabled"]),l=UX({domTarget:e,eventOptions:n,window:i,enabled:r});return l.drag=FX(o),l}function Gc(t){return bi({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:jk,canceled:!1,memo:void 0,args:void 0},t)}function Yk(){var t={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},e=Gc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),n=Gc({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),i=Gc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=Gc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),o=Gc({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:t,drag:e,pinch:n,wheel:i,move:r,scroll:o}}var La=new Map,qX=(function(){function t(n,i){var r=this;i===void 0&&(i=[]),this.controller=n,this.args=i,this.debounced=!0,this.setTimeout=function(o,l){var c;l===void 0&&(l=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var f=arguments.length,d=new Array(f>2?f-2:0),p=2;p<f;p++)d[p-2]=arguments[p];r.controller.timeouts[r.stateKey]=(c=window).setTimeout.apply(c,[o,l].concat(d))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(o){if(o===void 0&&(o=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!o&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var l=r.state.active,c=r.state._active;r.state.active=c,r.state.first=c&&!l,r.state.last=l&&!c,r.controller.state.shared[r.ingKey]=c}var f=bi({},r.controller.state.shared,r.state,r.mapStateValues(r.state)),d=r.handler(f);return r.state.memo=d!==void 0?d:r.state.memo,r.state._active||r.clean(),f}}var e=t.prototype;return e.updateSharedState=function(i){Object.assign(this.controller.state.shared,i)},e.updateGestureState=function(i){Object.assign(this.state,i)},e.checkIntentionality=function(i,r){return{_intentional:i,_blocked:!1}},e.getMovement=function(i){var r=this.config,o=r.initial,l=r.bounds,c=r.rubberband,f=r.threshold,d=this.state,p=d._bounds,v=d._initial,T=d._active,b=d._intentional,x=d.lastOffset,N=d.movement,D=this.getInternalMovement(i,this.state),O=b[0]===!1?KR(D[0],f[0]):b[0],k=b[1]===!1?KR(D[1],f[1]):b[1],F=this.checkIntentionality([O,k],D);if(F._blocked)return bi({},F,{_movement:D,delta:[0,0]});var $=F._intentional,K=D,G,I;if($[0]!==!1&&b[0]===!1&&(I=tp(o,this.state),G=tp(l,this.state),v[0]=I[0],p[0]=G[0]),$[1]!==!1&&b[1]===!1){var R,P;I=(R=I)!=null?R:tp(o,this.state),G=(P=G)!=null?P:tp(l,this.state),v[1]=I[1],p[1]=G[1]}var V=[$[0]!==!1?D[0]-$[0]:v[0],$[1]!==!1?D[1]-$[1]:v[1]],U=HR(V,x),q=T?c:[0,0];return V=YR(p,HR(V,v),q),bi({},F,{intentional:$[0]!==!1||$[1]!==!1,_initial:v,_movement:K,movement:V,values:i,offset:YR(p,U,q),delta:Gk(V,N)})},e.clean=function(){this.clearTimeout()},xX(t,[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}]),t})();function KR(t,e){return Math.abs(t)>=e?p_(t)*e:!1}function YR(t,e,n){var i=e[0],r=e[1],o=n[0],l=n[1],c=t[0],f=c[0],d=c[1],p=t[1],v=p[0],T=p[1];return[bf(i,f,d,o),bf(r,v,T,l)]}function Jv(t,e,n){var i=t.state,r=t.args,o=e.timeStamp,l=e.type,c=i.values,f=n?0:o-i.startTime;return{_lastEventType:l,event:e,timeStamp:o,elapsedTime:f,args:r,previous:c}}function zX(t,e,n){var i=t.state.offset,r=n.timeStamp;return bi({},Yk()[t.stateKey],{_active:!0,values:e,initial:e,offset:i,lastOffset:i,startTime:r})}function GX(t,e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return t.call.apply(t,[this,bi({},e,{event:n})].concat(r))}}var HX=function(e){var n=this;this.classes=e,this.bind=function(){for(var i={},r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];for(var c=fg(n.classes),f;!(f=c()).done;){var d=f.value;new d(n,o).addBindings(i)}for(var p=0,v=Object.entries(n.nativeRefs);p<v.length;p++){var T=v[p],b=T[0],x=T[1];m_(i,b,GX(x,bi({},n.state.shared,{args:o})))}return n.config.domTarget?YX(n,i):JX(n,i)},this.effect=function(){return n.config.domTarget&&n.bind(),n.clean},this.clean=function(){var i=Wk(n.config),r=n.config.eventOptions;i&&fd(i,Jk(n.domListeners),r),Object.values(n.timeouts).forEach(clearTimeout),jX(n)},this.state=Yk(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function jX(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(n){for(var o in r){var l=r[o];fd(n,l,i)}t.windowListeners={}}}function $X(t,e){var n=t.config,i=t.windowListeners;n.window&&(fd(n.window,i[e],n.eventOptions),delete i[e])}function KX(t,e,n){var i=t.config,r=t.windowListeners;n===void 0&&(n=[]),i.window&&(fd(i.window,r[e],i.eventOptions),Xk(i.window,r[e]=n,i.eventOptions))}function YX(t,e){var n=t.config,i=t.domListeners,r=Wk(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;fd(r,Jk(i),o);for(var l=0,c=Object.entries(e);l<c.length;l++){var f=c[l],d=f[0],p=f[1],v=d.slice(2).toLowerCase();i.push([v,$k.apply(void 0,p)])}Xk(r,i,o)}function JX(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,l=Object.entries(e);o<l.length;o++){var c=l[o],f=c[0],d=c[1],p=Array.isArray(d)?d:[d],v=f+r;i[v]=$k.apply(void 0,p)}return i}function Jk(t){return t===void 0&&(t=[]),t.splice(0,t.length)}function Wk(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function m_(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function Xk(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=fg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.addEventListener(l,c,n)}}function fd(t,e,n){e===void 0&&(e=[]),n===void 0&&(n={});for(var i=fg(e),r;!(r=i()).done;){var o=r.value,l=o[0],c=o[1];t.removeEventListener(l,c,n)}}function WX(t,e,n){n===void 0&&(n={});var i=QX(t),r=In.useMemo(function(){return new HX(i)},[]);return r.config=e,r.handlers=t,r.nativeRefs=n,In.useEffect(r.effect,[]),r.config.domTarget?XX:r.bind}function XX(){}function QX(t){var e=new Set;return t.drag&&e.add(La.get("drag")),t.wheel&&e.add(La.get("wheel")),t.scroll&&e.add(La.get("scroll")),t.move&&e.add(La.get("move")),t.pinch&&e.add(La.get("pinch")),t.hover&&e.add(La.get("hover")),e}var ZX=(function(t){Hk(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.getInternalMovement=function(r,o){return Gk(r,o.initial)},n.checkIntentionality=function(r,o){if(r[0]===!1&&r[1]===!1)return{_intentional:r,axis:this.state.axis};var l=o.map(Math.abs),c=l[0],f=l[1],d=this.state.axis||(c>f?"x":c<f?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:r,_blocked:!1,axis:d}:d?this.config.axis&&d!==this.config.axis?{_intentional:r,_blocked:!0,axis:d}:(r[d==="x"?1:0]=!1,{_intentional:r,_blocked:!1,axis:d}):{_intentional:[!1,!1],_blocked:!1,axis:d}},n.getKinematics=function(r,o){var l=this.getMovement(r);if(!l._blocked){var c=o.timeStamp-this.state.timeStamp;Object.assign(l,bX(l.movement,l.delta,c))}return l},n.mapStateValues=function(r){return{xy:r.values,vxvy:r.velocities}},e})(qX);function Qk(t){if("touches"in t){var e=t.targetTouches,n=t.changedTouches;return e.length>0?e:n}return null}function JR(t){var e="buttons"in t?t.buttons:0,n=Qk(t),i=n&&n.length||0,r=i>0||e>0,o=t.shiftKey,l=t.altKey,c=t.metaKey,f=t.ctrlKey;return{touches:i,down:r,buttons:e,shiftKey:o,altKey:l,metaKey:c,ctrlKey:f}}function WR(t){var e=Qk(t),n=e?e[0]:t,i=n.clientX,r=n.clientY;return[i,r]}var eQ=3,tQ=220,nQ=(function(t){Hk(e,t);function e(){var i;return i=t.apply(this,arguments)||this,i.ingKey="dragging",i.stateKey="drag",i.onDragStart=function(r){!i.enabled||i.state._active||(KX(i.controller,i.stateKey,[["pointermove",i.onDragChange],["pointerup",i.onDragEnd],["pointercancel",i.onDragEnd]]),i.updateGestureState({_pointerId:r.pointerId}),i.config.delay>0?(i.state._delayedEvent=!0,"persist"in r&&typeof r.persist=="function"&&r.persist(),i.setTimeout(i.startDrag.bind(ep(i)),i.config.delay,r)):i.startDrag(r))},i.onDragChange=function(r){if(!i.state.canceled&&r.pointerId===i.state._pointerId){if(!i.state._active){i.state._delayedEvent&&(i.clearTimeout(),i.startDrag(r));return}var o=JR(r);if(!o.down){i.onDragEnd(r);return}i.updateSharedState(o);var l=WR(r),c=i.getKinematics(l,r),f=Jv(ep(i),r),d=i.state._isTap,p=h_(c._movement);d&&p>=eQ&&(d=!1),i.updateGestureState(bi({},f,c,{_isTap:d})),i.fireGestureHandler()}},i.onDragEnd=function(r){if(r.pointerId===i.state._pointerId){i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0});var o=i.state._isTap,l=i.state.velocities,c=l[0],f=l[1],d=i.state.movement,p=d[0],v=d[1],T=i.state._intentional,b=T[0],x=T[1],N=i.config.swipeVelocity,D=N[0],O=N[1],k=i.config.swipeDistance,F=k[0],$=k[1],K=bi({},Jv(ep(i),r),i.getMovement(i.state.values)),G=[0,0];K.elapsedTime<tQ&&(b!==!1&&Math.abs(c)>D&&Math.abs(p)>F&&(G[0]=p_(c)),x!==!1&&Math.abs(f)>O&&Math.abs(v)>$&&(G[1]=p_(f))),i.updateGestureState(bi({},K,{tap:o,swipe:G})),i.fireGestureHandler(o===!0)}},i.clean=function(){t.prototype.clean.call(ep(i)),i.state._delayedEvent=!1,$X(i.controller,i.stateKey)},i.onCancel=function(){i.state.canceled||(i.updateGestureState({canceled:!0}),i.state._active=!1,i.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame(function(){return i.fireGestureHandler()}))},i.onClick=function(r){i.state._isTap||r.stopPropagation()},i}var n=e.prototype;return n.startDrag=function(r){var o=WR(r);this.updateSharedState(JR(r)),this.updateGestureState(bi({},zX(this,o,r),Jv(this,r,!0),{_pointerId:r.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(o)),this.fireGestureHandler()},n.addBindings=function(r){if(m_(r,"onPointerDown",this.onDragStart),this.config.filterTaps){var o=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";m_(r,o,this.onClick)}},e})(ZX);function iQ(t,e){var n,i=[],r,o=!1;function l(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return o&&n===this&&e(f,i)||(r=t.apply(this,f),o=!0,n=this,i=f),r}return l}function Ip(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,i,r;if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Ip(t[i],e[i]))return!1;return!0}var o;if(typeof Map=="function"&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;for(o=t.entries();!(i=o.next()).done;)if(!Ip(i.value[1],e.get(i.value[0])))return!1;return!0}if(typeof Set=="function"&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(i=o.next()).done;)if(!e.has(i.value[0]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;if(typeof Element<"u"&&t instanceof Element)return!1;for(i=n;i--!==0;)if(!(r[i]==="_owner"&&t.$$typeof)&&!Ip(t[r[i]],e[r[i]]))return!1;return!0}return t!==t&&e!==e}function rQ(t,e){try{return Ip(t,e)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function sQ(t,e){e===void 0&&(e={}),La.set("drag",nQ);var n=B.useRef();return n.current||(n.current=iQ(BX,rQ)),WX({drag:t},n.current(e))}/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Zk=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Tm=Zk.join(","),e2=typeof Element>"u",Za=e2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,g_=!e2&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},t2=function(e,n,i){var r=Array.prototype.slice.apply(e.querySelectorAll(Tm));return n&&Za.call(e,Tm)&&r.unshift(e),r=r.filter(i),r},n2=function t(e,n,i){for(var r=[],o=Array.from(e);o.length;){var l=o.shift();if(l.tagName==="SLOT"){var c=l.assignedElements(),f=c.length?c:l.children,d=t(f,!0,i);i.flatten?r.push.apply(r,d):r.push({scope:l,candidates:d})}else{var p=Za.call(l,Tm);p&&i.filter(l)&&(n||!e.includes(l))&&r.push(l);var v=l.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(l),T=!i.shadowRootFilter||i.shadowRootFilter(l);if(v&&T){var b=t(v===!0?l.children:v.children,!0,i);i.flatten?r.push.apply(r,b):r.push({scope:l,candidates:b})}else o.unshift.apply(o,l.children)}}return r},i2=function(e,n){return e.tabIndex<0&&(n||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},oQ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},r2=function(e){return e.tagName==="INPUT"},aQ=function(e){return r2(e)&&e.type==="hidden"},lQ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(i){return i.tagName==="SUMMARY"});return n},uQ=function(e,n){for(var i=0;i<e.length;i++)if(e[i].checked&&e[i].form===n)return e[i]},cQ=function(e){if(!e.name)return!0;var n=e.form||g_(e),i=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=i(window.CSS.escape(e.name));else try{r=i(e.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var o=uQ(r,e.form);return!o||o===e},fQ=function(e){return r2(e)&&e.type==="radio"},dQ=function(e){return fQ(e)&&!cQ(e)},XR=function(e){var n=e.getBoundingClientRect(),i=n.width,r=n.height;return i===0&&r===0},hQ=function(e,n){var i=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=Za.call(e,"details>summary:first-of-type"),l=o?e.parentElement:e;if(Za.call(l,"details:not([open]) *"))return!0;var c=g_(e).host,f=(c==null?void 0:c.ownerDocument.contains(c))||e.ownerDocument.contains(e);if(!i||i==="full"){if(typeof r=="function"){for(var d=e;e;){var p=e.parentElement,v=g_(e);if(p&&!p.shadowRoot&&r(p)===!0)return XR(e);e.assignedSlot?e=e.assignedSlot:!p&&v!==e.ownerDocument?e=v.host:e=p}e=d}if(f)return!e.getClientRects().length}else if(i==="non-zero-area")return XR(e);return!1},pQ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var i=0;i<n.children.length;i++){var r=n.children.item(i);if(r.tagName==="LEGEND")return Za.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Em=function(e,n){return!(n.disabled||aQ(n)||hQ(n,e)||lQ(n)||pQ(n))},y_=function(e,n){return!(dQ(n)||i2(n)<0||!Em(e,n))},mQ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},gQ=function t(e){var n=[],i=[];return e.forEach(function(r,o){var l=!!r.scope,c=l?r.scope:r,f=i2(c,l),d=l?t(r.candidates):c;f===0?l?n.push.apply(n,d):n.push(c):i.push({documentOrder:o,tabIndex:f,item:r,isScope:l,content:d})}),i.sort(oQ).reduce(function(r,o){return o.isScope?r.push.apply(r,o.content):r.push(o.content),r},[]).concat(n)},yQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=n2([e],n.includeContainer,{filter:y_.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:mQ}):i=t2(e,n.includeContainer,y_.bind(null,n)),gQ(i)},vQ=function(e,n){n=n||{};var i;return n.getShadowRoot?i=n2([e],n.includeContainer,{filter:Em.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):i=t2(e,n.includeContainer,Em.bind(null,n)),i},np=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Za.call(e,Tm)===!1?!1:y_(n,e)},_Q=Zk.concat("iframe").join(","),Wv=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Za.call(e,_Q)===!1?!1:Em(n,e)};/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ZR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(i){TQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function TQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e1=(function(){var t=[];return{activateTrap:function(n){if(t.length>0){var i=t[t.length-1];i!==n&&i.pause()}var r=t.indexOf(n);r===-1||t.splice(r,1),t.push(n)},deactivateTrap:function(n){var i=t.indexOf(n);i!==-1&&t.splice(i,1),t.length>0&&t[t.length-1].unpause()}}})(),EQ=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},SQ=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},bQ=function(e){return e.key==="Tab"||e.keyCode===9},t1=function(e){return setTimeout(e,0)},n1=function(e,n){var i=-1;return e.every(function(r,o){return n(r)?(i=o,!1):!0}),i},Hc=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,i):e},ip=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},wQ=function(e,n){var i=(n==null?void 0:n.document)||document,r=ZR({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,c=function(G,I,R){return G&&G[I]!==void 0?G[I]:r[R||I]},f=function(G){return o.containerGroups.findIndex(function(I){var R=I.container,P=I.tabbableNodes;return R.contains(G)||P.find(function(V){return V===G})})},d=function(G){var I=r[G];if(typeof I=="function"){for(var R=arguments.length,P=new Array(R>1?R-1:0),V=1;V<R;V++)P[V-1]=arguments[V];I=I.apply(void 0,P)}if(I===!0&&(I=void 0),!I){if(I===void 0||I===!1)return I;throw new Error("`".concat(G,"` was specified but was not a node, or did not return a node"))}var U=I;if(typeof I=="string"&&(U=i.querySelector(I),!U))throw new Error("`".concat(G,"` as selector refers to no known node"));return U},p=function(){var G=d("initialFocus");if(G===!1)return!1;if(G===void 0)if(f(i.activeElement)>=0)G=i.activeElement;else{var I=o.tabbableGroups[0],R=I&&I.firstTabbableNode;G=R||d("fallbackFocus")}if(!G)throw new Error("Your focus-trap needs to have at least one focusable element");return G},v=function(){if(o.containerGroups=o.containers.map(function(G){var I=yQ(G,r.tabbableOptions),R=vQ(G,r.tabbableOptions);return{container:G,tabbableNodes:I,focusableNodes:R,firstTabbableNode:I.length>0?I[0]:null,lastTabbableNode:I.length>0?I[I.length-1]:null,nextTabbableNode:function(V){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,q=R.findIndex(function(z){return z===V});if(!(q<0))return U?R.slice(q+1).find(function(z){return np(z,r.tabbableOptions)}):R.slice(0,q).reverse().find(function(z){return np(z,r.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(G){return G.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!d("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},T=function K(G){if(G!==!1&&G!==i.activeElement){if(!G||!G.focus){K(p());return}G.focus({preventScroll:!!r.preventScroll}),o.mostRecentlyFocusedNode=G,EQ(G)&&G.select()}},b=function(G){var I=d("setReturnFocus",G);return I||(I===!1?!1:G)},x=function(G){var I=ip(G);if(!(f(I)>=0)){if(Hc(r.clickOutsideDeactivates,G)){l.deactivate({returnFocus:r.returnFocusOnDeactivate&&!Wv(I,r.tabbableOptions)});return}Hc(r.allowOutsideClick,G)||G.preventDefault()}},N=function(G){var I=ip(G),R=f(I)>=0;R||I instanceof Document?R&&(o.mostRecentlyFocusedNode=I):(G.stopImmediatePropagation(),T(o.mostRecentlyFocusedNode||p()))},D=function(G){var I=ip(G);v();var R=null;if(o.tabbableGroups.length>0){var P=f(I),V=P>=0?o.containerGroups[P]:void 0;if(P<0)G.shiftKey?R=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:R=o.tabbableGroups[0].firstTabbableNode;else if(G.shiftKey){var U=n1(o.tabbableGroups,function(ae){var me=ae.firstTabbableNode;return I===me});if(U<0&&(V.container===I||Wv(I,r.tabbableOptions)&&!np(I,r.tabbableOptions)&&!V.nextTabbableNode(I,!1))&&(U=P),U>=0){var q=U===0?o.tabbableGroups.length-1:U-1,z=o.tabbableGroups[q];R=z.lastTabbableNode}}else{var xe=n1(o.tabbableGroups,function(ae){var me=ae.lastTabbableNode;return I===me});if(xe<0&&(V.container===I||Wv(I,r.tabbableOptions)&&!np(I,r.tabbableOptions)&&!V.nextTabbableNode(I))&&(xe=P),xe>=0){var ke=xe===o.tabbableGroups.length-1?0:xe+1,ee=o.tabbableGroups[ke];R=ee.firstTabbableNode}}}else R=d("fallbackFocus");R&&(G.preventDefault(),T(R))},O=function(G){if(SQ(G)&&Hc(r.escapeDeactivates,G)!==!1){G.preventDefault(),l.deactivate();return}if(bQ(G)){D(G);return}},k=function(G){var I=ip(G);f(I)>=0||Hc(r.clickOutsideDeactivates,G)||Hc(r.allowOutsideClick,G)||(G.preventDefault(),G.stopImmediatePropagation())},F=function(){if(o.active)return e1.activateTrap(l),o.delayInitialFocusTimer=r.delayInitialFocus?t1(function(){T(p())}):T(p()),i.addEventListener("focusin",N,!0),i.addEventListener("mousedown",x,{capture:!0,passive:!1}),i.addEventListener("touchstart",x,{capture:!0,passive:!1}),i.addEventListener("click",k,{capture:!0,passive:!1}),i.addEventListener("keydown",O,{capture:!0,passive:!1}),l},$=function(){if(o.active)return i.removeEventListener("focusin",N,!0),i.removeEventListener("mousedown",x,!0),i.removeEventListener("touchstart",x,!0),i.removeEventListener("click",k,!0),i.removeEventListener("keydown",O,!0),l};return l={get active(){return o.active},get paused(){return o.paused},activate:function(G){if(o.active)return this;var I=c(G,"onActivate"),R=c(G,"onPostActivate"),P=c(G,"checkCanFocusTrap");P||v(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=i.activeElement,I&&I();var V=function(){P&&v(),F(),R&&R()};return P?(P(o.containers.concat()).then(V,V),this):(V(),this)},deactivate:function(G){if(!o.active)return this;var I=ZR({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},G);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,$(),o.active=!1,o.paused=!1,e1.deactivateTrap(l);var R=c(I,"onDeactivate"),P=c(I,"onPostDeactivate"),V=c(I,"checkCanReturnFocus"),U=c(I,"returnFocus","returnFocusOnDeactivate");R&&R();var q=function(){t1(function(){U&&T(b(o.nodeFocusedBeforeActivation)),P&&P()})};return U&&V?(V(b(o.nodeFocusedBeforeActivation)).then(q,q),this):(q(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,$(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,v(),F(),this)},updateContainerElements:function(G){var I=[].concat(G).filter(Boolean);return o.containers=I.map(function(R){return typeof R=="string"?i.querySelector(R):R}),o.active&&v(),this}},l.updateContainerElements(e),l};function AQ(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var AE=!1;if(typeof window<"u"){var i1={get passive(){AE=!0}};window.addEventListener("testPassive",null,i1),window.removeEventListener("testPassive",null,i1)}var s2=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),Oo=[],Sm=!1,o2=-1,wf=void 0,Af=void 0,a2=function(e){return Oo.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(e))})},bm=function(e){var n=e||window.event;return a2(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},CQ=function(e){if(Af===void 0){var n=!!e&&e.reserveScrollBarGap===!0,i=window.innerWidth-document.documentElement.clientWidth;n&&i>0&&(Af=document.body.style.paddingRight,document.body.style.paddingRight=i+"px")}wf===void 0&&(wf=document.body.style.overflow,document.body.style.overflow="hidden")},xQ=function(){Af!==void 0&&(document.body.style.paddingRight=Af,Af=void 0),wf!==void 0&&(document.body.style.overflow=wf,wf=void 0)},IQ=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},RQ=function(e,n){var i=e.targetTouches[0].clientY-o2;return a2(e.target)?!1:n&&n.scrollTop===0&&i>0||IQ(n)&&i<0?bm(e):(e.stopPropagation(),!0)},NQ=function(e,n){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!Oo.some(function(r){return r.targetElement===e})){var i={targetElement:e,options:n||{}};Oo=[].concat(AQ(Oo),[i]),s2?(e.ontouchstart=function(r){r.targetTouches.length===1&&(o2=r.targetTouches[0].clientY)},e.ontouchmove=function(r){r.targetTouches.length===1&&RQ(r,e)},Sm||(document.addEventListener("touchmove",bm,AE?{passive:!1}:void 0),Sm=!0)):CQ(n)}},PQ=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}Oo=Oo.filter(function(n){return n.targetElement!==e}),s2?(e.ontouchstart=null,e.ontouchmove=null,Sm&&Oo.length===0&&(document.removeEventListener("touchmove",bm,AE?{passive:!1}:void 0),Sm=!1)):Oo.length||xQ()},Ha=[],DQ=function(){return Ha.some(function(t){return t.activeTargets.length>0})},MQ=function(){return Ha.some(function(t){return t.skippedTargets.length>0})},r1="ResizeObserver loop completed with undelivered notifications.",kQ=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:r1}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=r1),window.dispatchEvent(t)},jf;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(jf||(jf={}));var ja=function(t){return Object.freeze(t)},VQ=(function(){function t(e,n){this.inlineSize=e,this.blockSize=n,ja(this)}return t})(),l2=(function(){function t(e,n,i,r){return this.x=e,this.y=n,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ja(this)}return t.prototype.toJSON=function(){var e=this,n=e.x,i=e.y,r=e.top,o=e.right,l=e.bottom,c=e.left,f=e.width,d=e.height;return{x:n,y:i,top:r,right:o,bottom:l,left:c,width:f,height:d}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),CE=function(t){return t instanceof SVGElement&&"getBBox"in t},u2=function(t){if(CE(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t,o=r.offsetWidth,l=r.offsetHeight;return!(o||l||t.getClientRects().length)},s1=function(t){var e;if(t instanceof Element)return!0;var n=(e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(n&&t instanceof n.Element)},LQ=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Cf=typeof window<"u"?window:{},rp=new WeakMap,o1=/auto|scroll/,OQ=/^tb|vertical/,UQ=/msie|trident/i.test(Cf.navigator&&Cf.navigator.userAgent),Qr=function(t){return parseFloat(t||"0")},mu=function(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=!1),new VQ((n?e:t)||0,(n?t:e)||0)},a1=ja({devicePixelContentBoxSize:mu(),borderBoxSize:mu(),contentBoxSize:mu(),contentRect:new l2(0,0,0,0)}),c2=function(t,e){if(e===void 0&&(e=!1),rp.has(t)&&!e)return rp.get(t);if(u2(t))return rp.set(t,a1),a1;var n=getComputedStyle(t),i=CE(t)&&t.ownerSVGElement&&t.getBBox(),r=!UQ&&n.boxSizing==="border-box",o=OQ.test(n.writingMode||""),l=!i&&o1.test(n.overflowY||""),c=!i&&o1.test(n.overflowX||""),f=i?0:Qr(n.paddingTop),d=i?0:Qr(n.paddingRight),p=i?0:Qr(n.paddingBottom),v=i?0:Qr(n.paddingLeft),T=i?0:Qr(n.borderTopWidth),b=i?0:Qr(n.borderRightWidth),x=i?0:Qr(n.borderBottomWidth),N=i?0:Qr(n.borderLeftWidth),D=v+d,O=f+p,k=N+b,F=T+x,$=c?t.offsetHeight-F-t.clientHeight:0,K=l?t.offsetWidth-k-t.clientWidth:0,G=r?D+k:0,I=r?O+F:0,R=i?i.width:Qr(n.width)-G-K,P=i?i.height:Qr(n.height)-I-$,V=R+D+K+k,U=P+O+$+F,q=ja({devicePixelContentBoxSize:mu(Math.round(R*devicePixelRatio),Math.round(P*devicePixelRatio),o),borderBoxSize:mu(V,U,o),contentBoxSize:mu(R,P,o),contentRect:new l2(v,f,R,P)});return rp.set(t,q),q},f2=function(t,e,n){var i=c2(t,n),r=i.borderBoxSize,o=i.contentBoxSize,l=i.devicePixelContentBoxSize;switch(e){case jf.DEVICE_PIXEL_CONTENT_BOX:return l;case jf.BORDER_BOX:return r;default:return o}},FQ=(function(){function t(e){var n=c2(e);this.target=e,this.contentRect=n.contentRect,this.borderBoxSize=ja([n.borderBoxSize]),this.contentBoxSize=ja([n.contentBoxSize]),this.devicePixelContentBoxSize=ja([n.devicePixelContentBoxSize])}return t})(),d2=function(t){if(u2(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},BQ=function(){var t=1/0,e=[];Ha.forEach(function(l){if(l.activeTargets.length!==0){var c=[];l.activeTargets.forEach(function(d){var p=new FQ(d.target),v=d2(d.target);c.push(p),d.lastReportedSize=f2(d.target,d.observedBox),v<t&&(t=v)}),e.push(function(){l.callback.call(l.observer,c,l.observer)}),l.activeTargets.splice(0,l.activeTargets.length)}});for(var n=0,i=e;n<i.length;n++){var r=i[n];r()}return t},l1=function(t){Ha.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(r){r.isActive()&&(d2(r.target)>t?n.activeTargets.push(r):n.skippedTargets.push(r))})})},qQ=function(){var t=0;for(l1(t);DQ();)t=BQ(),l1(t);return MQ()&&kQ(),t>0},Xv,h2=[],zQ=function(){return h2.splice(0).forEach(function(t){return t()})},GQ=function(t){if(!Xv){var e=0,n=document.createTextNode(""),i={characterData:!0};new MutationObserver(function(){return zQ()}).observe(n,i),Xv=function(){n.textContent="".concat(e?e--:e++)}}h2.push(t),Xv()},HQ=function(t){GQ(function(){requestAnimationFrame(t)})},Rp=0,jQ=function(){return!!Rp},$Q=250,KQ={attributes:!0,characterData:!0,childList:!0,subtree:!0},u1=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],c1=function(t){return t===void 0&&(t=0),Date.now()+t},Qv=!1,YQ=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var n=this;if(e===void 0&&(e=$Q),!Qv){Qv=!0;var i=c1(e);HQ(function(){var r=!1;try{r=qQ()}finally{if(Qv=!1,e=i-c1(),!jQ())return;r?n.run(1e3):e>0?n.run(e):n.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,n=function(){return e.observer&&e.observer.observe(document.body,KQ)};document.body?n():Cf.addEventListener("DOMContentLoaded",n)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),u1.forEach(function(n){return Cf.addEventListener(n,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),u1.forEach(function(n){return Cf.removeEventListener(n,e.listener,!0)}),this.stopped=!0)},t})(),v_=new YQ,f1=function(t){!Rp&&t>0&&v_.start(),Rp+=t,!Rp&&v_.stop()},JQ=function(t){return!CE(t)&&!LQ(t)&&getComputedStyle(t).display==="inline"},WQ=(function(){function t(e,n){this.target=e,this.observedBox=n||jf.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=f2(this.target,this.observedBox,!0);return JQ(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),XQ=(function(){function t(e,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=n}return t})(),sp=new WeakMap,d1=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},op=(function(){function t(){}return t.connect=function(e,n){var i=new XQ(e,n);sp.set(e,i)},t.observe=function(e,n,i){var r=sp.get(e),o=r.observationTargets.length===0;d1(r.observationTargets,n)<0&&(o&&Ha.push(r),r.observationTargets.push(new WQ(n,i&&i.box)),f1(1),v_.schedule())},t.unobserve=function(e,n){var i=sp.get(e),r=d1(i.observationTargets,n),o=i.observationTargets.length===1;r>=0&&(o&&Ha.splice(Ha.indexOf(i),1),i.observationTargets.splice(r,1),f1(-1))},t.disconnect=function(e){var n=this,i=sp.get(e);i.observationTargets.slice().forEach(function(r){return n.unobserve(e,r.target)}),i.activeTargets.splice(0,i.activeTargets.length)},t})(),QQ=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");op.connect(this,e)}return t.prototype.observe=function(e,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!s1(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");op.observe(this,e,n)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!s1(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");op.unobserve(this,e)},t.prototype.disconnect=function(){op.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function si(){return si=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},si.apply(this,arguments)}function Np(t,e){if(t==null)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e.indexOf(n=o[i])>=0||(r[n]=t[n]);return r}var xf=typeof window<"u"?B.useLayoutEffect:B.useEffect;function jc(t,e,n){return e=(e=+e)==e?e:0,n=(n=+n)==n?n:0,(t=+t)==t&&(t=(t=t<=n?t:n)>=e?t:e),t}function ap(t){var e=Math.round(t);if(Number.isNaN(t))throw new TypeError("Found a NaN! Check your snapPoints / defaultSnap / snapTo ");return e}var ZQ={box:"border-box"};function Zv(t,e){var n=e.label,i=e.enabled,r=e.resizeSourceRef,o=B.useState(0),l=o[0],c=o[1];B.useDebugValue(n+": "+l);var f=B.useCallback(function(d){c(d[0].borderBoxSize[0].blockSize),r.current="element"},[r]);return xf(function(){if(t.current&&i){var d=new QQ(f);return d.observe(t.current,ZQ),function(){d.disconnect()}}},[t,f,i]),i?l:0}function ii(t){return t===void 0&&(t=1e3),new Promise(function(e){return setTimeout(e,t)})}var h1={DRAG:{target:"#overlay.dragging",actions:"onOpenEnd"}},p1={RESIZE:{target:"#overlay.resizing",actions:"onOpenEnd"}},eZ=AW({id:"overlay",initial:"closed",context:{initialState:"CLOSED"},states:{closed:{on:{OPEN:"opening",CLOSE:void 0}},opening:{initial:"start",states:{start:{invoke:{src:"onOpenStart",onDone:"transition"}},transition:{always:[{target:"immediately",cond:"initiallyOpen"},{target:"smoothly",cond:"initiallyClosed"}]},immediately:{initial:"open",states:{open:{invoke:{src:"openImmediately",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"#overlay.opening.end"},on:si({},h1,p1)}}},smoothly:{initial:"visuallyHidden",states:{visuallyHidden:{invoke:{src:"renderVisuallyHidden",onDone:"activating"}},activating:{invoke:{src:"activate",onDone:"open"}},open:{invoke:{src:"openSmoothly",onDone:"#overlay.opening.end"},on:si({},h1,p1)}}},end:{invoke:{src:"onOpenEnd",onDone:"done"},on:{CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:si({},{CLOSE:{target:"#overlay.closing",actions:"onOpenCancel"}}),onDone:"open"},open:{on:{DRAG:"#overlay.dragging",SNAP:"snapping",RESIZE:"resizing"}},dragging:{on:{SNAP:"snapping"}},snapping:{initial:"start",states:{start:{invoke:{src:"onSnapStart",onDone:"snappingSmoothly"},entry:[CW({y:function(t,e){return e.payload.y},velocity:function(t,e){return e.payload.velocity},snapSource:function(t,e){var n=e.payload.source;return n===void 0?"custom":n}})]},snappingSmoothly:{invoke:{src:"snapSmoothly",onDone:"end"}},end:{invoke:{src:"onSnapEnd",onDone:"done"},on:{RESIZE:"#overlay.resizing",SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{SNAP:{target:"snapping",actions:"onSnapEnd"},RESIZE:{target:"#overlay.resizing",actions:"onSnapCancel"},DRAG:{target:"#overlay.dragging",actions:"onSnapCancel"},CLOSE:{target:"#overlay.closing",actions:"onSnapCancel"}},onDone:"open"},resizing:{initial:"start",states:{start:{invoke:{src:"onResizeStart",onDone:"resizingSmoothly"}},resizingSmoothly:{invoke:{src:"resizeSmoothly",onDone:"end"}},end:{invoke:{src:"onResizeEnd",onDone:"done"},on:{SNAP:"#overlay.snapping",CLOSE:"#overlay.closing",DRAG:"#overlay.dragging"}},done:{type:"final"}},on:{RESIZE:{target:"resizing",actions:"onResizeEnd"},SNAP:{target:"snapping",actions:"onResizeCancel"},DRAG:{target:"#overlay.dragging",actions:"onResizeCancel"},CLOSE:{target:"#overlay.closing",actions:"onResizeCancel"}},onDone:"open"},closing:{initial:"start",states:{start:{invoke:{src:"onCloseStart",onDone:"deactivating"},on:{OPEN:{target:"#overlay.open",actions:"onCloseCancel"}}},deactivating:{invoke:{src:"deactivate",onDone:"closingSmoothly"}},closingSmoothly:{invoke:{src:"closeSmoothly",onDone:"end"}},end:{invoke:{src:"onCloseEnd",onDone:"done"},on:{OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}}},done:{type:"final"}},on:{CLOSE:void 0,OPEN:{target:"#overlay.opening",actions:"onCloseCancel"}},onDone:"closed"}},on:{CLOSE:"closing"}},{actions:{onOpenCancel:function(t,e){},onSnapCancel:function(t,e){},onResizeCancel:function(t,e){},onCloseCancel:function(t,e){},onOpenEnd:function(t,e){},onSnapEnd:function(t,e){},onRezizeEnd:function(t,e){}},services:{onSnapStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeStart:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onSnapEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onOpenEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onCloseEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},onResizeEnd:function(){try{return Promise.resolve(ii()).then(function(){})}catch(t){return Promise.reject(t)}},renderVisuallyHidden:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},activate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},deactivate:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},openImmediately:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},snapSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},resizeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}},closeSmoothly:function(t,e){try{return Promise.resolve(ii()).then(function(){})}catch(n){return Promise.reject(n)}}},guards:{initiallyClosed:function(t){return t.initialState==="CLOSED"},initiallyOpen:function(t){return t.initialState==="OPEN"}}}),tZ=["children","sibling","className","footer","header","open","initialState","lastSnapRef","initialFocusRef","onDismiss","maxHeight","defaultSnap","snapPoints","blocking","scrollLocking","style","onSpringStart","onSpringCancel","onSpringEnd","reserveScrollBarGap","expandOnContentDrag"],nZ=["velocity"],iZ=["onRest","config"],p2=QW.default,rZ=p2.tension,lp=p2.friction,sZ=In.forwardRef(function(t,e){var n=t.children,i=t.sibling,r=t.className,o=t.footer,l=t.header,c=t.open,f=t.initialState,d=t.lastSnapRef,p=t.initialFocusRef,v=t.onDismiss,T=t.maxHeight,b=t.defaultSnap,x=b===void 0?aZ:b,N=t.snapPoints,D=N===void 0?lZ:N,O=t.blocking,k=O===void 0||O,F=t.scrollLocking,$=F===void 0||F,K=t.style,G=t.onSpringStart,I=t.onSpringCancel,R=t.onSpringEnd,P=t.reserveScrollBarGap,V=P===void 0?k:P,U=t.expandOnContentDrag,q=U!==void 0&&U,z=Np(t,tZ),xe=(function(){var fe=B.useState(!1),be=fe[0],we=fe[1],je=B.useState({}),ct=je[0],Je=je[1],We=B.useCallback(function(Xe){return Je(function(Qe){var se;return si({},Qe,((se={})[Xe]=!1,se))}),function(){Je(function(Qe){var se;return si({},Qe,((se={})[Xe]=!0,se))})}},[]);return B.useEffect(function(){var Xe=Object.values(ct);Xe.length!==0&&Xe.every(Boolean)&&we(!0)},[ct]),{ready:be,registerReady:We}})(),ke=xe.ready,ee=xe.registerReady,ae=B.useRef(!1),me=B.useRef(G),Ce=B.useRef(I),Ie=B.useRef(R);B.useEffect(function(){me.current=G,Ce.current=I,Ie.current=R},[I,G,R]);var j,Z,pe=iX(function(){return{y:0,ready:0,maxHeight:0,minSnap:0,maxSnap:0}}),ne=pe[0],he=pe[1],Ee=B.useRef(null),Ve=B.useRef(null),Be=B.useRef(null),Tt=B.useRef(null),Nn=B.useRef(null),fi=B.useRef(null),Zt=B.useRef(0),Jn=B.useRef(),Un=B.useRef(!1),An=(j=B.useMemo(function(){return typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)"):null},[]),Z=B.useRef(j==null?void 0:j.matches),B.useDebugValue(Z.current?"reduce":"no-preference"),B.useEffect(function(){var fe=function(be){Z.current=be.matches};return j==null||j.addListener(fe),function(){return j==null?void 0:j.removeListener(fe)}},[j]),Z),di=(function(fe){var be=fe.targetRef,we=fe.enabled,je=fe.reserveScrollBarGap,ct=B.useRef({activate:function(){throw new TypeError("Tried to activate scroll lock too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return ct.current.deactivate(),void(ct.current={activate:function(){},deactivate:function(){}});var Je=be.current,We=!1;ct.current={activate:function(){We||(We=!0,NQ(Je,{allowTouchMove:function(Xe){return Xe.closest("[data-body-scroll-lock-ignore]")},reserveScrollBarGap:je}))},deactivate:function(){We&&(We=!1,PQ(Je))}}},[we,be,je]),ct})({targetRef:Ve,enabled:ke&&$,reserveScrollBarGap:V}),Oi=(function(fe){var be=fe.targetRef,we=fe.enabled,je=B.useRef({activate:function(){throw new TypeError("Tried to activate aria hider too early")},deactivate:function(){}});return B.useDebugValue(we?"Enabled":"Disabled"),B.useEffect(function(){if(!we)return je.current.deactivate(),void(je.current={activate:function(){},deactivate:function(){}});var ct=be.current,Je=!1,We=[],Xe=[];je.current={activate:function(){if(!Je){Je=!0;var Qe=ct.parentNode;document.querySelectorAll("body > *").forEach(function(se){if(se!==Qe){var ve=se.getAttribute("aria-hidden");ve!==null&&ve!=="false"||(We.push(ve),Xe.push(se),se.setAttribute("aria-hidden","true"))}})}},deactivate:function(){Je&&(Je=!1,Xe.forEach(function(Qe,se){var ve=We[se];ve===null?Qe.removeAttribute("aria-hidden"):Qe.setAttribute("aria-hidden",ve)}),We=[],Xe=[])}}},[be,we]),je})({targetRef:Ee,enabled:ke&&k}),en=(function(fe){var be=fe.targetRef,we=fe.fallbackRef,je=fe.initialFocusRef,ct=fe.enabled,Je=B.useRef({activate:function(){throw new TypeError("Tried to activate focus trap too early")},deactivate:function(){}});return B.useDebugValue(ct?"Enabled":"Disabled"),B.useEffect(function(){if(!ct)return Je.current.deactivate(),void(Je.current={activate:function(){},deactivate:function(){}});var We=we.current,Xe=wQ(be.current,{onActivate:void 0,initialFocus:je?function(){return(je==null?void 0:je.current)||We}:void 0,fallbackFocus:We,escapeDeactivates:!1,clickOutsideDeactivates:!1}),Qe=!1;Je.current={activate:function(){try{return Qe?Promise.resolve():(Qe=!0,Promise.resolve(Xe.activate()).then(function(){return Promise.resolve(new Promise(function(se){return setTimeout(function(){return se(void 0)},0)})).then(function(){})}))}catch(se){return Promise.reject(se)}},deactivate:function(){Qe&&(Qe=!1,Xe.deactivate())}}},[ct,we,je,be]),Je})({targetRef:Ee,fallbackRef:fi,initialFocusRef:p||void 0,enabled:ke&&k&&p!==!1}),wi=(function(fe){var be=fe.getSnapPoints,we=fe.heightRef,je=fe.lastSnapRef,ct=fe.ready,Je=(function(xt){var dt=xt.contentRef,Cn=xt.controlledMaxHeight,kt=xt.footerEnabled,Zn=xt.footerRef,er=xt.headerEnabled,Fn=xt.headerRef,pi=xt.registerReady,us=xt.resizeSourceRef,Ui=B.useMemo(function(){return pi("contentHeight")},[pi]),Ut=(function(br,nr,ir){var Ci=B.useMemo(function(){return nr("maxHeight")},[nr]),rr=B.useState(function(){return ap(br)||typeof window<"u"?window.innerHeight:0}),Gr=rr[0],mi=rr[1],Kt=Gr>0,wr=B.useRef(0);return B.useDebugValue(br?"controlled":"auto"),B.useEffect(function(){Kt&&Ci()},[Kt,Ci]),xf(function(){if(br)return mi(ap(br)),void(ir.current="maxheightprop");var Ar=function(){wr.current||(wr.current=requestAnimationFrame(function(){mi(window.innerHeight),ir.current="window",wr.current=0}))};return window.addEventListener("resize",Ar),mi(window.innerHeight),ir.current="window",Ci(),function(){window.removeEventListener("resize",Ar),cancelAnimationFrame(wr.current)}},[br,Ci,ir]),Gr})(Cn,pi,us),fn=Zv(Fn,{label:"headerHeight",enabled:er,resizeSourceRef:us}),Fi=Zv(dt,{label:"contentHeight",enabled:!0,resizeSourceRef:us}),tr=Zv(Zn,{label:"footerHeight",enabled:kt,resizeSourceRef:us}),Bi=Math.min(Ut-fn-tr,Fi)+fn+tr;B.useDebugValue("minHeight: "+Bi);var oa=Fi>0;return B.useEffect(function(){oa&&Ui()},[oa,Ui]),{maxHeight:Ut,minHeight:Bi,headerHeight:fn,footerHeight:tr}})({contentRef:fe.contentRef,controlledMaxHeight:fe.controlledMaxHeight,footerEnabled:fe.footerEnabled,footerRef:fe.footerRef,headerEnabled:fe.headerEnabled,headerRef:fe.headerRef,registerReady:fe.registerReady,resizeSourceRef:fe.resizeSourceRef}),We=Je.maxHeight,Xe=Je.minHeight,Qe=Je.headerHeight,se=Je.footerHeight,ve=(function(xt,dt){var Cn=[].concat(xt).map(ap).reduce(function(Fn,pi){return Fn.add(jc(pi,0,dt)),Fn},new Set),kt=Array.from(Cn),Zn=Math.min.apply(Math,kt);if(Number.isNaN(Zn))throw new TypeError("minSnap is NaN");var er=Math.max.apply(Math,kt);if(Number.isNaN(er))throw new TypeError("maxSnap is NaN");return{snapPoints:kt,minSnap:Zn,maxSnap:er}})(ct?be({height:we.current,footerHeight:se,headerHeight:Qe,minHeight:Xe,maxHeight:We}):[0],We),Ke=ve.snapPoints,wt=ve.minSnap,Mt=ve.maxSnap;return B.useDebugValue("minSnap: "+wt+", maxSnap:"+Mt),{minSnap:wt,maxSnap:Mt,findSnap:function(xt){var dt=ap(typeof xt=="function"?xt({footerHeight:se,headerHeight:Qe,height:we.current,minHeight:Xe,maxHeight:We,snapPoints:Ke,lastSnap:je.current}):xt);return Ke.reduce(function(Cn,kt){return Math.abs(kt-dt)<Math.abs(Cn-dt)?kt:Cn},wt)},maxHeight:We}})({contentRef:Be,controlledMaxHeight:T,footerEnabled:!!o,footerRef:Nn,getSnapPoints:D,headerEnabled:l!==!1,headerRef:Tt,heightRef:Zt,lastSnapRef:d,ready:ke,registerReady:ee,resizeSourceRef:Jn}),Wn=wi.minSnap,Ai=wi.maxSnap,Xn=wi.maxHeight,Qn=wi.findSnap,Re=B.useRef(Xn),tn=B.useRef(Wn),Pe=B.useRef(Ai),Ot=B.useRef(Qn),$t=B.useRef(0);xf(function(){Re.current=Xn,Pe.current=Ai,tn.current=Wn,Ot.current=Qn,$t.current=Qn(x)},[Qn,x,Xn,Ai,Wn]);var Jt=B.useCallback(function(fe){var be=fe.onRest,we=fe.config,je=(we=we===void 0?{}:we).velocity,ct=je===void 0?1:je,Je=Np(we,nZ),We=Np(fe,iZ);return new Promise(function(Xe){return he(si({},We,{config:si({velocity:ct},Je,{mass:1,tension:rZ,friction:Math.max(lp,lp+(lp-lp*ct))}),onRest:function(){var Qe=[].slice.call(arguments);Xe.apply(void 0,Qe),be==null||be.apply(void 0,Qe)}}))})},[he]),Sr=VW(eZ,{devTools:!1,actions:{onOpenCancel:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"OPEN"})},[]),onSnapCancel:B.useCallback(function(fe){return Ce.current==null?void 0:Ce.current({type:"SNAP",source:fe.snapSource})},[]),onCloseCancel:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"CLOSE"})},[]),onResizeCancel:B.useCallback(function(){return Ce.current==null?void 0:Ce.current({type:"RESIZE",source:Jn.current})},[]),onOpenEnd:B.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"OPEN"})},[]),onSnapEnd:B.useCallback(function(fe,be){return Ie.current==null?void 0:Ie.current({type:"SNAP",source:fe.snapSource})},[]),onResizeEnd:B.useCallback(function(){return Ie.current==null?void 0:Ie.current({type:"RESIZE",source:Jn.current})},[])},context:{initialState:f},services:{onSnapStart:B.useCallback(function(fe,be){try{return Promise.resolve(me.current==null?void 0:me.current({type:"SNAP",source:be.payload.source||"custom"}))}catch(we){return Promise.reject(we)}},[]),onOpenStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"OPEN"}))}catch(fe){return Promise.reject(fe)}},[]),onCloseStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"CLOSE"}))}catch(fe){return Promise.reject(fe)}},[]),onResizeStart:B.useCallback(function(){try{return Promise.resolve(me.current==null?void 0:me.current({type:"RESIZE",source:Jn.current}))}catch(fe){return Promise.reject(fe)}},[]),onSnapEnd:B.useCallback(function(fe,be){try{return Promise.resolve(Ie.current==null?void 0:Ie.current({type:"SNAP",source:fe.snapSource}))}catch(we){return Promise.reject(we)}},[]),onOpenEnd:B.useCallback(function(){try{return Promise.resolve(Ie.current==null?void 0:Ie.current({type:"OPEN"}))}catch(fe){return Promise.reject(fe)}},[]),onCloseEnd:B.useCallback(function(){try{return Promise.resolve(Ie.current==null?void 0:Ie.current({type:"CLOSE"}))}catch(fe){return Promise.reject(fe)}},[]),onResizeEnd:B.useCallback(function(){try{return Promise.resolve(Ie.current==null?void 0:Ie.current({type:"RESIZE",source:Jn.current}))}catch(fe){return Promise.reject(fe)}},[]),renderVisuallyHidden:B.useCallback(function(fe,be){try{return Promise.resolve(Jt({y:$t.current,ready:0,maxHeight:Re.current,maxSnap:Pe.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(we){return Promise.reject(we)}},[Jt]),activate:B.useCallback(function(fe,be){try{return ae.current=!0,Promise.resolve(Promise.all([di.current.activate(),en.current.activate(),Oi.current.activate()])).then(function(){})}catch(we){return Promise.reject(we)}},[Oi,en,di]),deactivate:B.useCallback(function(){try{return di.current.deactivate(),en.current.deactivate(),Oi.current.deactivate(),ae.current=!1,Promise.resolve()}catch(fe){return Promise.reject(fe)}},[Oi,en,di]),openImmediately:B.useCallback(function(){try{return Zt.current=$t.current,Promise.resolve(Jt({y:$t.current,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:$t.current,immediate:!0})).then(function(){})}catch(fe){return Promise.reject(fe)}},[Jt]),openSmoothly:B.useCallback(function(){try{return Promise.resolve(Jt({y:0,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:$t.current,immediate:!0})).then(function(){return Zt.current=$t.current,Promise.resolve(Jt({y:$t.current,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:$t.current,immediate:An.current})).then(function(){})})}catch(fe){return Promise.reject(fe)}},[Jt,An]),snapSmoothly:B.useCallback(function(fe,be){try{var we=Ot.current(fe.y);return Zt.current=we,d.current=we,Promise.resolve(Jt({y:we,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:tn.current,immediate:An.current,config:{velocity:fe.velocity}})).then(function(){})}catch(je){return Promise.reject(je)}},[Jt,d,An]),resizeSmoothly:B.useCallback(function(){try{var fe=Ot.current(Zt.current);return Zt.current=fe,d.current=fe,Promise.resolve(Jt({y:fe,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:tn.current,immediate:Jn.current!=="element"||An.current})).then(function(){})}catch(be){return Promise.reject(be)}},[Jt,d,An]),closeSmoothly:B.useCallback(function(fe,be){try{return Jt({minSnap:Zt.current,immediate:!0}),Zt.current=0,Promise.resolve(Jt({y:0,maxHeight:Re.current,maxSnap:Pe.current,immediate:An.current})).then(function(){return Promise.resolve(Jt({ready:0,immediate:!0})).then(function(){})})}catch(we){return Promise.reject(we)}},[Jt,An])}}),zr=Sr[0],Pn=Sr[1];B.useEffect(function(){ke&&Pn(c?"OPEN":"CLOSE")},[c,Pn,ke]),xf(function(){(Xn||Ai||Wn)&&Pn("RESIZE")},[Xn,Ai,Wn,Pn]),B.useEffect(function(){return function(){di.current.deactivate(),en.current.deactivate(),Oi.current.deactivate()}},[Oi,en,di]),B.useImperativeHandle(e,function(){return{snapTo:function(fe,be){var we=be===void 0?{}:be,je=we.velocity,ct=je===void 0?1:je,Je=we.source,We=Je===void 0?"custom":Je;Pn("SNAP",{payload:{y:Ot.current(fe),velocity:ct,source:We}})},get height(){return Zt.current}}},[Pn]),B.useEffect(function(){var fe=Ve.current,be=function(je){Un.current&&je.preventDefault()},we=function(je){fe.scrollTop<0&&(requestAnimationFrame(function(){fe.style.overflow="hidden",fe.scrollTop=0,fe.style.removeProperty("overflow")}),je.preventDefault())};return q&&(fe.addEventListener("scroll",be),fe.addEventListener("touchmove",be),fe.addEventListener("touchstart",we)),function(){fe.removeEventListener("scroll",be),fe.removeEventListener("touchmove",be),fe.removeEventListener("touchstart",we)}},[q,Ve]);var hi=sQ(function(fe){var be=fe.args,we=(be=be===void 0?[]:be)[0],je=(we=we===void 0?{}:we).closeOnTap,ct=je!==void 0&&je,Je=we.isContentDragging,We=Je!==void 0&&Je,Xe=fe.cancel,Qe=fe.direction[1],se=fe.down,ve=fe.first,Ke=fe.last,wt=fe.memo,Mt=wt===void 0?ne.y.getValue():wt,xt=fe.tap,dt=fe.velocity,Cn=-1*fe.movement[1];if(!ae.current)return Xe(),Mt;if(v&&ct&&xt)return Xe(),setTimeout(function(){return v()},0),Mt;if(xt)return Mt;var kt=Mt+Cn,Zn=Cn*dt,er=Math.max(tn.current,Math.min(Pe.current,kt+2*Zn));if(!se&&v&&Qe>0&&kt+Zn<tn.current/2)return Xe(),v(),Mt;var Fn=se?v||tn.current!==Pe.current?bf(kt,v?0:tn.current,Pe.current,.55):kt<tn.current?bf(kt,tn.current,2*Pe.current,.55):bf(kt,tn.current/2,Pe.current,.55):er;return q&&We?(Fn>=Pe.current&&(Fn=Pe.current),Mt===Pe.current&&Ve.current.scrollTop>0&&(Fn=Pe.current),Un.current=Fn<Pe.current):Un.current=!1,ve&&Pn("DRAG"),Ke?(Pn("SNAP",{payload:{y:Fn,velocity:dt>.05?dt:1,source:"dragging"}}),Mt):(he({y:Fn,ready:1,maxHeight:Re.current,maxSnap:Pe.current,minSnap:tn.current,immediate:!0,config:{velocity:dt}}),Mt)},{filterTaps:!0});if(Number.isNaN(Pe.current))throw new TypeError("maxSnapRef is NaN!!");if(Number.isNaN(tn.current))throw new TypeError("minSnapRef is NaN!!");var cn=(function(fe){var be,we=fe.spring,je=jl([we.y,we.maxHeight],function(se,ve){return Math.round(jc(ve-se,0,16))+"px"}),ct=jl([we.y,we.minSnap,we.maxSnap],function(se,ve,Ke){return jc(se,ve,Ke)+"px"}),Je=jl([we.y,we.minSnap,we.maxSnap],function(se,ve,Ke){return se<ve?ve-se+"px":se>Ke?Ke-se+"px":"0px"}),We=jl([we.y,we.maxSnap],function(se,ve){return se>=ve?Math.ceil(se-ve):0}),Xe=jl([we.y,we.minSnap],function(se,ve){if(!ve)return 0;var Ke=Math.max(ve/2-45,0);return jc((se-Ke)*(1/(Math.min(ve/2+45,ve)-Ke)+0),0,1)}),Qe=jl([we.y,we.minSnap],function(se,ve){return ve?jc(se/ve,0,1):0});return(be={})["--rsbs-content-opacity"]=Xe,be["--rsbs-backdrop-opacity"]=Qe,be["--rsbs-antigap-scale-y"]=We,be["--rsbs-overlay-translate-y"]=Je,be["--rsbs-overlay-rounded"]=je,be["--rsbs-overlay-h"]=ct,be})({spring:ne});return In.createElement(SX.div,si({},z,{"data-rsbs-root":!0,"data-rsbs-state":oZ.find(zr.matches),"data-rsbs-is-blocking":k,"data-rsbs-is-dismissable":!!v,"data-rsbs-has-header":!!l,"data-rsbs-has-footer":!!o,className:r,ref:Ee,style:si({},cn,K,{opacity:ne.ready})}),i,k&&In.createElement("div",si({key:"backdrop","data-rsbs-backdrop":!0},hi({closeOnTap:!0}))),In.createElement("div",{key:"overlay","aria-modal":"true",role:"dialog","data-rsbs-overlay":!0,tabIndex:-1,ref:fi,onKeyDown:function(fe){fe.key==="Escape"&&(fe.stopPropagation(),v&&v())}},l!==!1&&In.createElement("div",si({key:"header","data-rsbs-header":!0,ref:Tt},hi()),l),In.createElement("div",si({key:"scroll","data-rsbs-scroll":!0,ref:Ve},q?hi({isContentDragging:!0}):{}),In.createElement("div",{"data-rsbs-content":!0,ref:Be},n)),o&&In.createElement("div",si({key:"footer",ref:Nn,"data-rsbs-footer":!0},hi()),o)))}),oZ=["closed","opening","open","closing","dragging","snapping","resizing"];function aZ(t){var e=t.lastSnap;return e??Math.min.apply(Math,t.snapPoints)}function lZ(t){return t.minHeight}var uZ=["onSpringStart","onSpringEnd","skipInitialTransition"],dg=B.forwardRef(function(t,e){var n=t.onSpringStart,i=t.onSpringEnd,r=t.skipInitialTransition,o=Np(t,uZ),l=B.useState(!1),c=l[0],f=l[1],d=B.useRef(),p=B.useRef(null),v=B.useRef(r&&o.open?"OPEN":"CLOSED");xf(function(){if(o.open)return cancelAnimationFrame(d.current),f(!0),function(){v.current="CLOSED"}},[o.open]);var T=B.useCallback(function(x){return Promise.resolve(n==null?void 0:n(x)).then(function(){x.type==="OPEN"&&cancelAnimationFrame(d.current)})},[n]),b=B.useCallback(function(x){return Promise.resolve(i==null?void 0:i(x)).then(function(){x.type==="CLOSE"&&(d.current=requestAnimationFrame(function(){return f(!1)}))})},[i]);return c?In.createElement(NJ,{"data-rsbs-portal":!0},In.createElement(sZ,si({},o,{lastSnapRef:p,ref:e,initialState:v.current,onSpringStart:T,onSpringEnd:b}))):null});const cZ=({open:t,clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,suggestedOutfits:o,onClose:l,weatherInfo:c,weatherError:f,favoriteOutfits:d,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})=>{const b=document.documentElement.classList.contains("dark"),x=B.useRef(null);return B.useEffect(()=>{!r&&o.length>0&&x.current&&x.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[r,o.length]),S.jsx(dg,{open:t,onDismiss:l,className:b?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crateur de Tenues"}),S.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:N})=>N*.65,snapPoints:({minHeight:N,maxHeight:D})=>[N,D*.65,D*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx(gk,{clothingItems:e,clothingSets:n,onGenerate:i,isGenerating:r,weatherInfo:c,weatherError:f}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"L'IA compose vos tenues..."})]}),S.jsx("div",{ref:x,children:o.length>0&&S.jsx(fm,{outfits:o,allClothingItems:e,allClothingSets:n,favoriteOutfits:d,onToggleFavorite:p,onGenerateVisual:v,generatingVisualFor:T})})]})})},fZ=({open:t,clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r,vacationPlan:o,onCreateSet:l,onClose:c})=>{const f=document.documentElement.classList.contains("dark");return S.jsx(dg,{open:t,onDismiss:c,className:f?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Planificateur de Valise"}),S.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:d})=>d*.6,snapPoints:({maxHeight:d})=>[d*.55,d*.85],children:S.jsxs("div",{className:"p-6 space-y-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow min-h-[45vh]",children:[S.jsx(yk,{clothingItems:e,clothingSets:n,onGeneratePlan:i,isGenerating:r}),r&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[S.jsxs("svg",{className:"animate-spin h-10 w-10 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Prparation de votre valise..."})]}),o&&S.jsx(vk,{plan:o,allClothingItems:e,allClothingSets:n,onCreateSet:l})]})})},dZ=({open:t,clothingItems:e,clothingSets:n,onClose:i,onCreateSet:r})=>{const[o,l]=B.useState(new Set),c=new Set(n.flatMap(b=>b.itemIds)),d=e.filter(b=>!c.has(b.id)).reduce((b,x)=>(b[x.category]||(b[x.category]=[]),b[x.category].push(x),b),{}),p=b=>{l(x=>{const N=new Set(x);return N.has(b)?N.delete(b):N.add(b),N})},v=()=>{if(o.size<2){alert("Veuillez slectionner au moins 2 articles.");return}const b=window.prompt("Donnez un nom  cet ensemble :");b&&r(b,Array.from(o))},T=document.documentElement.classList.contains("dark");return S.jsx(dg,{open:t,onDismiss:i,className:T?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Crer un ensemble"}),S.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),footer:o.size>0&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-white dark:bg-raisin-black",children:S.jsxs("button",{onClick:v,disabled:o.size<2,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gold text-onyx font-bold rounded-lg hover:bg-gold-dark transition-all duration-300 disabled:bg-gray-400 dark:disabled:bg-gray-600",children:[S.jsx(tg,{}),"Lier ",o.size," article",o.size>1?"s":""]})}),defaultSnap:({maxHeight:b})=>b*.6,snapPoints:({maxHeight:b})=>[b*.6,b*.85],children:S.jsxs("div",{className:"p-4 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:[S.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 mb-4",children:"Slectionnez les articles que vous souhaitez lier (ex: une veste et son pantalon)."}),S.jsx("div",{className:"space-y-4",children:Object.keys(d).map(b=>d[b].length>0&&S.jsxs("div",{children:[S.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:d[b].map(x=>{const N=o.has(x.id);return S.jsxs("button",{onClick:()=>p(x.id),className:"relative rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform border-2",style:{borderColor:N?"#D4AF37":"transparent"},children:[N&&S.jsx("div",{className:"absolute top-1 right-1 p-0.5 bg-gold rounded-full text-onyx z-10",children:S.jsx(VT,{})}),S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:x.imageSrc,alt:x.analysis,className:"w-full h-full object-cover"})}),S.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),S.jsx("p",{className:"absolute bottom-1 left-1 right-1 text-white text-xs font-medium line-clamp-2 p-1",children:x.analysis})]},x.id)})})]},b))})]})})},hZ=(t,e)=>{const n=ku(Br,"users",t,"items"),i=dT(n);return yT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (items listener):",o)})},pZ=async(t,e)=>{try{const n=ku(Br,"users",t,"items");return(await gT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un vtement:",n),n}},m1=async(t,e,n)=>{try{const i=Vu(Br,"users",t,"items",e);await uF(i,n)}catch(i){throw console.error("Erreur lors de la mise  jour d'un vtement:",i),i}},g1=async(t,e)=>{try{const n=Vu(Br,"users",t,"items",e);await mT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un vtement:",n),n}},mZ=(t,e)=>{const n=ku(Br,"users",t,"favoriteOutfits"),i=dT(n);return yT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (favoriteOutfits listener):",o)})},gZ=async(t,e)=>{try{const n=ku(Br,"users",t,"favoriteOutfits");return(await gT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'une tenue favorite:",n),n}},yZ=async(t,e)=>{try{const n=Vu(Br,"users",t,"favoriteOutfits",e);await mT(n)}catch(n){throw console.error("Erreur lors de la suppression d'une tenue favorite:",n),n}},vZ=(t,e)=>{const n=ku(Br,"users",t,"sets"),i=dT(n);return yT(i,o=>{const l=o.docs.map(c=>({id:c.id,...c.data()}));e(l)},o=>{console.error("Erreur (sets listener):",o)})},_Z=async(t,e)=>{try{const n=ku(Br,"users",t,"sets");return(await gT(n,e)).id}catch(n){throw console.error("Erreur lors de l'ajout d'un ensemble:",n),n}},TZ=async(t,e)=>{try{const n=Vu(Br,"users",t,"sets",e);await mT(n)}catch(n){throw console.error("Erreur lors de la suppression d'un ensemble:",n),n}},EZ=async(t,e,n)=>{try{const i=_B(YB,`users/${t}/clothing/${n}.jpg`);return await yB(i,e,"data_url"),await vB(i)}catch(i){throw console.error("Erreur lors de l'upload de l'image:",i),i}},m2=B.createContext(void 0),SZ=t=>new Promise((e,n)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=r=>{var l;const o=new Image;o.src=(l=r.target)==null?void 0:l.result,o.onload=()=>{const c=document.createElement("canvas"),f=800,d=f/o.width;c.width=f,c.height=o.height*d;const p=c.getContext("2d");p?(p.drawImage(o,0,0,c.width,c.height),e(c.toDataURL("image/jpeg",.7))):n(new Error("Canvas context error"))},o.onerror=c=>n(c)},i.onerror=r=>n(r)}),bZ=({children:t,user:e})=>{const[n,i]=B.useState([]),[r,o]=B.useState([]),[l,c]=B.useState([]),[f,d]=B.useState(!1),[p,v]=B.useState(!0);B.useEffect(()=>{if(e){const G=hZ(e.uid,P=>{i(P),v(!1)}),I=vZ(e.uid,P=>{o(P)}),R=mZ(e.uid,P=>{c(P)});return()=>{G(),I(),R()}}else i([]),o([]),c([]),v(!1)},[e]);const T=B.useCallback(async G=>{if(!(G.length===0||!e)){d(!0);try{const I=G.map(q=>SZ(q)),R=await Promise.all(I),P=R.map(q=>q.split(",")[1]),V=await w7(P),U=Math.min(V.length,G.length);for(let q=0;q<U;q++){const z=V[q];let xe="";try{xe=await pZ(e.uid,{...z,createdAt:Date.now()});const ke=await EZ(e.uid,R[q],xe);await m1(e.uid,xe,{imageSrc:ke})}catch(ke){if(console.error(`chec de cration/upload pour ${G[q].name}.`,ke),xe)try{await g1(e.uid,xe)}catch(ee){console.error(`chec suppression orphelin ${xe}:`,ee)}typeof window<"u"&&"vibrate"in navigator&&navigator.vibrate([10,50,10])}}}catch(I){console.error("Erreur lors de l'analyse par lot:",I)}finally{d(!1)}}},[e]),b=B.useCallback(async G=>{if(e)try{await g1(e.uid,G)}catch(I){console.error("Erreur suppression item:",I)}},[e]),x=B.useCallback(async G=>{if(e)try{await m1(e.uid,G.id,G)}catch(I){console.error("Erreur mise  jour item:",I)}},[e]),N=B.useCallback(async G=>{if(e)try{const{id:I,...R}=G;await gZ(e.uid,R)}catch(I){console.error("Erreur ajout favori:",I)}},[e]),D=B.useCallback(async G=>{if(e)try{await yZ(e.uid,G)}catch(I){console.error("Erreur suppression favori:",I)}},[e]),O=B.useCallback(async(G,I)=>{var V;if(!e)return;const R=((V=n.find(U=>U.id===I[0]))==null?void 0:V.imageSrc)||"",P={name:G,itemIds:I,imageSrc:R};try{await _Z(e.uid,P)}catch(U){console.error("Erreur cration set:",U)}},[e,n]),[k,F]=B.useState(null),$=B.useCallback(async G=>{if(e)try{await TZ(e.uid,G)}catch(I){console.error("Erreur suppression set:",I)}},[e]),K={clothingItems:n,clothingSets:r,favoriteOutfits:l,isAnalyzing:f,analyzeClothingItems:T,deleteClothingItem:b,updateClothingItem:x,createClothingSet:O,deleteClothingSet:$,addFavoriteOutfit:N,deleteFavoriteOutfit:D,loading:p};return S.jsx(m2.Provider,{value:K,children:t})},wZ=()=>{const t=B.useContext(m2);if(t===void 0)throw new Error("useWardrobe doit tre utilis  l'intrieur d'un WardrobeProvider");return t},AZ=({open:t,onClose:e,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c})=>{const f=document.documentElement.classList.contains("dark");return S.jsx(dg,{open:t,onDismiss:e,className:f?"dark":"",header:S.jsxs("div",{className:"flex items-center justify-between w-full",children:[S.jsx("h2",{className:"text-xl font-bold text-raisin-black dark:text-snow",children:" Tenues Favorites"}),S.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:S.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),defaultSnap:({maxHeight:d})=>d*.65,snapPoints:({maxHeight:d})=>[d*.65,d*.85],children:S.jsx("div",{className:"p-6 bg-white dark:bg-raisin-black text-raisin-black dark:text-snow",children:r.length>0?S.jsx(fm,{outfits:r,allClothingItems:n,allClothingSets:i,favoriteOutfits:r,onToggleFavorite:o,onGenerateVisual:l,generatingVisualFor:c}):S.jsxs("div",{className:"text-center py-12",children:[S.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de tenues favorites."}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Cliquez sur le cur  sur une tenue gnre pour l'ajouter."})]})})})},CZ=({imageUrl:t,onClose:e})=>(B.useEffect(()=>{const n=i=>{i.key==="Escape"&&e()};return window.addEventListener("keydown",n),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",n),document.body.style.overflow="auto"}},[e]),S.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:999999},onClick:e,role:"dialog","aria-modal":"true",children:[S.jsx("div",{className:"absolute inset-0 bg-onyx/80 backdrop-blur-md",style:{zIndex:999999}}),S.jsxs("div",{className:"relative bg-white dark:bg-raisin-black rounded-lg shadow-2xl p-4",style:{zIndex:1e6},onClick:n=>n.stopPropagation(),children:[S.jsx("img",{src:t,alt:"Rendu visuel de la tenue",className:"max-w-[85vw] max-h-[75vh] object-contain rounded-lg"}),S.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-3",children:"Rendu gnr par IA (image factice)."}),S.jsx("button",{onClick:n=>{n.stopPropagation(),e()},onTouchEnd:n=>{n.stopPropagation(),e()},className:"absolute -top-3 -right-3 p-3 bg-red-500 border-4 border-white rounded-full text-white shadow-2xl hover:bg-red-600 active:scale-95 touch-none",style:{zIndex:1000001},"aria-label":"Fermer",children:S.jsx(kT,{})})]})]})),xZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState(null),[r,o]=B.useState([]),[l,c]=B.useState(!1),[f,d]=B.useState(null),[p,v]=B.useState(!1),[T,b]=B.useState(null),[x,N]=B.useState(!1),[D,O]=B.useState("home"),[k,F]=B.useState(!1),[$,K]=B.useState(!1),[G,I]=B.useState(!1),[R,P]=B.useState(!1),[V,U]=B.useState(null),[q,z]=B.useState(null),[xe,ke]=B.useState(!1),[ee,ae]=B.useState(0),[me,Ce]=B.useState(null),[Ie,j]=B.useState(null),[Z,pe]=B.useState(!1),[ne,he]=B.useState(""),[Ee,Ve]=B.useState("favorites");B.useEffect(()=>{if(n){const se=setTimeout(()=>i(null),5e3);return()=>clearTimeout(se)}},[n]);const[Be,Tt]=B.useState(()=>!localStorage.getItem("dressmup_onboarding_complete")),{clothingItems:Nn,clothingSets:fi,isAnalyzing:Zt,analyzeClothingItems:Jn,deleteClothingItem:Un,createClothingSet:An,updateClothingItem:di,deleteClothingSet:Oi,favoriteOutfits:en,addFavoriteOutfit:wi,deleteFavoriteOutfit:Wn,loading:Ai}=wZ(),[Xn,Qn]=B.useState(null),Re=In.useMemo(()=>(Nn||[]).sort((ve,Ke)=>(Ke.isFavorite?1:0)-(ve.isFavorite?1:0)),[Nn]),tn=B.useCallback(se=>{const ve=en.find(Ke=>Ke.titre===se.titre&&Ke.description===se.description);ve?(Wn(ve.id),Qn("Retir des favoris"),hapticFeedback.light()):(wi(se),Qn("Ajout aux favoris "),hapticFeedback.success()),setTimeout(()=>Qn(null),2e3)},[en,wi,Wn]),Pe=In.useMemo(()=>fi||[],[fi]),Ot=In.useMemo(()=>new Set(Pe.flatMap(se=>se.itemIds||[])),[Pe]);B.useEffect(()=>{const se=async ve=>{const Ke=ve.coords.latitude,wt=ve.coords.longitude,Mt=LD.openWeatherApiKey,xt=`https://api.openweathermap.org/data/2.5/weather?lat=${Ke}&lon=${wt}&appid=${Mt}&units=metric&lang=fr`;try{const dt=await fetch(xt);if(!dt.ok)throw new Error("Impossible de rcuprer la mto.");const Cn=await dt.json(),kt=`${Math.round(Cn.main.temp)}C, ${Cn.weather[0].description},  ${Cn.name}`;U(kt),z(null)}catch{z("Mto indisponible.")}};navigator.geolocation?navigator.geolocation.getCurrentPosition(se,()=>z("Activez la golocalisation pour la mto.")):z("Golocalisation non supporte.")},[]);const $t=B.useCallback(async(se,ve)=>{if(Re.length===0){i("Veuillez d'abord ajouter des vtements.");return}c(!0),i(null);const Ke=V?`Mto actuelle : ${V}. Occasion : ${se}`:`Occasion : ${se}`;try{const wt=await A7(Re,Pe,Ke,ve);o(wt)}catch(wt){i(wt instanceof Error?wt.message:"Erreur inconnue")}finally{c(!1)}},[Re,Pe,V]),Jt=B.useCallback(async(se,ve,Ke)=>{if(Re.length===0){i("Veuillez d'abord ajouter des vtements.");return}v(!0),i(null);try{const wt=await x7(Re,Pe,se,ve,Ke);d(wt)}catch(wt){i(wt instanceof Error?wt.message:"Erreur inconnue")}finally{v(!1)}},[Re,Pe]),Sr=B.useCallback(async()=>{if(Re.length<3){i("Ajoutez au moins 3 vtements pour une analyse.");return}N(!0),i(null);try{const se=await C7(Re,Pe);b(se)}catch(se){i(se instanceof Error?se.message:"Erreur inconnue")}finally{N(!1)}},[Re,Pe]),zr=B.useCallback(async se=>{Ce(se.titre),i(null);try{const ve=se.vetements.map(wt=>Re.find(Mt=>Mt.id===wt.id||Mt.analysis===wt.description)).filter(wt=>!!wt);if(ve.length===0)throw new Error("Impossible de retrouver les articles originaux pour le rendu.");const Ke=await R7(ve,se.description);j(Ke)}catch(ve){i(ve instanceof Error?ve.message:"Erreur inconnue lors du rendu visuel")}finally{Ce(null)}},[Re]),Pn=B.useCallback(()=>F(!0),[]),hi=B.useCallback(()=>K(!0),[]),cn=se=>e(se),fe=()=>e(null),be=se=>{Un(se).catch(i),e(null)},we=se=>{di(se).catch(i),e(se)},je=se=>{const ve=`Focus sur l'article : ${se.analysis}`;$t(ve,se),e(null),window.innerWidth<768&&F(!0)},ct=B.useCallback((se,ve)=>{An(se,ve).catch(i)},[An]),Je=B.useCallback(se=>{Oi(se).catch(i)},[Oi]);B.useCallback(async()=>{ke(!0),hapticFeedback.medium(),await new Promise(se=>setTimeout(se,1e3)),ke(!1),hapticFeedback.success()},[]);const We={hauts:Re.filter(se=>se.category==="Hauts").length,bas:Re.filter(se=>se.category==="Bas").length,chaussures:Re.filter(se=>se.category==="Chaussures").length,accessoires:Re.filter(se=>se.category==="Accessoires").length},Xe=B.useMemo(()=>{if(D==="home")return[];let se=Re.filter(ve=>D==="hauts"?ve.category==="Hauts":D==="bas"?ve.category==="Bas":D==="chaussures"?ve.category==="Chaussures":D==="accessoires"?ve.category==="Accessoires":!1);if(ne.trim()){const ve=ne.toLowerCase();se=se.filter(Ke=>Ke.analysis.toLowerCase().includes(ve)||Ke.color.toLowerCase().includes(ve)||Ke.material.toLowerCase().includes(ve))}return[...se].sort((ve,Ke)=>{switch(Ee){case"favorites":return(Ke.isFavorite?1:0)-(ve.isFavorite?1:0);case"newest":return(Ke.createdAt||0)-(ve.createdAt||0);case"oldest":return(ve.createdAt||0)-(Ke.createdAt||0);case"color":return ve.color.localeCompare(Ke.color);default:return 0}})},[D,Re,ne,Ee]),Qe=k||$||G||!!t||!!T||!!Ie;return B.useEffect(()=>{const se=document.querySelector("header");se&&(se.style.zIndex=Qe?"10":"50")},[Qe]),B.useEffect(()=>{if(!Zt&&Re.length>ee&&ee>0){const se=Re.length-ee;Qn(`${se} vtement${se>1?"s":""} ajout${se>1?"s":""} `),setTimeout(()=>Qn(null),2e3)}ae(Re.length)},[Zt,Re.length]),S.jsxs("main",{className:"container mx-auto px-4 lg:px-8 py-10",children:[n&&S.jsxs("div",{className:"bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg relative mb-8 flex items-center justify-between",role:"alert",children:[S.jsxs("div",{children:[S.jsx("strong",{className:"font-bold",children:"Erreur: "}),S.jsx("span",{className:"inline",children:n})]}),S.jsx("button",{onClick:()=>i(null),className:"p-1 hover:bg-red-500/30 rounded-full transition-colors","aria-label":"Fermer",children:S.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[S.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[Re.length>=3&&S.jsxs("div",{className:"hidden md:block bg-gradient-to-r from-gold/10 to-gold-dark/10 border-2 border-gold/30 rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-4 md:justify-between",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold mb-2",children:" Besoin d'inspiration ?"}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dcouvrez quelles pices acheter pour rendre votre garde-robe plus polyvalente"})]}),S.jsx("button",{onClick:Sr,disabled:x,className:"px-4 md:px-6 py-3 bg-gradient-to-r from-gold to-gold-dark text-onyx rounded-xl hover:shadow-lg hover:shadow-gold/30 transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm md:text-base flex-shrink-0",children:x?"Analyse...":"Analyser ma garde-robe"})]}),S.jsx("div",{className:"hidden md:block",children:S.jsx(q7,{onAnalyze:Jn,isAnalyzing:Zt})}),S.jsx("div",{className:"hidden md:block",children:S.jsx(_J,{clothingItems:Re,clothingSets:Pe,onItemClick:cn,onDeleteItem:be,onCreateSet:ct,isLoading:Ai})}),S.jsxs("div",{className:"md:hidden",children:[D==="home"&&S.jsx(bJ,{onAnalyzeWardrobe:Sr,onScrollToOutfits:Pn,onScrollToVacation:hi,onStartSetCreation:()=>I(!0),onShowFavorites:()=>P(!0),isAnalyzingWardrobe:x,clothingCount:Re.length,favoriteOutfitCount:en.length}),D!=="home"&&S.jsxs("div",{className:"pb-24",children:[xe&&S.jsx("div",{className:"flex justify-center py-4",children:S.jsxs("svg",{className:"animate-spin h-6 w-6 text-gold",fill:"none",viewBox:"0 0 24 24",children:[S.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),S.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),S.jsxs("div",{className:"text-center py-4 px-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-1 capitalize",children:D}),S.jsxs("p",{className:"text-sm text-gray-500",children:[Xe.length," vtement",Xe.length>1?"s":""]})]}),S.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.jsxs("div",{className:"relative",children:[S.jsx(FD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),S.jsx("input",{type:"text",value:ne,onChange:se=>he(se.target.value),placeholder:"Rechercher...",className:"w-full pl-10 pr-10 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent transition-all"}),ne&&S.jsx("button",{onClick:()=>he(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors","aria-label":"Effacer",children:S.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"relative",children:[S.jsx(BD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),S.jsxs("select",{value:Ee,onChange:se=>Ve(se.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-raisin-black border border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-gold focus:border-transparent appearance-none cursor-pointer transition-all",children:[S.jsx("option",{value:"favorites",children:"Favoris d'abord"}),S.jsx("option",{value:"newest",children:"Plus rcents"}),S.jsx("option",{value:"oldest",children:"Plus anciens"}),S.jsx("option",{value:"color",children:"Couleur (A-Z)"})]}),S.jsx(im,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),Xe.length>0?S.jsx("div",{className:"grid grid-cols-2 gap-3 px-4",children:Xe.map(se=>S.jsxs("div",{onClick:()=>cn(se),className:"relative bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-lg cursor-pointer active:scale-95 transition-transform",children:[se.isFavorite?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-red-500 z-10",children:S.jsx(Of,{className:"w-4 h-4"})}):Ot.has(se.id)?S.jsx("span",{className:"absolute top-2 left-2 p-1.5 bg-black/50 backdrop-blur-sm rounded-full text-white z-10",children:S.jsx(tg,{})}):null,S.jsx("div",{className:"aspect-square",children:S.jsx("img",{src:se.imageSrc,alt:se.analysis,loading:"lazy",className:"w-full h-full object-cover"})}),S.jsxs("div",{className:"p-3",children:[S.jsx("p",{className:"text-sm font-medium line-clamp-2",children:se.analysis}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se.color})]})]},se.id))}):S.jsx("div",{className:"text-center py-12 px-4",children:ne?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsxs("p",{className:"text-gray-500 font-medium",children:['Aucun rsultat pour "',ne,'"']}),S.jsx("button",{onClick:()=>he(""),className:"mt-3 text-gold font-medium",children:"Effacer la recherche"})]}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"text-6xl mb-4",children:""}),S.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun vtement dans cette catgorie"}),S.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Appuyez sur + pour en ajouter"})]})})]})]})]}),S.jsxs("div",{className:"lg:col-span-1 space-y-10 lg:sticky lg:top-40 hidden md:block",children:[S.jsx("div",{id:"outfit-generator",children:S.jsx(gk,{clothingItems:Re,clothingSets:Pe,onGenerate:$t,isGenerating:l,weatherInfo:V,weatherError:q})}),r.length>0&&S.jsx(fm,{outfits:r,allClothingItems:Re,allClothingSets:Pe,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:zr,generatingVisualFor:me}),en.length>0&&S.jsxs("div",{className:"mt-10 border border-black/10 dark:border-white/10 rounded-xl overflow-hidden bg-white dark:bg-raisin-black shadow-sm",children:[S.jsxs("button",{onClick:()=>pe(!Z),className:"w-full flex items-center justify-between p-5 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Of,{className:"text-gold w-5 h-5"}),S.jsxs("h2",{className:"text-xl font-serif font-bold text-raisin-black dark:text-snow",children:["Mes Favoris ",S.jsxs("span",{className:"text-sm font-sans font-normal text-gray-500",children:["(",en.length,")"]})]})]}),S.jsx("div",{className:`transition-transform duration-300 ${Z?"rotate-180":""} text-gray-400`,children:S.jsx(im,{})})]}),Z&&S.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 bg-snow dark:bg-onyx/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:S.jsx(fm,{outfits:en,allClothingItems:Re,allClothingSets:Pe,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:zr,generatingVisualFor:me})})]}),S.jsx("div",{id:"vacation-planner",children:S.jsx(yk,{clothingItems:Re,clothingSets:Pe,onGeneratePlan:Jt,isGenerating:p})}),f&&S.jsx(vk,{plan:f,allClothingItems:Re,allClothingSets:Pe,onCreateSet:ct})]})]}),t&&S.jsx(EJ,{item:t,clothingSets:Pe,onClose:fe,onUpdate:we,onGenerateFrom:je,onRemoveSet:Je,onDelete:be}),T&&S.jsx(AJ,{analysis:T,onClose:()=>b(null)}),Ie&&S.jsx(CZ,{imageUrl:Ie,onClose:()=>j(null)}),S.jsx(SJ,{onFilesSelected:Jn,isAnalyzing:Zt,isOtherModalOpen:Qe}),S.jsx(wJ,{activeTab:D,onTabChange:O,counts:We}),S.jsx(cZ,{open:k,clothingItems:Re,clothingSets:Pe,onGenerate:$t,isGenerating:l,suggestedOutfits:r,onClose:()=>F(!1),weatherInfo:V,weatherError:q,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:zr,generatingVisualFor:me}),S.jsx(fZ,{open:$,clothingItems:Re,clothingSets:Pe,onGeneratePlan:Jt,isGenerating:p,vacationPlan:f,onCreateSet:ct,onClose:()=>K(!1)}),S.jsx(dZ,{open:G,clothingItems:Re,clothingSets:Pe,onClose:()=>I(!1),onCreateSet:(se,ve)=>{ct(se,ve),I(!1)}}),S.jsx(AZ,{open:R,onClose:()=>P(!1),allClothingItems:Re,allClothingSets:Pe,favoriteOutfits:en,onToggleFavorite:tn,onGenerateVisual:zr,generatingVisualFor:me}),Be&&S.jsx(eL,{onComplete:()=>Tt(!1)}),Xn&&S.jsx("div",{className:"fixed bottom-32 md:bottom-8 left-1/2 -translate-x-1/2 z-[100]",children:S.jsxs("div",{className:"bg-raisin-black dark:bg-white text-white dark:text-raisin-black px-6 py-3 rounded-full shadow-2xl font-medium flex items-center gap-2 animate-slide-up",children:[Xn.includes("")&&S.jsx("span",{className:"animate-pulse",children:""}),Xn.includes("Retir")&&S.jsx("span",{children:""}),Xn.includes("ajout")&&!Xn.includes("")&&S.jsx("span",{children:""}),S.jsx("span",{children:Xn.replace("","").trim()})]})})]})},IZ=()=>{const[t,e]=B.useState(null),[n,i]=B.useState("dark");B.useEffect(()=>{const o=UU(Ma,l=>{e(l)});return()=>o()},[]),B.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]);const r=()=>{i(o=>o==="light"?"dark":"light")};return S.jsx("div",{className:"min-h-screen bg-snow dark:bg-onyx text-raisin-black dark:text-snow transition-colors duration-300",children:t?S.jsxs(S.Fragment,{children:[S.jsx(F7,{theme:n,toggleTheme:r,children:S.jsx(hI,{user:t})}),S.jsx(bZ,{user:t,children:S.jsx(xZ,{})})]}):S.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:S.jsx(hI,{user:t})})})},g2=document.getElementById("root");if(!g2)throw new Error("L'lment root est introuvable dans le DOM");const RZ=ZV.createRoot(g2);RZ.render(S.jsx(In.StrictMode,{children:S.jsx(IZ,{})}));
